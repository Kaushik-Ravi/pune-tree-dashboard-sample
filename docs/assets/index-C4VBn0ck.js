var uw=Object.defineProperty;var cw=(e,t,n)=>t in e?uw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Et=(e,t,n)=>cw(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Av={exports:{}},xh={},zv={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ql=Symbol.for("react.element"),hw=Symbol.for("react.portal"),fw=Symbol.for("react.fragment"),dw=Symbol.for("react.strict_mode"),gw=Symbol.for("react.profiler"),pw=Symbol.for("react.provider"),mw=Symbol.for("react.context"),_w=Symbol.for("react.forward_ref"),vw=Symbol.for("react.suspense"),yw=Symbol.for("react.memo"),xw=Symbol.for("react.lazy"),Rp=Symbol.iterator;function ww(e){return e===null||typeof e!="object"?null:(e=Rp&&e[Rp]||e["@@iterator"],typeof e=="function"?e:null)}var Fv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bv=Object.assign,jv={};function ta(e,t,n){this.props=e,this.context=t,this.refs=jv,this.updater=n||Fv}ta.prototype.isReactComponent={};ta.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ta.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uv(){}Uv.prototype=ta.prototype;function ag(e,t,n){this.props=e,this.context=t,this.refs=jv,this.updater=n||Fv}var lg=ag.prototype=new Uv;lg.constructor=ag;Bv(lg,ta.prototype);lg.isPureReactComponent=!0;var Ap=Array.isArray,Hv=Object.prototype.hasOwnProperty,ug={current:null},Gv={key:!0,ref:!0,__self:!0,__source:!0};function Wv(e,t,n){var r,i={},a=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(a=""+t.key),t)Hv.call(t,r)&&!Gv.hasOwnProperty(r)&&(i[r]=t[r]);var f=arguments.length-2;if(f===1)i.children=n;else if(1<f){for(var g=Array(f),_=0;_<f;_++)g[_]=arguments[_+2];i.children=g}if(e&&e.defaultProps)for(r in f=e.defaultProps,f)i[r]===void 0&&(i[r]=f[r]);return{$$typeof:Ql,type:e,key:a,ref:u,props:i,_owner:ug.current}}function kw(e,t){return{$$typeof:Ql,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ql}function Lw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var zp=/\/+/g;function af(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Lw(""+e.key):t.toString(36)}function pc(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case Ql:case hw:u=!0}}if(u)return u=e,i=i(u),e=r===""?"."+af(u,0):r,Ap(i)?(n="",e!=null&&(n=e.replace(zp,"$&/")+"/"),pc(i,t,n,"",function(_){return _})):i!=null&&(cg(i)&&(i=kw(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(zp,"$&/")+"/")+e)),t.push(i)),1;if(u=0,r=r===""?".":r+":",Ap(e))for(var f=0;f<e.length;f++){a=e[f];var g=r+af(a,f);u+=pc(a,t,n,g,i)}else if(g=ww(e),typeof g=="function")for(e=g.call(e),f=0;!(a=e.next()).done;)a=a.value,g=r+af(a,f++),u+=pc(a,t,n,g,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function Nu(e,t,n){if(e==null)return e;var r=[],i=0;return pc(e,r,"","",function(a){return t.call(n,a,i++)}),r}function bw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vn={current:null},mc={transition:null},Ew={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:mc,ReactCurrentOwner:ug};function Vv(){throw Error("act(...) is not supported in production builds of React.")}Ut.Children={map:Nu,forEach:function(e,t,n){Nu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Nu(e,function(){t++}),t},toArray:function(e){return Nu(e,function(t){return t})||[]},only:function(e){if(!cg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ut.Component=ta;Ut.Fragment=fw;Ut.Profiler=gw;Ut.PureComponent=ag;Ut.StrictMode=dw;Ut.Suspense=vw;Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ew;Ut.act=Vv;Ut.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Bv({},e.props),i=e.key,a=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,u=ug.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(g in t)Hv.call(t,g)&&!Gv.hasOwnProperty(g)&&(r[g]=t[g]===void 0&&f!==void 0?f[g]:t[g])}var g=arguments.length-2;if(g===1)r.children=n;else if(1<g){f=Array(g);for(var _=0;_<g;_++)f[_]=arguments[_+2];r.children=f}return{$$typeof:Ql,type:e.type,key:i,ref:a,props:r,_owner:u}};Ut.createContext=function(e){return e={$$typeof:mw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pw,_context:e},e.Consumer=e};Ut.createElement=Wv;Ut.createFactory=function(e){var t=Wv.bind(null,e);return t.type=e,t};Ut.createRef=function(){return{current:null}};Ut.forwardRef=function(e){return{$$typeof:_w,render:e}};Ut.isValidElement=cg;Ut.lazy=function(e){return{$$typeof:xw,_payload:{_status:-1,_result:e},_init:bw}};Ut.memo=function(e,t){return{$$typeof:yw,type:e,compare:t===void 0?null:t}};Ut.startTransition=function(e){var t=mc.transition;mc.transition={};try{e()}finally{mc.transition=t}};Ut.unstable_act=Vv;Ut.useCallback=function(e,t){return vn.current.useCallback(e,t)};Ut.useContext=function(e){return vn.current.useContext(e)};Ut.useDebugValue=function(){};Ut.useDeferredValue=function(e){return vn.current.useDeferredValue(e)};Ut.useEffect=function(e,t){return vn.current.useEffect(e,t)};Ut.useId=function(){return vn.current.useId()};Ut.useImperativeHandle=function(e,t,n){return vn.current.useImperativeHandle(e,t,n)};Ut.useInsertionEffect=function(e,t){return vn.current.useInsertionEffect(e,t)};Ut.useLayoutEffect=function(e,t){return vn.current.useLayoutEffect(e,t)};Ut.useMemo=function(e,t){return vn.current.useMemo(e,t)};Ut.useReducer=function(e,t,n){return vn.current.useReducer(e,t,n)};Ut.useRef=function(e){return vn.current.useRef(e)};Ut.useState=function(e){return vn.current.useState(e)};Ut.useSyncExternalStore=function(e,t,n){return vn.current.useSyncExternalStore(e,t,n)};Ut.useTransition=function(){return vn.current.useTransition()};Ut.version="18.3.1";zv.exports=Ut;var it=zv.exports;const Ns=yh(it);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw=it,Tw=Symbol.for("react.element"),Cw=Symbol.for("react.fragment"),Mw=Object.prototype.hasOwnProperty,Pw=Sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Nw={key:!0,ref:!0,__self:!0,__source:!0};function Zv(e,t,n){var r,i={},a=null,u=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)Mw.call(t,r)&&!Nw.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Tw,type:e,key:a,ref:u,props:i,_owner:Pw.current}}xh.Fragment=Cw;xh.jsx=Zv;xh.jsxs=Zv;Av.exports=xh;var I=Av.exports,Yv={exports:{}},Bn={},qv={exports:{}},Xv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Q,dt){var X=Q.length;Q.push(dt);t:for(;0<X;){var _t=X-1>>>1,wt=Q[_t];if(0<i(wt,dt))Q[_t]=dt,Q[X]=wt,X=_t;else break t}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var dt=Q[0],X=Q.pop();if(X!==dt){Q[0]=X;t:for(var _t=0,wt=Q.length,zt=wt>>>1;_t<zt;){var pt=2*(_t+1)-1,Nt=Q[pt],St=pt+1,We=Q[St];if(0>i(Nt,X))St<wt&&0>i(We,Nt)?(Q[_t]=We,Q[St]=X,_t=St):(Q[_t]=Nt,Q[pt]=X,_t=pt);else if(St<wt&&0>i(We,X))Q[_t]=We,Q[St]=X,_t=St;else break t}}return dt}function i(Q,dt){var X=Q.sortIndex-dt.sortIndex;return X!==0?X:Q.id-dt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var g=[],_=[],v=1,x=null,k=3,S=!1,C=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(Q){for(var dt=n(_);dt!==null;){if(dt.callback===null)r(_);else if(dt.startTime<=Q)r(_),dt.sortIndex=dt.expirationTime,t(g,dt);else break;dt=n(_)}}function B(Q){if(N=!1,O(Q),!C)if(n(g)!==null)C=!0,gt(F);else{var dt=n(_);dt!==null&&xt(B,dt.startTime-Q)}}function F(Q,dt){C=!1,N&&(N=!1,P(V),V=-1),S=!0;var X=k;try{for(O(dt),x=n(g);x!==null&&(!(x.expirationTime>dt)||Q&&!nt());){var _t=x.callback;if(typeof _t=="function"){x.callback=null,k=x.priorityLevel;var wt=_t(x.expirationTime<=dt);dt=e.unstable_now(),typeof wt=="function"?x.callback=wt:x===n(g)&&r(g),O(dt)}else r(g);x=n(g)}if(x!==null)var zt=!0;else{var pt=n(_);pt!==null&&xt(B,pt.startTime-dt),zt=!1}return zt}finally{x=null,k=X,S=!1}}var G=!1,H=null,V=-1,$=5,et=-1;function nt(){return!(e.unstable_now()-et<$)}function at(){if(H!==null){var Q=e.unstable_now();et=Q;var dt=!0;try{dt=H(!0,Q)}finally{dt?rt():(G=!1,H=null)}}else G=!1}var rt;if(typeof M=="function")rt=function(){M(at)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,ht=tt.port2;tt.port1.onmessage=at,rt=function(){ht.postMessage(null)}}else rt=function(){A(at,0)};function gt(Q){H=Q,G||(G=!0,rt())}function xt(Q,dt){V=A(function(){Q(e.unstable_now())},dt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){C||S||(C=!0,gt(F))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return n(g)},e.unstable_next=function(Q){switch(k){case 1:case 2:case 3:var dt=3;break;default:dt=k}var X=k;k=dt;try{return Q()}finally{k=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,dt){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var X=k;k=Q;try{return dt()}finally{k=X}},e.unstable_scheduleCallback=function(Q,dt,X){var _t=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?_t+X:_t):X=_t,Q){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=X+wt,Q={id:v++,callback:dt,priorityLevel:Q,startTime:X,expirationTime:wt,sortIndex:-1},X>_t?(Q.sortIndex=X,t(_,Q),n(g)===null&&Q===n(_)&&(N?(P(V),V=-1):N=!0,xt(B,X-_t))):(Q.sortIndex=wt,t(g,Q),C||S||(C=!0,gt(F))),Q},e.unstable_shouldYield=nt,e.unstable_wrapCallback=function(Q){var dt=k;return function(){var X=k;k=dt;try{return Q.apply(this,arguments)}finally{k=X}}}})(Xv);qv.exports=Xv;var Iw=qv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow=it,Fn=Iw;function lt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $v=new Set,Sl={};function js(e,t){Uo(e,t),Uo(e+"Capture",t)}function Uo(e,t){for(Sl[e]=t,e=0;e<t.length;e++)$v.add(t[e])}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xf=Object.prototype.hasOwnProperty,Dw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fp={},Bp={};function Rw(e){return Xf.call(Bp,e)?!0:Xf.call(Fp,e)?!1:Dw.test(e)?Bp[e]=!0:(Fp[e]=!0,!1)}function Aw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zw(e,t,n,r){if(t===null||typeof t>"u"||Aw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yn(e,t,n,r,i,a,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=u}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ke[e]=new yn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ke[t]=new yn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ke[e]=new yn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ke[e]=new yn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ke[e]=new yn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ke[e]=new yn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ke[e]=new yn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ke[e]=new yn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ke[e]=new yn(e,5,!1,e.toLowerCase(),null,!1,!1)});var hg=/[\-:]([a-z])/g;function fg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hg,fg);Ke[t]=new yn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hg,fg);Ke[t]=new yn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hg,fg);Ke[t]=new yn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ke[e]=new yn(e,1,!1,e.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ke[e]=new yn(e,1,!1,e.toLowerCase(),null,!0,!0)});function dg(e,t,n,r){var i=Ke.hasOwnProperty(t)?Ke[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zw(t,n,i,r)&&(n=null),r||i===null?Rw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var hr=Ow.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Iu=Symbol.for("react.element"),wo=Symbol.for("react.portal"),ko=Symbol.for("react.fragment"),gg=Symbol.for("react.strict_mode"),$f=Symbol.for("react.profiler"),Kv=Symbol.for("react.provider"),Qv=Symbol.for("react.context"),pg=Symbol.for("react.forward_ref"),Kf=Symbol.for("react.suspense"),Qf=Symbol.for("react.suspense_list"),mg=Symbol.for("react.memo"),Tr=Symbol.for("react.lazy"),Jv=Symbol.for("react.offscreen"),jp=Symbol.iterator;function ja(e){return e===null||typeof e!="object"?null:(e=jp&&e[jp]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,lf;function Ja(e){if(lf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);lf=t&&t[1]||""}return`
`+lf+e}var uf=!1;function cf(e,t){if(!e||uf)return"";uf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(_){var r=_}Reflect.construct(e,[],t)}else{try{t.call()}catch(_){r=_}e.call(t.prototype)}else{try{throw Error()}catch(_){r=_}e()}}catch(_){if(_&&r&&typeof _.stack=="string"){for(var i=_.stack.split(`
`),a=r.stack.split(`
`),u=i.length-1,f=a.length-1;1<=u&&0<=f&&i[u]!==a[f];)f--;for(;1<=u&&0<=f;u--,f--)if(i[u]!==a[f]){if(u!==1||f!==1)do if(u--,f--,0>f||i[u]!==a[f]){var g=`
`+i[u].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=u&&0<=f);break}}}finally{uf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ja(e):""}function Fw(e){switch(e.tag){case 5:return Ja(e.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 2:case 15:return e=cf(e.type,!1),e;case 11:return e=cf(e.type.render,!1),e;case 1:return e=cf(e.type,!0),e;default:return""}}function Jf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ko:return"Fragment";case wo:return"Portal";case $f:return"Profiler";case gg:return"StrictMode";case Kf:return"Suspense";case Qf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qv:return(e.displayName||"Context")+".Consumer";case Kv:return(e._context.displayName||"Context")+".Provider";case pg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mg:return t=e.displayName||null,t!==null?t:Jf(e.type)||"Memo";case Tr:t=e._payload,e=e._init;try{return Jf(e(t))}catch{}}return null}function Bw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jf(t);case 8:return t===gg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ty(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jw(e){var t=ty(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(u){r=""+u,a.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ou(e){e._valueTracker||(e._valueTracker=jw(e))}function ey(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ty(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ic(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function td(e,t){var n=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Up(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Gr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ny(e,t){t=t.checked,t!=null&&dg(e,"checked",t,!1)}function ed(e,t){ny(e,t);var n=Gr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nd(e,t.type,n):t.hasOwnProperty("defaultValue")&&nd(e,t.type,Gr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function nd(e,t,n){(t!=="number"||Ic(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var tl=Array.isArray;function Oo(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Gr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function id(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(lt(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(lt(92));if(tl(n)){if(1<n.length)throw Error(lt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Gr(n)}}function iy(e,t){var n=Gr(t.value),r=Gr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Wp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ry(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ry(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Du,sy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Du=Du||document.createElement("div"),Du.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Du.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Tl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Uw=["Webkit","ms","Moz","O"];Object.keys(cl).forEach(function(e){Uw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cl[t]=cl[e]})});function oy(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||cl.hasOwnProperty(e)&&cl[e]?(""+t).trim():t+"px"}function ay(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oy(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Hw=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sd(e,t){if(t){if(Hw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(lt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(lt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(lt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(lt(62))}}function od(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ad=null;function _g(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ld=null,Do=null,Ro=null;function Vp(e){if(e=eu(e)){if(typeof ld!="function")throw Error(lt(280));var t=e.stateNode;t&&(t=Eh(t),ld(e.stateNode,e.type,t))}}function ly(e){Do?Ro?Ro.push(e):Ro=[e]:Do=e}function uy(){if(Do){var e=Do,t=Ro;if(Ro=Do=null,Vp(e),t)for(e=0;e<t.length;e++)Vp(t[e])}}function cy(e,t){return e(t)}function hy(){}var hf=!1;function fy(e,t,n){if(hf)return e(t,n);hf=!0;try{return cy(e,t,n)}finally{hf=!1,(Do!==null||Ro!==null)&&(hy(),uy())}}function Cl(e,t){var n=e.stateNode;if(n===null)return null;var r=Eh(n);if(r===null)return null;n=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(lt(231,t,typeof n));return n}var ud=!1;if(ar)try{var Ua={};Object.defineProperty(Ua,"passive",{get:function(){ud=!0}}),window.addEventListener("test",Ua,Ua),window.removeEventListener("test",Ua,Ua)}catch{ud=!1}function Gw(e,t,n,r,i,a,u,f,g){var _=Array.prototype.slice.call(arguments,3);try{t.apply(n,_)}catch(v){this.onError(v)}}var hl=!1,Oc=null,Dc=!1,cd=null,Ww={onError:function(e){hl=!0,Oc=e}};function Vw(e,t,n,r,i,a,u,f,g){hl=!1,Oc=null,Gw.apply(Ww,arguments)}function Zw(e,t,n,r,i,a,u,f,g){if(Vw.apply(this,arguments),hl){if(hl){var _=Oc;hl=!1,Oc=null}else throw Error(lt(198));Dc||(Dc=!0,cd=_)}}function Us(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zp(e){if(Us(e)!==e)throw Error(lt(188))}function Yw(e){var t=e.alternate;if(!t){if(t=Us(e),t===null)throw Error(lt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Zp(i),e;if(a===r)return Zp(i),t;a=a.sibling}throw Error(lt(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,f=i.child;f;){if(f===n){u=!0,n=i,r=a;break}if(f===r){u=!0,r=i,n=a;break}f=f.sibling}if(!u){for(f=a.child;f;){if(f===n){u=!0,n=a,r=i;break}if(f===r){u=!0,r=a,n=i;break}f=f.sibling}if(!u)throw Error(lt(189))}}if(n.alternate!==r)throw Error(lt(190))}if(n.tag!==3)throw Error(lt(188));return n.stateNode.current===n?e:t}function gy(e){return e=Yw(e),e!==null?py(e):null}function py(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=py(e);if(t!==null)return t;e=e.sibling}return null}var my=Fn.unstable_scheduleCallback,Yp=Fn.unstable_cancelCallback,qw=Fn.unstable_shouldYield,Xw=Fn.unstable_requestPaint,Ee=Fn.unstable_now,$w=Fn.unstable_getCurrentPriorityLevel,vg=Fn.unstable_ImmediatePriority,_y=Fn.unstable_UserBlockingPriority,Rc=Fn.unstable_NormalPriority,Kw=Fn.unstable_LowPriority,vy=Fn.unstable_IdlePriority,wh=null,Fi=null;function Qw(e){if(Fi&&typeof Fi.onCommitFiberRoot=="function")try{Fi.onCommitFiberRoot(wh,e,void 0,(e.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:ek,Jw=Math.log,tk=Math.LN2;function ek(e){return e>>>=0,e===0?32:31-(Jw(e)/tk|0)|0}var Ru=64,Au=4194304;function el(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ac(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,u=n&268435455;if(u!==0){var f=u&~i;f!==0?r=el(f):(a&=u,a!==0&&(r=el(a)))}else u=n&~i,u!==0?r=el(u):a!==0&&(r=el(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vi(t),i=1<<n,r|=e[n],t&=~i;return r}function nk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ik(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-vi(a),f=1<<u,g=i[u];g===-1?(!(f&n)||f&r)&&(i[u]=nk(f,t)):g<=t&&(e.expiredLanes|=f),a&=~f}}function hd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yy(){var e=Ru;return Ru<<=1,!(Ru&4194240)&&(Ru=64),e}function ff(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Jl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vi(t),e[t]=n}function rk(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-vi(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function yg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ne=0;function xy(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wy,xg,ky,Ly,by,fd=!1,zu=[],Dr=null,Rr=null,Ar=null,Ml=new Map,Pl=new Map,Mr=[],sk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qp(e,t){switch(e){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":Ml.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pl.delete(t.pointerId)}}function Ha(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=eu(t),t!==null&&xg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ok(e,t,n,r,i){switch(t){case"focusin":return Dr=Ha(Dr,e,t,n,r,i),!0;case"dragenter":return Rr=Ha(Rr,e,t,n,r,i),!0;case"mouseover":return Ar=Ha(Ar,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ml.set(a,Ha(Ml.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pl.set(a,Ha(Pl.get(a)||null,e,t,n,r,i)),!0}return!1}function Ey(e){var t=Ls(e.target);if(t!==null){var n=Us(t);if(n!==null){if(t=n.tag,t===13){if(t=dy(n),t!==null){e.blockedOn=t,by(e.priority,function(){ky(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _c(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=dd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ad=r,n.target.dispatchEvent(r),ad=null}else return t=eu(n),t!==null&&xg(t),e.blockedOn=n,!1;t.shift()}return!0}function Xp(e,t,n){_c(e)&&n.delete(t)}function ak(){fd=!1,Dr!==null&&_c(Dr)&&(Dr=null),Rr!==null&&_c(Rr)&&(Rr=null),Ar!==null&&_c(Ar)&&(Ar=null),Ml.forEach(Xp),Pl.forEach(Xp)}function Ga(e,t){e.blockedOn===t&&(e.blockedOn=null,fd||(fd=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,ak)))}function Nl(e){function t(i){return Ga(i,e)}if(0<zu.length){Ga(zu[0],e);for(var n=1;n<zu.length;n++){var r=zu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Dr!==null&&Ga(Dr,e),Rr!==null&&Ga(Rr,e),Ar!==null&&Ga(Ar,e),Ml.forEach(t),Pl.forEach(t),n=0;n<Mr.length;n++)r=Mr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Mr.length&&(n=Mr[0],n.blockedOn===null);)Ey(n),n.blockedOn===null&&Mr.shift()}var Ao=hr.ReactCurrentBatchConfig,zc=!0;function lk(e,t,n,r){var i=ne,a=Ao.transition;Ao.transition=null;try{ne=1,wg(e,t,n,r)}finally{ne=i,Ao.transition=a}}function uk(e,t,n,r){var i=ne,a=Ao.transition;Ao.transition=null;try{ne=4,wg(e,t,n,r)}finally{ne=i,Ao.transition=a}}function wg(e,t,n,r){if(zc){var i=dd(e,t,n,r);if(i===null)kf(e,t,r,Fc,n),qp(e,r);else if(ok(i,e,t,n,r))r.stopPropagation();else if(qp(e,r),t&4&&-1<sk.indexOf(e)){for(;i!==null;){var a=eu(i);if(a!==null&&wy(a),a=dd(e,t,n,r),a===null&&kf(e,t,r,Fc,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else kf(e,t,r,null,n)}}var Fc=null;function dd(e,t,n,r){if(Fc=null,e=_g(r),e=Ls(e),e!==null)if(t=Us(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dy(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fc=e,null}function Sy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($w()){case vg:return 1;case _y:return 4;case Rc:case Kw:return 16;case vy:return 536870912;default:return 16}default:return 16}}var Nr=null,kg=null,vc=null;function Ty(){if(vc)return vc;var e,t=kg,n=t.length,r,i="value"in Nr?Nr.value:Nr.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===i[a-r];r++);return vc=i.slice(e,1<r?1-r:void 0)}function yc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fu(){return!0}function $p(){return!1}function jn(e){function t(n,r,i,a,u){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(n=e[f],this[f]=n?n(a):a[f]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Fu:$p,this.isPropagationStopped=$p,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fu)},persist:function(){},isPersistent:Fu}),t}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lg=jn(ea),tu=ye({},ea,{view:0,detail:0}),ck=jn(tu),df,gf,Wa,kh=ye({},tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wa&&(Wa&&e.type==="mousemove"?(df=e.screenX-Wa.screenX,gf=e.screenY-Wa.screenY):gf=df=0,Wa=e),df)},movementY:function(e){return"movementY"in e?e.movementY:gf}}),Kp=jn(kh),hk=ye({},kh,{dataTransfer:0}),fk=jn(hk),dk=ye({},tu,{relatedTarget:0}),pf=jn(dk),gk=ye({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),pk=jn(gk),mk=ye({},ea,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_k=jn(mk),vk=ye({},ea,{data:0}),Qp=jn(vk),yk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wk[e])?!!t[e]:!1}function bg(){return kk}var Lk=ye({},tu,{key:function(e){if(e.key){var t=yk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bg,charCode:function(e){return e.type==="keypress"?yc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bk=jn(Lk),Ek=ye({},kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jp=jn(Ek),Sk=ye({},tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bg}),Tk=jn(Sk),Ck=ye({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mk=jn(Ck),Pk=ye({},kh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nk=jn(Pk),Ik=[9,13,27,32],Eg=ar&&"CompositionEvent"in window,fl=null;ar&&"documentMode"in document&&(fl=document.documentMode);var Ok=ar&&"TextEvent"in window&&!fl,Cy=ar&&(!Eg||fl&&8<fl&&11>=fl),tm=" ",em=!1;function My(e,t){switch(e){case"keyup":return Ik.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Py(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lo=!1;function Dk(e,t){switch(e){case"compositionend":return Py(t);case"keypress":return t.which!==32?null:(em=!0,tm);case"textInput":return e=t.data,e===tm&&em?null:e;default:return null}}function Rk(e,t){if(Lo)return e==="compositionend"||!Eg&&My(e,t)?(e=Ty(),vc=kg=Nr=null,Lo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cy&&t.locale!=="ko"?null:t.data;default:return null}}var Ak={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ak[e.type]:t==="textarea"}function Ny(e,t,n,r){ly(r),t=Bc(t,"onChange"),0<t.length&&(n=new Lg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var dl=null,Il=null;function zk(e){Hy(e,0)}function Lh(e){var t=So(e);if(ey(t))return e}function Fk(e,t){if(e==="change")return t}var Iy=!1;if(ar){var mf;if(ar){var _f="oninput"in document;if(!_f){var im=document.createElement("div");im.setAttribute("oninput","return;"),_f=typeof im.oninput=="function"}mf=_f}else mf=!1;Iy=mf&&(!document.documentMode||9<document.documentMode)}function rm(){dl&&(dl.detachEvent("onpropertychange",Oy),Il=dl=null)}function Oy(e){if(e.propertyName==="value"&&Lh(Il)){var t=[];Ny(t,Il,e,_g(e)),fy(zk,t)}}function Bk(e,t,n){e==="focusin"?(rm(),dl=t,Il=n,dl.attachEvent("onpropertychange",Oy)):e==="focusout"&&rm()}function jk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lh(Il)}function Uk(e,t){if(e==="click")return Lh(t)}function Hk(e,t){if(e==="input"||e==="change")return Lh(t)}function Gk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xi=typeof Object.is=="function"?Object.is:Gk;function Ol(e,t){if(xi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Xf.call(t,i)||!xi(e[i],t[i]))return!1}return!0}function sm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function om(e,t){var n=sm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=sm(n)}}function Dy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ry(){for(var e=window,t=Ic();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ic(e.document)}return t}function Sg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Wk(e){var t=Ry(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Dy(n.ownerDocument.documentElement,n)){if(r!==null&&Sg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=om(n,a);var u=om(n,r);i&&u&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vk=ar&&"documentMode"in document&&11>=document.documentMode,bo=null,gd=null,gl=null,pd=!1;function am(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pd||bo==null||bo!==Ic(r)||(r=bo,"selectionStart"in r&&Sg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gl&&Ol(gl,r)||(gl=r,r=Bc(gd,"onSelect"),0<r.length&&(t=new Lg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=bo)))}function Bu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Eo={animationend:Bu("Animation","AnimationEnd"),animationiteration:Bu("Animation","AnimationIteration"),animationstart:Bu("Animation","AnimationStart"),transitionend:Bu("Transition","TransitionEnd")},vf={},Ay={};ar&&(Ay=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function bh(e){if(vf[e])return vf[e];if(!Eo[e])return e;var t=Eo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ay)return vf[e]=t[n];return e}var zy=bh("animationend"),Fy=bh("animationiteration"),By=bh("animationstart"),jy=bh("transitionend"),Uy=new Map,lm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(e,t){Uy.set(e,t),js(t,[e])}for(var yf=0;yf<lm.length;yf++){var xf=lm[yf],Zk=xf.toLowerCase(),Yk=xf[0].toUpperCase()+xf.slice(1);Zr(Zk,"on"+Yk)}Zr(zy,"onAnimationEnd");Zr(Fy,"onAnimationIteration");Zr(By,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(jy,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qk=new Set("cancel close invalid load scroll toggle".split(" ").concat(nl));function um(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Zw(r,t,void 0,e),e.currentTarget=null}function Hy(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;t:{var a=void 0;if(t)for(var u=r.length-1;0<=u;u--){var f=r[u],g=f.instance,_=f.currentTarget;if(f=f.listener,g!==a&&i.isPropagationStopped())break t;um(i,f,_),a=g}else for(u=0;u<r.length;u++){if(f=r[u],g=f.instance,_=f.currentTarget,f=f.listener,g!==a&&i.isPropagationStopped())break t;um(i,f,_),a=g}}}if(Dc)throw e=cd,Dc=!1,cd=null,e}function le(e,t){var n=t[xd];n===void 0&&(n=t[xd]=new Set);var r=e+"__bubble";n.has(r)||(Gy(t,e,2,!1),n.add(r))}function wf(e,t,n){var r=0;t&&(r|=4),Gy(n,e,r,t)}var ju="_reactListening"+Math.random().toString(36).slice(2);function Dl(e){if(!e[ju]){e[ju]=!0,$v.forEach(function(n){n!=="selectionchange"&&(qk.has(n)||wf(n,!1,e),wf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ju]||(t[ju]=!0,wf("selectionchange",!1,t))}}function Gy(e,t,n,r){switch(Sy(t)){case 1:var i=lk;break;case 4:i=uk;break;default:i=wg}n=i.bind(null,t,n,e),i=void 0,!ud||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function kf(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var f=r.stateNode.containerInfo;if(f===i||f.nodeType===8&&f.parentNode===i)break;if(u===4)for(u=r.return;u!==null;){var g=u.tag;if((g===3||g===4)&&(g=u.stateNode.containerInfo,g===i||g.nodeType===8&&g.parentNode===i))return;u=u.return}for(;f!==null;){if(u=Ls(f),u===null)return;if(g=u.tag,g===5||g===6){r=a=u;continue t}f=f.parentNode}}r=r.return}fy(function(){var _=a,v=_g(n),x=[];t:{var k=Uy.get(e);if(k!==void 0){var S=Lg,C=e;switch(e){case"keypress":if(yc(n)===0)break t;case"keydown":case"keyup":S=bk;break;case"focusin":C="focus",S=pf;break;case"focusout":C="blur",S=pf;break;case"beforeblur":case"afterblur":S=pf;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=fk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Tk;break;case zy:case Fy:case By:S=pk;break;case jy:S=Mk;break;case"scroll":S=ck;break;case"wheel":S=Nk;break;case"copy":case"cut":case"paste":S=_k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Jp}var N=(t&4)!==0,A=!N&&e==="scroll",P=N?k!==null?k+"Capture":null:k;N=[];for(var M=_,O;M!==null;){O=M;var B=O.stateNode;if(O.tag===5&&B!==null&&(O=B,P!==null&&(B=Cl(M,P),B!=null&&N.push(Rl(M,B,O)))),A)break;M=M.return}0<N.length&&(k=new S(k,C,null,n,v),x.push({event:k,listeners:N}))}}if(!(t&7)){t:{if(k=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",k&&n!==ad&&(C=n.relatedTarget||n.fromElement)&&(Ls(C)||C[lr]))break t;if((S||k)&&(k=v.window===v?v:(k=v.ownerDocument)?k.defaultView||k.parentWindow:window,S?(C=n.relatedTarget||n.toElement,S=_,C=C?Ls(C):null,C!==null&&(A=Us(C),C!==A||C.tag!==5&&C.tag!==6)&&(C=null)):(S=null,C=_),S!==C)){if(N=Kp,B="onMouseLeave",P="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(N=Jp,B="onPointerLeave",P="onPointerEnter",M="pointer"),A=S==null?k:So(S),O=C==null?k:So(C),k=new N(B,M+"leave",S,n,v),k.target=A,k.relatedTarget=O,B=null,Ls(v)===_&&(N=new N(P,M+"enter",C,n,v),N.target=O,N.relatedTarget=A,B=N),A=B,S&&C)e:{for(N=S,P=C,M=0,O=N;O;O=_o(O))M++;for(O=0,B=P;B;B=_o(B))O++;for(;0<M-O;)N=_o(N),M--;for(;0<O-M;)P=_o(P),O--;for(;M--;){if(N===P||P!==null&&N===P.alternate)break e;N=_o(N),P=_o(P)}N=null}else N=null;S!==null&&cm(x,k,S,N,!1),C!==null&&A!==null&&cm(x,A,C,N,!0)}}t:{if(k=_?So(_):window,S=k.nodeName&&k.nodeName.toLowerCase(),S==="select"||S==="input"&&k.type==="file")var F=Fk;else if(nm(k))if(Iy)F=Hk;else{F=jk;var G=Bk}else(S=k.nodeName)&&S.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(F=Uk);if(F&&(F=F(e,_))){Ny(x,F,n,v);break t}G&&G(e,k,_),e==="focusout"&&(G=k._wrapperState)&&G.controlled&&k.type==="number"&&nd(k,"number",k.value)}switch(G=_?So(_):window,e){case"focusin":(nm(G)||G.contentEditable==="true")&&(bo=G,gd=_,gl=null);break;case"focusout":gl=gd=bo=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,am(x,n,v);break;case"selectionchange":if(Vk)break;case"keydown":case"keyup":am(x,n,v)}var H;if(Eg)t:{switch(e){case"compositionstart":var V="onCompositionStart";break t;case"compositionend":V="onCompositionEnd";break t;case"compositionupdate":V="onCompositionUpdate";break t}V=void 0}else Lo?My(e,n)&&(V="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(V="onCompositionStart");V&&(Cy&&n.locale!=="ko"&&(Lo||V!=="onCompositionStart"?V==="onCompositionEnd"&&Lo&&(H=Ty()):(Nr=v,kg="value"in Nr?Nr.value:Nr.textContent,Lo=!0)),G=Bc(_,V),0<G.length&&(V=new Qp(V,e,null,n,v),x.push({event:V,listeners:G}),H?V.data=H:(H=Py(n),H!==null&&(V.data=H)))),(H=Ok?Dk(e,n):Rk(e,n))&&(_=Bc(_,"onBeforeInput"),0<_.length&&(v=new Qp("onBeforeInput","beforeinput",null,n,v),x.push({event:v,listeners:_}),v.data=H))}Hy(x,t)})}function Rl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bc(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Cl(e,n),a!=null&&r.unshift(Rl(e,a,i)),a=Cl(e,t),a!=null&&r.push(Rl(e,a,i))),e=e.return}return r}function _o(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cm(e,t,n,r,i){for(var a=t._reactName,u=[];n!==null&&n!==r;){var f=n,g=f.alternate,_=f.stateNode;if(g!==null&&g===r)break;f.tag===5&&_!==null&&(f=_,i?(g=Cl(n,a),g!=null&&u.unshift(Rl(n,g,f))):i||(g=Cl(n,a),g!=null&&u.push(Rl(n,g,f)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var Xk=/\r\n?/g,$k=/\u0000|\uFFFD/g;function hm(e){return(typeof e=="string"?e:""+e).replace(Xk,`
`).replace($k,"")}function Uu(e,t,n){if(t=hm(t),hm(e)!==t&&n)throw Error(lt(425))}function jc(){}var md=null,_d=null;function vd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yd=typeof setTimeout=="function"?setTimeout:void 0,Kk=typeof clearTimeout=="function"?clearTimeout:void 0,fm=typeof Promise=="function"?Promise:void 0,Qk=typeof queueMicrotask=="function"?queueMicrotask:typeof fm<"u"?function(e){return fm.resolve(null).then(e).catch(Jk)}:yd;function Jk(e){setTimeout(function(){throw e})}function Lf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Nl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Nl(t)}function zr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var na=Math.random().toString(36).slice(2),Ai="__reactFiber$"+na,Al="__reactProps$"+na,lr="__reactContainer$"+na,xd="__reactEvents$"+na,tL="__reactListeners$"+na,eL="__reactHandles$"+na;function Ls(e){var t=e[Ai];if(t)return t;for(var n=e.parentNode;n;){if(t=n[lr]||n[Ai]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dm(e);e!==null;){if(n=e[Ai])return n;e=dm(e)}return t}e=n,n=e.parentNode}return null}function eu(e){return e=e[Ai]||e[lr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function So(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(lt(33))}function Eh(e){return e[Al]||null}var wd=[],To=-1;function Yr(e){return{current:e}}function ce(e){0>To||(e.current=wd[To],wd[To]=null,To--)}function se(e,t){To++,wd[To]=e.current,e.current=t}var Wr={},an=Yr(Wr),Cn=Yr(!1),Is=Wr;function Ho(e,t){var n=e.type.contextTypes;if(!n)return Wr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mn(e){return e=e.childContextTypes,e!=null}function Uc(){ce(Cn),ce(an)}function gm(e,t,n){if(an.current!==Wr)throw Error(lt(168));se(an,t),se(Cn,n)}function Wy(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(lt(108,Bw(e)||"Unknown",i));return ye({},n,r)}function Hc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wr,Is=an.current,se(an,e),se(Cn,Cn.current),!0}function pm(e,t,n){var r=e.stateNode;if(!r)throw Error(lt(169));n?(e=Wy(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,ce(Cn),ce(an),se(an,e)):ce(Cn),se(Cn,n)}var Ji=null,Sh=!1,bf=!1;function Vy(e){Ji===null?Ji=[e]:Ji.push(e)}function nL(e){Sh=!0,Vy(e)}function qr(){if(!bf&&Ji!==null){bf=!0;var e=0,t=ne;try{var n=Ji;for(ne=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ji=null,Sh=!1}catch(i){throw Ji!==null&&(Ji=Ji.slice(e+1)),my(vg,qr),i}finally{ne=t,bf=!1}}return null}var Co=[],Mo=0,Gc=null,Wc=0,ei=[],ni=0,Os=null,er=1,nr="";function vs(e,t){Co[Mo++]=Wc,Co[Mo++]=Gc,Gc=e,Wc=t}function Zy(e,t,n){ei[ni++]=er,ei[ni++]=nr,ei[ni++]=Os,Os=e;var r=er;e=nr;var i=32-vi(r)-1;r&=~(1<<i),n+=1;var a=32-vi(t)+i;if(30<a){var u=i-i%5;a=(r&(1<<u)-1).toString(32),r>>=u,i-=u,er=1<<32-vi(t)+i|n<<i|r,nr=a+e}else er=1<<a|n<<i|r,nr=e}function Tg(e){e.return!==null&&(vs(e,1),Zy(e,1,0))}function Cg(e){for(;e===Gc;)Gc=Co[--Mo],Co[Mo]=null,Wc=Co[--Mo],Co[Mo]=null;for(;e===Os;)Os=ei[--ni],ei[ni]=null,nr=ei[--ni],ei[ni]=null,er=ei[--ni],ei[ni]=null}var zn=null,An=null,fe=!1,_i=null;function Yy(e,t){var n=ii(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function mm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zn=e,An=zr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zn=e,An=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Os!==null?{id:er,overflow:nr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ii(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,zn=e,An=null,!0):!1;default:return!1}}function kd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ld(e){if(fe){var t=An;if(t){var n=t;if(!mm(e,t)){if(kd(e))throw Error(lt(418));t=zr(n.nextSibling);var r=zn;t&&mm(e,t)?Yy(r,n):(e.flags=e.flags&-4097|2,fe=!1,zn=e)}}else{if(kd(e))throw Error(lt(418));e.flags=e.flags&-4097|2,fe=!1,zn=e}}}function _m(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zn=e}function Hu(e){if(e!==zn)return!1;if(!fe)return _m(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vd(e.type,e.memoizedProps)),t&&(t=An)){if(kd(e))throw qy(),Error(lt(418));for(;t;)Yy(e,t),t=zr(t.nextSibling)}if(_m(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(lt(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){An=zr(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}An=null}}else An=zn?zr(e.stateNode.nextSibling):null;return!0}function qy(){for(var e=An;e;)e=zr(e.nextSibling)}function Go(){An=zn=null,fe=!1}function Mg(e){_i===null?_i=[e]:_i.push(e)}var iL=hr.ReactCurrentBatchConfig;function Va(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(lt(309));var r=n.stateNode}if(!r)throw Error(lt(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(u){var f=i.refs;u===null?delete f[a]:f[a]=u},t._stringRef=a,t)}if(typeof e!="string")throw Error(lt(284));if(!n._owner)throw Error(lt(290,e))}return e}function Gu(e,t){throw e=Object.prototype.toString.call(t),Error(lt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vm(e){var t=e._init;return t(e._payload)}function Xy(e){function t(P,M){if(e){var O=P.deletions;O===null?(P.deletions=[M],P.flags|=16):O.push(M)}}function n(P,M){if(!e)return null;for(;M!==null;)t(P,M),M=M.sibling;return null}function r(P,M){for(P=new Map;M!==null;)M.key!==null?P.set(M.key,M):P.set(M.index,M),M=M.sibling;return P}function i(P,M){return P=Ur(P,M),P.index=0,P.sibling=null,P}function a(P,M,O){return P.index=O,e?(O=P.alternate,O!==null?(O=O.index,O<M?(P.flags|=2,M):O):(P.flags|=2,M)):(P.flags|=1048576,M)}function u(P){return e&&P.alternate===null&&(P.flags|=2),P}function f(P,M,O,B){return M===null||M.tag!==6?(M=Nf(O,P.mode,B),M.return=P,M):(M=i(M,O),M.return=P,M)}function g(P,M,O,B){var F=O.type;return F===ko?v(P,M,O.props.children,B,O.key):M!==null&&(M.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Tr&&vm(F)===M.type)?(B=i(M,O.props),B.ref=Va(P,M,O),B.return=P,B):(B=Sc(O.type,O.key,O.props,null,P.mode,B),B.ref=Va(P,M,O),B.return=P,B)}function _(P,M,O,B){return M===null||M.tag!==4||M.stateNode.containerInfo!==O.containerInfo||M.stateNode.implementation!==O.implementation?(M=If(O,P.mode,B),M.return=P,M):(M=i(M,O.children||[]),M.return=P,M)}function v(P,M,O,B,F){return M===null||M.tag!==7?(M=Ms(O,P.mode,B,F),M.return=P,M):(M=i(M,O),M.return=P,M)}function x(P,M,O){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Nf(""+M,P.mode,O),M.return=P,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Iu:return O=Sc(M.type,M.key,M.props,null,P.mode,O),O.ref=Va(P,null,M),O.return=P,O;case wo:return M=If(M,P.mode,O),M.return=P,M;case Tr:var B=M._init;return x(P,B(M._payload),O)}if(tl(M)||ja(M))return M=Ms(M,P.mode,O,null),M.return=P,M;Gu(P,M)}return null}function k(P,M,O,B){var F=M!==null?M.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return F!==null?null:f(P,M,""+O,B);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Iu:return O.key===F?g(P,M,O,B):null;case wo:return O.key===F?_(P,M,O,B):null;case Tr:return F=O._init,k(P,M,F(O._payload),B)}if(tl(O)||ja(O))return F!==null?null:v(P,M,O,B,null);Gu(P,O)}return null}function S(P,M,O,B,F){if(typeof B=="string"&&B!==""||typeof B=="number")return P=P.get(O)||null,f(M,P,""+B,F);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Iu:return P=P.get(B.key===null?O:B.key)||null,g(M,P,B,F);case wo:return P=P.get(B.key===null?O:B.key)||null,_(M,P,B,F);case Tr:var G=B._init;return S(P,M,O,G(B._payload),F)}if(tl(B)||ja(B))return P=P.get(O)||null,v(M,P,B,F,null);Gu(M,B)}return null}function C(P,M,O,B){for(var F=null,G=null,H=M,V=M=0,$=null;H!==null&&V<O.length;V++){H.index>V?($=H,H=null):$=H.sibling;var et=k(P,H,O[V],B);if(et===null){H===null&&(H=$);break}e&&H&&et.alternate===null&&t(P,H),M=a(et,M,V),G===null?F=et:G.sibling=et,G=et,H=$}if(V===O.length)return n(P,H),fe&&vs(P,V),F;if(H===null){for(;V<O.length;V++)H=x(P,O[V],B),H!==null&&(M=a(H,M,V),G===null?F=H:G.sibling=H,G=H);return fe&&vs(P,V),F}for(H=r(P,H);V<O.length;V++)$=S(H,P,V,O[V],B),$!==null&&(e&&$.alternate!==null&&H.delete($.key===null?V:$.key),M=a($,M,V),G===null?F=$:G.sibling=$,G=$);return e&&H.forEach(function(nt){return t(P,nt)}),fe&&vs(P,V),F}function N(P,M,O,B){var F=ja(O);if(typeof F!="function")throw Error(lt(150));if(O=F.call(O),O==null)throw Error(lt(151));for(var G=F=null,H=M,V=M=0,$=null,et=O.next();H!==null&&!et.done;V++,et=O.next()){H.index>V?($=H,H=null):$=H.sibling;var nt=k(P,H,et.value,B);if(nt===null){H===null&&(H=$);break}e&&H&&nt.alternate===null&&t(P,H),M=a(nt,M,V),G===null?F=nt:G.sibling=nt,G=nt,H=$}if(et.done)return n(P,H),fe&&vs(P,V),F;if(H===null){for(;!et.done;V++,et=O.next())et=x(P,et.value,B),et!==null&&(M=a(et,M,V),G===null?F=et:G.sibling=et,G=et);return fe&&vs(P,V),F}for(H=r(P,H);!et.done;V++,et=O.next())et=S(H,P,V,et.value,B),et!==null&&(e&&et.alternate!==null&&H.delete(et.key===null?V:et.key),M=a(et,M,V),G===null?F=et:G.sibling=et,G=et);return e&&H.forEach(function(at){return t(P,at)}),fe&&vs(P,V),F}function A(P,M,O,B){if(typeof O=="object"&&O!==null&&O.type===ko&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Iu:t:{for(var F=O.key,G=M;G!==null;){if(G.key===F){if(F=O.type,F===ko){if(G.tag===7){n(P,G.sibling),M=i(G,O.props.children),M.return=P,P=M;break t}}else if(G.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Tr&&vm(F)===G.type){n(P,G.sibling),M=i(G,O.props),M.ref=Va(P,G,O),M.return=P,P=M;break t}n(P,G);break}else t(P,G);G=G.sibling}O.type===ko?(M=Ms(O.props.children,P.mode,B,O.key),M.return=P,P=M):(B=Sc(O.type,O.key,O.props,null,P.mode,B),B.ref=Va(P,M,O),B.return=P,P=B)}return u(P);case wo:t:{for(G=O.key;M!==null;){if(M.key===G)if(M.tag===4&&M.stateNode.containerInfo===O.containerInfo&&M.stateNode.implementation===O.implementation){n(P,M.sibling),M=i(M,O.children||[]),M.return=P,P=M;break t}else{n(P,M);break}else t(P,M);M=M.sibling}M=If(O,P.mode,B),M.return=P,P=M}return u(P);case Tr:return G=O._init,A(P,M,G(O._payload),B)}if(tl(O))return C(P,M,O,B);if(ja(O))return N(P,M,O,B);Gu(P,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,M!==null&&M.tag===6?(n(P,M.sibling),M=i(M,O),M.return=P,P=M):(n(P,M),M=Nf(O,P.mode,B),M.return=P,P=M),u(P)):n(P,M)}return A}var Wo=Xy(!0),$y=Xy(!1),Vc=Yr(null),Zc=null,Po=null,Pg=null;function Ng(){Pg=Po=Zc=null}function Ig(e){var t=Vc.current;ce(Vc),e._currentValue=t}function bd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function zo(e,t){Zc=e,Pg=Po=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tn=!0),e.firstContext=null)}function oi(e){var t=e._currentValue;if(Pg!==e)if(e={context:e,memoizedValue:t,next:null},Po===null){if(Zc===null)throw Error(lt(308));Po=e,Zc.dependencies={lanes:0,firstContext:e}}else Po=Po.next=e;return t}var bs=null;function Og(e){bs===null?bs=[e]:bs.push(e)}function Ky(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Og(t)):(n.next=i.next,i.next=n),t.interleaved=n,ur(e,r)}function ur(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Cr=!1;function Dg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Yt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ur(e,n)}return i=r.interleaved,i===null?(t.next=t,Og(r)):(t.next=i.next,i.next=t),r.interleaved=t,ur(e,n)}function xc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yg(e,n)}}function ym(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=u:a=a.next=u,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yc(e,t,n,r){var i=e.updateQueue;Cr=!1;var a=i.firstBaseUpdate,u=i.lastBaseUpdate,f=i.shared.pending;if(f!==null){i.shared.pending=null;var g=f,_=g.next;g.next=null,u===null?a=_:u.next=_,u=g;var v=e.alternate;v!==null&&(v=v.updateQueue,f=v.lastBaseUpdate,f!==u&&(f===null?v.firstBaseUpdate=_:f.next=_,v.lastBaseUpdate=g))}if(a!==null){var x=i.baseState;u=0,v=_=g=null,f=a;do{var k=f.lane,S=f.eventTime;if((r&k)===k){v!==null&&(v=v.next={eventTime:S,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});t:{var C=e,N=f;switch(k=t,S=n,N.tag){case 1:if(C=N.payload,typeof C=="function"){x=C.call(S,x,k);break t}x=C;break t;case 3:C.flags=C.flags&-65537|128;case 0:if(C=N.payload,k=typeof C=="function"?C.call(S,x,k):C,k==null)break t;x=ye({},x,k);break t;case 2:Cr=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,k=i.effects,k===null?i.effects=[f]:k.push(f))}else S={eventTime:S,lane:k,tag:f.tag,payload:f.payload,callback:f.callback,next:null},v===null?(_=v=S,g=x):v=v.next=S,u|=k;if(f=f.next,f===null){if(f=i.shared.pending,f===null)break;k=f,f=k.next,k.next=null,i.lastBaseUpdate=k,i.shared.pending=null}}while(!0);if(v===null&&(g=x),i.baseState=g,i.firstBaseUpdate=_,i.lastBaseUpdate=v,t=i.shared.interleaved,t!==null){i=t;do u|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Rs|=u,e.lanes=u,e.memoizedState=x}}function xm(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(lt(191,i));i.call(r)}}}var nu={},Bi=Yr(nu),zl=Yr(nu),Fl=Yr(nu);function Es(e){if(e===nu)throw Error(lt(174));return e}function Rg(e,t){switch(se(Fl,t),se(zl,e),se(Bi,nu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:rd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=rd(t,e)}ce(Bi),se(Bi,t)}function Vo(){ce(Bi),ce(zl),ce(Fl)}function Jy(e){Es(Fl.current);var t=Es(Bi.current),n=rd(t,e.type);t!==n&&(se(zl,e),se(Bi,n))}function Ag(e){zl.current===e&&(ce(Bi),ce(zl))}var ge=Yr(0);function qc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ef=[];function zg(){for(var e=0;e<Ef.length;e++)Ef[e]._workInProgressVersionPrimary=null;Ef.length=0}var wc=hr.ReactCurrentDispatcher,Sf=hr.ReactCurrentBatchConfig,Ds=0,ve=null,Ne=null,je=null,Xc=!1,pl=!1,Bl=0,rL=0;function Je(){throw Error(lt(321))}function Fg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xi(e[n],t[n]))return!1;return!0}function Bg(e,t,n,r,i,a){if(Ds=a,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wc.current=e===null||e.memoizedState===null?lL:uL,e=n(r,i),pl){a=0;do{if(pl=!1,Bl=0,25<=a)throw Error(lt(301));a+=1,je=Ne=null,t.updateQueue=null,wc.current=cL,e=n(r,i)}while(pl)}if(wc.current=$c,t=Ne!==null&&Ne.next!==null,Ds=0,je=Ne=ve=null,Xc=!1,t)throw Error(lt(300));return e}function jg(){var e=Bl!==0;return Bl=0,e}function Oi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?ve.memoizedState=je=e:je=je.next=e,je}function ai(){if(Ne===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Ne.next;var t=je===null?ve.memoizedState:je.next;if(t!==null)je=t,Ne=e;else{if(e===null)throw Error(lt(310));Ne=e,e={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},je===null?ve.memoizedState=je=e:je=je.next=e}return je}function jl(e,t){return typeof t=="function"?t(e):t}function Tf(e){var t=ai(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var r=Ne,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var f=u=null,g=null,_=a;do{var v=_.lane;if((Ds&v)===v)g!==null&&(g=g.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),r=_.hasEagerState?_.eagerState:e(r,_.action);else{var x={lane:v,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};g===null?(f=g=x,u=r):g=g.next=x,ve.lanes|=v,Rs|=v}_=_.next}while(_!==null&&_!==a);g===null?u=r:g.next=f,xi(r,t.memoizedState)||(Tn=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=g,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,ve.lanes|=a,Rs|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Cf(e){var t=ai(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var u=i=i.next;do a=e(a,u.action),u=u.next;while(u!==i);xi(a,t.memoizedState)||(Tn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function t0(){}function e0(e,t){var n=ve,r=ai(),i=t(),a=!xi(r.memoizedState,i);if(a&&(r.memoizedState=i,Tn=!0),r=r.queue,Ug(r0.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||je!==null&&je.memoizedState.tag&1){if(n.flags|=2048,Ul(9,i0.bind(null,n,r,i,t),void 0,null),He===null)throw Error(lt(349));Ds&30||n0(n,t,i)}return i}function n0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function i0(e,t,n,r){t.value=n,t.getSnapshot=r,s0(t)&&o0(e)}function r0(e,t,n){return n(function(){s0(t)&&o0(e)})}function s0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xi(e,n)}catch{return!0}}function o0(e){var t=ur(e,1);t!==null&&yi(t,e,1,-1)}function wm(e){var t=Oi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:e},t.queue=e,e=e.dispatch=aL.bind(null,ve,e),[t.memoizedState,e]}function Ul(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function a0(){return ai().memoizedState}function kc(e,t,n,r){var i=Oi();ve.flags|=e,i.memoizedState=Ul(1|t,n,void 0,r===void 0?null:r)}function Th(e,t,n,r){var i=ai();r=r===void 0?null:r;var a=void 0;if(Ne!==null){var u=Ne.memoizedState;if(a=u.destroy,r!==null&&Fg(r,u.deps)){i.memoizedState=Ul(t,n,a,r);return}}ve.flags|=e,i.memoizedState=Ul(1|t,n,a,r)}function km(e,t){return kc(8390656,8,e,t)}function Ug(e,t){return Th(2048,8,e,t)}function l0(e,t){return Th(4,2,e,t)}function u0(e,t){return Th(4,4,e,t)}function c0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function h0(e,t,n){return n=n!=null?n.concat([e]):null,Th(4,4,c0.bind(null,t,e),n)}function Hg(){}function f0(e,t){var n=ai();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function d0(e,t){var n=ai();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Fg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function g0(e,t,n){return Ds&21?(xi(n,t)||(n=yy(),ve.lanes|=n,Rs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tn=!0),e.memoizedState=n)}function sL(e,t){var n=ne;ne=n!==0&&4>n?n:4,e(!0);var r=Sf.transition;Sf.transition={};try{e(!1),t()}finally{ne=n,Sf.transition=r}}function p0(){return ai().memoizedState}function oL(e,t,n){var r=jr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},m0(e))_0(t,n);else if(n=Ky(e,t,n,r),n!==null){var i=mn();yi(n,e,r,i),v0(n,t,r)}}function aL(e,t,n){var r=jr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(m0(e))_0(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,f=a(u,n);if(i.hasEagerState=!0,i.eagerState=f,xi(f,u)){var g=t.interleaved;g===null?(i.next=i,Og(t)):(i.next=g.next,g.next=i),t.interleaved=i;return}}catch{}finally{}n=Ky(e,t,i,r),n!==null&&(i=mn(),yi(n,e,r,i),v0(n,t,r))}}function m0(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function _0(e,t){pl=Xc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function v0(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yg(e,n)}}var $c={readContext:oi,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},lL={readContext:oi,useCallback:function(e,t){return Oi().memoizedState=[e,t===void 0?null:t],e},useContext:oi,useEffect:km,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,kc(4194308,4,c0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return kc(4194308,4,e,t)},useInsertionEffect:function(e,t){return kc(4,2,e,t)},useMemo:function(e,t){var n=Oi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Oi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=oL.bind(null,ve,e),[r.memoizedState,e]},useRef:function(e){var t=Oi();return e={current:e},t.memoizedState=e},useState:wm,useDebugValue:Hg,useDeferredValue:function(e){return Oi().memoizedState=e},useTransition:function(){var e=wm(!1),t=e[0];return e=sL.bind(null,e[1]),Oi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ve,i=Oi();if(fe){if(n===void 0)throw Error(lt(407));n=n()}else{if(n=t(),He===null)throw Error(lt(349));Ds&30||n0(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,km(r0.bind(null,r,a,e),[e]),r.flags|=2048,Ul(9,i0.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Oi(),t=He.identifierPrefix;if(fe){var n=nr,r=er;n=(r&~(1<<32-vi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=rL++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uL={readContext:oi,useCallback:f0,useContext:oi,useEffect:Ug,useImperativeHandle:h0,useInsertionEffect:l0,useLayoutEffect:u0,useMemo:d0,useReducer:Tf,useRef:a0,useState:function(){return Tf(jl)},useDebugValue:Hg,useDeferredValue:function(e){var t=ai();return g0(t,Ne.memoizedState,e)},useTransition:function(){var e=Tf(jl)[0],t=ai().memoizedState;return[e,t]},useMutableSource:t0,useSyncExternalStore:e0,useId:p0,unstable_isNewReconciler:!1},cL={readContext:oi,useCallback:f0,useContext:oi,useEffect:Ug,useImperativeHandle:h0,useInsertionEffect:l0,useLayoutEffect:u0,useMemo:d0,useReducer:Cf,useRef:a0,useState:function(){return Cf(jl)},useDebugValue:Hg,useDeferredValue:function(e){var t=ai();return Ne===null?t.memoizedState=e:g0(t,Ne.memoizedState,e)},useTransition:function(){var e=Cf(jl)[0],t=ai().memoizedState;return[e,t]},useMutableSource:t0,useSyncExternalStore:e0,useId:p0,unstable_isNewReconciler:!1};function pi(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ed(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ye({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ch={isMounted:function(e){return(e=e._reactInternals)?Us(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mn(),i=jr(e),a=sr(r,i);a.payload=t,n!=null&&(a.callback=n),t=Fr(e,a,i),t!==null&&(yi(t,e,i,r),xc(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mn(),i=jr(e),a=sr(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Fr(e,a,i),t!==null&&(yi(t,e,i,r),xc(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mn(),r=jr(e),i=sr(n,r);i.tag=2,t!=null&&(i.callback=t),t=Fr(e,i,r),t!==null&&(yi(t,e,r,n),xc(t,e,r))}};function Lm(e,t,n,r,i,a,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,u):t.prototype&&t.prototype.isPureReactComponent?!Ol(n,r)||!Ol(i,a):!0}function y0(e,t,n){var r=!1,i=Wr,a=t.contextType;return typeof a=="object"&&a!==null?a=oi(a):(i=Mn(t)?Is:an.current,r=t.contextTypes,a=(r=r!=null)?Ho(e,i):Wr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ch,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function bm(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ch.enqueueReplaceState(t,t.state,null)}function Sd(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Dg(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=oi(a):(a=Mn(t)?Is:an.current,i.context=Ho(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Ed(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ch.enqueueReplaceState(i,i.state,null),Yc(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Zo(e,t){try{var n="",r=t;do n+=Fw(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Mf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Td(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hL=typeof WeakMap=="function"?WeakMap:Map;function x0(e,t,n){n=sr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qc||(Qc=!0,zd=r),Td(e,t)},n}function w0(e,t,n){n=sr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Td(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Td(e,t),typeof r!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function Em(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new hL;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=EL.bind(null,e,t,n),t.then(e,e))}function Sm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tm(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=sr(-1,1),t.tag=2,Fr(n,t,1))),n.lanes|=1),e)}var fL=hr.ReactCurrentOwner,Tn=!1;function gn(e,t,n,r){t.child=e===null?$y(t,null,n,r):Wo(t,e.child,n,r)}function Cm(e,t,n,r,i){n=n.render;var a=t.ref;return zo(t,i),r=Bg(e,t,n,r,a,i),n=jg(),e!==null&&!Tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cr(e,t,i)):(fe&&n&&Tg(t),t.flags|=1,gn(e,t,r,i),t.child)}function Mm(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!$g(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,k0(e,t,a,r,i)):(e=Sc(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var u=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ol,n(u,r)&&e.ref===t.ref)return cr(e,t,i)}return t.flags|=1,e=Ur(a,r),e.ref=t.ref,e.return=t,t.child=e}function k0(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Ol(a,r)&&e.ref===t.ref)if(Tn=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(Tn=!0);else return t.lanes=e.lanes,cr(e,t,i)}return Cd(e,t,n,r,i)}function L0(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(Io,Rn),Rn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,se(Io,Rn),Rn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,se(Io,Rn),Rn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,se(Io,Rn),Rn|=r;return gn(e,t,i,n),t.child}function b0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cd(e,t,n,r,i){var a=Mn(n)?Is:an.current;return a=Ho(t,a),zo(t,i),n=Bg(e,t,n,r,a,i),r=jg(),e!==null&&!Tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cr(e,t,i)):(fe&&r&&Tg(t),t.flags|=1,gn(e,t,n,i),t.child)}function Pm(e,t,n,r,i){if(Mn(n)){var a=!0;Hc(t)}else a=!1;if(zo(t,i),t.stateNode===null)Lc(e,t),y0(t,n,r),Sd(t,n,r,i),r=!0;else if(e===null){var u=t.stateNode,f=t.memoizedProps;u.props=f;var g=u.context,_=n.contextType;typeof _=="object"&&_!==null?_=oi(_):(_=Mn(n)?Is:an.current,_=Ho(t,_));var v=n.getDerivedStateFromProps,x=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function";x||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==r||g!==_)&&bm(t,u,r,_),Cr=!1;var k=t.memoizedState;u.state=k,Yc(t,r,u,i),g=t.memoizedState,f!==r||k!==g||Cn.current||Cr?(typeof v=="function"&&(Ed(t,n,v,r),g=t.memoizedState),(f=Cr||Lm(t,n,f,r,k,g,_))?(x||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=g),u.props=r,u.state=g,u.context=_,r=f):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,Qy(e,t),f=t.memoizedProps,_=t.type===t.elementType?f:pi(t.type,f),u.props=_,x=t.pendingProps,k=u.context,g=n.contextType,typeof g=="object"&&g!==null?g=oi(g):(g=Mn(n)?Is:an.current,g=Ho(t,g));var S=n.getDerivedStateFromProps;(v=typeof S=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==x||k!==g)&&bm(t,u,r,g),Cr=!1,k=t.memoizedState,u.state=k,Yc(t,r,u,i);var C=t.memoizedState;f!==x||k!==C||Cn.current||Cr?(typeof S=="function"&&(Ed(t,n,S,r),C=t.memoizedState),(_=Cr||Lm(t,n,_,r,k,C,g)||!1)?(v||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,C,g),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,C,g)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=C),u.props=r,u.state=C,u.context=g,r=_):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),r=!1)}return Md(e,t,n,r,a,i)}function Md(e,t,n,r,i,a){b0(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return i&&pm(t,n,!1),cr(e,t,a);r=t.stateNode,fL.current=t;var f=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=Wo(t,e.child,null,a),t.child=Wo(t,null,f,a)):gn(e,t,f,a),t.memoizedState=r.state,i&&pm(t,n,!0),t.child}function E0(e){var t=e.stateNode;t.pendingContext?gm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gm(e,t.context,!1),Rg(e,t.containerInfo)}function Nm(e,t,n,r,i){return Go(),Mg(i),t.flags|=256,gn(e,t,n,r),t.child}var Pd={dehydrated:null,treeContext:null,retryLane:0};function Nd(e){return{baseLanes:e,cachePool:null,transitions:null}}function S0(e,t,n){var r=t.pendingProps,i=ge.current,a=!1,u=(t.flags&128)!==0,f;if((f=u)||(f=e!==null&&e.memoizedState===null?!1:(i&2)!==0),f?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),se(ge,i&1),e===null)return Ld(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,a?(r=t.mode,a=t.child,u={mode:"hidden",children:u},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=u):a=Nh(u,r,0,null),e=Ms(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Nd(n),t.memoizedState=Pd,e):Gg(t,u));if(i=e.memoizedState,i!==null&&(f=i.dehydrated,f!==null))return dL(e,t,u,r,f,i,n);if(a){a=r.fallback,u=t.mode,i=e.child,f=i.sibling;var g={mode:"hidden",children:r.children};return!(u&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=g,t.deletions=null):(r=Ur(i,g),r.subtreeFlags=i.subtreeFlags&14680064),f!==null?a=Ur(f,a):(a=Ms(a,u,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,u=e.child.memoizedState,u=u===null?Nd(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=Pd,r}return a=e.child,e=a.sibling,r=Ur(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Gg(e,t){return t=Nh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wu(e,t,n,r){return r!==null&&Mg(r),Wo(t,e.child,null,n),e=Gg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dL(e,t,n,r,i,a,u){if(n)return t.flags&256?(t.flags&=-257,r=Mf(Error(lt(422))),Wu(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Nh({mode:"visible",children:r.children},i,0,null),a=Ms(a,i,u,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Wo(t,e.child,null,u),t.child.memoizedState=Nd(u),t.memoizedState=Pd,a);if(!(t.mode&1))return Wu(e,t,u,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var f=r.dgst;return r=f,a=Error(lt(419)),r=Mf(a,r,void 0),Wu(e,t,u,r)}if(f=(u&e.childLanes)!==0,Tn||f){if(r=He,r!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|u)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ur(e,i),yi(r,e,i,-1))}return Xg(),r=Mf(Error(lt(421))),Wu(e,t,u,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=SL.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,An=zr(i.nextSibling),zn=t,fe=!0,_i=null,e!==null&&(ei[ni++]=er,ei[ni++]=nr,ei[ni++]=Os,er=e.id,nr=e.overflow,Os=t),t=Gg(t,r.children),t.flags|=4096,t)}function Im(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),bd(e.return,t,n)}function Pf(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function T0(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gn(e,t,r.children,n),r=ge.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Im(e,n,t);else if(e.tag===19)Im(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(se(ge,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&qc(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Pf(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&qc(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Pf(t,!0,n,null,a);break;case"together":Pf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Rs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(lt(153));if(t.child!==null){for(e=t.child,n=Ur(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ur(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gL(e,t,n){switch(t.tag){case 3:E0(t),Go();break;case 5:Jy(t);break;case 1:Mn(t.type)&&Hc(t);break;case 4:Rg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;se(Vc,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(se(ge,ge.current&1),t.flags|=128,null):n&t.child.childLanes?S0(e,t,n):(se(ge,ge.current&1),e=cr(e,t,n),e!==null?e.sibling:null);se(ge,ge.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return T0(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),se(ge,ge.current),r)break;return null;case 22:case 23:return t.lanes=0,L0(e,t,n)}return cr(e,t,n)}var C0,Id,M0,P0;C0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Id=function(){};M0=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Es(Bi.current);var a=null;switch(n){case"input":i=td(e,i),r=td(e,r),a=[];break;case"select":i=ye({},i,{value:void 0}),r=ye({},r,{value:void 0}),a=[];break;case"textarea":i=id(e,i),r=id(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=jc)}sd(n,r);var u;n=null;for(_ in i)if(!r.hasOwnProperty(_)&&i.hasOwnProperty(_)&&i[_]!=null)if(_==="style"){var f=i[_];for(u in f)f.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(Sl.hasOwnProperty(_)?a||(a=[]):(a=a||[]).push(_,null));for(_ in r){var g=r[_];if(f=i!=null?i[_]:void 0,r.hasOwnProperty(_)&&g!==f&&(g!=null||f!=null))if(_==="style")if(f){for(u in f)!f.hasOwnProperty(u)||g&&g.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in g)g.hasOwnProperty(u)&&f[u]!==g[u]&&(n||(n={}),n[u]=g[u])}else n||(a||(a=[]),a.push(_,n)),n=g;else _==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,f=f?f.__html:void 0,g!=null&&f!==g&&(a=a||[]).push(_,g)):_==="children"?typeof g!="string"&&typeof g!="number"||(a=a||[]).push(_,""+g):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(Sl.hasOwnProperty(_)?(g!=null&&_==="onScroll"&&le("scroll",e),a||f===g||(a=[])):(a=a||[]).push(_,g))}n&&(a=a||[]).push("style",n);var _=a;(t.updateQueue=_)&&(t.flags|=4)}};P0=function(e,t,n,r){n!==r&&(t.flags|=4)};function Za(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pL(e,t,n){var r=t.pendingProps;switch(Cg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(t),null;case 1:return Mn(t.type)&&Uc(),tn(t),null;case 3:return r=t.stateNode,Vo(),ce(Cn),ce(an),zg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Hu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_i!==null&&(jd(_i),_i=null))),Id(e,t),tn(t),null;case 5:Ag(t);var i=Es(Fl.current);if(n=t.type,e!==null&&t.stateNode!=null)M0(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(lt(166));return tn(t),null}if(e=Es(Bi.current),Hu(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Ai]=t,r[Al]=a,e=(t.mode&1)!==0,n){case"dialog":le("cancel",r),le("close",r);break;case"iframe":case"object":case"embed":le("load",r);break;case"video":case"audio":for(i=0;i<nl.length;i++)le(nl[i],r);break;case"source":le("error",r);break;case"img":case"image":case"link":le("error",r),le("load",r);break;case"details":le("toggle",r);break;case"input":Up(r,a),le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},le("invalid",r);break;case"textarea":Gp(r,a),le("invalid",r)}sd(n,a),i=null;for(var u in a)if(a.hasOwnProperty(u)){var f=a[u];u==="children"?typeof f=="string"?r.textContent!==f&&(a.suppressHydrationWarning!==!0&&Uu(r.textContent,f,e),i=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(a.suppressHydrationWarning!==!0&&Uu(r.textContent,f,e),i=["children",""+f]):Sl.hasOwnProperty(u)&&f!=null&&u==="onScroll"&&le("scroll",r)}switch(n){case"input":Ou(r),Hp(r,a,!0);break;case"textarea":Ou(r),Wp(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=jc)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ry(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Ai]=t,e[Al]=r,C0(e,t,!1,!1),t.stateNode=e;t:{switch(u=od(n,r),n){case"dialog":le("cancel",e),le("close",e),i=r;break;case"iframe":case"object":case"embed":le("load",e),i=r;break;case"video":case"audio":for(i=0;i<nl.length;i++)le(nl[i],e);i=r;break;case"source":le("error",e),i=r;break;case"img":case"image":case"link":le("error",e),le("load",e),i=r;break;case"details":le("toggle",e),i=r;break;case"input":Up(e,r),i=td(e,r),le("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ye({},r,{value:void 0}),le("invalid",e);break;case"textarea":Gp(e,r),i=id(e,r),le("invalid",e);break;default:i=r}sd(n,i),f=i;for(a in f)if(f.hasOwnProperty(a)){var g=f[a];a==="style"?ay(e,g):a==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&sy(e,g)):a==="children"?typeof g=="string"?(n!=="textarea"||g!=="")&&Tl(e,g):typeof g=="number"&&Tl(e,""+g):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Sl.hasOwnProperty(a)?g!=null&&a==="onScroll"&&le("scroll",e):g!=null&&dg(e,a,g,u))}switch(n){case"input":Ou(e),Hp(e,r,!1);break;case"textarea":Ou(e),Wp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Gr(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Oo(e,!!r.multiple,a,!1):r.defaultValue!=null&&Oo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=jc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tn(t),null;case 6:if(e&&t.stateNode!=null)P0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(lt(166));if(n=Es(Fl.current),Es(Bi.current),Hu(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ai]=t,(a=r.nodeValue!==n)&&(e=zn,e!==null))switch(e.tag){case 3:Uu(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Uu(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ai]=t,t.stateNode=r}return tn(t),null;case 13:if(ce(ge),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&An!==null&&t.mode&1&&!(t.flags&128))qy(),Go(),t.flags|=98560,a=!1;else if(a=Hu(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(lt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(lt(317));a[Ai]=t}else Go(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tn(t),a=!1}else _i!==null&&(jd(_i),_i=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ge.current&1?Oe===0&&(Oe=3):Xg())),t.updateQueue!==null&&(t.flags|=4),tn(t),null);case 4:return Vo(),Id(e,t),e===null&&Dl(t.stateNode.containerInfo),tn(t),null;case 10:return Ig(t.type._context),tn(t),null;case 17:return Mn(t.type)&&Uc(),tn(t),null;case 19:if(ce(ge),a=t.memoizedState,a===null)return tn(t),null;if(r=(t.flags&128)!==0,u=a.rendering,u===null)if(r)Za(a,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=qc(e),u!==null){for(t.flags|=128,Za(a,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,u=a.alternate,u===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return se(ge,ge.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ee()>Yo&&(t.flags|=128,r=!0,Za(a,!1),t.lanes=4194304)}else{if(!r)if(e=qc(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Za(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!fe)return tn(t),null}else 2*Ee()-a.renderingStartTime>Yo&&n!==1073741824&&(t.flags|=128,r=!0,Za(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(n=a.last,n!==null?n.sibling=u:t.child=u,a.last=u)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ee(),t.sibling=null,n=ge.current,se(ge,r?n&1|2:n&1),t):(tn(t),null);case 22:case 23:return qg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Rn&1073741824&&(tn(t),t.subtreeFlags&6&&(t.flags|=8192)):tn(t),null;case 24:return null;case 25:return null}throw Error(lt(156,t.tag))}function mL(e,t){switch(Cg(t),t.tag){case 1:return Mn(t.type)&&Uc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vo(),ce(Cn),ce(an),zg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ag(t),null;case 13:if(ce(ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(lt(340));Go()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(ge),null;case 4:return Vo(),null;case 10:return Ig(t.type._context),null;case 22:case 23:return qg(),null;case 24:return null;default:return null}}var Vu=!1,sn=!1,_L=typeof WeakSet=="function"?WeakSet:Set,vt=null;function No(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(e,t,r)}else n.current=null}function Od(e,t,n){try{n()}catch(r){ke(e,t,r)}}var Om=!1;function vL(e,t){if(md=zc,e=Ry(),Sg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break t}var u=0,f=-1,g=-1,_=0,v=0,x=e,k=null;e:for(;;){for(var S;x!==n||i!==0&&x.nodeType!==3||(f=u+i),x!==a||r!==0&&x.nodeType!==3||(g=u+r),x.nodeType===3&&(u+=x.nodeValue.length),(S=x.firstChild)!==null;)k=x,x=S;for(;;){if(x===e)break e;if(k===n&&++_===i&&(f=u),k===a&&++v===r&&(g=u),(S=x.nextSibling)!==null)break;x=k,k=x.parentNode}x=S}n=f===-1||g===-1?null:{start:f,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(_d={focusedElem:e,selectionRange:n},zc=!1,vt=t;vt!==null;)if(t=vt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,vt=e;else for(;vt!==null;){t=vt;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var N=C.memoizedProps,A=C.memoizedState,P=t.stateNode,M=P.getSnapshotBeforeUpdate(t.elementType===t.type?N:pi(t.type,N),A);P.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(lt(163))}}catch(B){ke(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,vt=e;break}vt=t.return}return C=Om,Om=!1,C}function ml(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Od(t,n,a)}i=i.next}while(i!==r)}}function Mh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Dd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function N0(e){var t=e.alternate;t!==null&&(e.alternate=null,N0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ai],delete t[Al],delete t[xd],delete t[tL],delete t[eL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function I0(e){return e.tag===5||e.tag===3||e.tag===4}function Dm(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||I0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=jc));else if(r!==4&&(e=e.child,e!==null))for(Rd(e,t,n),e=e.sibling;e!==null;)Rd(e,t,n),e=e.sibling}function Ad(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ad(e,t,n),e=e.sibling;e!==null;)Ad(e,t,n),e=e.sibling}var Xe=null,mi=!1;function br(e,t,n){for(n=n.child;n!==null;)O0(e,t,n),n=n.sibling}function O0(e,t,n){if(Fi&&typeof Fi.onCommitFiberUnmount=="function")try{Fi.onCommitFiberUnmount(wh,n)}catch{}switch(n.tag){case 5:sn||No(n,t);case 6:var r=Xe,i=mi;Xe=null,br(e,t,n),Xe=r,mi=i,Xe!==null&&(mi?(e=Xe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(mi?(e=Xe,n=n.stateNode,e.nodeType===8?Lf(e.parentNode,n):e.nodeType===1&&Lf(e,n),Nl(e)):Lf(Xe,n.stateNode));break;case 4:r=Xe,i=mi,Xe=n.stateNode.containerInfo,mi=!0,br(e,t,n),Xe=r,mi=i;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,u=a.destroy;a=a.tag,u!==void 0&&(a&2||a&4)&&Od(n,t,u),i=i.next}while(i!==r)}br(e,t,n);break;case 1:if(!sn&&(No(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){ke(n,t,f)}br(e,t,n);break;case 21:br(e,t,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,br(e,t,n),sn=r):br(e,t,n);break;default:br(e,t,n)}}function Rm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new _L),t.forEach(function(r){var i=TL.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,u=t,f=u;t:for(;f!==null;){switch(f.tag){case 5:Xe=f.stateNode,mi=!1;break t;case 3:Xe=f.stateNode.containerInfo,mi=!0;break t;case 4:Xe=f.stateNode.containerInfo,mi=!0;break t}f=f.return}if(Xe===null)throw Error(lt(160));O0(a,u,i),Xe=null,mi=!1;var g=i.alternate;g!==null&&(g.return=null),i.return=null}catch(_){ke(i,t,_)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)D0(t,e),t=t.sibling}function D0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gi(t,e),Pi(e),r&4){try{ml(3,e,e.return),Mh(3,e)}catch(N){ke(e,e.return,N)}try{ml(5,e,e.return)}catch(N){ke(e,e.return,N)}}break;case 1:gi(t,e),Pi(e),r&512&&n!==null&&No(n,n.return);break;case 5:if(gi(t,e),Pi(e),r&512&&n!==null&&No(n,n.return),e.flags&32){var i=e.stateNode;try{Tl(i,"")}catch(N){ke(e,e.return,N)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,u=n!==null?n.memoizedProps:a,f=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{f==="input"&&a.type==="radio"&&a.name!=null&&ny(i,a),od(f,u);var _=od(f,a);for(u=0;u<g.length;u+=2){var v=g[u],x=g[u+1];v==="style"?ay(i,x):v==="dangerouslySetInnerHTML"?sy(i,x):v==="children"?Tl(i,x):dg(i,v,x,_)}switch(f){case"input":ed(i,a);break;case"textarea":iy(i,a);break;case"select":var k=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var S=a.value;S!=null?Oo(i,!!a.multiple,S,!1):k!==!!a.multiple&&(a.defaultValue!=null?Oo(i,!!a.multiple,a.defaultValue,!0):Oo(i,!!a.multiple,a.multiple?[]:"",!1))}i[Al]=a}catch(N){ke(e,e.return,N)}}break;case 6:if(gi(t,e),Pi(e),r&4){if(e.stateNode===null)throw Error(lt(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(N){ke(e,e.return,N)}}break;case 3:if(gi(t,e),Pi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nl(t.containerInfo)}catch(N){ke(e,e.return,N)}break;case 4:gi(t,e),Pi(e);break;case 13:gi(t,e),Pi(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Zg=Ee())),r&4&&Rm(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(sn=(_=sn)||v,gi(t,e),sn=_):gi(t,e),Pi(e),r&8192){if(_=e.memoizedState!==null,(e.stateNode.isHidden=_)&&!v&&e.mode&1)for(vt=e,v=e.child;v!==null;){for(x=vt=v;vt!==null;){switch(k=vt,S=k.child,k.tag){case 0:case 11:case 14:case 15:ml(4,k,k.return);break;case 1:No(k,k.return);var C=k.stateNode;if(typeof C.componentWillUnmount=="function"){r=k,n=k.return;try{t=r,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(N){ke(r,n,N)}}break;case 5:No(k,k.return);break;case 22:if(k.memoizedState!==null){zm(x);continue}}S!==null?(S.return=k,vt=S):zm(x)}v=v.sibling}t:for(v=null,x=e;;){if(x.tag===5){if(v===null){v=x;try{i=x.stateNode,_?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(f=x.stateNode,g=x.memoizedProps.style,u=g!=null&&g.hasOwnProperty("display")?g.display:null,f.style.display=oy("display",u))}catch(N){ke(e,e.return,N)}}}else if(x.tag===6){if(v===null)try{x.stateNode.nodeValue=_?"":x.memoizedProps}catch(N){ke(e,e.return,N)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===e)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===e)break t;for(;x.sibling===null;){if(x.return===null||x.return===e)break t;v===x&&(v=null),x=x.return}v===x&&(v=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:gi(t,e),Pi(e),r&4&&Rm(e);break;case 21:break;default:gi(t,e),Pi(e)}}function Pi(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(I0(n)){var r=n;break t}n=n.return}throw Error(lt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Tl(i,""),r.flags&=-33);var a=Dm(e);Ad(e,a,i);break;case 3:case 4:var u=r.stateNode.containerInfo,f=Dm(e);Rd(e,f,u);break;default:throw Error(lt(161))}}catch(g){ke(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yL(e,t,n){vt=e,R0(e)}function R0(e,t,n){for(var r=(e.mode&1)!==0;vt!==null;){var i=vt,a=i.child;if(i.tag===22&&r){var u=i.memoizedState!==null||Vu;if(!u){var f=i.alternate,g=f!==null&&f.memoizedState!==null||sn;f=Vu;var _=sn;if(Vu=u,(sn=g)&&!_)for(vt=i;vt!==null;)u=vt,g=u.child,u.tag===22&&u.memoizedState!==null?Fm(i):g!==null?(g.return=u,vt=g):Fm(i);for(;a!==null;)vt=a,R0(a),a=a.sibling;vt=i,Vu=f,sn=_}Am(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,vt=a):Am(e)}}function Am(e){for(;vt!==null;){var t=vt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sn||Mh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!sn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:pi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&xm(t,a,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xm(t,u,n)}break;case 5:var f=t.stateNode;if(n===null&&t.flags&4){n=f;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&n.focus();break;case"img":g.src&&(n.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var _=t.alternate;if(_!==null){var v=_.memoizedState;if(v!==null){var x=v.dehydrated;x!==null&&Nl(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(lt(163))}sn||t.flags&512&&Dd(t)}catch(k){ke(t,t.return,k)}}if(t===e){vt=null;break}if(n=t.sibling,n!==null){n.return=t.return,vt=n;break}vt=t.return}}function zm(e){for(;vt!==null;){var t=vt;if(t===e){vt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,vt=n;break}vt=t.return}}function Fm(e){for(;vt!==null;){var t=vt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Mh(4,t)}catch(g){ke(t,n,g)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(g){ke(t,i,g)}}var a=t.return;try{Dd(t)}catch(g){ke(t,a,g)}break;case 5:var u=t.return;try{Dd(t)}catch(g){ke(t,u,g)}}}catch(g){ke(t,t.return,g)}if(t===e){vt=null;break}var f=t.sibling;if(f!==null){f.return=t.return,vt=f;break}vt=t.return}}var xL=Math.ceil,Kc=hr.ReactCurrentDispatcher,Wg=hr.ReactCurrentOwner,si=hr.ReactCurrentBatchConfig,Yt=0,He=null,Ce=null,$e=0,Rn=0,Io=Yr(0),Oe=0,Hl=null,Rs=0,Ph=0,Vg=0,_l=null,En=null,Zg=0,Yo=1/0,Qi=null,Qc=!1,zd=null,Br=null,Zu=!1,Ir=null,Jc=0,vl=0,Fd=null,bc=-1,Ec=0;function mn(){return Yt&6?Ee():bc!==-1?bc:bc=Ee()}function jr(e){return e.mode&1?Yt&2&&$e!==0?$e&-$e:iL.transition!==null?(Ec===0&&(Ec=yy()),Ec):(e=ne,e!==0||(e=window.event,e=e===void 0?16:Sy(e.type)),e):1}function yi(e,t,n,r){if(50<vl)throw vl=0,Fd=null,Error(lt(185));Jl(e,n,r),(!(Yt&2)||e!==He)&&(e===He&&(!(Yt&2)&&(Ph|=n),Oe===4&&Pr(e,$e)),Pn(e,r),n===1&&Yt===0&&!(t.mode&1)&&(Yo=Ee()+500,Sh&&qr()))}function Pn(e,t){var n=e.callbackNode;ik(e,t);var r=Ac(e,e===He?$e:0);if(r===0)n!==null&&Yp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Yp(n),t===1)e.tag===0?nL(Bm.bind(null,e)):Vy(Bm.bind(null,e)),Qk(function(){!(Yt&6)&&qr()}),n=null;else{switch(xy(r)){case 1:n=vg;break;case 4:n=_y;break;case 16:n=Rc;break;case 536870912:n=vy;break;default:n=Rc}n=G0(n,A0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function A0(e,t){if(bc=-1,Ec=0,Yt&6)throw Error(lt(327));var n=e.callbackNode;if(Fo()&&e.callbackNode!==n)return null;var r=Ac(e,e===He?$e:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=th(e,r);else{t=r;var i=Yt;Yt|=2;var a=F0();(He!==e||$e!==t)&&(Qi=null,Yo=Ee()+500,Cs(e,t));do try{LL();break}catch(f){z0(e,f)}while(!0);Ng(),Kc.current=a,Yt=i,Ce!==null?t=0:(He=null,$e=0,t=Oe)}if(t!==0){if(t===2&&(i=hd(e),i!==0&&(r=i,t=Bd(e,i))),t===1)throw n=Hl,Cs(e,0),Pr(e,r),Pn(e,Ee()),n;if(t===6)Pr(e,r);else{if(i=e.current.alternate,!(r&30)&&!wL(i)&&(t=th(e,r),t===2&&(a=hd(e),a!==0&&(r=a,t=Bd(e,a))),t===1))throw n=Hl,Cs(e,0),Pr(e,r),Pn(e,Ee()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(lt(345));case 2:ys(e,En,Qi);break;case 3:if(Pr(e,r),(r&130023424)===r&&(t=Zg+500-Ee(),10<t)){if(Ac(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){mn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=yd(ys.bind(null,e,En,Qi),t);break}ys(e,En,Qi);break;case 4:if(Pr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-vi(r);a=1<<u,u=t[u],u>i&&(i=u),r&=~a}if(r=i,r=Ee()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xL(r/1960))-r,10<r){e.timeoutHandle=yd(ys.bind(null,e,En,Qi),r);break}ys(e,En,Qi);break;case 5:ys(e,En,Qi);break;default:throw Error(lt(329))}}}return Pn(e,Ee()),e.callbackNode===n?A0.bind(null,e):null}function Bd(e,t){var n=_l;return e.current.memoizedState.isDehydrated&&(Cs(e,t).flags|=256),e=th(e,t),e!==2&&(t=En,En=n,t!==null&&jd(t)),e}function jd(e){En===null?En=e:En.push.apply(En,e)}function wL(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!xi(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pr(e,t){for(t&=~Vg,t&=~Ph,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vi(t),r=1<<n;e[n]=-1,t&=~r}}function Bm(e){if(Yt&6)throw Error(lt(327));Fo();var t=Ac(e,0);if(!(t&1))return Pn(e,Ee()),null;var n=th(e,t);if(e.tag!==0&&n===2){var r=hd(e);r!==0&&(t=r,n=Bd(e,r))}if(n===1)throw n=Hl,Cs(e,0),Pr(e,t),Pn(e,Ee()),n;if(n===6)throw Error(lt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ys(e,En,Qi),Pn(e,Ee()),null}function Yg(e,t){var n=Yt;Yt|=1;try{return e(t)}finally{Yt=n,Yt===0&&(Yo=Ee()+500,Sh&&qr())}}function As(e){Ir!==null&&Ir.tag===0&&!(Yt&6)&&Fo();var t=Yt;Yt|=1;var n=si.transition,r=ne;try{if(si.transition=null,ne=1,e)return e()}finally{ne=r,si.transition=n,Yt=t,!(Yt&6)&&qr()}}function qg(){Rn=Io.current,ce(Io)}function Cs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Kk(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(Cg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uc();break;case 3:Vo(),ce(Cn),ce(an),zg();break;case 5:Ag(r);break;case 4:Vo();break;case 13:ce(ge);break;case 19:ce(ge);break;case 10:Ig(r.type._context);break;case 22:case 23:qg()}n=n.return}if(He=e,Ce=e=Ur(e.current,null),$e=Rn=t,Oe=0,Hl=null,Vg=Ph=Rs=0,En=_l=null,bs!==null){for(t=0;t<bs.length;t++)if(n=bs[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var u=a.next;a.next=i,r.next=u}n.pending=r}bs=null}return e}function z0(e,t){do{var n=Ce;try{if(Ng(),wc.current=$c,Xc){for(var r=ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Xc=!1}if(Ds=0,je=Ne=ve=null,pl=!1,Bl=0,Wg.current=null,n===null||n.return===null){Oe=1,Hl=t,Ce=null;break}t:{var a=e,u=n.return,f=n,g=t;if(t=$e,f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var _=g,v=f,x=v.tag;if(!(v.mode&1)&&(x===0||x===11||x===15)){var k=v.alternate;k?(v.updateQueue=k.updateQueue,v.memoizedState=k.memoizedState,v.lanes=k.lanes):(v.updateQueue=null,v.memoizedState=null)}var S=Sm(u);if(S!==null){S.flags&=-257,Tm(S,u,f,a,t),S.mode&1&&Em(a,_,t),t=S,g=_;var C=t.updateQueue;if(C===null){var N=new Set;N.add(g),t.updateQueue=N}else C.add(g);break t}else{if(!(t&1)){Em(a,_,t),Xg();break t}g=Error(lt(426))}}else if(fe&&f.mode&1){var A=Sm(u);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Tm(A,u,f,a,t),Mg(Zo(g,f));break t}}a=g=Zo(g,f),Oe!==4&&(Oe=2),_l===null?_l=[a]:_l.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var P=x0(a,g,t);ym(a,P);break t;case 1:f=g;var M=a.type,O=a.stateNode;if(!(a.flags&128)&&(typeof M.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Br===null||!Br.has(O)))){a.flags|=65536,t&=-t,a.lanes|=t;var B=w0(a,f,t);ym(a,B);break t}}a=a.return}while(a!==null)}j0(n)}catch(F){t=F,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function F0(){var e=Kc.current;return Kc.current=$c,e===null?$c:e}function Xg(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),He===null||!(Rs&268435455)&&!(Ph&268435455)||Pr(He,$e)}function th(e,t){var n=Yt;Yt|=2;var r=F0();(He!==e||$e!==t)&&(Qi=null,Cs(e,t));do try{kL();break}catch(i){z0(e,i)}while(!0);if(Ng(),Yt=n,Kc.current=r,Ce!==null)throw Error(lt(261));return He=null,$e=0,Oe}function kL(){for(;Ce!==null;)B0(Ce)}function LL(){for(;Ce!==null&&!qw();)B0(Ce)}function B0(e){var t=H0(e.alternate,e,Rn);e.memoizedProps=e.pendingProps,t===null?j0(e):Ce=t,Wg.current=null}function j0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=mL(n,t),n!==null){n.flags&=32767,Ce=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Ce=null;return}}else if(n=pL(n,t,Rn),n!==null){Ce=n;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Oe===0&&(Oe=5)}function ys(e,t,n){var r=ne,i=si.transition;try{si.transition=null,ne=1,bL(e,t,n,r)}finally{si.transition=i,ne=r}return null}function bL(e,t,n,r){do Fo();while(Ir!==null);if(Yt&6)throw Error(lt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(lt(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(rk(e,a),e===He&&(Ce=He=null,$e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zu||(Zu=!0,G0(Rc,function(){return Fo(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=si.transition,si.transition=null;var u=ne;ne=1;var f=Yt;Yt|=4,Wg.current=null,vL(e,n),D0(n,e),Wk(_d),zc=!!md,_d=md=null,e.current=n,yL(n),Xw(),Yt=f,ne=u,si.transition=a}else e.current=n;if(Zu&&(Zu=!1,Ir=e,Jc=i),a=e.pendingLanes,a===0&&(Br=null),Qw(n.stateNode),Pn(e,Ee()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Qc)throw Qc=!1,e=zd,zd=null,e;return Jc&1&&e.tag!==0&&Fo(),a=e.pendingLanes,a&1?e===Fd?vl++:(vl=0,Fd=e):vl=0,qr(),null}function Fo(){if(Ir!==null){var e=xy(Jc),t=si.transition,n=ne;try{if(si.transition=null,ne=16>e?16:e,Ir===null)var r=!1;else{if(e=Ir,Ir=null,Jc=0,Yt&6)throw Error(lt(331));var i=Yt;for(Yt|=4,vt=e.current;vt!==null;){var a=vt,u=a.child;if(vt.flags&16){var f=a.deletions;if(f!==null){for(var g=0;g<f.length;g++){var _=f[g];for(vt=_;vt!==null;){var v=vt;switch(v.tag){case 0:case 11:case 15:ml(8,v,a)}var x=v.child;if(x!==null)x.return=v,vt=x;else for(;vt!==null;){v=vt;var k=v.sibling,S=v.return;if(N0(v),v===_){vt=null;break}if(k!==null){k.return=S,vt=k;break}vt=S}}}var C=a.alternate;if(C!==null){var N=C.child;if(N!==null){C.child=null;do{var A=N.sibling;N.sibling=null,N=A}while(N!==null)}}vt=a}}if(a.subtreeFlags&2064&&u!==null)u.return=a,vt=u;else t:for(;vt!==null;){if(a=vt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ml(9,a,a.return)}var P=a.sibling;if(P!==null){P.return=a.return,vt=P;break t}vt=a.return}}var M=e.current;for(vt=M;vt!==null;){u=vt;var O=u.child;if(u.subtreeFlags&2064&&O!==null)O.return=u,vt=O;else t:for(u=M;vt!==null;){if(f=vt,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:Mh(9,f)}}catch(F){ke(f,f.return,F)}if(f===u){vt=null;break t}var B=f.sibling;if(B!==null){B.return=f.return,vt=B;break t}vt=f.return}}if(Yt=i,qr(),Fi&&typeof Fi.onPostCommitFiberRoot=="function")try{Fi.onPostCommitFiberRoot(wh,e)}catch{}r=!0}return r}finally{ne=n,si.transition=t}}return!1}function jm(e,t,n){t=Zo(n,t),t=x0(e,t,1),e=Fr(e,t,1),t=mn(),e!==null&&(Jl(e,1,t),Pn(e,t))}function ke(e,t,n){if(e.tag===3)jm(e,e,n);else for(;t!==null;){if(t.tag===3){jm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Br===null||!Br.has(r))){e=Zo(n,e),e=w0(t,e,1),t=Fr(t,e,1),e=mn(),t!==null&&(Jl(t,1,e),Pn(t,e));break}}t=t.return}}function EL(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=mn(),e.pingedLanes|=e.suspendedLanes&n,He===e&&($e&n)===n&&(Oe===4||Oe===3&&($e&130023424)===$e&&500>Ee()-Zg?Cs(e,0):Vg|=n),Pn(e,t)}function U0(e,t){t===0&&(e.mode&1?(t=Au,Au<<=1,!(Au&130023424)&&(Au=4194304)):t=1);var n=mn();e=ur(e,t),e!==null&&(Jl(e,t,n),Pn(e,n))}function SL(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),U0(e,n)}function TL(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(lt(314))}r!==null&&r.delete(t),U0(e,n)}var H0;H0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Cn.current)Tn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tn=!1,gL(e,t,n);Tn=!!(e.flags&131072)}else Tn=!1,fe&&t.flags&1048576&&Zy(t,Wc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Lc(e,t),e=t.pendingProps;var i=Ho(t,an.current);zo(t,n),i=Bg(null,t,r,e,i,n);var a=jg();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mn(r)?(a=!0,Hc(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Dg(t),i.updater=Ch,t.stateNode=i,i._reactInternals=t,Sd(t,r,e,n),t=Md(null,t,r,!0,a,n)):(t.tag=0,fe&&a&&Tg(t),gn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;t:{switch(Lc(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=ML(r),e=pi(r,e),i){case 0:t=Cd(null,t,r,e,n);break t;case 1:t=Pm(null,t,r,e,n);break t;case 11:t=Cm(null,t,r,e,n);break t;case 14:t=Mm(null,t,r,pi(r.type,e),n);break t}throw Error(lt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pi(r,i),Cd(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pi(r,i),Pm(e,t,r,i,n);case 3:t:{if(E0(t),e===null)throw Error(lt(387));r=t.pendingProps,a=t.memoizedState,i=a.element,Qy(e,t),Yc(t,r,null,n);var u=t.memoizedState;if(r=u.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Zo(Error(lt(423)),t),t=Nm(e,t,r,n,i);break t}else if(r!==i){i=Zo(Error(lt(424)),t),t=Nm(e,t,r,n,i);break t}else for(An=zr(t.stateNode.containerInfo.firstChild),zn=t,fe=!0,_i=null,n=$y(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Go(),r===i){t=cr(e,t,n);break t}gn(e,t,r,n)}t=t.child}return t;case 5:return Jy(t),e===null&&Ld(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,u=i.children,vd(r,i)?u=null:a!==null&&vd(r,a)&&(t.flags|=32),b0(e,t),gn(e,t,u,n),t.child;case 6:return e===null&&Ld(t),null;case 13:return S0(e,t,n);case 4:return Rg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Wo(t,null,r,n):gn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pi(r,i),Cm(e,t,r,i,n);case 7:return gn(e,t,t.pendingProps,n),t.child;case 8:return gn(e,t,t.pendingProps.children,n),t.child;case 12:return gn(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,u=i.value,se(Vc,r._currentValue),r._currentValue=u,a!==null)if(xi(a.value,u)){if(a.children===i.children&&!Cn.current){t=cr(e,t,n);break t}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var f=a.dependencies;if(f!==null){u=a.child;for(var g=f.firstContext;g!==null;){if(g.context===r){if(a.tag===1){g=sr(-1,n&-n),g.tag=2;var _=a.updateQueue;if(_!==null){_=_.shared;var v=_.pending;v===null?g.next=g:(g.next=v.next,v.next=g),_.pending=g}}a.lanes|=n,g=a.alternate,g!==null&&(g.lanes|=n),bd(a.return,n,t),f.lanes|=n;break}g=g.next}}else if(a.tag===10)u=a.type===t.type?null:a.child;else if(a.tag===18){if(u=a.return,u===null)throw Error(lt(341));u.lanes|=n,f=u.alternate,f!==null&&(f.lanes|=n),bd(u,n,t),u=a.sibling}else u=a.child;if(u!==null)u.return=a;else for(u=a;u!==null;){if(u===t){u=null;break}if(a=u.sibling,a!==null){a.return=u.return,u=a;break}u=u.return}a=u}gn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,zo(t,n),i=oi(i),r=r(i),t.flags|=1,gn(e,t,r,n),t.child;case 14:return r=t.type,i=pi(r,t.pendingProps),i=pi(r.type,i),Mm(e,t,r,i,n);case 15:return k0(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pi(r,i),Lc(e,t),t.tag=1,Mn(r)?(e=!0,Hc(t)):e=!1,zo(t,n),y0(t,r,i),Sd(t,r,i,n),Md(null,t,r,!0,e,n);case 19:return T0(e,t,n);case 22:return L0(e,t,n)}throw Error(lt(156,t.tag))};function G0(e,t){return my(e,t)}function CL(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(e,t,n,r){return new CL(e,t,n,r)}function $g(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ML(e){if(typeof e=="function")return $g(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pg)return 11;if(e===mg)return 14}return 2}function Ur(e,t){var n=e.alternate;return n===null?(n=ii(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Sc(e,t,n,r,i,a){var u=2;if(r=e,typeof e=="function")$g(e)&&(u=1);else if(typeof e=="string")u=5;else t:switch(e){case ko:return Ms(n.children,i,a,t);case gg:u=8,i|=8;break;case $f:return e=ii(12,n,t,i|2),e.elementType=$f,e.lanes=a,e;case Kf:return e=ii(13,n,t,i),e.elementType=Kf,e.lanes=a,e;case Qf:return e=ii(19,n,t,i),e.elementType=Qf,e.lanes=a,e;case Jv:return Nh(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Kv:u=10;break t;case Qv:u=9;break t;case pg:u=11;break t;case mg:u=14;break t;case Tr:u=16,r=null;break t}throw Error(lt(130,e==null?e:typeof e,""))}return t=ii(u,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Ms(e,t,n,r){return e=ii(7,e,r,t),e.lanes=n,e}function Nh(e,t,n,r){return e=ii(22,e,r,t),e.elementType=Jv,e.lanes=n,e.stateNode={isHidden:!1},e}function Nf(e,t,n){return e=ii(6,e,null,t),e.lanes=n,e}function If(e,t,n){return t=ii(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function PL(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ff(0),this.expirationTimes=ff(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ff(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kg(e,t,n,r,i,a,u,f,g){return e=new PL(e,t,n,f,g),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ii(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dg(a),e}function NL(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function W0(e){if(!e)return Wr;e=e._reactInternals;t:{if(Us(e)!==e||e.tag!==1)throw Error(lt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Mn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(lt(171))}if(e.tag===1){var n=e.type;if(Mn(n))return Wy(e,n,t)}return t}function V0(e,t,n,r,i,a,u,f,g){return e=Kg(n,r,!0,e,i,a,u,f,g),e.context=W0(null),n=e.current,r=mn(),i=jr(n),a=sr(r,i),a.callback=t??null,Fr(n,a,i),e.current.lanes=i,Jl(e,i,r),Pn(e,r),e}function Ih(e,t,n,r){var i=t.current,a=mn(),u=jr(i);return n=W0(n),t.context===null?t.context=n:t.pendingContext=n,t=sr(a,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Fr(i,t,u),e!==null&&(yi(e,i,u,a),xc(e,i,u)),u}function eh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Um(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qg(e,t){Um(e,t),(e=e.alternate)&&Um(e,t)}function IL(){return null}var Z0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jg(e){this._internalRoot=e}Oh.prototype.render=Jg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(lt(409));Ih(e,t,null,null)};Oh.prototype.unmount=Jg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;As(function(){Ih(null,e,null,null)}),t[lr]=null}};function Oh(e){this._internalRoot=e}Oh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ly();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mr.length&&t!==0&&t<Mr[n].priority;n++);Mr.splice(n,0,e),n===0&&Ey(e)}};function tp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Dh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hm(){}function OL(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var _=eh(u);a.call(_)}}var u=V0(t,r,e,0,null,!1,!1,"",Hm);return e._reactRootContainer=u,e[lr]=u.current,Dl(e.nodeType===8?e.parentNode:e),As(),u}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var f=r;r=function(){var _=eh(g);f.call(_)}}var g=Kg(e,0,!1,null,null,!1,!1,"",Hm);return e._reactRootContainer=g,e[lr]=g.current,Dl(e.nodeType===8?e.parentNode:e),As(function(){Ih(t,g,n,r)}),g}function Rh(e,t,n,r,i){var a=n._reactRootContainer;if(a){var u=a;if(typeof i=="function"){var f=i;i=function(){var g=eh(u);f.call(g)}}Ih(t,u,e,i)}else u=OL(n,t,e,i,r);return eh(u)}wy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=el(t.pendingLanes);n!==0&&(yg(t,n|1),Pn(t,Ee()),!(Yt&6)&&(Yo=Ee()+500,qr()))}break;case 13:As(function(){var r=ur(e,1);if(r!==null){var i=mn();yi(r,e,1,i)}}),Qg(e,1)}};xg=function(e){if(e.tag===13){var t=ur(e,134217728);if(t!==null){var n=mn();yi(t,e,134217728,n)}Qg(e,134217728)}};ky=function(e){if(e.tag===13){var t=jr(e),n=ur(e,t);if(n!==null){var r=mn();yi(n,e,t,r)}Qg(e,t)}};Ly=function(){return ne};by=function(e,t){var n=ne;try{return ne=e,t()}finally{ne=n}};ld=function(e,t,n){switch(t){case"input":if(ed(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Eh(r);if(!i)throw Error(lt(90));ey(r),ed(r,i)}}}break;case"textarea":iy(e,n);break;case"select":t=n.value,t!=null&&Oo(e,!!n.multiple,t,!1)}};cy=Yg;hy=As;var DL={usingClientEntryPoint:!1,Events:[eu,So,Eh,ly,uy,Yg]},Ya={findFiberByHostInstance:Ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RL={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gy(e),e===null?null:e.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||IL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yu.isDisabled&&Yu.supportsFiber)try{wh=Yu.inject(RL),Fi=Yu}catch{}}Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DL;Bn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tp(t))throw Error(lt(200));return NL(e,t,null,n)};Bn.createRoot=function(e,t){if(!tp(e))throw Error(lt(299));var n=!1,r="",i=Z0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Kg(e,1,!1,null,null,n,!1,r,i),e[lr]=t.current,Dl(e.nodeType===8?e.parentNode:e),new Jg(t)};Bn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(lt(188)):(e=Object.keys(e).join(","),Error(lt(268,e)));return e=gy(t),e=e===null?null:e.stateNode,e};Bn.flushSync=function(e){return As(e)};Bn.hydrate=function(e,t,n){if(!Dh(t))throw Error(lt(200));return Rh(null,e,t,!0,n)};Bn.hydrateRoot=function(e,t,n){if(!tp(e))throw Error(lt(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",u=Z0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=V0(t,null,e,1,n??null,i,!1,a,u),e[lr]=t.current,Dl(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Oh(t)};Bn.render=function(e,t,n){if(!Dh(t))throw Error(lt(200));return Rh(null,e,t,!1,n)};Bn.unmountComponentAtNode=function(e){if(!Dh(e))throw Error(lt(40));return e._reactRootContainer?(As(function(){Rh(null,null,e,!1,function(){e._reactRootContainer=null,e[lr]=null})}),!0):!1};Bn.unstable_batchedUpdates=Yg;Bn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Dh(n))throw Error(lt(200));if(e==null||e._reactInternals===void 0)throw Error(lt(38));return Rh(e,t,n,!1,r)};Bn.version="18.3.1-next-f1338f8080-20240426";function Y0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y0)}catch(e){console.error(e)}}Y0(),Yv.exports=Bn;var q0=Yv.exports,X0,Gm=q0;X0=Gm.createRoot,Gm.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ge=(e,t)=>{const n=it.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:u,className:f="",children:g,..._},v)=>it.createElement("svg",{ref:v,...AL,width:i,height:i,stroke:r,strokeWidth:u?Number(a)*24/Number(i):a,className:["lucide",`lucide-${zL(e)}`,f].join(" "),..._},[...t.map(([x,k])=>it.createElement(x,k)),...Array.isArray(g)?g:[g]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=Ge("BarChartBig",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["rect",{width:"4",height:"7",x:"7",y:"10",rx:"1",key:"14u6mf"}],["rect",{width:"4",height:"12",x:"15",y:"5",rx:"1",key:"b3pek6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=Ge("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=Ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=Ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=Ge("CircleDashed",[["path",{d:"M10.1 2.182a10 10 0 0 1 3.8 0",key:"5ilxe3"}],["path",{d:"M13.9 21.818a10 10 0 0 1-3.8 0",key:"11zvb9"}],["path",{d:"M17.609 3.721a10 10 0 0 1 2.69 2.7",key:"1iw5b2"}],["path",{d:"M2.182 13.9a10 10 0 0 1 0-3.8",key:"c0bmvh"}],["path",{d:"M20.279 17.609a10 10 0 0 1-2.7 2.69",key:"1ruxm7"}],["path",{d:"M21.818 10.1a10 10 0 0 1 0 3.8",key:"qkgqxc"}],["path",{d:"M3.721 6.391a10 10 0 0 1 2.7-2.69",key:"1mcia2"}],["path",{d:"M6.391 20.279a10 10 0 0 1-2.69-2.7",key:"1fvljs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=Ge("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=Ge("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=Ge("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=Ge("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=Ge("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=Ge("Scaling",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M14 15H9v-5",key:"pi4jk9"}],["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M21 3 9 15",key:"15kdhq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=Ge("ScissorsSquare",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"2",key:"1btzen"}],["circle",{cx:"8",cy:"8",r:"2",key:"14cg06"}],["path",{d:"M9.414 9.414 12 12",key:"qz4lzr"}],["path",{d:"M14.8 14.8 18 18",key:"11flf1"}],["circle",{cx:"8",cy:"16",r:"2",key:"1acxsx"}],["path",{d:"m18 6-8.586 8.586",key:"11kzk1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=Ge("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=Ge("TreeDeciduous",[["path",{d:"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z",key:"oadzkq"}],["path",{d:"M12 19v3",key:"npa21l"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=Ge("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=Ge("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16v0H5v0h0a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"yh07w9"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=Ge("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=Ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ih=({titleContent:e,children:t,iconSize:n=18,className:r,popoverWidthClass:i="w-72 md:w-80"})=>{const[a,u]=it.useState(!1),f=it.useRef(null),g=it.useRef(null),_=v=>{v.stopPropagation(),u(!a)};return it.useEffect(()=>{const v=x=>{a&&f.current&&!f.current.contains(x.target)&&g.current&&!g.current.contains(x.target)&&u(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[a]),I.jsxs("div",{className:"relative inline-flex",children:[I.jsx("button",{ref:g,onClick:_,className:`text-gray-500 hover:text-primary-600 focus:outline-none ${r}`,"aria-expanded":a,"aria-label":"More information",children:I.jsx(Q0,{size:n})}),a&&I.jsx("div",{ref:f,role:"dialog","aria-modal":"true","aria-labelledby":"info-popover-title",className:`absolute z-50 mt-2 ${i} 
                     max-h-[80vh] overflow-y-auto /* Add scroll for very tall content */
                     origin-top-right right-0 
                     bg-white rounded-lg shadow-xl border border-gray-200
                     animate-fade-in`,style:{top:"calc(100% + 0.5rem)",right:0},children:I.jsxs("div",{className:"p-4",children:[" ",I.jsxs("div",{className:"flex justify-between items-center mb-3",children:[I.jsx("h3",{id:"info-popover-title",className:"text-md font-semibold text-gray-800",children:e}),I.jsx("button",{onClick:()=>u(!1),className:"p-1 text-gray-400 hover:text-gray-700 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-1 ring-inset focus:ring-gray-400","aria-label":"Close popover",children:I.jsx(ix,{size:20})})]}),I.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:t})]})})]})},YL=()=>{const e=I.jsxs(I.Fragment,{children:[I.jsx("p",{children:"This dashboard visualizes urban tree data for Pune, including:"}),I.jsxs("ul",{className:"list-disc list-inside pl-2 mt-1 space-y-1",children:[I.jsx("li",{children:"CO₂ sequestration levels"}),I.jsx("li",{children:"Tree locations and details"}),I.jsx("li",{children:"Ward-wise statistics"})]}),I.jsx("p",{className:"mt-2",children:"You can explore tree details, analyze specific neighborhoods using drawing tools, and get planting advice."})]});return I.jsx("header",{className:"bg-primary-600 text-white shadow-md",children:I.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center",children:[I.jsx(tx,{size:24,className:"mr-2"}),I.jsx("h1",{className:"text-xl font-bold",children:"Pune Urban Tree Dashboard"}),I.jsx("div",{className:"ml-auto flex items-center space-x-4",children:I.jsx(ih,{titleContent:"About This Dashboard",iconSize:20,className:"text-white hover:text-gray-200",children:e})})]})})};var Ud={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(Rv,function(n){var r="1.9.4";function i(l){var d,m,w,E;for(m=1,w=arguments.length;m<w;m++){E=arguments[m];for(d in E)l[d]=E[d]}return l}var a=Object.create||function(){function l(){}return function(d){return l.prototype=d,new l}}();function u(l,d){var m=Array.prototype.slice;if(l.bind)return l.bind.apply(l,m.call(arguments,1));var w=m.call(arguments,2);return function(){return l.apply(d,w.length?w.concat(m.call(arguments)):arguments)}}var f=0;function g(l){return"_leaflet_id"in l||(l._leaflet_id=++f),l._leaflet_id}function _(l,d,m){var w,E,R,U;return U=function(){w=!1,E&&(R.apply(m,E),E=!1)},R=function(){w?E=arguments:(l.apply(m,arguments),setTimeout(U,d),w=!0)},R}function v(l,d,m){var w=d[1],E=d[0],R=w-E;return l===w&&m?l:((l-E)%R+R)%R+E}function x(){return!1}function k(l,d){if(d===!1)return l;var m=Math.pow(10,d===void 0?6:d);return Math.round(l*m)/m}function S(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function C(l){return S(l).split(/\s+/)}function N(l,d){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?a(l.options):{});for(var m in d)l.options[m]=d[m];return l.options}function A(l,d,m){var w=[];for(var E in l)w.push(encodeURIComponent(m?E.toUpperCase():E)+"="+encodeURIComponent(l[E]));return(!d||d.indexOf("?")===-1?"?":"&")+w.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function M(l,d){return l.replace(P,function(m,w){var E=d[w];if(E===void 0)throw new Error("No value provided for variable "+m);return typeof E=="function"&&(E=E(d)),E})}var O=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function B(l,d){for(var m=0;m<l.length;m++)if(l[m]===d)return m;return-1}var F="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function G(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var H=0;function V(l){var d=+new Date,m=Math.max(0,16-(d-H));return H=d+m,window.setTimeout(l,m)}var $=window.requestAnimationFrame||G("RequestAnimationFrame")||V,et=window.cancelAnimationFrame||G("CancelAnimationFrame")||G("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function nt(l,d,m){if(m&&$===V)l.call(d);else return $.call(window,u(l,d))}function at(l){l&&et.call(window,l)}var rt={__proto__:null,extend:i,create:a,bind:u,get lastId(){return f},stamp:g,throttle:_,wrapNum:v,falseFn:x,formatNum:k,trim:S,splitWords:C,setOptions:N,getParamString:A,template:M,isArray:O,indexOf:B,emptyImageUrl:F,requestFn:$,cancelFn:et,requestAnimFrame:nt,cancelAnimFrame:at};function tt(){}tt.extend=function(l){var d=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=d.__super__=this.prototype,w=a(m);w.constructor=d,d.prototype=w;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(d[E]=this[E]);return l.statics&&i(d,l.statics),l.includes&&(ht(l.includes),i.apply(null,[w].concat(l.includes))),i(w,l),delete w.statics,delete w.includes,w.options&&(w.options=m.options?a(m.options):{},i(w.options,l.options)),w._initHooks=[],w.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,U=w._initHooks.length;R<U;R++)w._initHooks[R].call(this)}},d},tt.include=function(l){var d=this.prototype.options;return i(this.prototype,l),l.options&&(this.prototype.options=d,this.mergeOptions(l.options)),this},tt.mergeOptions=function(l){return i(this.prototype.options,l),this},tt.addInitHook=function(l){var d=Array.prototype.slice.call(arguments,1),m=typeof l=="function"?l:function(){this[l].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function ht(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=O(l)?l:[l];for(var d=0;d<l.length;d++)l[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var gt={on:function(l,d,m){if(typeof l=="object")for(var w in l)this._on(w,l[w],d);else{l=C(l);for(var E=0,R=l.length;E<R;E++)this._on(l[E],d,m)}return this},off:function(l,d,m){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var w in l)this._off(w,l[w],d);else{l=C(l);for(var E=arguments.length===1,R=0,U=l.length;R<U;R++)E?this._off(l[R]):this._off(l[R],d,m)}return this},_on:function(l,d,m,w){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(l,d,m)===!1){m===this&&(m=void 0);var E={fn:d,ctx:m};w&&(E.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(E)}},_off:function(l,d,m){var w,E,R;if(this._events&&(w=this._events[l],!!w)){if(arguments.length===1){if(this._firingCount)for(E=0,R=w.length;E<R;E++)w[E].fn=x;delete this._events[l];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var U=this._listens(l,d,m);if(U!==!1){var q=w[U];this._firingCount&&(q.fn=x,this._events[l]=w=w.slice()),w.splice(U,1)}}},fire:function(l,d,m){if(!this.listens(l,m))return this;var w=i({},d,{type:l,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var E=this._events[l];if(E){this._firingCount=this._firingCount+1||1;for(var R=0,U=E.length;R<U;R++){var q=E[R],K=q.fn;q.once&&this.off(l,K,q.ctx),K.call(q.ctx||this,w)}this._firingCount--}}return m&&this._propagateEvent(w),this},listens:function(l,d,m,w){typeof l!="string"&&console.warn('"string" type argument expected');var E=d;typeof d!="function"&&(w=!!d,E=void 0,m=void 0);var R=this._events&&this._events[l];if(R&&R.length&&this._listens(l,E,m)!==!1)return!0;if(w){for(var U in this._eventParents)if(this._eventParents[U].listens(l,d,m,w))return!0}return!1},_listens:function(l,d,m){if(!this._events)return!1;var w=this._events[l]||[];if(!d)return!!w.length;m===this&&(m=void 0);for(var E=0,R=w.length;E<R;E++)if(w[E].fn===d&&w[E].ctx===m)return E;return!1},once:function(l,d,m){if(typeof l=="object")for(var w in l)this._on(w,l[w],d,!0);else{l=C(l);for(var E=0,R=l.length;E<R;E++)this._on(l[E],d,m,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[g(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[g(l)],this},_propagateEvent:function(l){for(var d in this._eventParents)this._eventParents[d].fire(l.type,i({layer:l.target,propagatedFrom:l.target},l),!0)}};gt.addEventListener=gt.on,gt.removeEventListener=gt.clearAllEventListeners=gt.off,gt.addOneTimeEventListener=gt.once,gt.fireEvent=gt.fire,gt.hasEventListeners=gt.listens;var xt=tt.extend(gt);function Q(l,d,m){this.x=m?Math.round(l):l,this.y=m?Math.round(d):d}var dt=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};Q.prototype={clone:function(){return new Q(this.x,this.y)},add:function(l){return this.clone()._add(X(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(X(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new Q(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new Q(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=dt(this.x),this.y=dt(this.y),this},distanceTo:function(l){l=X(l);var d=l.x-this.x,m=l.y-this.y;return Math.sqrt(d*d+m*m)},equals:function(l){return l=X(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=X(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+k(this.x)+", "+k(this.y)+")"}};function X(l,d,m){return l instanceof Q?l:O(l)?new Q(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new Q(l.x,l.y):new Q(l,d,m)}function _t(l,d){if(l)for(var m=d?[l,d]:l,w=0,E=m.length;w<E;w++)this.extend(m[w])}_t.prototype={extend:function(l){var d,m;if(!l)return this;if(l instanceof Q||typeof l[0]=="number"||"x"in l)d=m=X(l);else if(l=wt(l),d=l.min,m=l.max,!d||!m)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=m.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(l){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var d,m;return typeof l[0]=="number"||l instanceof Q?l=X(l):l=wt(l),l instanceof _t?(d=l.min,m=l.max):d=m=l,d.x>=this.min.x&&m.x<=this.max.x&&d.y>=this.min.y&&m.y<=this.max.y},intersects:function(l){l=wt(l);var d=this.min,m=this.max,w=l.min,E=l.max,R=E.x>=d.x&&w.x<=m.x,U=E.y>=d.y&&w.y<=m.y;return R&&U},overlaps:function(l){l=wt(l);var d=this.min,m=this.max,w=l.min,E=l.max,R=E.x>d.x&&w.x<m.x,U=E.y>d.y&&w.y<m.y;return R&&U},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var d=this.min,m=this.max,w=Math.abs(d.x-m.x)*l,E=Math.abs(d.y-m.y)*l;return wt(X(d.x-w,d.y-E),X(m.x+w,m.y+E))},equals:function(l){return l?(l=wt(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function wt(l,d){return!l||l instanceof _t?l:new _t(l,d)}function zt(l,d){if(l)for(var m=d?[l,d]:l,w=0,E=m.length;w<E;w++)this.extend(m[w])}zt.prototype={extend:function(l){var d=this._southWest,m=this._northEast,w,E;if(l instanceof Nt)w=l,E=l;else if(l instanceof zt){if(w=l._southWest,E=l._northEast,!w||!E)return this}else return l?this.extend(St(l)||pt(l)):this;return!d&&!m?(this._southWest=new Nt(w.lat,w.lng),this._northEast=new Nt(E.lat,E.lng)):(d.lat=Math.min(w.lat,d.lat),d.lng=Math.min(w.lng,d.lng),m.lat=Math.max(E.lat,m.lat),m.lng=Math.max(E.lng,m.lng)),this},pad:function(l){var d=this._southWest,m=this._northEast,w=Math.abs(d.lat-m.lat)*l,E=Math.abs(d.lng-m.lng)*l;return new zt(new Nt(d.lat-w,d.lng-E),new Nt(m.lat+w,m.lng+E))},getCenter:function(){return new Nt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Nt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Nt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof Nt||"lat"in l?l=St(l):l=pt(l);var d=this._southWest,m=this._northEast,w,E;return l instanceof zt?(w=l.getSouthWest(),E=l.getNorthEast()):w=E=l,w.lat>=d.lat&&E.lat<=m.lat&&w.lng>=d.lng&&E.lng<=m.lng},intersects:function(l){l=pt(l);var d=this._southWest,m=this._northEast,w=l.getSouthWest(),E=l.getNorthEast(),R=E.lat>=d.lat&&w.lat<=m.lat,U=E.lng>=d.lng&&w.lng<=m.lng;return R&&U},overlaps:function(l){l=pt(l);var d=this._southWest,m=this._northEast,w=l.getSouthWest(),E=l.getNorthEast(),R=E.lat>d.lat&&w.lat<m.lat,U=E.lng>d.lng&&w.lng<m.lng;return R&&U},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,d){return l?(l=pt(l),this._southWest.equals(l.getSouthWest(),d)&&this._northEast.equals(l.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function pt(l,d){return l instanceof zt?l:new zt(l,d)}function Nt(l,d,m){if(isNaN(l)||isNaN(d))throw new Error("Invalid LatLng object: ("+l+", "+d+")");this.lat=+l,this.lng=+d,m!==void 0&&(this.alt=+m)}Nt.prototype={equals:function(l,d){if(!l)return!1;l=St(l);var m=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return m<=(d===void 0?1e-9:d)},toString:function(l){return"LatLng("+k(this.lat,l)+", "+k(this.lng,l)+")"},distanceTo:function(l){return Z.distance(this,St(l))},wrap:function(){return Z.wrapLatLng(this)},toBounds:function(l){var d=180*l/40075017,m=d/Math.cos(Math.PI/180*this.lat);return pt([this.lat-d,this.lng-m],[this.lat+d,this.lng+m])},clone:function(){return new Nt(this.lat,this.lng,this.alt)}};function St(l,d,m){return l instanceof Nt?l:O(l)&&typeof l[0]!="object"?l.length===3?new Nt(l[0],l[1],l[2]):l.length===2?new Nt(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new Nt(l.lat,"lng"in l?l.lng:l.lon,l.alt):d===void 0?null:new Nt(l,d,m)}var We={latLngToPoint:function(l,d){var m=this.projection.project(l),w=this.scale(d);return this.transformation._transform(m,w)},pointToLatLng:function(l,d){var m=this.scale(d),w=this.transformation.untransform(l,m);return this.projection.unproject(w)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var d=this.projection.bounds,m=this.scale(l),w=this.transformation.transform(d.min,m),E=this.transformation.transform(d.max,m);return new _t(w,E)},infinite:!1,wrapLatLng:function(l){var d=this.wrapLng?v(l.lng,this.wrapLng,!0):l.lng,m=this.wrapLat?v(l.lat,this.wrapLat,!0):l.lat,w=l.alt;return new Nt(m,d,w)},wrapLatLngBounds:function(l){var d=l.getCenter(),m=this.wrapLatLng(d),w=d.lat-m.lat,E=d.lng-m.lng;if(w===0&&E===0)return l;var R=l.getSouthWest(),U=l.getNorthEast(),q=new Nt(R.lat-w,R.lng-E),K=new Nt(U.lat-w,U.lng-E);return new zt(q,K)}},Z=i({},We,{wrapLng:[-180,180],R:6371e3,distance:function(l,d){var m=Math.PI/180,w=l.lat*m,E=d.lat*m,R=Math.sin((d.lat-l.lat)*m/2),U=Math.sin((d.lng-l.lng)*m/2),q=R*R+Math.cos(w)*Math.cos(E)*U*U,K=2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q));return this.R*K}}),uu=6378137,$t={R:uu,MAX_LATITUDE:85.0511287798,project:function(l){var d=Math.PI/180,m=this.MAX_LATITUDE,w=Math.max(Math.min(m,l.lat),-m),E=Math.sin(w*d);return new Q(this.R*l.lng*d,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(l){var d=180/Math.PI;return new Nt((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*d,l.x*d/this.R)},bounds:function(){var l=uu*Math.PI;return new _t([-l,-l],[l,l])}()};function kt(l,d,m,w){if(O(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=d,this._c=m,this._d=w}kt.prototype={transform:function(l,d){return this._transform(l.clone(),d)},_transform:function(l,d){return d=d||1,l.x=d*(this._a*l.x+this._b),l.y=d*(this._c*l.y+this._d),l},untransform:function(l,d){return d=d||1,new Q((l.x/d-this._b)/this._a,(l.y/d-this._d)/this._c)}};function j(l,d,m,w){return new kt(l,d,m,w)}var xn=i({},Z,{code:"EPSG:3857",projection:$t,transformation:function(){var l=.5/(Math.PI*$t.R);return j(l,.5,-l,.5)}()}),Gs=i({},xn,{code:"EPSG:900913"});function ui(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function la(l,d){var m="",w,E,R,U,q,K;for(w=0,R=l.length;w<R;w++){for(q=l[w],E=0,U=q.length;E<U;E++)K=q[E],m+=(E?"L":"M")+K.x+" "+K.y;m+=d?Lt.svg?"z":"x":""}return m||"M0 0"}var Kr=document.documentElement.style,Ws="ActiveXObject"in window,ut=Ws&&!document.addEventListener,ua="msLaunchUri"in navigator&&!("documentMode"in document),Vs=Re("webkit"),wi=Re("android"),cu=Re("android 2")||Re("android 3"),Ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qr=wi&&Re("Google")&&Ot<537&&!("AudioNode"in window),fr=!!window.opera,Zs=!ua&&Re("chrome"),Ct=Re("gecko")&&!Vs&&!fr&&!Ws,ca=!Zs&&Re("safari"),Bt=Re("phantom"),Mt="OTransition"in Kr,Hh=navigator.platform.indexOf("Win")===0,Un=Ws&&"transition"in Kr,ha="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!cu,Tt="MozPerspective"in Kr,Gh=!window.L_DISABLE_3D&&(Un||ha||Tt)&&!Mt&&!Bt,Jr=typeof orientation<"u"||Re("mobile"),fa=Jr&&Vs,wn=Jr&&ha,dr=!window.PointerEvent&&window.MSPointerEvent,In=!!(window.PointerEvent||dr),da="ontouchstart"in window||!!window.TouchEvent,Ys=!window.L_NO_TOUCH&&(da||In),Wh=Jr&&fr,hu=Jr&&Ct,Ui=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ct=function(){var l=!1;try{var d=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",x,d),window.removeEventListener("testPassiveEventSupport",x,d)}catch{}return l}(),qs=function(){return!!document.createElement("canvas").getContext}(),gr=!!(document.createElementNS&&ui("svg").createSVGRect),ts=!!gr&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),fu=!gr&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var d=l.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}}(),ga=navigator.platform.indexOf("Mac")===0,du=navigator.platform.indexOf("Linux")===0;function Re(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var Lt={ie:Ws,ielt9:ut,edge:ua,webkit:Vs,android:wi,android23:cu,androidStock:Qr,opera:fr,chrome:Zs,gecko:Ct,safari:ca,phantom:Bt,opera12:Mt,win:Hh,ie3d:Un,webkit3d:ha,gecko3d:Tt,any3d:Gh,mobile:Jr,mobileWebkit:fa,mobileWebkit3d:wn,msPointer:dr,pointer:In,touch:Ys,touchNative:da,mobileOpera:Wh,mobileGecko:hu,retina:Ui,passiveEvents:ct,canvas:qs,svg:gr,vml:fu,inlineSvg:ts,mac:ga,linux:du},es=Lt.msPointer?"MSPointerDown":"pointerdown",gu=Lt.msPointer?"MSPointerMove":"pointermove",pa=Lt.msPointer?"MSPointerUp":"pointerup",pu=Lt.msPointer?"MSPointerCancel":"pointercancel",Ve={touchstart:es,touchmove:gu,touchend:pa,touchcancel:pu},Xs={touchstart:Qs,touchmove:Ks,touchend:Ks,touchcancel:Ks},Hn={},ki=!1;function Hi(l,d,m){return d==="touchstart"&&Vh(),Xs[d]?(m=Xs[d].bind(this,m),l.addEventListener(Ve[d],m,!1),m):(console.warn("wrong event specified:",d),x)}function ma(l,d,m){if(!Ve[d]){console.warn("wrong event specified:",d);return}l.removeEventListener(Ve[d],m,!1)}function $s(l){Hn[l.pointerId]=l}function ns(l){Hn[l.pointerId]&&(Hn[l.pointerId]=l)}function xe(l){delete Hn[l.pointerId]}function Vh(){ki||(document.addEventListener(es,$s,!0),document.addEventListener(gu,ns,!0),document.addEventListener(pa,xe,!0),document.addEventListener(pu,xe,!0),ki=!0)}function Ks(l,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var m in Hn)d.touches.push(Hn[m]);d.changedTouches=[d],l(d)}}function Qs(l,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&de(d),Ks(l,d)}function is(l){var d={},m,w;for(w in l)m=l[w],d[w]=m&&m.bind?m.bind(l):m;return l=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var _a=200;function va(l,d){l.addEventListener("dblclick",d);var m=0,w;function E(R){if(R.detail!==1){w=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var U=ze(R);if(!(U.some(function(K){return K instanceof HTMLLabelElement&&K.attributes.for})&&!U.some(function(K){return K instanceof HTMLInputElement||K instanceof HTMLSelectElement}))){var q=Date.now();q-m<=_a?(w++,w===2&&d(is(R))):w=1,m=q}}}return l.addEventListener("click",E),{dblclick:d,simDblclick:E}}function mu(l,d){l.removeEventListener("dblclick",d.dblclick),l.removeEventListener("click",d.simDblclick)}var ya=no(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ze=no(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Gi=Ze==="webkitTransition"||Ze==="OTransition"?Ze+"End":"transitionend";function Js(l){return typeof l=="string"?document.getElementById(l):l}function Gn(l,d){var m=l.style[d]||l.currentStyle&&l.currentStyle[d];if((!m||m==="auto")&&document.defaultView){var w=document.defaultView.getComputedStyle(l,null);m=w?w[d]:null}return m==="auto"?null:m}function Ht(l,d,m){var w=document.createElement(l);return w.className=d||"",m&&m.appendChild(w),w}function ae(l){var d=l.parentNode;d&&d.removeChild(l)}function to(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function pr(l){var d=l.parentNode;d&&d.lastChild!==l&&d.appendChild(l)}function Wi(l){var d=l.parentNode;d&&d.firstChild!==l&&d.insertBefore(l,d.firstChild)}function eo(l,d){if(l.classList!==void 0)return l.classList.contains(d);var m=rs(l);return m.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(m)}function It(l,d){if(l.classList!==void 0)for(var m=C(d),w=0,E=m.length;w<E;w++)l.classList.add(m[w]);else if(!eo(l,d)){var R=rs(l);Wn(l,(R?R+" ":"")+d)}}function Xt(l,d){l.classList!==void 0?l.classList.remove(d):Wn(l,S((" "+rs(l)+" ").replace(" "+d+" "," ")))}function Wn(l,d){l.className.baseVal===void 0?l.className=d:l.className.baseVal=d}function rs(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Me(l,d){"opacity"in l.style?l.style.opacity=d:"filter"in l.style&&Zh(l,d)}function Zh(l,d){var m=!1,w="DXImageTransform.Microsoft.Alpha";try{m=l.filters.item(w)}catch{if(d===1)return}d=Math.round(d*100),m?(m.Enabled=d!==100,m.Opacity=d):l.style.filter+=" progid:"+w+"(opacity="+d+")"}function no(l){for(var d=document.documentElement.style,m=0;m<l.length;m++)if(l[m]in d)return l[m];return!1}function Vi(l,d,m){var w=d||new Q(0,0);l.style[ya]=(Lt.ie3d?"translate("+w.x+"px,"+w.y+"px)":"translate3d("+w.x+"px,"+w.y+"px,0)")+(m?" scale("+m+")":"")}function we(l,d){l._leaflet_pos=d,Lt.any3d?Vi(l,d):(l.style.left=d.x+"px",l.style.top=d.y+"px")}function Li(l){return l._leaflet_pos||new Q(0,0)}var ci,mr,xa;if("onselectstart"in document)ci=function(){Dt(window,"selectstart",de)},mr=function(){Qt(window,"selectstart",de)};else{var _r=no(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ci=function(){if(_r){var l=document.documentElement.style;xa=l[_r],l[_r]="none"}},mr=function(){_r&&(document.documentElement.style[_r]=xa,xa=void 0)}}function wa(){Dt(window,"dragstart",de)}function ss(){Qt(window,"dragstart",de)}var Kt,hi;function ka(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(vr(),Kt=l,hi=l.style.outlineStyle,l.style.outlineStyle="none",Dt(window,"keydown",vr))}function vr(){Kt&&(Kt.style.outlineStyle=hi,Kt=void 0,hi=void 0,Qt(window,"keydown",vr))}function un(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Qe(l){var d=l.getBoundingClientRect();return{x:d.width/l.offsetWidth||1,y:d.height/l.offsetHeight||1,boundingClientRect:d}}var io={__proto__:null,TRANSFORM:ya,TRANSITION:Ze,TRANSITION_END:Gi,get:Js,getStyle:Gn,create:Ht,remove:ae,empty:to,toFront:pr,toBack:Wi,hasClass:eo,addClass:It,removeClass:Xt,setClass:Wn,getClass:rs,setOpacity:Me,testProp:no,setTransform:Vi,setPosition:we,getPosition:Li,get disableTextSelection(){return ci},get enableTextSelection(){return mr},disableImageDrag:wa,enableImageDrag:ss,preventOutline:ka,restoreOutline:vr,getSizedParentNode:un,getScale:Qe};function Dt(l,d,m,w){if(d&&typeof d=="object")for(var E in d)ro(l,E,d[E],m);else{d=C(d);for(var R=0,U=d.length;R<U;R++)ro(l,d[R],m,w)}return this}var Vn="_leaflet_events";function Qt(l,d,m,w){if(arguments.length===1)os(l),delete l[Vn];else if(d&&typeof d=="object")for(var E in d)Vt(l,E,d[E],m);else if(d=C(d),arguments.length===2)os(l,function(q){return B(d,q)!==-1});else for(var R=0,U=d.length;R<U;R++)Vt(l,d[R],m,w);return this}function os(l,d){for(var m in l[Vn]){var w=m.split(/\d/)[0];(!d||d(w))&&Vt(l,w,null,null,m)}}var La={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ro(l,d,m,w){var E=d+g(m)+(w?"_"+g(w):"");if(l[Vn]&&l[Vn][E])return this;var R=function(q){return m.call(w||l,q||window.event)},U=R;!Lt.touchNative&&Lt.pointer&&d.indexOf("touch")===0?R=Hi(l,d,R):Lt.touch&&d==="dblclick"?R=va(l,R):"addEventListener"in l?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?l.addEventListener(La[d]||d,R,Lt.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(R=function(q){q=q||window.event,so(l,q)&&U(q)},l.addEventListener(La[d],R,!1)):l.addEventListener(d,U,!1):l.attachEvent("on"+d,R),l[Vn]=l[Vn]||{},l[Vn][E]=R}function Vt(l,d,m,w,E){E=E||d+g(m)+(w?"_"+g(w):"");var R=l[Vn]&&l[Vn][E];if(!R)return this;!Lt.touchNative&&Lt.pointer&&d.indexOf("touch")===0?ma(l,d,R):Lt.touch&&d==="dblclick"?mu(l,R):"removeEventListener"in l?l.removeEventListener(La[d]||d,R,!1):l.detachEvent("on"+d,R),l[Vn][E]=null}function Ae(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function as(l){return ro(l,"wheel",Ae),this}function yr(l){return Dt(l,"mousedown touchstart dblclick contextmenu",Ae),l._leaflet_disable_click=!0,this}function de(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function bi(l){return de(l),Ae(l),this}function ze(l){if(l.composedPath)return l.composedPath();for(var d=[],m=l.target;m;)d.push(m),m=m.parentNode;return d}function ba(l,d){if(!d)return new Q(l.clientX,l.clientY);var m=Qe(d),w=m.boundingClientRect;return new Q((l.clientX-w.left)/m.x-d.clientLeft,(l.clientY-w.top)/m.y-d.clientTop)}var Ea=Lt.linux&&Lt.chrome?window.devicePixelRatio:Lt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Sa(l){return Lt.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/Ea:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function so(l,d){var m=d.relatedTarget;if(!m)return!0;try{for(;m&&m!==l;)m=m.parentNode}catch{return!1}return m!==l}var Yh={__proto__:null,on:Dt,off:Qt,stopPropagation:Ae,disableScrollPropagation:as,disableClickPropagation:yr,preventDefault:de,stop:bi,getPropagationPath:ze,getMousePosition:ba,getWheelDelta:Sa,isExternalTarget:so,addListener:Dt,removeListener:Qt},Ta=xt.extend({run:function(l,d,m,w){this.stop(),this._el=l,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(w||.5,.2),this._startPos=Li(l),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=nt(this._animate,this),this._step()},_step:function(l){var d=+new Date-this._startTime,m=this._duration*1e3;d<m?this._runFrame(this._easeOut(d/m),l):(this._runFrame(1),this._complete())},_runFrame:function(l,d){var m=this._startPos.add(this._offset.multiplyBy(l));d&&m._round(),we(this._el,m),this.fire("step")},_complete:function(){at(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),Rt=xt.extend({options:{crs:xn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,d){d=N(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(St(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ze&&Lt.any3d&&!Lt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Dt(this._proxy,Gi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,d,m){if(d=d===void 0?this._zoom:this._limitZoom(d),l=this._limitCenter(St(l),d,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=i({animate:m.animate},m.zoom),m.pan=i({animate:m.animate,duration:m.duration},m.pan));var w=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,d,m.zoom):this._tryAnimatedPan(l,m.pan);if(w)return clearTimeout(this._sizeTimer),this}return this._resetView(l,d,m.pan&&m.pan.noMoveStart),this},setZoom:function(l,d){return this._loaded?this.setView(this.getCenter(),l,{zoom:d}):(this._zoom=l,this)},zoomIn:function(l,d){return l=l||(Lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,d)},zoomOut:function(l,d){return l=l||(Lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,d)},setZoomAround:function(l,d,m){var w=this.getZoomScale(d),E=this.getSize().divideBy(2),R=l instanceof Q?l:this.latLngToContainerPoint(l),U=R.subtract(E).multiplyBy(1-1/w),q=this.containerPointToLatLng(E.add(U));return this.setView(q,d,{zoom:m})},_getBoundsCenterZoom:function(l,d){d=d||{},l=l.getBounds?l.getBounds():pt(l);var m=X(d.paddingTopLeft||d.padding||[0,0]),w=X(d.paddingBottomRight||d.padding||[0,0]),E=this.getBoundsZoom(l,!1,m.add(w));if(E=typeof d.maxZoom=="number"?Math.min(d.maxZoom,E):E,E===1/0)return{center:l.getCenter(),zoom:E};var R=w.subtract(m).divideBy(2),U=this.project(l.getSouthWest(),E),q=this.project(l.getNorthEast(),E),K=this.unproject(U.add(q).divideBy(2).add(R),E);return{center:K,zoom:E}},fitBounds:function(l,d){if(l=pt(l),!l.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(l,d);return this.setView(m.center,m.zoom,d)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,d){return this.setView(l,this._zoom,{pan:d})},panBy:function(l,d){if(l=X(l).round(),d=d||{},!l.x&&!l.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ta,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){It(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,m,d.duration||.25,d.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,d,m){if(m=m||{},m.animate===!1||!Lt.any3d)return this.setView(l,d,m);this._stop();var w=this.project(this.getCenter()),E=this.project(l),R=this.getSize(),U=this._zoom;l=St(l),d=d===void 0?U:d;var q=Math.max(R.x,R.y),K=q*this.getZoomScale(U,d),ot=E.distanceTo(w)||1,mt=1.42,Pt=mt*mt;function Ft(Te){var Pu=Te?-1:1,sw=Te?K:q,ow=K*K-q*q+Pu*Pt*Pt*ot*ot,aw=2*sw*Pt*ot,of=ow/aw,Dp=Math.sqrt(of*of+1)-of,lw=Dp<1e-9?-18:Math.log(Dp);return lw}function fn(Te){return(Math.exp(Te)-Math.exp(-Te))/2}function Be(Te){return(Math.exp(Te)+Math.exp(-Te))/2}function Kn(Te){return fn(Te)/Be(Te)}var Ln=Ft(0);function mo(Te){return q*(Be(Ln)/Be(Ln+mt*Te))}function ew(Te){return q*(Be(Ln)*Kn(Ln+mt*Te)-fn(Ln))/Pt}function nw(Te){return 1-Math.pow(1-Te,1.5)}var iw=Date.now(),Ip=(Ft(1)-Ln)/mt,rw=m.duration?1e3*m.duration:1e3*Ip*.8;function Op(){var Te=(Date.now()-iw)/rw,Pu=nw(Te)*Ip;Te<=1?(this._flyToFrame=nt(Op,this),this._move(this.unproject(w.add(E.subtract(w).multiplyBy(ew(Pu)/ot)),U),this.getScaleZoom(q/mo(Pu),U),{flyTo:!0})):this._move(l,d)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),Op.call(this),this},flyToBounds:function(l,d){var m=this._getBoundsCenterZoom(l,d);return this.flyTo(m.center,m.zoom,d)},setMaxBounds:function(l){return l=pt(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var d=this.options.minZoom;return this.options.minZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var d=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,d){this._enforcingBounds=!0;var m=this.getCenter(),w=this._limitCenter(m,this._zoom,pt(l));return m.equals(w)||this.panTo(w,d),this._enforcingBounds=!1,this},panInside:function(l,d){d=d||{};var m=X(d.paddingTopLeft||d.padding||[0,0]),w=X(d.paddingBottomRight||d.padding||[0,0]),E=this.project(this.getCenter()),R=this.project(l),U=this.getPixelBounds(),q=wt([U.min.add(m),U.max.subtract(w)]),K=q.getSize();if(!q.contains(R)){this._enforcingBounds=!0;var ot=R.subtract(q.getCenter()),mt=q.extend(R).getSize().subtract(K);E.x+=ot.x<0?-mt.x:mt.x,E.y+=ot.y<0?-mt.y:mt.y,this.panTo(this.unproject(E),d),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=i({animate:!1,pan:!0},l===!0?{animate:!0}:l);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),w=d.divideBy(2).round(),E=m.divideBy(2).round(),R=w.subtract(E);return!R.x&&!R.y?this:(l.animate&&l.pan?this.panBy(R):(l.pan&&this._rawPanBy(R),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=i({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=u(this._handleGeolocationResponse,this),m=u(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,m,l):navigator.geolocation.getCurrentPosition(d,m,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var d=l.code,m=l.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var d=l.coords.latitude,m=l.coords.longitude,w=new Nt(d,m),E=w.toBounds(l.coords.accuracy*2),R=this._locateOptions;if(R.setView){var U=this.getBoundsZoom(E);this.setView(w,R.maxZoom?Math.min(U,R.maxZoom):U)}var q={latlng:w,bounds:E,timestamp:l.timestamp};for(var K in l.coords)typeof l.coords[K]=="number"&&(q[K]=l.coords[K]);this.fire("locationfound",q)}},addHandler:function(l,d){if(!d)return this;var m=this[l]=new d(this);return this._handlers.push(m),this.options[l]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(at(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)ae(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,d){var m="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),w=Ht("div",m,d||this._mapPane);return l&&(this._panes[l]=w),w},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),d=this.unproject(l.getBottomLeft()),m=this.unproject(l.getTopRight());return new zt(d,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,d,m){l=pt(l),m=X(m||[0,0]);var w=this.getZoom()||0,E=this.getMinZoom(),R=this.getMaxZoom(),U=l.getNorthWest(),q=l.getSouthEast(),K=this.getSize().subtract(m),ot=wt(this.project(q,w),this.project(U,w)).getSize(),mt=Lt.any3d?this.options.zoomSnap:1,Pt=K.x/ot.x,Ft=K.y/ot.y,fn=d?Math.max(Pt,Ft):Math.min(Pt,Ft);return w=this.getScaleZoom(fn,w),mt&&(w=Math.round(w/(mt/100))*(mt/100),w=d?Math.ceil(w/mt)*mt:Math.floor(w/mt)*mt),Math.max(E,Math.min(R,w))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,d){var m=this._getTopLeftPoint(l,d);return new _t(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,d){var m=this.options.crs;return d=d===void 0?this._zoom:d,m.scale(l)/m.scale(d)},getScaleZoom:function(l,d){var m=this.options.crs;d=d===void 0?this._zoom:d;var w=m.zoom(l*m.scale(d));return isNaN(w)?1/0:w},project:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(St(l),d)},unproject:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(X(l),d)},layerPointToLatLng:function(l){var d=X(l).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(l){var d=this.project(St(l))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(St(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(pt(l))},distance:function(l,d){return this.options.crs.distance(St(l),St(d))},containerPointToLayerPoint:function(l){return X(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return X(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var d=this.containerPointToLayerPoint(X(l));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(St(l)))},mouseEventToContainerPoint:function(l){return ba(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var d=this._container=Js(l);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Dt(d,"scroll",this._onScroll,this),this._containerId=g(d)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&Lt.any3d,It(l,"leaflet-container"+(Lt.touch?" leaflet-touch":"")+(Lt.retina?" leaflet-retina":"")+(Lt.ielt9?" leaflet-oldie":"")+(Lt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=Gn(l,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),we(this._mapPane,new Q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(It(l.markerPane,"leaflet-zoom-hide"),It(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,d,m){we(this._mapPane,new Q(0,0));var w=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var E=this._zoom!==d;this._moveStart(E,m)._move(l,d)._moveEnd(E),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(l,d){return l&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(l,d,m,w){d===void 0&&(d=this._zoom);var E=this._zoom!==d;return this._zoom=d,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),w?m&&m.pinch&&this.fire("zoom",m):((E||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return at(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){we(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[g(this._container)]=this;var d=l?Qt:Dt;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),Lt.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){at(this._resizeRequest),this._resizeRequest=nt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,d){for(var m=[],w,E=d==="mouseout"||d==="mouseover",R=l.target||l.srcElement,U=!1;R;){if(w=this._targets[g(R)],w&&(d==="click"||d==="preclick")&&this._draggableMoved(w)){U=!0;break}if(w&&w.listens(d,!0)&&(E&&!so(R,l)||(m.push(w),E))||R===this._container)break;R=R.parentNode}return!m.length&&!U&&!E&&this.listens(d,!0)&&(m=[this]),m},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var d=l.target||l.srcElement;if(!(!this._loaded||d._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(d))){var m=l.type;m==="mousedown"&&ka(d),this._fireDOMEvent(l,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,d,m){if(l.type==="click"){var w=i({},l);w.type="preclick",this._fireDOMEvent(w,w.type,m)}var E=this._findEventTargets(l,d);if(m){for(var R=[],U=0;U<m.length;U++)m[U].listens(d,!0)&&R.push(m[U]);E=R.concat(E)}if(E.length){d==="contextmenu"&&de(l);var q=E[0],K={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var ot=q.getLatLng&&(!q._radius||q._radius<=10);K.containerPoint=ot?this.latLngToContainerPoint(q.getLatLng()):this.mouseEventToContainerPoint(l),K.layerPoint=this.containerPointToLayerPoint(K.containerPoint),K.latlng=ot?q.getLatLng():this.layerPointToLatLng(K.layerPoint)}for(U=0;U<E.length;U++)if(E[U].fire(d,K,!0),K.originalEvent._stopped||E[U].options.bubblingMouseEvents===!1&&B(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,d=this._handlers.length;l<d;l++)this._handlers[l].disable()},whenReady:function(l,d){return this._loaded?l.call(d||this,{target:this}):this.on("load",l,d),this},_getMapPanePos:function(){return Li(this._mapPane)||new Q(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,d){var m=l&&d!==void 0?this._getNewPixelOrigin(l,d):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,d){var m=this.getSize()._divideBy(2);return this.project(l,d)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,d,m){var w=this._getNewPixelOrigin(m,d);return this.project(l,d)._subtract(w)},_latLngBoundsToNewLayerBounds:function(l,d,m){var w=this._getNewPixelOrigin(m,d);return wt([this.project(l.getSouthWest(),d)._subtract(w),this.project(l.getNorthWest(),d)._subtract(w),this.project(l.getSouthEast(),d)._subtract(w),this.project(l.getNorthEast(),d)._subtract(w)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,d,m){if(!m)return l;var w=this.project(l,d),E=this.getSize().divideBy(2),R=new _t(w.subtract(E),w.add(E)),U=this._getBoundsOffset(R,m,d);return Math.abs(U.x)<=1&&Math.abs(U.y)<=1?l:this.unproject(w.add(U),d)},_limitOffset:function(l,d){if(!d)return l;var m=this.getPixelBounds(),w=new _t(m.min.add(l),m.max.add(l));return l.add(this._getBoundsOffset(w,d))},_getBoundsOffset:function(l,d,m){var w=wt(this.project(d.getNorthEast(),m),this.project(d.getSouthWest(),m)),E=w.min.subtract(l.min),R=w.max.subtract(l.max),U=this._rebound(E.x,-R.x),q=this._rebound(E.y,-R.y);return new Q(U,q)},_rebound:function(l,d){return l+d>0?Math.round(l-d)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(d))},_limitZoom:function(l){var d=this.getMinZoom(),m=this.getMaxZoom(),w=Lt.any3d?this.options.zoomSnap:1;return w&&(l=Math.round(l/w)*w),Math.max(d,Math.min(m,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,d){var m=this._getCenterOffset(l)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,d),!0)},_createAnimProxy:function(){var l=this._proxy=Ht("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(d){var m=ya,w=this._proxy.style[m];Vi(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),w===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ae(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),d=this.getZoom();Vi(this._proxy,this.project(l,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,d,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var w=this.getZoomScale(d),E=this._getCenterOffset(l)._divideBy(1-1/w);return m.animate!==!0&&!this.getSize().contains(E)?!1:(nt(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(l,d,!0)},this),!0)},_animateZoom:function(l,d,m,w){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=d,It(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:d,noUpdate:w}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function oo(l,d){return new Rt(l,d)}var On=tt.extend({options:{position:"topright"},initialize:function(l){N(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var d=this._map;return d&&d.removeControl(this),this.options.position=l,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var d=this._container=this.onAdd(l),m=this.getPosition(),w=l._controlCorners[m];return It(d,"leaflet-control"),m.indexOf("bottom")!==-1?w.insertBefore(d,w.firstChild):w.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ae(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Fe=function(l){return new On(l)};Rt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},d="leaflet-",m=this._controlContainer=Ht("div",d+"control-container",this._container);function w(E,R){var U=d+E+" "+d+R;l[E+R]=Ht("div",U,m)}w("top","left"),w("top","right"),w("bottom","left"),w("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)ae(this._controlCorners[l]);ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Zi=On.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,d,m,w){return m<w?-1:w<m?1:0}},initialize:function(l,d,m){N(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var w in l)this._addLayer(l[w],w);for(w in d)this._addLayer(d[w],w,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return On.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,d){return this._addLayer(l,d),this._map?this._update():this},addOverlay:function(l,d){return this._addLayer(l,d,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var d=this._getLayer(g(l));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){It(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(It(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):Xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",d=this._container=Ht("div",l),m=this.options.collapsed;d.setAttribute("aria-haspopup",!0),yr(d),as(d);var w=this._section=Ht("section",l+"-list");m&&(this._map.on("click",this.collapse,this),Dt(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=Ht("a",l+"-toggle",d);E.href="#",E.title="Layers",E.setAttribute("role","button"),Dt(E,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){de(R),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=Ht("div",l+"-base",w),this._separator=Ht("div",l+"-separator",w),this._overlaysList=Ht("div",l+"-overlays",w),d.appendChild(w)},_getLayer:function(l){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&g(this._layers[d].layer)===l)return this._layers[d]},_addLayer:function(l,d,m){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:d,overlay:m}),this.options.sortLayers&&this._layers.sort(u(function(w,E){return this.options.sortFunction(w.layer,E.layer,w.name,E.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;to(this._baseLayersList),to(this._overlaysList),this._layerControlInputs=[];var l,d,m,w,E=0;for(m=0;m<this._layers.length;m++)w=this._layers[m],this._addItem(w),d=d||w.overlay,l=l||!w.overlay,E+=w.overlay?0:1;return this.options.hideSingleBase&&(l=l&&E>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=d&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var d=this._getLayer(g(l.target)),m=d.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;m&&this._map.fire(m,d)},_createRadioElement:function(l,d){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(d?' checked="checked"':"")+"/>",w=document.createElement("div");return w.innerHTML=m,w.firstChild},_addItem:function(l){var d=document.createElement("label"),m=this._map.hasLayer(l.layer),w;l.overlay?(w=document.createElement("input"),w.type="checkbox",w.className="leaflet-control-layers-selector",w.defaultChecked=m):w=this._createRadioElement("leaflet-base-layers_"+g(this),m),this._layerControlInputs.push(w),w.layerId=g(l.layer),Dt(w,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+l.name;var R=document.createElement("span");d.appendChild(R),R.appendChild(w),R.appendChild(E);var U=l.overlay?this._overlaysList:this._baseLayersList;return U.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,d,m,w=[],E=[];this._handlingClick=!0;for(var R=l.length-1;R>=0;R--)d=l[R],m=this._getLayer(d.layerId).layer,d.checked?w.push(m):d.checked||E.push(m);for(R=0;R<E.length;R++)this._map.hasLayer(E[R])&&this._map.removeLayer(E[R]);for(R=0;R<w.length;R++)this._map.hasLayer(w[R])||this._map.addLayer(w[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,d,m,w=this._map.getZoom(),E=l.length-1;E>=0;E--)d=l[E],m=this._getLayer(d.layerId).layer,d.disabled=m.options.minZoom!==void 0&&w<m.options.minZoom||m.options.maxZoom!==void 0&&w>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,Dt(l,"click",de),this.expand();var d=this;setTimeout(function(){Qt(l,"click",de),d._preventClick=!1})}}),qh=function(l,d,m){return new Zi(l,d,m)},Ei=On.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var d="leaflet-control-zoom",m=Ht("div",d+" leaflet-bar"),w=this.options;return this._zoomInButton=this._createButton(w.zoomInText,w.zoomInTitle,d+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(w.zoomOutText,w.zoomOutTitle,d+"-out",m,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,d,m,w,E){var R=Ht("a",m,w);return R.innerHTML=l,R.href="#",R.title=d,R.setAttribute("role","button"),R.setAttribute("aria-label",d),yr(R),Dt(R,"click",bi),Dt(R,"click",E,this),Dt(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var l=this._map,d="leaflet-disabled";Xt(this._zoomInButton,d),Xt(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(It(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(It(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});Rt.mergeOptions({zoomControl:!0}),Rt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ei,this.addControl(this.zoomControl))});var _u=function(l){return new Ei(l)},Yi=On.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var d="leaflet-control-scale",m=Ht("div",d),w=this.options;return this._addScales(w,d+"-line",m),l.on(w.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),m},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,d,m){l.metric&&(this._mScale=Ht("div",d,m)),l.imperial&&(this._iScale=Ht("div",d,m))},_update:function(){var l=this._map,d=l.getSize().y/2,m=l.distance(l.containerPointToLatLng([0,d]),l.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(m)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var d=this._getRoundNum(l),m=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,m,d/l)},_updateImperial:function(l){var d=l*3.2808399,m,w,E;d>5280?(m=d/5280,w=this._getRoundNum(m),this._updateScale(this._iScale,w+" mi",w/m)):(E=this._getRoundNum(d),this._updateScale(this._iScale,E+" ft",E/d))},_updateScale:function(l,d,m){l.style.width=Math.round(this.options.maxWidth*m)+"px",l.innerHTML=d},_getRoundNum:function(l){var d=Math.pow(10,(Math.floor(l)+"").length-1),m=l/d;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,d*m}}),Xh=function(l){return new Yi(l)},Zn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ao=On.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Lt.inlineSvg?Zn+" ":"")+"Leaflet</a>"},initialize:function(l){N(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Ht("div","leaflet-control-attribution"),yr(this._container);for(var d in l._layers)l._layers[d].getAttribution&&this.addAttribution(l._layers[d].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var d in this._attributions)this._attributions[d]&&l.push(d);var m=[];this.options.prefix&&m.push(this.options.prefix),l.length&&m.push(l.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Rt.mergeOptions({attributionControl:!0}),Rt.addInitHook(function(){this.options.attributionControl&&new ao().addTo(this)});var $h=function(l){return new ao(l)};On.Layers=Zi,On.Zoom=Ei,On.Scale=Yi,On.Attribution=ao,Fe.layers=qh,Fe.zoom=_u,Fe.scale=Xh,Fe.attribution=$h;var Yn=tt.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Yn.addTo=function(l,d){return l.addHandler(d,this),this};var Kh={Events:gt},vu=Lt.touch?"touchstart mousedown":"mousedown",Si=xt.extend({options:{clickTolerance:3},initialize:function(l,d,m,w){N(this,w),this._element=l,this._dragStartTarget=d||l,this._preventOutline=m},enable:function(){this._enabled||(Dt(this._dragStartTarget,vu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Si._dragging===this&&this.finishDrag(!0),Qt(this._dragStartTarget,vu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!eo(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){Si._dragging===this&&this.finishDrag();return}if(!(Si._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(Si._dragging=this,this._preventOutline&&ka(this._element),wa(),ci(),!this._moving)){this.fire("down");var d=l.touches?l.touches[0]:l,m=un(this._element);this._startPoint=new Q(d.clientX,d.clientY),this._startPos=Li(this._element),this._parentScale=Qe(m);var w=l.type==="mousedown";Dt(document,w?"mousemove":"touchmove",this._onMove,this),Dt(document,w?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var d=l.touches&&l.touches.length===1?l.touches[0]:l,m=new Q(d.clientX,d.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,de(l),this._moved||(this.fire("dragstart"),this._moved=!0,It(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),It(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),we(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){Xt(document.body,"leaflet-dragging"),this._lastTarget&&(Xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qt(document,"mousemove touchmove",this._onMove,this),Qt(document,"mouseup touchend touchcancel",this._onUp,this),ss(),mr();var d=this._moved&&this._moving;this._moving=!1,Si._dragging=!1,d&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function yu(l,d,m){var w,E=[1,4,2,8],R,U,q,K,ot,mt,Pt,Ft;for(R=0,mt=l.length;R<mt;R++)l[R]._code=be(l[R],d);for(q=0;q<4;q++){for(Pt=E[q],w=[],R=0,mt=l.length,U=mt-1;R<mt;U=R++)K=l[R],ot=l[U],K._code&Pt?ot._code&Pt||(Ft=ls(ot,K,Pt,d,m),Ft._code=be(Ft,d),w.push(Ft)):(ot._code&Pt&&(Ft=ls(ot,K,Pt,d,m),Ft._code=be(Ft,d),w.push(Ft)),w.push(K));l=w}return l}function xu(l,d){var m,w,E,R,U,q,K,ot,mt;if(!l||l.length===0)throw new Error("latlngs not passed");hn(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Pt=St([0,0]),Ft=pt(l),fn=Ft.getNorthWest().distanceTo(Ft.getSouthWest())*Ft.getNorthEast().distanceTo(Ft.getNorthWest());fn<1700&&(Pt=fi(l));var Be=l.length,Kn=[];for(m=0;m<Be;m++){var Ln=St(l[m]);Kn.push(d.project(St([Ln.lat-Pt.lat,Ln.lng-Pt.lng])))}for(q=K=ot=0,m=0,w=Be-1;m<Be;w=m++)E=Kn[m],R=Kn[w],U=E.y*R.x-R.y*E.x,K+=(E.x+R.x)*U,ot+=(E.y+R.y)*U,q+=U*3;q===0?mt=Kn[0]:mt=[K/q,ot/q];var mo=d.unproject(X(mt));return St([mo.lat+Pt.lat,mo.lng+Pt.lng])}function fi(l){for(var d=0,m=0,w=0,E=0;E<l.length;E++){var R=St(l[E]);d+=R.lat,m+=R.lng,w++}return St([d/w,m/w])}var cn={__proto__:null,clipPolygon:yu,polygonCenter:xu,centroid:fi};function wu(l,d){if(!d||!l.length)return l.slice();var m=d*d;return l=Pa(l,m),l=Ma(l,m),l}function Ca(l,d,m){return Math.sqrt(cs(l,d,m,!0))}function Qh(l,d,m){return cs(l,d,m)}function Ma(l,d){var m=l.length,w=typeof Uint8Array<"u"?Uint8Array:Array,E=new w(m);E[0]=E[m-1]=1,lo(l,E,d,0,m-1);var R,U=[];for(R=0;R<m;R++)E[R]&&U.push(l[R]);return U}function lo(l,d,m,w,E){var R=0,U,q,K;for(q=w+1;q<=E-1;q++)K=cs(l[q],l[w],l[E],!0),K>R&&(U=q,R=K);R>m&&(d[U]=1,lo(l,d,m,w,U),lo(l,d,m,U,E))}function Pa(l,d){for(var m=[l[0]],w=1,E=0,R=l.length;w<R;w++)us(l[w],l[E])>d&&(m.push(l[w]),E=w);return E<R-1&&m.push(l[R-1]),m}var Na;function kn(l,d,m,w,E){var R=w?Na:be(l,m),U=be(d,m),q,K,ot;for(Na=U;;){if(!(R|U))return[l,d];if(R&U)return!1;q=R||U,K=ls(l,d,q,m,E),ot=be(K,m),q===R?(l=K,R=ot):(d=K,U=ot)}}function ls(l,d,m,w,E){var R=d.x-l.x,U=d.y-l.y,q=w.min,K=w.max,ot,mt;return m&8?(ot=l.x+R*(K.y-l.y)/U,mt=K.y):m&4?(ot=l.x+R*(q.y-l.y)/U,mt=q.y):m&2?(ot=K.x,mt=l.y+U*(K.x-l.x)/R):m&1&&(ot=q.x,mt=l.y+U*(q.x-l.x)/R),new Q(ot,mt,E)}function be(l,d){var m=0;return l.x<d.min.x?m|=1:l.x>d.max.x&&(m|=2),l.y<d.min.y?m|=4:l.y>d.max.y&&(m|=8),m}function us(l,d){var m=d.x-l.x,w=d.y-l.y;return m*m+w*w}function cs(l,d,m,w){var E=d.x,R=d.y,U=m.x-E,q=m.y-R,K=U*U+q*q,ot;return K>0&&(ot=((l.x-E)*U+(l.y-R)*q)/K,ot>1?(E=m.x,R=m.y):ot>0&&(E+=U*ot,R+=q*ot)),U=l.x-E,q=l.y-R,w?U*U+q*q:new Q(E,R)}function hn(l){return!O(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Ia(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),hn(l)}function Oa(l,d){var m,w,E,R,U,q,K,ot;if(!l||l.length===0)throw new Error("latlngs not passed");hn(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var mt=St([0,0]),Pt=pt(l),Ft=Pt.getNorthWest().distanceTo(Pt.getSouthWest())*Pt.getNorthEast().distanceTo(Pt.getNorthWest());Ft<1700&&(mt=fi(l));var fn=l.length,Be=[];for(m=0;m<fn;m++){var Kn=St(l[m]);Be.push(d.project(St([Kn.lat-mt.lat,Kn.lng-mt.lng])))}for(m=0,w=0;m<fn-1;m++)w+=Be[m].distanceTo(Be[m+1])/2;if(w===0)ot=Be[0];else for(m=0,R=0;m<fn-1;m++)if(U=Be[m],q=Be[m+1],E=U.distanceTo(q),R+=E,R>w){K=(R-w)/E,ot=[q.x-K*(q.x-U.x),q.y-K*(q.y-U.y)];break}var Ln=d.unproject(X(ot));return St([Ln.lat+mt.lat,Ln.lng+mt.lng])}var Da={__proto__:null,simplify:wu,pointToSegmentDistance:Ca,closestPointOnSegment:Qh,clipSegment:kn,_getEdgeIntersection:ls,_getBitCode:be,_sqClosestPointOnSegment:cs,isFlat:hn,_flat:Ia,polylineCenter:Oa},Ra={project:function(l){return new Q(l.lng,l.lat)},unproject:function(l){return new Nt(l.y,l.x)},bounds:new _t([-180,-90],[180,90])},Aa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new _t([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var d=Math.PI/180,m=this.R,w=l.lat*d,E=this.R_MINOR/m,R=Math.sqrt(1-E*E),U=R*Math.sin(w),q=Math.tan(Math.PI/4-w/2)/Math.pow((1-U)/(1+U),R/2);return w=-m*Math.log(Math.max(q,1e-10)),new Q(l.lng*d*m,w)},unproject:function(l){for(var d=180/Math.PI,m=this.R,w=this.R_MINOR/m,E=Math.sqrt(1-w*w),R=Math.exp(-l.y/m),U=Math.PI/2-2*Math.atan(R),q=0,K=.1,ot;q<15&&Math.abs(K)>1e-7;q++)ot=E*Math.sin(U),ot=Math.pow((1-ot)/(1+ot),E/2),K=Math.PI/2-2*Math.atan(R*ot)-U,U+=K;return new Nt(U*d,l.x*d/m)}},Jh={__proto__:null,LonLat:Ra,Mercator:Aa,SphericalMercator:$t},tf=i({},Z,{code:"EPSG:3395",projection:Aa,transformation:function(){var l=.5/(Math.PI*Aa.R);return j(l,.5,-l,.5)}()}),ku=i({},Z,{code:"EPSG:4326",projection:Ra,transformation:j(1/180,1,-1/180,.5)}),ef=i({},We,{projection:Ra,transformation:j(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,d){var m=d.lng-l.lng,w=d.lat-l.lat;return Math.sqrt(m*m+w*w)},infinite:!0});We.Earth=Z,We.EPSG3395=tf,We.EPSG3857=xn,We.EPSG900913=Gs,We.EPSG4326=ku,We.Simple=ef;var Dn=xt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[g(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[g(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var d=l.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var m=this.getEvents();d.on(m,this),this.once("remove",function(){d.off(m,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});Rt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var d=g(l);return this._layers[d]?this:(this._layers[d]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var d=g(l);return this._layers[d]?(this._loaded&&l.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return g(l)in this._layers},eachLayer:function(l,d){for(var m in this._layers)l.call(d,this._layers[m]);return this},_addLayers:function(l){l=l?O(l)?l:[l]:[];for(var d=0,m=l.length;d<m;d++)this.addLayer(l[d])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[g(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var d=g(l);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,d=-1/0,m=this._getZoomSpan();for(var w in this._zoomBoundLayers){var E=this._zoomBoundLayers[w].options;l=E.minZoom===void 0?l:Math.min(l,E.minZoom),d=E.maxZoom===void 0?d:Math.max(d,E.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=l===1/0?void 0:l,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xr=Dn.extend({initialize:function(l,d){N(this,d),this._layers={};var m,w;if(l)for(m=0,w=l.length;m<w;m++)this.addLayer(l[m])},addLayer:function(l){var d=this.getLayerId(l);return this._layers[d]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var d=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(l){var d=typeof l=="number"?l:this.getLayerId(l);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var d=Array.prototype.slice.call(arguments,1),m,w;for(m in this._layers)w=this._layers[m],w[l]&&w[l].apply(w,d);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,d){for(var m in this._layers)l.call(d,this._layers[m]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return g(l)}}),Lu=function(l,d){return new xr(l,d)},di=xr.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),xr.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),xr.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new zt;for(var d in this._layers){var m=this._layers[d];l.extend(m.getBounds?m.getBounds():m.getLatLng())}return l}}),bu=function(l,d){return new di(l,d)},wr=tt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){N(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,d){var m=this._getIconUrl(l);if(!m){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var w=this._createImg(m,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(w,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),w},_setIconStyles:function(l,d){var m=this.options,w=m[d+"Size"];typeof w=="number"&&(w=[w,w]);var E=X(w),R=X(d==="shadow"&&m.shadowAnchor||m.iconAnchor||E&&E.divideBy(2,!0));l.className="leaflet-marker-"+d+" "+(m.className||""),R&&(l.style.marginLeft=-R.x+"px",l.style.marginTop=-R.y+"px"),E&&(l.style.width=E.x+"px",l.style.height=E.y+"px")},_createImg:function(l,d){return d=d||document.createElement("img"),d.src=l,d},_getIconUrl:function(l){return Lt.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function nf(l){return new wr(l)}var hs=wr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof hs.imagePath!="string"&&(hs.imagePath=this._detectIconPath()),(this.options.imagePath||hs.imagePath)+wr.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var d=function(m,w,E){var R=w.exec(m);return R&&R[E]};return l=d(l,/^url\((['"])?(.+)\1\)$/,2),l&&d(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Ht("div","leaflet-default-icon-path",document.body),d=Gn(l,"background-image")||Gn(l,"backgroundImage");if(document.body.removeChild(l),d=this._stripUrl(d),d)return d;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Eu=Yn.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new Si(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),It(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var d=this._marker,m=d._map,w=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,R=Li(d._icon),U=m.getPixelBounds(),q=m.getPixelOrigin(),K=wt(U.min._subtract(q).add(E),U.max._subtract(q).subtract(E));if(!K.contains(R)){var ot=X((Math.max(K.max.x,R.x)-K.max.x)/(U.max.x-K.max.x)-(Math.min(K.min.x,R.x)-K.min.x)/(U.min.x-K.min.x),(Math.max(K.max.y,R.y)-K.max.y)/(U.max.y-K.max.y)-(Math.min(K.min.y,R.y)-K.min.y)/(U.min.y-K.min.y)).multiplyBy(w);m.panBy(ot,{animate:!1}),this._draggable._newPos._add(ot),this._draggable._startPos._add(ot),we(d._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=nt(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(at(this._panRequest),this._panRequest=nt(this._adjustPan.bind(this,l)))},_onDrag:function(l){var d=this._marker,m=d._shadow,w=Li(d._icon),E=d._map.layerPointToLatLng(w);m&&we(m,w),d._latlng=E,l.latlng=E,l.oldLatLng=this._oldLatLng,d.fire("move",l).fire("drag",l)},_onDragEnd:function(l){at(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),uo=Dn.extend({options:{icon:new hs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,d){N(this,d),this._latlng=St(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var d=this._latlng;return this._latlng=St(l),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=l.icon.createIcon(this._icon),w=!1;m!==this._icon&&(this._icon&&this._removeIcon(),w=!0,l.title&&(m.title=l.title),m.tagName==="IMG"&&(m.alt=l.alt||"")),It(m,d),l.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dt(m,"focus",this._panOnFocus,this);var E=l.icon.createShadow(this._shadow),R=!1;E!==this._shadow&&(this._removeShadow(),R=!0),E&&(It(E,d),E.alt=""),this._shadow=E,l.opacity<1&&this._updateOpacity(),w&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&R&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qt(this._icon,"focus",this._panOnFocus,this),ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ae(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&we(this._icon,l),this._shadow&&we(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(It(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Eu)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Eu(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Me(this._icon,l),this._shadow&&Me(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var d=this.options.icon.options,m=d.iconSize?X(d.iconSize):X(0,0),w=d.iconAnchor?X(d.iconAnchor):X(0,0);l.panInside(this._latlng,{paddingTopLeft:w,paddingBottomRight:m.subtract(w)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function rf(l,d){return new uo(l,d)}var Ti=Dn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return N(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fs=Ti.extend({options:{fill:!0,radius:10},initialize:function(l,d){N(this,d),this._latlng=St(l),this._radius=this.options.radius},setLatLng:function(l){var d=this._latlng;return this._latlng=St(l),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var d=l&&l.radius||this._radius;return Ti.prototype.setStyle.call(this,l),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,d=this._radiusY||l,m=this._clickTolerance(),w=[l+m,d+m];this._pxBounds=new _t(this._point.subtract(w),this._point.add(w))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Su(l,d){return new fs(l,d)}var co=fs.extend({initialize:function(l,d,m){if(typeof d=="number"&&(d=i({},m,{radius:d})),N(this,d),this._latlng=St(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new zt(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Ti.prototype.setStyle,_project:function(){var l=this._latlng.lng,d=this._latlng.lat,m=this._map,w=m.options.crs;if(w.distance===Z.distance){var E=Math.PI/180,R=this._mRadius/Z.R/E,U=m.project([d+R,l]),q=m.project([d-R,l]),K=U.add(q).divideBy(2),ot=m.unproject(K).lat,mt=Math.acos((Math.cos(R*E)-Math.sin(d*E)*Math.sin(ot*E))/(Math.cos(d*E)*Math.cos(ot*E)))/E;(isNaN(mt)||mt===0)&&(mt=R/Math.cos(Math.PI/180*d)),this._point=K.subtract(m.getPixelOrigin()),this._radius=isNaN(mt)?0:K.x-m.project([ot,l-mt]).x,this._radiusY=K.y-U.y}else{var Pt=w.unproject(w.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(Pt).x}this._updateBounds()}});function sf(l,d,m){return new co(l,d,m)}var qn=Ti.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,d){N(this,d),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var d=1/0,m=null,w=cs,E,R,U=0,q=this._parts.length;U<q;U++)for(var K=this._parts[U],ot=1,mt=K.length;ot<mt;ot++){E=K[ot-1],R=K[ot];var Pt=w(l,E,R,!0);Pt<d&&(d=Pt,m=w(l,E,R))}return m&&(m.distance=Math.sqrt(d)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Oa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,d){return d=d||this._defaultShape(),l=St(l),d.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new zt,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return hn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var d=[],m=hn(l),w=0,E=l.length;w<E;w++)m?(d[w]=St(l[w]),this._bounds.extend(d[w])):d[w]=this._convertLatLngs(l[w]);return d},_project:function(){var l=new _t;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),d=new Q(l,l);this._rawPxBounds&&(this._pxBounds=new _t([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(l,d,m){var w=l[0]instanceof Nt,E=l.length,R,U;if(w){for(U=[],R=0;R<E;R++)U[R]=this._map.latLngToLayerPoint(l[R]),m.extend(U[R]);d.push(U)}else for(R=0;R<E;R++)this._projectLatlngs(l[R],d,m)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,m,w,E,R,U,q,K;for(m=0,E=0,R=this._rings.length;m<R;m++)for(K=this._rings[m],w=0,U=K.length;w<U-1;w++)q=kn(K[w],K[w+1],l,w,!0),q&&(d[E]=d[E]||[],d[E].push(q[0]),(q[1]!==K[w+1]||w===U-2)&&(d[E].push(q[1]),E++))}},_simplifyPoints:function(){for(var l=this._parts,d=this.options.smoothFactor,m=0,w=l.length;m<w;m++)l[m]=wu(l[m],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,d){var m,w,E,R,U,q,K=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(m=0,R=this._parts.length;m<R;m++)for(q=this._parts[m],w=0,U=q.length,E=U-1;w<U;E=w++)if(!(!d&&w===0)&&Ca(l,q[E],q[w])<=K)return!0;return!1}});function za(l,d){return new qn(l,d)}qn._flat=Ia;var kr=qn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var d=qn.prototype._convertLatLngs.call(this,l),m=d.length;return m>=2&&d[0]instanceof Nt&&d[0].equals(d[m-1])&&d.pop(),d},_setLatLngs:function(l){qn.prototype._setLatLngs.call(this,l),hn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return hn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,d=this.options.weight,m=new Q(d,d);if(l=new _t(l.min.subtract(m),l.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var w=0,E=this._rings.length,R;w<E;w++)R=yu(this._rings[w],l,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var d=!1,m,w,E,R,U,q,K,ot;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(R=0,K=this._parts.length;R<K;R++)for(m=this._parts[R],U=0,ot=m.length,q=ot-1;U<ot;q=U++)w=m[U],E=m[q],w.y>l.y!=E.y>l.y&&l.x<(E.x-w.x)*(l.y-w.y)/(E.y-w.y)+w.x&&(d=!d);return d||qn.prototype._containsPoint.call(this,l,!0)}});function Tu(l,d){return new kr(l,d)}var Xn=di.extend({initialize:function(l,d){N(this,d),this._layers={},l&&this.addData(l)},addData:function(l){var d=O(l)?l:l.features,m,w,E;if(d){for(m=0,w=d.length;m<w;m++)E=d[m],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var R=this.options;if(R.filter&&!R.filter(l))return this;var U=ho(l,R);return U?(U.feature=h(l),U.defaultOptions=U.options,this.resetStyle(U),R.onEachFeature&&R.onEachFeature(l,U),this.addLayer(U)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=i({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(d){this._setLayerStyle(d,l)},this)},_setLayerStyle:function(l,d){l.setStyle&&(typeof d=="function"&&(d=d(l.feature)),l.setStyle(d))}});function ho(l,d){var m=l.type==="Feature"?l.geometry:l,w=m?m.coordinates:null,E=[],R=d&&d.pointToLayer,U=d&&d.coordsToLatLng||Ci,q,K,ot,mt;if(!w&&!m)return null;switch(m.type){case"Point":return q=U(w),Cu(R,l,q,d);case"MultiPoint":for(ot=0,mt=w.length;ot<mt;ot++)q=U(w[ot]),E.push(Cu(R,l,q,d));return new di(E);case"LineString":case"MultiLineString":return K=fo(w,m.type==="LineString"?0:1,U),new qn(K,d);case"Polygon":case"MultiPolygon":return K=fo(w,m.type==="Polygon"?1:2,U),new kr(K,d);case"GeometryCollection":for(ot=0,mt=m.geometries.length;ot<mt;ot++){var Pt=ho({geometry:m.geometries[ot],type:"Feature",properties:l.properties},d);Pt&&E.push(Pt)}return new di(E);case"FeatureCollection":for(ot=0,mt=m.features.length;ot<mt;ot++){var Ft=ho(m.features[ot],d);Ft&&E.push(Ft)}return new di(E);default:throw new Error("Invalid GeoJSON object.")}}function Cu(l,d,m,w){return l?l(d,m):new uo(m,w&&w.markersInheritOptions&&w)}function Ci(l){return new Nt(l[1],l[0],l[2])}function fo(l,d,m){for(var w=[],E=0,R=l.length,U;E<R;E++)U=d?fo(l[E],d-1,m):(m||Ci)(l[E]),w.push(U);return w}function go(l,d){return l=St(l),l.alt!==void 0?[k(l.lng,d),k(l.lat,d),k(l.alt,d)]:[k(l.lng,d),k(l.lat,d)]}function Ye(l,d,m,w){for(var E=[],R=0,U=l.length;R<U;R++)E.push(d?Ye(l[R],hn(l[R])?0:d-1,m,w):go(l[R],w));return!d&&m&&E.length>0&&E.push(E[0].slice()),E}function qe(l,d){return l.feature?i({},l.feature,{geometry:d}):h(d)}function h(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var s={toGeoJSON:function(l){return qe(this,{type:"Point",coordinates:go(this.getLatLng(),l)})}};uo.include(s),co.include(s),fs.include(s),qn.include({toGeoJSON:function(l){var d=!hn(this._latlngs),m=Ye(this._latlngs,d?1:0,!1,l);return qe(this,{type:(d?"Multi":"")+"LineString",coordinates:m})}}),kr.include({toGeoJSON:function(l){var d=!hn(this._latlngs),m=d&&!hn(this._latlngs[0]),w=Ye(this._latlngs,m?2:d?1:0,!0,l);return d||(w=[w]),qe(this,{type:(m?"Multi":"")+"Polygon",coordinates:w})}}),xr.include({toMultiPoint:function(l){var d=[];return this.eachLayer(function(m){d.push(m.toGeoJSON(l).geometry.coordinates)}),qe(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(l){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(l);var m=d==="GeometryCollection",w=[];return this.eachLayer(function(E){if(E.toGeoJSON){var R=E.toGeoJSON(l);if(m)w.push(R.geometry);else{var U=h(R);U.type==="FeatureCollection"?w.push.apply(w,U.features):w.push(U)}}}),m?qe(this,{geometries:w,type:"GeometryCollection"}):{type:"FeatureCollection",features:w}}});function o(l,d){return new Xn(l,d)}var c=o,p=Dn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,d,m){this._url=l,this._bounds=pt(d),N(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(It(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&pr(this._image),this},bringToBack:function(){return this._map&&Wi(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=pt(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",d=this._image=l?this._url:Ht("img");if(It(d,"leaflet-image-layer"),this._zoomAnimated&&It(d,"leaflet-zoom-animated"),this.options.className&&It(d,this.options.className),d.onselectstart=x,d.onmousemove=x,d.onload=u(this.fire,this,"load"),d.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(l){var d=this._map.getZoomScale(l.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Vi(this._image,m,d)},_reset:function(){var l=this._image,d=new _t(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=d.getSize();we(l,d.min),l.style.width=m.x+"px",l.style.height=m.y+"px"},_updateOpacity:function(){Me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),y=function(l,d,m){return new p(l,d,m)},b=p.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",d=this._image=l?this._url:Ht("video");if(It(d,"leaflet-image-layer"),this._zoomAnimated&&It(d,"leaflet-zoom-animated"),this.options.className&&It(d,this.options.className),d.onselectstart=x,d.onmousemove=x,d.onloadeddata=u(this.fire,this,"load"),l){for(var m=d.getElementsByTagName("source"),w=[],E=0;E<m.length;E++)w.push(m[E].src);this._url=m.length>0?w:[d.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var U=Ht("source");U.src=this._url[R],d.appendChild(U)}}});function T(l,d,m){return new b(l,d,m)}var D=p.extend({_initImage:function(){var l=this._image=this._url;It(l,"leaflet-image-layer"),this._zoomAnimated&&It(l,"leaflet-zoom-animated"),this.options.className&&It(l,this.options.className),l.onselectstart=x,l.onmousemove=x}});function z(l,d,m){return new D(l,d,m)}var W=Dn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,d){l&&(l instanceof Nt||O(l))?(this._latlng=St(l),N(this,d)):(N(this,l),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Me(this._container,1),this.bringToFront(),this.options.interactive&&(It(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Me(this._container,0),this._removeTimeout=setTimeout(u(ae,void 0,this._container),200)):ae(this._container),this.options.interactive&&(Xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=St(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pr(this._container),this},bringToBack:function(){return this._map&&Wi(this._container),this},_prepareOpen:function(l){var d=this._source;if(!d._map)return!1;if(d instanceof di){d=null;var m=this._source._layers;for(var w in m)if(m[w]._map){d=m[w];break}if(!d)return!1;this._source=d}if(!l)if(d.getCenter)l=d.getCenter();else if(d.getLatLng)l=d.getLatLng();else if(d.getBounds)l=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")l.innerHTML=d;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),d=X(this.options.offset),m=this._getAnchor();this._zoomAnimated?we(this._container,l.add(m)):d=d.add(l).add(m);var w=this._containerBottom=-d.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=w+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});Rt.include({_initOverlay:function(l,d,m,w){var E=d;return E instanceof l||(E=new l(w).setContent(d)),m&&E.setLatLng(m),E}}),Dn.include({_initOverlay:function(l,d,m,w){var E=m;return E instanceof l?(N(E,w),E._source=this):(E=d&&!w?d:new l(w,this),E.setContent(m)),E}});var Y=W.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,W.prototype.openOn.call(this,l)},onAdd:function(l){W.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ti||this._source.on("preclick",Ae))},onRemove:function(l){W.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ti||this._source.off("preclick",Ae))},getEvents:function(){var l=W.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",d=this._container=Ht("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=Ht("div",l+"-content-wrapper",d);if(this._contentNode=Ht("div",l+"-content",m),yr(d),as(this._contentNode),Dt(d,"contextmenu",Ae),this._tipContainer=Ht("div",l+"-tip-container",d),this._tip=Ht("div",l+"-tip",this._tipContainer),this.options.closeButton){var w=this._closeButton=Ht("a",l+"-close-button",d);w.setAttribute("role","button"),w.setAttribute("aria-label","Close popup"),w.href="#close",w.innerHTML='<span aria-hidden="true">&#215;</span>',Dt(w,"click",function(E){de(E),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,d=l.style;d.width="",d.whiteSpace="nowrap";var m=l.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),d.width=m+1+"px",d.whiteSpace="",d.height="";var w=l.offsetHeight,E=this.options.maxHeight,R="leaflet-popup-scrolled";E&&w>E?(d.height=E+"px",It(l,R)):Xt(l,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),m=this._getAnchor();we(this._container,d.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,d=parseInt(Gn(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+d,w=this._containerWidth,E=new Q(this._containerLeft,-m-this._containerBottom);E._add(Li(this._container));var R=l.layerPointToContainerPoint(E),U=X(this.options.autoPanPadding),q=X(this.options.autoPanPaddingTopLeft||U),K=X(this.options.autoPanPaddingBottomRight||U),ot=l.getSize(),mt=0,Pt=0;R.x+w+K.x>ot.x&&(mt=R.x+w-ot.x+K.x),R.x-mt-q.x<0&&(mt=R.x-q.x),R.y+m+K.y>ot.y&&(Pt=R.y+m-ot.y+K.y),R.y-Pt-q.y<0&&(Pt=R.y-q.y),(mt||Pt)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([mt,Pt]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),st=function(l,d){return new Y(l,d)};Rt.mergeOptions({closePopupOnClick:!0}),Rt.include({openPopup:function(l,d,m){return this._initOverlay(Y,l,d,m).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Dn.include({bindPopup:function(l,d){return this._popup=this._initOverlay(Y,this._popup,l,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof di||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){bi(l);var d=l.layer||l.target;if(this._popup._source===d&&!(d instanceof Ti)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=d,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var ft=W.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){W.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){W.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=W.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",d=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ht("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var d,m,w=this._map,E=this._container,R=w.latLngToContainerPoint(w.getCenter()),U=w.layerPointToContainerPoint(l),q=this.options.direction,K=E.offsetWidth,ot=E.offsetHeight,mt=X(this.options.offset),Pt=this._getAnchor();q==="top"?(d=K/2,m=ot):q==="bottom"?(d=K/2,m=0):q==="center"?(d=K/2,m=ot/2):q==="right"?(d=0,m=ot/2):q==="left"?(d=K,m=ot/2):U.x<R.x?(q="right",d=0,m=ot/2):(q="left",d=K+(mt.x+Pt.x)*2,m=ot/2),l=l.subtract(X(d,m,!0)).add(mt).add(Pt),Xt(E,"leaflet-tooltip-right"),Xt(E,"leaflet-tooltip-left"),Xt(E,"leaflet-tooltip-top"),Xt(E,"leaflet-tooltip-bottom"),It(E,"leaflet-tooltip-"+q),we(E,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Me(this._container,l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(d)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),yt=function(l,d){return new ft(l,d)};Rt.include({openTooltip:function(l,d,m){return this._initOverlay(ft,l,d,m).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Dn.include({bindTooltip:function(l,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ft,this._tooltip,l,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var d=l?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[d](m),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof di||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&(Dt(d,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),Dt(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var d=l.latlng,m,w;this._tooltip.options.sticky&&l.originalEvent&&(m=this._map.mouseEventToContainerPoint(l.originalEvent),w=this._map.containerPointToLayerPoint(m),d=this._map.layerPointToLatLng(w)),this._tooltip.setLatLng(d)}});var bt=wr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var d=l&&l.tagName==="DIV"?l:document.createElement("div"),m=this.options;if(m.html instanceof Element?(to(d),d.appendChild(m.html)):d.innerHTML=m.html!==!1?m.html:"",m.bgPos){var w=X(m.bgPos);d.style.backgroundPosition=-w.x+"px "+-w.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function Gt(l){return new bt(l)}wr.Default=hs;var At=Dn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Lt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){N(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),ae(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(pr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Wi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof Q?l:new Q(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var d=this.getPane().children,m=-l(-1/0,1/0),w=0,E=d.length,R;w<E;w++)R=d[w].style.zIndex,d[w]!==this._container&&R&&(m=l(m,+R));isFinite(m)&&(this.options.zIndex=m+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Lt.ielt9){Me(this._container,this.options.opacity);var l=+new Date,d=!1,m=!1;for(var w in this._tiles){var E=this._tiles[w];if(!(!E.current||!E.loaded)){var R=Math.min(1,(l-E.loaded)/200);Me(E.el,R),R<1?d=!0:(E.active?m=!0:this._onOpaqueTile(E),E.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),d&&(at(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=Ht("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,d=this.options.maxZoom;if(l!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===l?(this._levels[m].el.style.zIndex=d-Math.abs(l-m),this._onUpdateLevel(m)):(ae(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var w=this._levels[l],E=this._map;return w||(w=this._levels[l]={},w.el=Ht("div","leaflet-tile-container leaflet-zoom-animated",this._container),w.el.style.zIndex=d,w.origin=E.project(E.unproject(E.getPixelOrigin()),l).round(),w.zoom=l,this._setZoomTransform(w,E.getCenter(),E.getZoom()),x(w.el.offsetWidth),this._onCreateLevel(w)),this._level=w,w}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var l,d,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)d=this._tiles[l],d.retain=d.current;for(l in this._tiles)if(d=this._tiles[l],d.current&&!d.active){var w=d.coords;this._retainParent(w.x,w.y,w.z,w.z-5)||this._retainChildren(w.x,w.y,w.z,w.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var d in this._tiles)this._tiles[d].coords.z===l&&this._removeTile(d)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)ae(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,d,m,w){var E=Math.floor(l/2),R=Math.floor(d/2),U=m-1,q=new Q(+E,+R);q.z=+U;var K=this._tileCoordsToKey(q),ot=this._tiles[K];return ot&&ot.active?(ot.retain=!0,!0):(ot&&ot.loaded&&(ot.retain=!0),U>w?this._retainParent(E,R,U,w):!1)},_retainChildren:function(l,d,m,w){for(var E=2*l;E<2*l+2;E++)for(var R=2*d;R<2*d+2;R++){var U=new Q(E,R);U.z=m+1;var q=this._tileCoordsToKey(U),K=this._tiles[q];if(K&&K.active){K.retain=!0;continue}else K&&K.loaded&&(K.retain=!0);m+1<w&&this._retainChildren(E,R,m+1,w)}},_resetView:function(l){var d=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var d=this.options;return d.minNativeZoom!==void 0&&l<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<l?d.maxNativeZoom:l},_setView:function(l,d,m,w){var E=Math.round(d);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var R=this.options.updateWhenZooming&&E!==this._tileZoom;(!w||R)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(l),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(l,d)},_setZoomTransforms:function(l,d){for(var m in this._levels)this._setZoomTransform(this._levels[m],l,d)},_setZoomTransform:function(l,d,m){var w=this._map.getZoomScale(m,l.zoom),E=l.origin.multiplyBy(w).subtract(this._map._getNewPixelOrigin(d,m)).round();Lt.any3d?Vi(l.el,E,w):we(l.el,E)},_resetGrid:function(){var l=this._map,d=l.options.crs,m=this._tileSize=this.getTileSize(),w=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,d.wrapLng[0]],w).x/m.x),Math.ceil(l.project([0,d.wrapLng[1]],w).x/m.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([d.wrapLat[0],0],w).y/m.x),Math.ceil(l.project([d.wrapLat[1],0],w).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var d=this._map,m=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),w=d.getZoomScale(m,this._tileZoom),E=d.project(l,this._tileZoom).floor(),R=d.getSize().divideBy(w*2);return new _t(E.subtract(R),E.add(R))},_update:function(l){var d=this._map;if(d){var m=this._clampZoom(d.getZoom());if(l===void 0&&(l=d.getCenter()),this._tileZoom!==void 0){var w=this._getTiledPixelBounds(l),E=this._pxBoundsToTileRange(w),R=E.getCenter(),U=[],q=this.options.keepBuffer,K=new _t(E.getBottomLeft().subtract([q,-q]),E.getTopRight().add([q,-q]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ot in this._tiles){var mt=this._tiles[ot].coords;(mt.z!==this._tileZoom||!K.contains(new Q(mt.x,mt.y)))&&(this._tiles[ot].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(l,m);return}for(var Pt=E.min.y;Pt<=E.max.y;Pt++)for(var Ft=E.min.x;Ft<=E.max.x;Ft++){var fn=new Q(Ft,Pt);if(fn.z=this._tileZoom,!!this._isValidTile(fn)){var Be=this._tiles[this._tileCoordsToKey(fn)];Be?Be.current=!0:U.push(fn)}}if(U.sort(function(Ln,mo){return Ln.distanceTo(R)-mo.distanceTo(R)}),U.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Kn=document.createDocumentFragment();for(Ft=0;Ft<U.length;Ft++)this._addTile(U[Ft],Kn);this._level.el.appendChild(Kn)}}}},_isValidTile:function(l){var d=this._map.options.crs;if(!d.infinite){var m=this._globalTileRange;if(!d.wrapLng&&(l.x<m.min.x||l.x>m.max.x)||!d.wrapLat&&(l.y<m.min.y||l.y>m.max.y))return!1}if(!this.options.bounds)return!0;var w=this._tileCoordsToBounds(l);return pt(this.options.bounds).overlaps(w)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var d=this._map,m=this.getTileSize(),w=l.scaleBy(m),E=w.add(m),R=d.unproject(w,l.z),U=d.unproject(E,l.z);return[R,U]},_tileCoordsToBounds:function(l){var d=this._tileCoordsToNwSe(l),m=new zt(d[0],d[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var d=l.split(":"),m=new Q(+d[0],+d[1]);return m.z=+d[2],m},_removeTile:function(l){var d=this._tiles[l];d&&(ae(d.el),delete this._tiles[l],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){It(l,"leaflet-tile");var d=this.getTileSize();l.style.width=d.x+"px",l.style.height=d.y+"px",l.onselectstart=x,l.onmousemove=x,Lt.ielt9&&this.options.opacity<1&&Me(l,this.options.opacity)},_addTile:function(l,d){var m=this._getTilePos(l),w=this._tileCoordsToKey(l),E=this.createTile(this._wrapCoords(l),u(this._tileReady,this,l));this._initTile(E),this.createTile.length<2&&nt(u(this._tileReady,this,l,null,E)),we(E,m),this._tiles[w]={el:E,coords:l,current:!0},d.appendChild(E),this.fire("tileloadstart",{tile:E,coords:l})},_tileReady:function(l,d,m){d&&this.fire("tileerror",{error:d,tile:m,coords:l});var w=this._tileCoordsToKey(l);m=this._tiles[w],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Me(m.el,0),at(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),d||(It(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Lt.ielt9||!this._map._fadeAnimated?nt(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var d=new Q(this._wrapX?v(l.x,this._wrapX):l.x,this._wrapY?v(l.y,this._wrapY):l.y);return d.z=l.z,d},_pxBoundsToTileRange:function(l){var d=this.getTileSize();return new _t(l.min.unscaleBy(d).floor(),l.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function Jt(l){return new At(l)}var he=At.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,d){this._url=l,d=N(this,d),d.detectRetina&&Lt.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,d){return this._url===l&&d===void 0&&(d=!0),this._url=l,d||this.redraw(),this},createTile:function(l,d){var m=document.createElement("img");return Dt(m,"load",u(this._tileOnLoad,this,d,m)),Dt(m,"error",u(this._tileOnError,this,d,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(l),m},getTileUrl:function(l){var d={r:Lt.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-l.y;this.options.tms&&(d.y=m),d["-y"]=m}return M(this._url,i(d,this.options))},_tileOnLoad:function(l,d){Lt.ielt9?setTimeout(u(l,this,null,d),0):l(null,d)},_tileOnError:function(l,d,m){var w=this.options.errorTileUrl;w&&d.getAttribute("src")!==w&&(d.src=w),l(m,d)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,d=this.options.maxZoom,m=this.options.zoomReverse,w=this.options.zoomOffset;return m&&(l=d-l),l+w},_getSubdomain:function(l){var d=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var l,d;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(d=this._tiles[l].el,d.onload=x,d.onerror=x,!d.complete)){d.src=F;var m=this._tiles[l].coords;ae(d),delete this._tiles[l],this.fire("tileabort",{tile:d,coords:m})}},_removeTile:function(l){var d=this._tiles[l];if(d)return d.el.setAttribute("src",F),At.prototype._removeTile.call(this,l)},_tileReady:function(l,d,m){if(!(!this._map||m&&m.getAttribute("src")===F))return At.prototype._tileReady.call(this,l,d,m)}});function Pe(l,d){return new he(l,d)}var Mi=he.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,d){this._url=l;var m=i({},this.defaultWmsParams);for(var w in d)w in this.options||(m[w]=d[w]);d=N(this,d);var E=d.detectRetina&&Lt.retina?2:1,R=this.getTileSize();m.width=R.x*E,m.height=R.y*E,this.wmsParams=m},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,he.prototype.onAdd.call(this,l)},getTileUrl:function(l){var d=this._tileCoordsToNwSe(l),m=this._crs,w=wt(m.project(d[0]),m.project(d[1])),E=w.min,R=w.max,U=(this._wmsVersion>=1.3&&this._crs===ku?[E.y,E.x,R.y,R.x]:[E.x,E.y,R.x,R.y]).join(","),q=he.prototype.getTileUrl.call(this,l);return q+A(this.wmsParams,q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+U},setParams:function(l,d){return i(this.wmsParams,l),d||this.redraw(),this}});function ds(l,d){return new Mi(l,d)}he.WMS=Mi,Pe.wms=ds;var $n=Dn.extend({options:{padding:.1},initialize:function(l){N(this,l),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),It(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,d){var m=this._map.getZoomScale(d,this._zoom),w=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,d),R=w.multiplyBy(-m).add(E).subtract(this._map._getNewPixelOrigin(l,d));Lt.any3d?Vi(this._container,R,m):we(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,d=this._map.getSize(),m=this._map.containerPointToLayerPoint(d.multiplyBy(-l)).round();this._bounds=new _t(m,m.add(d.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Fa=$n.extend({options:{tolerance:0},getEvents:function(){var l=$n.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$n.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");Dt(l,"mousemove",this._onMouseMove,this),Dt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Dt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){at(this._redrawRequest),delete this._ctx,ae(this._container),Qt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var d in this._layers)l=this._layers[d],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$n.prototype._update.call(this);var l=this._bounds,d=this._container,m=l.getSize(),w=Lt.retina?2:1;we(d,l.min),d.width=w*m.x,d.height=w*m.y,d.style.width=m.x+"px",d.style.height=m.y+"px",Lt.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){$n.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[g(l)]=l;var d=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var d=l._order,m=d.next,w=d.prev;m?m.prev=w:this._drawLast=w,w?w.next=m:this._drawFirst=m,delete l._order,delete this._layers[g(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var d=l.options.dashArray.split(/[, ]+/),m=[],w,E;for(E=0;E<d.length;E++){if(w=Number(d[E]),isNaN(w))return;m.push(w)}l.options._dashArray=m}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||nt(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var d=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new _t,this._redrawBounds.extend(l._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(l._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var d=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,d=this._redrawBounds;if(this._ctx.save(),d){var m=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var w=this._drawFirst;w;w=w.next)l=w.layer,(!d||l._pxBounds&&l._pxBounds.intersects(d))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,d){if(this._drawing){var m,w,E,R,U=l._parts,q=U.length,K=this._ctx;if(q){for(K.beginPath(),m=0;m<q;m++){for(w=0,E=U[m].length;w<E;w++)R=U[m][w],K[w?"lineTo":"moveTo"](R.x,R.y);d&&K.closePath()}this._fillStroke(K,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var d=l._point,m=this._ctx,w=Math.max(Math.round(l._radius),1),E=(Math.max(Math.round(l._radiusY),1)||w)/w;E!==1&&(m.save(),m.scale(1,E)),m.beginPath(),m.arc(d.x,d.y/E,w,0,Math.PI*2,!1),E!==1&&m.restore(),this._fillStroke(m,l)}},_fillStroke:function(l,d){var m=d.options;m.fill&&(l.globalAlpha=m.fillOpacity,l.fillStyle=m.fillColor||m.color,l.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(l.setLineDash&&l.setLineDash(d.options&&d.options._dashArray||[]),l.globalAlpha=m.opacity,l.lineWidth=m.weight,l.strokeStyle=m.color,l.lineCap=m.lineCap,l.lineJoin=m.lineJoin,l.stroke())},_onClick:function(l){for(var d=this._map.mouseEventToLayerPoint(l),m,w,E=this._drawFirst;E;E=E.next)m=E.layer,m.options.interactive&&m._containsPoint(d)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(m))&&(w=m);this._fireEvent(w?[w]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,d)}},_handleMouseOut:function(l){var d=this._hoveredLayer;d&&(Xt(this._container,"leaflet-interactive"),this._fireEvent([d],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,d){if(!this._mouseHoverThrottled){for(var m,w,E=this._drawFirst;E;E=E.next)m=E.layer,m.options.interactive&&m._containsPoint(d)&&(w=m);w!==this._hoveredLayer&&(this._handleMouseOut(l),w&&(It(this._container,"leaflet-interactive"),this._fireEvent([w],l,"mouseover"),this._hoveredLayer=w)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,d,m){this._map._fireDOMEvent(d,m||d.type,l)},_bringToFront:function(l){var d=l._order;if(d){var m=d.next,w=d.prev;if(m)m.prev=w;else return;w?w.next=m:m&&(this._drawFirst=m),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(l)}},_bringToBack:function(l){var d=l._order;if(d){var m=d.next,w=d.prev;if(w)w.next=m;else return;m?m.prev=w:w&&(this._drawLast=w),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(l)}}});function Ba(l){return Lt.canvas?new Fa(l):null}var Lr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Mu={_initContainer:function(){this._container=Ht("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($n.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var d=l._container=Lr("shape");It(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",l._path=Lr("path"),d.appendChild(l._path),this._updateStyle(l),this._layers[g(l)]=l},_addPath:function(l){var d=l._container;this._container.appendChild(d),l.options.interactive&&l.addInteractiveTarget(d)},_removePath:function(l){var d=l._container;ae(d),l.removeInteractiveTarget(d),delete this._layers[g(l)]},_updateStyle:function(l){var d=l._stroke,m=l._fill,w=l.options,E=l._container;E.stroked=!!w.stroke,E.filled=!!w.fill,w.stroke?(d||(d=l._stroke=Lr("stroke")),E.appendChild(d),d.weight=w.weight+"px",d.color=w.color,d.opacity=w.opacity,w.dashArray?d.dashStyle=O(w.dashArray)?w.dashArray.join(" "):w.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=w.lineCap.replace("butt","flat"),d.joinstyle=w.lineJoin):d&&(E.removeChild(d),l._stroke=null),w.fill?(m||(m=l._fill=Lr("fill")),E.appendChild(m),m.color=w.fillColor||w.color,m.opacity=w.fillOpacity):m&&(E.removeChild(m),l._fill=null)},_updateCircle:function(l){var d=l._point.round(),m=Math.round(l._radius),w=Math.round(l._radiusY||m);this._setPath(l,l._empty()?"M0 0":"AL "+d.x+","+d.y+" "+m+","+w+" 0,"+65535*360)},_setPath:function(l,d){l._path.v=d},_bringToFront:function(l){pr(l._container)},_bringToBack:function(l){Wi(l._container)}},gs=Lt.vml?Lr:ui,qi=$n.extend({_initContainer:function(){this._container=gs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ae(this._container),Qt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$n.prototype._update.call(this);var l=this._bounds,d=l.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,m.setAttribute("width",d.x),m.setAttribute("height",d.y)),we(m,l.min),m.setAttribute("viewBox",[l.min.x,l.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(l){var d=l._path=gs("path");l.options.className&&It(d,l.options.className),l.options.interactive&&It(d,"leaflet-interactive"),this._updateStyle(l),this._layers[g(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){ae(l._path),l.removeInteractiveTarget(l._path),delete this._layers[g(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var d=l._path,m=l.options;d&&(m.stroke?(d.setAttribute("stroke",m.color),d.setAttribute("stroke-opacity",m.opacity),d.setAttribute("stroke-width",m.weight),d.setAttribute("stroke-linecap",m.lineCap),d.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?d.setAttribute("stroke-dasharray",m.dashArray):d.removeAttribute("stroke-dasharray"),m.dashOffset?d.setAttribute("stroke-dashoffset",m.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),m.fill?(d.setAttribute("fill",m.fillColor||m.color),d.setAttribute("fill-opacity",m.fillOpacity),d.setAttribute("fill-rule",m.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(l,d){this._setPath(l,la(l._parts,d))},_updateCircle:function(l){var d=l._point,m=Math.max(Math.round(l._radius),1),w=Math.max(Math.round(l._radiusY),1)||m,E="a"+m+","+w+" 0 1,0 ",R=l._empty()?"M0 0":"M"+(d.x-m)+","+d.y+E+m*2+",0 "+E+-m*2+",0 ";this._setPath(l,R)},_setPath:function(l,d){l._path.setAttribute("d",d)},_bringToFront:function(l){pr(l._path)},_bringToBack:function(l){Wi(l._path)}});Lt.vml&&qi.include(Mu);function po(l){return Lt.svg||Lt.vml?new qi(l):null}Rt.include({getRenderer:function(l){var d=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var d=this._paneRenderers[l];return d===void 0&&(d=this._createRenderer({pane:l}),this._paneRenderers[l]=d),d},_createRenderer:function(l){return this.options.preferCanvas&&Ba(l)||po(l)}});var bp=kr.extend({initialize:function(l,d){kr.prototype.initialize.call(this,this._boundsToLatLngs(l),d)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=pt(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function Q1(l,d){return new bp(l,d)}qi.create=gs,qi.pointsToPath=la,Xn.geometryToLayer=ho,Xn.coordsToLatLng=Ci,Xn.coordsToLatLngs=fo,Xn.latLngToCoords=go,Xn.latLngsToCoords=Ye,Xn.getFeature=qe,Xn.asFeature=h,Rt.mergeOptions({boxZoom:!0});var Ep=Yn.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){Dt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ci(),wa(),this._startPoint=this._map.mouseEventToContainerPoint(l),Dt(document,{contextmenu:bi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Ht("div","leaflet-zoom-box",this._container),It(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var d=new _t(this._point,this._startPoint),m=d.getSize();we(this._box,d.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(ae(this._box),Xt(this._container,"leaflet-crosshair")),mr(),ss(),Qt(document,{contextmenu:bi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var d=new zt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Rt.addInitHook("addHandler","boxZoom",Ep),Rt.mergeOptions({doubleClickZoom:!0});var Sp=Yn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var d=this._map,m=d.getZoom(),w=d.options.zoomDelta,E=l.originalEvent.shiftKey?m-w:m+w;d.options.doubleClickZoom==="center"?d.setZoom(E):d.setZoomAround(l.containerPoint,E)}});Rt.addInitHook("addHandler","doubleClickZoom",Sp),Rt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Tp=Yn.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new Si(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}It(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Xt(this._map._container,"leaflet-grab"),Xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=pt(this._map.options.maxBounds);this._offsetLimit=wt(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var d=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(d),this._prunePositions(d)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,d){return l-(l-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;l.x<d.min.x&&(l.x=this._viscousLimit(l.x,d.min.x)),l.y<d.min.y&&(l.y=this._viscousLimit(l.y,d.min.y)),l.x>d.max.x&&(l.x=this._viscousLimit(l.x,d.max.x)),l.y>d.max.y&&(l.y=this._viscousLimit(l.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,d=Math.round(l/2),m=this._initialWorldOffset,w=this._draggable._newPos.x,E=(w-d+m)%l+d-m,R=(w+d+m)%l-d-m,U=Math.abs(E+m)<Math.abs(R+m)?E:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=U},_onDragEnd:function(l){var d=this._map,m=d.options,w=!m.inertia||l.noInertia||this._times.length<2;if(d.fire("dragend",l),w)d.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,U=m.easeLinearity,q=E.multiplyBy(U/R),K=q.distanceTo([0,0]),ot=Math.min(m.inertiaMaxSpeed,K),mt=q.multiplyBy(ot/K),Pt=ot/(m.inertiaDeceleration*U),Ft=mt.multiplyBy(-Pt/2).round();!Ft.x&&!Ft.y?d.fire("moveend"):(Ft=d._limitOffset(Ft,d.options.maxBounds),nt(function(){d.panBy(Ft,{duration:Pt,easeLinearity:U,noMoveStart:!0,animate:!0})}))}}});Rt.addInitHook("addHandler","dragging",Tp),Rt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Cp=Yn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),Dt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,d=document.documentElement,m=l.scrollTop||d.scrollTop,w=l.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(w,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var d=this._panKeys={},m=this.keyCodes,w,E;for(w=0,E=m.left.length;w<E;w++)d[m.left[w]]=[-1*l,0];for(w=0,E=m.right.length;w<E;w++)d[m.right[w]]=[l,0];for(w=0,E=m.down.length;w<E;w++)d[m.down[w]]=[0,l];for(w=0,E=m.up.length;w<E;w++)d[m.up[w]]=[0,-1*l]},_setZoomDelta:function(l){var d=this._zoomKeys={},m=this.keyCodes,w,E;for(w=0,E=m.zoomIn.length;w<E;w++)d[m.zoomIn[w]]=l;for(w=0,E=m.zoomOut.length;w<E;w++)d[m.zoomOut[w]]=-l},_addHooks:function(){Dt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var d=l.keyCode,m=this._map,w;if(d in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(w=this._panKeys[d],l.shiftKey&&(w=X(w).multiplyBy(3)),m.options.maxBounds&&(w=m._limitOffset(X(w),m.options.maxBounds)),m.options.worldCopyJump){var E=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(w)));m.panTo(E)}else m.panBy(w)}else if(d in this._zoomKeys)m.setZoom(m.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;bi(l)}}});Rt.addInitHook("addHandler","keyboard",Cp),Rt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Mp=Yn.extend({addHooks:function(){Dt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var d=Sa(l),m=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var w=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),w),bi(l)},_performZoom:function(){var l=this._map,d=l.getZoom(),m=this._map.options.zoomSnap||0;l._stop();var w=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(w))))/Math.LN2,R=m?Math.ceil(E/m)*m:E,U=l._limitZoom(d+(this._delta>0?R:-R))-d;this._delta=0,this._startTime=null,U&&(l.options.scrollWheelZoom==="center"?l.setZoom(d+U):l.setZoomAround(this._lastMousePos,d+U))}});Rt.addInitHook("addHandler","scrollWheelZoom",Mp);var J1=600;Rt.mergeOptions({tapHold:Lt.touchNative&&Lt.safari&&Lt.mobile,tapTolerance:15});var Pp=Yn.extend({addHooks:function(){Dt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var d=l.touches[0];this._startPos=this._newPos=new Q(d.clientX,d.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Dt(document,"touchend",de),Dt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),J1),Dt(document,"touchend touchcancel contextmenu",this._cancel,this),Dt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Qt(document,"touchend",de),Qt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Qt(document,"touchend touchcancel contextmenu",this._cancel,this),Qt(document,"touchmove",this._onMove,this)},_onMove:function(l){var d=l.touches[0];this._newPos=new Q(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,d){var m=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});m._simulated=!0,d.target.dispatchEvent(m)}});Rt.addInitHook("addHandler","tapHold",Pp),Rt.mergeOptions({touchZoom:Lt.touch,bounceAtZoomLimits:!0});var Np=Yn.extend({addHooks:function(){It(this._map._container,"leaflet-touch-zoom"),Dt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Xt(this._map._container,"leaflet-touch-zoom"),Qt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var d=this._map;if(!(!l.touches||l.touches.length!==2||d._animatingZoom||this._zooming)){var m=d.mouseEventToContainerPoint(l.touches[0]),w=d.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(m.add(w)._divideBy(2))),this._startDist=m.distanceTo(w),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),Dt(document,"touchmove",this._onTouchMove,this),Dt(document,"touchend touchcancel",this._onTouchEnd,this),de(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var d=this._map,m=d.mouseEventToContainerPoint(l.touches[0]),w=d.mouseEventToContainerPoint(l.touches[1]),E=m.distanceTo(w)/this._startDist;if(this._zoom=d.getScaleZoom(E,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&E<1||this._zoom>d.getMaxZoom()&&E>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var R=m._add(w)._divideBy(2)._subtract(this._centerPoint);if(E===1&&R.x===0&&R.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),at(this._animRequest);var U=u(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=nt(U,this,!0),de(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,at(this._animRequest),Qt(document,"touchmove",this._onTouchMove,this),Qt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Rt.addInitHook("addHandler","touchZoom",Np),Rt.BoxZoom=Ep,Rt.DoubleClickZoom=Sp,Rt.Drag=Tp,Rt.Keyboard=Cp,Rt.ScrollWheelZoom=Mp,Rt.TapHold=Pp,Rt.TouchZoom=Np,n.Bounds=_t,n.Browser=Lt,n.CRS=We,n.Canvas=Fa,n.Circle=co,n.CircleMarker=fs,n.Class=tt,n.Control=On,n.DivIcon=bt,n.DivOverlay=W,n.DomEvent=Yh,n.DomUtil=io,n.Draggable=Si,n.Evented=xt,n.FeatureGroup=di,n.GeoJSON=Xn,n.GridLayer=At,n.Handler=Yn,n.Icon=wr,n.ImageOverlay=p,n.LatLng=Nt,n.LatLngBounds=zt,n.Layer=Dn,n.LayerGroup=xr,n.LineUtil=Da,n.Map=Rt,n.Marker=uo,n.Mixin=Kh,n.Path=Ti,n.Point=Q,n.PolyUtil=cn,n.Polygon=kr,n.Polyline=qn,n.Popup=Y,n.PosAnimation=Ta,n.Projection=Jh,n.Rectangle=bp,n.Renderer=$n,n.SVG=qi,n.SVGOverlay=D,n.TileLayer=he,n.Tooltip=ft,n.Transformation=kt,n.Util=rt,n.VideoOverlay=b,n.bind=u,n.bounds=wt,n.canvas=Ba,n.circle=sf,n.circleMarker=Su,n.control=Fe,n.divIcon=Gt,n.extend=i,n.featureGroup=bu,n.geoJSON=o,n.geoJson=c,n.gridLayer=Jt,n.icon=nf,n.imageOverlay=y,n.latLng=St,n.latLngBounds=pt,n.layerGroup=Lu,n.map=oo,n.marker=rf,n.point=X,n.polygon=Tu,n.polyline=za,n.popup=st,n.rectangle=Q1,n.setOptions=N,n.stamp=g,n.svg=po,n.svgOverlay=z,n.tileLayer=Pe,n.tooltip=yt,n.transformation=j,n.version=r,n.videoOverlay=T;var tw=window.L;n.noConflict=function(){return window.L=tw,this},window.L=n})})(Ud,Ud.exports);var J=Ud.exports;const ti=yh(J);function rx(e,t){const n=it.useRef(t);it.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function qL(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const XL=1;function $L(e){return Object.freeze({__version:XL,map:e})}function ep(e,t){return Object.freeze({...e,...t})}const sx=it.createContext(null),ox=sx.Provider;function ia(){const e=it.useContext(sx);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function ax(e){function t(n,r){const{instance:i,context:a}=e(n).current;return it.useImperativeHandle(r,()=>i),n.children==null?null:Ns.createElement(ox,{value:a},n.children)}return it.forwardRef(t)}function KL(e){function t(n,r){const[i,a]=it.useState(!1),{instance:u}=e(n,a).current;it.useImperativeHandle(r,()=>u),it.useEffect(function(){i&&u.update()},[u,i,n.children]);const f=u._contentNode;return f?q0.createPortal(n.children,f):null}return it.forwardRef(t)}function lx(e){function t(n,r){const{instance:i}=e(n).current;return it.useImperativeHandle(r,()=>i),null}return it.forwardRef(t)}function QL(e){return function(n){const r=ia(),i=e(n,r),{instance:a}=i.current,u=it.useRef(n.position),{position:f}=n;return it.useEffect(function(){return a.addTo(r.map),function(){a.remove()}},[r.map,a]),it.useEffect(function(){f!=null&&f!==u.current&&(a.setPosition(f),u.current=f)},[a,f]),i}}function np(e,t){const n=it.useRef();it.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function Ah(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function JL(e,t){return function(r,i){const a=ia(),u=e(Ah(r,a),a);return rx(a.map,r.attribution),np(u.current,r.eventHandlers),t(u.current,a,r,i),u}}function ra(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function iu(e,t){return t==null?function(r,i){const a=it.useRef();return a.current||(a.current=e(r,i)),a}:function(r,i){const a=it.useRef();a.current||(a.current=e(r,i));const u=it.useRef(r),{instance:f}=a.current;return it.useEffect(function(){u.current!==r&&(t(f,r,u.current),u.current=r)},[f,r,i]),a}}function ux(e,t){it.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function cx(e){return function(n){const r=ia(),i=e(Ah(n,r),r);return rx(r.map,n.attribution),np(i.current,n.eventHandlers),ux(i.current,r),i}}function tb(e,t){const n=it.useRef();it.useEffect(function(){if(t.pathOptions!==n.current){const i=t.pathOptions??{};e.instance.setStyle(i),n.current=i}},[e,t])}function eb(e){return function(n){const r=ia(),i=e(Ah(n,r),r);return np(i.current,n.eventHandlers),ux(i.current,r),tb(i.current,n),i}}function nb(e){function t(i,a){return ra(e(i),a)}const n=iu(t),r=QL(n);return lx(r)}function ib(e,t){const n=iu(e,t),r=cx(n);return ax(r)}function rb(e,t){const n=iu(e),r=JL(n,t);return KL(r)}function hx(e,t){const n=iu(e,t),r=eb(n);return ax(r)}function sb(e,t){const n=iu(e,t),r=cx(n);return lx(r)}function ob(e,t,n){const{opacity:r,zIndex:i}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function ab(e,t,n){t.bounds instanceof J.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),t.opacity!=null&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),t.zIndex!=null&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)}function fx(){return ia().map}const lb=hx(function({center:t,children:n,...r},i){const a=new J.CircleMarker(t,r);return ra(a,ep(i,{overlayContainer:a}))},qL),ub=hx(function({children:t,...n},r){const i=new J.FeatureGroup([],n);return ra(i,ep(r,{layerContainer:i,overlayContainer:i}))}),cb=ib(function({bounds:t,url:n,...r},i){const a=new J.ImageOverlay(n,t,r);return ra(a,ep(i,{overlayContainer:a}))},function(t,n,r){if(ab(t,n,r),n.bounds!==r.bounds){const i=n.bounds instanceof J.LatLngBounds?n.bounds:new J.LatLngBounds(n.bounds);t.setBounds(i)}n.url!==r.url&&t.setUrl(n.url)});function Hd(){return Hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hd.apply(this,arguments)}function hb({bounds:e,boundsOptions:t,center:n,children:r,className:i,id:a,placeholder:u,style:f,whenReady:g,zoom:_,...v},x){const[k]=it.useState({className:i,id:a,style:f}),[S,C]=it.useState(null);it.useImperativeHandle(x,()=>(S==null?void 0:S.map)??null,[S]);const N=it.useCallback(P=>{if(P!==null&&S===null){const M=new J.Map(P,v);n!=null&&_!=null?M.setView(n,_):e!=null&&M.fitBounds(e,t),g!=null&&M.whenReady(g),C($L(M))}},[]);it.useEffect(()=>()=>{S==null||S.map.remove()},[S]);const A=S?Ns.createElement(ox,{value:S},r):u??null;return Ns.createElement("div",Hd({},k,{ref:N}),A)}const fb=it.forwardRef(hb),db=nb(function(t){return new J.Control.Scale(t)}),qu=sb(function({url:t,...n},r){const i=new J.TileLayer(t,Ah(n,r));return ra(i,r)},function(t,n,r){ob(t,n,r);const{url:i}=n;i!=null&&i!==r.url&&t.setUrl(i)}),gb=rb(function(t,n){const r=new J.Tooltip(t,n.overlayContainer);return ra(r,n)},function(t,n,{position:r},i){it.useEffect(function(){const u=n.overlayContainer;if(u==null)return;const{instance:f}=t,g=v=>{v.tooltip===f&&(r!=null&&f.setLatLng(r),f.update(),i(!0))},_=v=>{v.tooltip===f&&i(!1)};return u.on({tooltipopen:g,tooltipclose:_}),u.bindTooltip(f),function(){u.off({tooltipopen:g,tooltipclose:_}),u._map!=null&&u.unbindTooltip()}},[t,n,i,r])});var dx={exports:{}},pb="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mb=pb,_b=mb;function gx(){}function px(){}px.resetWarningCache=gx;var vb=function(){function e(r,i,a,u,f,g){if(g!==_b){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:px,resetWarningCache:gx};return n.PropTypes=n,n};dx.exports=vb();var Wt=dx.exports;(function(e,t,n){function r(i,a){for(;(i=i.parentElement)&&!i.classList.contains(a););return i}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(i,a){this._map=i,this._container=i._container,this._overlayPane=i._panes.overlayPane,this._popupPane=i._panes.popupPane,a&&a.shapeOptions&&(a.shapeOptions=L.Util.extend({},this.options.shapeOptions,a.shapeOptions)),L.setOptions(this,a);var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(L.DomUtil.disableTextSelection(),i.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(i){L.setOptions(this,i)},_fireCreatedEvent:function(i){this._map.fire(L.Draw.Event.CREATED,{layer:i,layerType:this.type})},_cancelDrawing:function(i){i.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(i,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,i,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var i=this._markers.pop(),a=this._poly,u=a.getLatLngs(),f=u.splice(-1,1)[0];this._poly.setLatLngs(u),this._markerGroup.removeLayer(i),a.getLatLngs().length<2&&this._map.removeLayer(a),this._vertexChanged(f,!1)}},addVertex:function(i){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(i))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(i)),this._poly.addLatLng(i),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(i,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var i=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),a=this._poly.newLatLngIntersects(i[i.length-1]);if(!this.options.allowIntersection&&a||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(i){var a=this._map.mouseEventToLayerPoint(i.originalEvent),u=this._map.layerPointToLatLng(a);this._currentLatLng=u,this._updateTooltip(u),this._updateGuide(a),this._mouseMarker.setLatLng(u),L.DomEvent.preventDefault(i.originalEvent)},_vertexChanged:function(i,a){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(i,a),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(i){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(i),this._clickHandled=!0,this._disableNewMarkers();var a=i.originalEvent,u=a.clientX,f=a.clientY;this._startPoint.call(this,u,f)}},_startPoint:function(i,a){this._mouseDownOrigin=L.point(i,a)},_onMouseUp:function(i){var a=i.originalEvent,u=a.clientX,f=a.clientY;this._endPoint.call(this,u,f,i),this._clickHandled=null},_endPoint:function(i,a,u){if(this._mouseDownOrigin){var f=L.point(i,a).distanceTo(this._mouseDownOrigin),g=this._calculateFinishDistance(u.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(u.latlng),this._finishShape()):g<10&&L.Browser.touch?this._finishShape():Math.abs(f)<9*(e.devicePixelRatio||1)&&this.addVertex(u.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(i){var a,u,f=i.originalEvent;!f.touches||!f.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(a=f.touches[0].clientX,u=f.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,a,u),this._endPoint.call(this,a,u,i),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(i){var a;if(this._markers.length>0){var u;if(this.type===L.Draw.Polyline.TYPE)u=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;u=this._markers[0]}var f=this._map.latLngToContainerPoint(u.getLatLng()),g=new L.Marker(i,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),_=this._map.latLngToContainerPoint(g.getLatLng());a=f.distanceTo(_)}else a=1/0;return a},_updateFinishHandler:function(){var i=this._markers.length;i>1&&this._markers[i-1].on("click",this._finishShape,this),i>2&&this._markers[i-2].off("click",this._finishShape,this)},_createMarker:function(i){var a=new L.Marker(i,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(a),a},_updateGuide:function(i){var a=this._markers?this._markers.length:0;a>0&&(i=i||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[a-1].getLatLng()),i))},_updateTooltip:function(i){var a=this._getTooltipText();i&&this._tooltip.updatePosition(i),this._errorShown||this._tooltip.updateContent(a)},_drawGuide:function(i,a){var u,f,g,_=Math.floor(Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))),v=this.options.guidelineDistance,x=this.options.maxGuideLineLength,k=_>x?_-x:v;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));k<_;k+=this.options.guidelineDistance)u=k/_,f={x:Math.floor(i.x*(1-u)+u*a.x),y:Math.floor(i.y*(1-u)+u*a.y)},g=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),g.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(g,f)},_updateGuideColor:function(i){if(this._guidesContainer)for(var a=0,u=this._guidesContainer.childNodes.length;a<u;a++)this._guidesContainer.childNodes[a].style.backgroundColor=i},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var i,a,u=this.options.showLength;return this._markers.length===0?i={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(a=u?this._getMeasurementString():"",i=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a}),i},_updateRunningMeasure:function(i,a){var u,f,g=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(u=g-(a?2:1),f=L.GeometryUtil.isVersion07x()?i.distanceTo(this._markers[u].getLatLng())*(this.options.factor||1):this._map.distance(i,this._markers[u].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=f*(a?1:-1))},_getMeasurementString:function(){var i,a=this._currentLatLng,u=this._markers[this._markers.length-1].getLatLng();return i=L.GeometryUtil.isVersion07x()?u&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(u)*(this.options.factor||1):this._measurementRunningTotal||0:u&&a?this._measurementRunningTotal+this._map.distance(a,u)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(i,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var i=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(i,a){L.Draw.Polyline.prototype.initialize.call(this,i,a),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var i=this._markers.length;i===1&&this._markers[0].on("click",this._finishShape,this),i>2&&(this._markers[i-1].on("dblclick",this._finishShape,this),i>3&&this._markers[i-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var i,a;return this._markers.length===0?i=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(i=L.drawLocal.draw.handlers.polygon.tooltip.cont,a=this._getMeasurementString()):(i=L.drawLocal.draw.handlers.polygon.tooltip.end,a=this._getMeasurementString()),{text:i,subtext:a}},_getMeasurementString:function(){var i=this._area,a="";return i||this.options.showLength?(this.options.showLength&&(a=L.Draw.Polyline.prototype._getMeasurementString.call(this)),i&&(a+="<br>"+L.GeometryUtil.readableArea(i,this.options.metric,this.options.precision)),a):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(i,a){var u;!this.options.allowIntersection&&this.options.showArea&&(u=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(u)),L.Draw.Polyline.prototype._vertexChanged.call(this,i,a)},_cleanUpShape:function(){var i=this._markers.length;i>0&&(this._markers[0].off("click",this._finishShape,this),i>2&&this._markers[i-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(i,a){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,i,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),t.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(t,"mouseup",this._onMouseUp,this),L.DomEvent.off(t,"touchend",this._onMouseUp,this),t.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(i){this._isDrawing=!0,this._startLatLng=i.latlng,L.DomEvent.on(t,"mouseup",this._onMouseUp,this).on(t,"touchend",this._onMouseUp,this).preventDefault(i.originalEvent)},_onMouseMove:function(i){var a=i.latlng;this._tooltip.updatePosition(a),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(a))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(i,a){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,i,a)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(i){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!r(i.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(i){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,i)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,i),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var i=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)},_getTooltipText:function(){var i,a,u,f=L.Draw.SimpleShape.prototype._getTooltipText.call(this),g=this._shape,_=this.options.showArea;return g&&(i=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),a=L.GeometryUtil.geodesicArea(i),u=_?L.GeometryUtil.readableArea(a,this.options.metric):""),{text:f.text,subtext:u}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(i,a){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,i,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(i){var a=i.latlng;this._tooltip.updatePosition(a),this._mouseMarker.setLatLng(a),this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(i){return new L.Marker(i,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(i){this._onMouseMove(i),this._onClick()},_fireCreatedEvent:function(){var i=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(i,a){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,i,a)},_fireCreatedEvent:function(){var i=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,i)},_createMarker:function(i){return new L.CircleMarker(i,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(i,a){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,i,a)},_drawShape:function(i){if(L.GeometryUtil.isVersion07x())var a=this._startLatLng.distanceTo(i);else var a=this._map.distance(this._startLatLng,i);this._shape?this._shape.setRadius(a):(this._shape=new L.Circle(this._startLatLng,a,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var i=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)},_onMouseMove:function(i){var a,u=i.latlng,f=this.options.showRadius,g=this.options.metric;if(this._tooltip.updatePosition(u),this._isDrawing){this._drawShape(u),a=this._shape.getRadius().toFixed(1);var _="";f&&(_=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(a,g,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:_})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(i,a){this._marker=i,L.setOptions(this,a)},addHooks:function(){var i=this._marker;i.dragging.enable(),i.on("dragend",this._onDragEnd,i),this._toggleMarkerHighlight()},removeHooks:function(){var i=this._marker;i.dragging.disable(),i.off("dragend",this._onDragEnd,i),this._toggleMarkerHighlight()},_onDragEnd:function(i){var a=i.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_toggleMarkerHighlight:function(){var i=this._marker._icon;i&&(i.style.display="none",L.DomUtil.hasClass(i,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(i,"leaflet-edit-marker-selected"),this._offsetMarker(i,-4)):(L.DomUtil.addClass(i,"leaflet-edit-marker-selected"),this._offsetMarker(i,4)),i.style.display="")},_offsetMarker:function(i,a){var u=parseInt(i.style.marginTop,10)-a,f=parseInt(i.style.marginLeft,10)-a;i.style.marginTop=u+"px",i.style.marginLeft=f+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(i){this.latlngs=[i._latlngs],i._holes&&(this.latlngs=this.latlngs.concat(i._holes)),this._poly=i,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(i){for(var a=0;a<this._verticesHandlers.length;a++)i(this._verticesHandlers[a])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(i){i.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(i){i.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(i){i.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var i=0;i<this.latlngs.length;i++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[i],this._poly.options.poly))},_updateLatLngs:function(i){this.latlngs=[i.layer._latlngs],i.layer._holes&&(this.latlngs=this.latlngs.concat(i.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(i,a,u){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=i,u&&u.drawError&&(u.drawError=L.Util.extend({},this.options.drawError,u.drawError)),this._latlngs=a,L.setOptions(this,u)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var i=this._poly,a=i._path;i instanceof L.Polygon||(i.options.fill=!1,i.options.editing&&(i.options.editing.fill=!1)),a&&i.options.editing&&i.options.editing.className&&(i.options.original.className&&i.options.original.className.split(" ").forEach(function(u){L.DomUtil.removeClass(a,u)}),i.options.editing.className.split(" ").forEach(function(u){L.DomUtil.addClass(a,u)})),i.setStyle(i.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var i=this._poly,a=i._path;a&&i.options.editing&&i.options.editing.className&&(i.options.editing.className.split(" ").forEach(function(u){L.DomUtil.removeClass(a,u)}),i.options.original.className&&i.options.original.className.split(" ").forEach(function(u){L.DomUtil.addClass(a,u)})),i.setStyle(i.options.original),i._map&&(i._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var i,a,u,f,g=this._defaultShape();for(i=0,u=g.length;i<u;i++)f=this._createMarker(g[i],i),f.on("click",this._onMarkerClick,this),f.on("contextmenu",this._onContextMenu,this),this._markers.push(f);var _,v;for(i=0,a=u-1;i<u;a=i++)(i!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(_=this._markers[a],v=this._markers[i],this._createMiddleMarker(_,v),this._updatePrevNext(_,v))},_createMarker:function(i,a){var u=new L.Marker.Touch(i,{draggable:!0,icon:this.options.icon});return u._origLatLng=i,u._index=a,u.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(u),u},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var i=this._defaultShape(),a=[].splice.apply(i,arguments);return this._poly._convertLatLngs(i,!0),this._poly.redraw(),a},_removeMarker:function(i){var a=i._index;this._markerGroup.removeLayer(i),this._markers.splice(a,1),this._spliceLatLngs(a,1),this._updateIndexes(a,-1),i.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(i){var a=i.target,u=this._poly,f=L.LatLngUtil.cloneLatLng(a._origLatLng);if(L.extend(a._origLatLng,a._latlng),u.options.poly){var g=u._map._editTooltip;if(!u.options.poly.allowIntersection&&u.intersects()){L.extend(a._origLatLng,f),a.setLatLng(f);var _=u.options.color;u.setStyle({color:this.options.drawError.color}),g&&g.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){u.setStyle({color:_}),g&&g.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}a._middleLeft&&a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a)),a._middleRight&&a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var v=this._poly.getLatLngs();this._poly._convertLatLngs(v,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(i){var a=L.Polygon&&this._poly instanceof L.Polygon?4:3,u=i.target;this._defaultShape().length<a||(this._removeMarker(u),this._updatePrevNext(u._prev,u._next),u._middleLeft&&this._markerGroup.removeLayer(u._middleLeft),u._middleRight&&this._markerGroup.removeLayer(u._middleRight),u._prev&&u._next?this._createMiddleMarker(u._prev,u._next):u._prev?u._next||(u._prev._middleRight=null):u._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(i){var a=i.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:a,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(i){var a=this._map.mouseEventToLayerPoint(i.originalEvent.touches[0]),u=this._map.layerPointToLatLng(a),f=i.target;L.extend(f._origLatLng,u),f._middleLeft&&f._middleLeft.setLatLng(this._getMiddleLatLng(f._prev,f)),f._middleRight&&f._middleRight.setLatLng(this._getMiddleLatLng(f,f._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(i,a){this._markerGroup.eachLayer(function(u){u._index>i&&(u._index+=a)})},_createMiddleMarker:function(i,a){var u,f,g,_=this._getMiddleLatLng(i,a),v=this._createMarker(_);v.setOpacity(.6),i._middleRight=a._middleLeft=v,f=function(){v.off("touchmove",f,this);var x=a._index;v._index=x,v.off("click",u,this).on("click",this._onMarkerClick,this),_.lat=v.getLatLng().lat,_.lng=v.getLatLng().lng,this._spliceLatLngs(x,0,_),this._markers.splice(x,0,v),v.setOpacity(1),this._updateIndexes(x,1),a._index++,this._updatePrevNext(i,v),this._updatePrevNext(v,a),this._poly.fire("editstart")},g=function(){v.off("dragstart",f,this),v.off("dragend",g,this),v.off("touchmove",f,this),this._createMiddleMarker(i,v),this._createMiddleMarker(v,a)},u=function(){f.call(this),g.call(this),this._fireEdit()},v.on("click",u,this).on("dragstart",f,this).on("dragend",g,this).on("touchmove",f,this),this._markerGroup.addLayer(v)},_updatePrevNext:function(i,a){i&&(i._next=a),a&&(a._prev=i)},_getMiddleLatLng:function(i,a){var u=this._poly._map,f=u.project(i.getLatLng()),g=u.project(a.getLatLng());return u.unproject(f._add(g)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(i,a){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=i,L.Util.setOptions(this,a)},addHooks:function(){var i=this._shape;this._shape._map&&(this._map=this._shape._map,i.setStyle(i.options.editing),i._map&&(this._map=i._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var i=this._shape;if(i.setStyle(i.options.original),i._map){this._unbindMarker(this._moveMarker);for(var a=0,u=this._resizeMarkers.length;a<u;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(i,a){var u=new L.Marker.Touch(i,{draggable:!0,icon:a,zIndexOffset:10});return this._bindMarker(u),this._markerGroup.addLayer(u),u},_bindMarker:function(i){i.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(i){i.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(i){i.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(i){var a=i.target,u=a.getLatLng();a===this._moveMarker?this._move(u):this._resize(u),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(i){i.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(i){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,i),typeof this._getCorners=="function"){var a=this._getCorners(),u=i.target,f=u._cornerIndex;u.setOpacity(0),this._oppositeCorner=a[(f+2)%4],this._toggleCornerMarkers(0,f)}this._shape.fire("editstart")},_onTouchMove:function(i){var a=this._map.mouseEventToLayerPoint(i.originalEvent.touches[0]),u=this._map.layerPointToLatLng(a);return i.target===this._moveMarker?this._move(u):this._resize(u),this._shape.redraw(),!1},_onTouchEnd:function(i){i.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var i=this._shape.getBounds(),a=i.getCenter();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var i=this._getCorners();this._resizeMarkers=[];for(var a=0,u=i.length;a<u;a++)this._resizeMarkers.push(this._createMarker(i[a],this.options.resizeIcon)),this._resizeMarkers[a]._cornerIndex=a},_onMarkerDragStart:function(i){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,i);var a=this._getCorners(),u=i.target,f=u._cornerIndex;this._oppositeCorner=a[(f+2)%4],this._toggleCornerMarkers(0,f)},_onMarkerDragEnd:function(i){var a,u,f=i.target;f===this._moveMarker&&(a=this._shape.getBounds(),u=a.getCenter(),f.setLatLng(u)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,i)},_move:function(i){for(var a,u=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),f=this._shape.getBounds(),g=f.getCenter(),_=[],v=0,x=u.length;v<x;v++)a=[u[v].lat-g.lat,u[v].lng-g.lng],_.push([i.lat+a[0],i.lng+a[1]]);this._shape.setLatLngs(_),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(i){var a;this._shape.setBounds(L.latLngBounds(i,this._oppositeCorner)),a=this._shape.getBounds(),this._moveMarker.setLatLng(a.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var i=this._shape.getBounds();return[i.getNorthWest(),i.getNorthEast(),i.getSouthEast(),i.getSouthWest()]},_toggleCornerMarkers:function(i){for(var a=0,u=this._resizeMarkers.length;a<u;a++)this._resizeMarkers[a].setOpacity(i)},_repositionCornerMarkers:function(){for(var i=this._getCorners(),a=0,u=this._resizeMarkers.length;a<u;a++)this._resizeMarkers[a].setLatLng(i[a])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var i=this._shape.getLatLng();this._moveMarker=this._createMarker(i,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(i){if(this._resizeMarkers.length){var a=this._getResizeMarkerPoint(i);this._resizeMarkers[0].setLatLng(a)}this._shape.setLatLng(i),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var i=this._shape.getLatLng(),a=this._getResizeMarkerPoint(i);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(a,this.options.resizeIcon))},_getResizeMarkerPoint:function(i){var a=this._shape._radius*Math.cos(Math.PI/4),u=this._map.project(i);return this._map.unproject([u.x+a,u.y-a])},_resize:function(i){var a=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=a.distanceTo(i):radius=this._map.distance(a,i),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(i,a){var u={};if(i.touches!==void 0){if(!i.touches.length)return;u=i.touches[0]}else if(i.pointerType!=="touch"||(u=i,!this._filterClick(i)))return;var f=this._map.mouseEventToContainerPoint(u),g=this._map.mouseEventToLayerPoint(u),_=this._map.layerPointToLatLng(g);this._map.fire(a,{latlng:_,layerPoint:g,containerPoint:f,pageX:u.pageX,pageY:u.pageY,originalEvent:i})},_filterClick:function(i){var a=i.timeStamp||i.originalEvent.timeStamp,u=L.DomEvent._lastClick&&a-L.DomEvent._lastClick;return u&&u>100&&u<500||i.target._simulatedClick&&!i._simulated?(L.DomEvent.stop(i),!1):(L.DomEvent._lastClick=a,!0)},_onTouchStart:function(i){this._map._loaded&&this._touchEvent(i,"touchstart")},_onTouchEnd:function(i){this._map._loaded&&this._touchEvent(i,"touchend")},_onTouchCancel:function(i){if(this._map._loaded){var a="touchcancel";this._detectIE()&&(a="pointercancel"),this._touchEvent(i,a)}},_onTouchLeave:function(i){this._map._loaded&&this._touchEvent(i,"touchleave")},_onTouchMove:function(i){this._map._loaded&&this._touchEvent(i,"touchmove")},_detectIE:function(){var i=e.navigator.userAgent,a=i.indexOf("MSIE ");if(a>0)return parseInt(i.substring(a+5,i.indexOf(".",a)),10);if(i.indexOf("Trident/")>0){var u=i.indexOf("rv:");return parseInt(i.substring(u+3,i.indexOf(".",u)),10)}var f=i.indexOf("Edge/");return f>0&&parseInt(i.substring(f+5,i.indexOf(".",f)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var i=this._icon,a=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?a.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):a.concat(["touchcancel"]),L.DomUtil.addClass(i,"leaflet-clickable"),L.DomEvent.on(i,"click",this._onMouseClick,this),L.DomEvent.on(i,"keypress",this._onKeyPress,this);for(var u=0;u<a.length;u++)L.DomEvent.on(i,a[u],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var i=e.navigator.userAgent,a=i.indexOf("MSIE ");if(a>0)return parseInt(i.substring(a+5,i.indexOf(".",a)),10);if(i.indexOf("Trident/")>0){var u=i.indexOf("rv:");return parseInt(i.substring(u+3,i.indexOf(".",u)),10)}var f=i.indexOf("Edge/");return f>0&&parseInt(i.substring(f+5,i.indexOf(".",f)),10)}}),L.LatLngUtil={cloneLatLngs:function(i){for(var a=[],u=0,f=i.length;u<f;u++)Array.isArray(i[u])?a.push(L.LatLngUtil.cloneLatLngs(i[u])):a.push(this.cloneLatLng(i[u]));return a},cloneLatLng:function(i){return L.latLng(i.lat,i.lng)}},function(){var i={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var u,f,g=a.length,_=0,v=Math.PI/180;if(g>2){for(var x=0;x<g;x++)u=a[x],f=a[(x+1)%g],_+=(f.lng-u.lng)*v*(2+Math.sin(u.lat*v)+Math.sin(f.lat*v));_=6378137*_*6378137/2}return Math.abs(_)},formattedNumber:function(a,u){var f=parseFloat(a).toFixed(u),g=L.drawLocal.format&&L.drawLocal.format.numeric,_=g&&g.delimiters,v=_&&_.thousands,x=_&&_.decimal;if(v||x){var k=f.split(".");f=v?k[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+v):k[0],x=x||".",k.length>1&&(f=f+x+k[1])}return f},readableArea:function(a,u,v){var g,_,v=L.Util.extend({},i,v);return u?(_=["ha","m"],type=typeof u,type==="string"?_=[u]:type!=="boolean"&&(_=u),g=a>=1e6&&_.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*a,v.km)+" km²":a>=1e4&&_.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*a,v.ha)+" ha":L.GeometryUtil.formattedNumber(a,v.m)+" m²"):(a/=.836127,g=a>=3097600?L.GeometryUtil.formattedNumber(a/3097600,v.mi)+" mi²":a>=4840?L.GeometryUtil.formattedNumber(a/4840,v.ac)+" acres":L.GeometryUtil.formattedNumber(a,v.yd)+" yd²"),g},readableDistance:function(a,u,f,g,x){var v,x=L.Util.extend({},i,x);switch(u?typeof u=="string"?u:"metric":f?"feet":g?"nauticalMile":"yards"){case"metric":v=a>1e3?L.GeometryUtil.formattedNumber(a/1e3,x.km)+" km":L.GeometryUtil.formattedNumber(a,x.m)+" m";break;case"feet":a*=3.28083,v=L.GeometryUtil.formattedNumber(a,x.ft)+" ft";break;case"nauticalMile":a*=.53996,v=L.GeometryUtil.formattedNumber(a/1e3,x.nm)+" nm";break;case"yards":default:a*=1.09361,v=a>1760?L.GeometryUtil.formattedNumber(a/1760,x.mi)+" miles":L.GeometryUtil.formattedNumber(a,x.yd)+" yd"}return v},isVersion07x:function(){var a=L.version.split(".");return parseInt(a[0],10)===0&&parseInt(a[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(i,a,u,f){return this._checkCounterclockwise(i,u,f)!==this._checkCounterclockwise(a,u,f)&&this._checkCounterclockwise(i,a,u)!==this._checkCounterclockwise(i,a,f)},_checkCounterclockwise:function(i,a,u){return(u.y-i.y)*(a.x-i.x)>(a.y-i.y)*(u.x-i.x)}}),L.Polyline.include({intersects:function(){var i,a,u,f=this._getProjectedPoints(),g=f?f.length:0;if(this._tooFewPointsForIntersection())return!1;for(i=g-1;i>=3;i--)if(a=f[i-1],u=f[i],this._lineSegmentsIntersectsRange(a,u,i-2))return!0;return!1},newLatLngIntersects:function(i,a){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(i),a)},newPointIntersects:function(i,a){var u=this._getProjectedPoints(),f=u?u.length:0,g=u?u[f-1]:null,_=f-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(g,i,_,a?1:0)},_tooFewPointsForIntersection:function(i){var a=this._getProjectedPoints(),u=a?a.length:0;return u+=i||0,!a||u<=3},_lineSegmentsIntersectsRange:function(i,a,u,f){var g,_,v=this._getProjectedPoints();f=f||0;for(var x=u;x>f;x--)if(g=v[x-1],_=v[x],L.LineUtil.segmentsIntersect(i,a,g,_))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var i=[],a=this._defaultShape(),u=0;u<a.length;u++)i.push(this._map.latLngToLayerPoint(a[u]));return i}}),L.Polygon.include({intersects:function(){var i,a,u,f,g=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(i=g.length,a=g[0],u=g[i-1],f=i-2,this._lineSegmentsIntersectsRange(u,a,f,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(i){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,i);var a;this._toolbars={},L.DrawToolbar&&this.options.draw&&(a=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=a,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(a=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=a,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(i){var a,u=L.DomUtil.create("div","leaflet-draw"),f=!1;for(var g in this._toolbars)this._toolbars.hasOwnProperty(g)&&(a=this._toolbars[g].addToolbar(i))&&(f||(L.DomUtil.hasClass(a,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(a.childNodes[0],"leaflet-draw-toolbar-top"),f=!0),u.appendChild(a));return u},onRemove:function(){for(var i in this._toolbars)this._toolbars.hasOwnProperty(i)&&this._toolbars[i].removeToolbar()},setDrawingOptions:function(i){for(var a in this._toolbars)this._toolbars[a]instanceof L.DrawToolbar&&this._toolbars[a].setOptions(i)},_toolbarEnabled:function(i){var a=i.target;for(var u in this._toolbars)this._toolbars[u]!==a&&this._toolbars[u].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(i){L.setOptions(this,i),this._modes={},this._actionButtons=[],this._activeMode=null;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(i){var a,u=L.DomUtil.create("div","leaflet-draw-section"),f=0,g=this._toolbarClass||"",_=this.getModeHandlers(i);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=i,a=0;a<_.length;a++)_[a].enabled&&this._initModeHandler(_[a].handler,this._toolbarContainer,f++,g,_[a].title);if(f)return this._lastButtonIndex=--f,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),u.appendChild(this._toolbarContainer),u.appendChild(this._actionsContainer),u},removeToolbar:function(){for(var i in this._modes)this._modes.hasOwnProperty(i)&&(this._disposeButton(this._modes[i].button,this._modes[i].handler.enable,this._modes[i].handler),this._modes[i].handler.disable(),this._modes[i].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var a=0,u=this._actionButtons.length;a<u;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(i,a,u,f,g){var _=i.type;this._modes[_]={},this._modes[_].handler=i,this._modes[_].button=this._createButton({type:_,title:g,className:f+"-"+_,container:a,callback:this._modes[_].handler.enable,context:this._modes[_].handler}),this._modes[_].buttonIndex=u,this._modes[_].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream},_createButton:function(i){var a=L.DomUtil.create("a",i.className||"",i.container),u=L.DomUtil.create("span","sr-only",i.container);a.href="#",a.appendChild(u),i.title&&(a.title=i.title,u.innerHTML=i.title),i.text&&(a.innerHTML=i.text,u.innerHTML=i.text);var f=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(a,"click",L.DomEvent.stopPropagation).on(a,"mousedown",L.DomEvent.stopPropagation).on(a,"dblclick",L.DomEvent.stopPropagation).on(a,"touchstart",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.preventDefault).on(a,f,i.callback,i.context),a},_disposeButton:function(i,a){var u=this._detectIOS()?"touchstart":"click";L.DomEvent.off(i,"click",L.DomEvent.stopPropagation).off(i,"mousedown",L.DomEvent.stopPropagation).off(i,"dblclick",L.DomEvent.stopPropagation).off(i,"touchstart",L.DomEvent.stopPropagation).off(i,"click",L.DomEvent.preventDefault).off(i,u,a)},_handlerActivated:function(i){this.disable(),this._activeMode=this._modes[i.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(i){var a,u,f,g,_=this._actionsContainer,v=this.getActions(i),x=v.length;for(u=0,f=this._actionButtons.length;u<f;u++)this._disposeButton(this._actionButtons[u].button,this._actionButtons[u].callback);for(this._actionButtons=[];_.firstChild;)_.removeChild(_.firstChild);for(var k=0;k<x;k++)"enabled"in v[k]&&!v[k].enabled||(a=L.DomUtil.create("li","",_),g=this._createButton({title:v[k].title,text:v[k].text,container:a,callback:v[k].callback,context:v[k].context}),this._actionButtons.push({button:g,callback:v[k].callback}))},_showActionsToolbar:function(){var i=this._activeMode.buttonIndex,a=this._lastButtonIndex,u=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=u+"px",i===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),i===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(i){this._map=i,this._popupPane=i._panes.popupPane,this._visible=!1,this._container=i.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(i){return this._container?(i.subtext=i.subtext||"",i.subtext.length!==0||this._singleLineLabel?i.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(i.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+i.subtext+"</span><br />":"")+"<span>"+i.text+"</span>",i.text||i.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(i){var a=this._map.latLngToLayerPoint(i),u=this._container;return this._container&&(this._visible&&(u.style.visibility="inherit"),L.DomUtil.setPosition(u,a)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(i){for(var a in this.options)this.options.hasOwnProperty(a)&&i[a]&&(i[a]=L.extend({},this.options[a],i[a]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,i)},getModeHandlers:function(i){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(i,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(i,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(i,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(i,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(i,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(i,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(i){return[{enabled:i.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:i.completeShape,context:i},{enabled:i.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:i.deleteLastVertex,context:i},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(i){L.setOptions(this,i);for(var a in this._modes)this._modes.hasOwnProperty(a)&&i.hasOwnProperty(a)&&this._modes[a].handler.setOptions(i[a])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(i){i.edit&&(i.edit.selectedPathOptions===void 0&&(i.edit.selectedPathOptions=this.options.edit.selectedPathOptions),i.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,i.edit.selectedPathOptions)),i.remove&&(i.remove=L.extend({},this.options.remove,i.remove)),i.poly&&(i.poly=L.extend({},this.options.poly,i.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,i),this._selectedFeatureCount=0},getModeHandlers:function(i){var a=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(i,{featureGroup:a,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(i,{featureGroup:a}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(i){var a=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return i.removeAllLayers&&a.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),a},addToolbar:function(i){var a=L.Toolbar.prototype.addToolbar.call(this,i);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),a},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var i,a=this.options.featureGroup,u=a.getLayers().length!==0;this.options.edit&&(i=this._modes[L.EditToolbar.Edit.TYPE].button,u?L.DomUtil.removeClass(i,"leaflet-disabled"):L.DomUtil.addClass(i,"leaflet-disabled"),i.setAttribute("title",u?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(i=this._modes[L.EditToolbar.Delete.TYPE].button,u?L.DomUtil.removeClass(i,"leaflet-disabled"):L.DomUtil.addClass(i,"leaflet-disabled"),i.setAttribute("title",u?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(i,a){if(L.Handler.prototype.initialize.call(this,i),L.setOptions(this,a),this._featureGroup=a.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(i.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),i._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(i){this._revertLayer(i)},this)},save:function(){var i=new L.LayerGroup;this._featureGroup.eachLayer(function(a){a.edited&&(i.addLayer(a),a.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:i})},_backupLayer:function(i){var a=L.Util.stamp(i);this._uneditedLayerProps[a]||(i instanceof L.Polyline||i instanceof L.Polygon||i instanceof L.Rectangle?this._uneditedLayerProps[a]={latlngs:L.LatLngUtil.cloneLatLngs(i.getLatLngs())}:i instanceof L.Circle?this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(i.getLatLng()),radius:i.getRadius()}:(i instanceof L.Marker||i instanceof L.CircleMarker)&&(this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(i.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(i){var a=L.Util.stamp(i);i.edited=!1,this._uneditedLayerProps.hasOwnProperty(a)&&(i instanceof L.Polyline||i instanceof L.Polygon||i instanceof L.Rectangle?i.setLatLngs(this._uneditedLayerProps[a].latlngs):i instanceof L.Circle?(i.setLatLng(this._uneditedLayerProps[a].latlng),i.setRadius(this._uneditedLayerProps[a].radius)):(i instanceof L.Marker||i instanceof L.CircleMarker)&&i.setLatLng(this._uneditedLayerProps[a].latlng),i.fire("revert-edited",{layer:i}))},_enableLayerEdit:function(i){var a,u,f=i.layer||i.target||i;this._backupLayer(f),this.options.poly&&(u=L.Util.extend({},this.options.poly),f.options.poly=u),this.options.selectedPathOptions&&(a=L.Util.extend({},this.options.selectedPathOptions),a.maintainColor&&(a.color=f.options.color,a.fillColor=f.options.fillColor),f.options.original=L.extend({},f.options),f.options.editing=a),f instanceof L.Marker?(f.editing&&f.editing.enable(),f.dragging.enable(),f.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):f.editing.enable()},_disableLayerEdit:function(i){var a=i.layer||i.target||i;a.edited=!1,a.editing&&a.editing.disable(),delete a.options.editing,delete a.options.original,this._selectedPathOptions&&(a instanceof L.Marker?this._toggleMarkerHighlight(a):(a.setStyle(a.options.previousOptions),delete a.options.previousOptions)),a instanceof L.Marker?(a.dragging.disable(),a.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):a.editing.disable()},_onMouseMove:function(i){this._tooltip.updatePosition(i.latlng)},_onMarkerDragEnd:function(i){var a=i.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_onTouchMove:function(i){var a=i.originalEvent.changedTouches[0],u=this._map.mouseEventToLayerPoint(a),f=this._map.layerPointToLatLng(u);i.target.setLatLng(f)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(i,a){if(L.Handler.prototype.initialize.call(this,i),L.Util.setOptions(this,a),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var i=this._map;i&&(i.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(i){this._deletableLayers.addLayer(i),i.fire("revert-deleted",{layer:i})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(i){this._removeLayer({layer:i})},this),this.save()},_enableLayerDelete:function(i){(i.layer||i.target||i).on("click",this._removeLayer,this)},_disableLayerDelete:function(i){var a=i.layer||i.target||i;a.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(a)},_removeLayer:function(i){var a=i.layer||i.target||i;this._deletableLayers.removeLayer(a),this._deletedLayers.addLayer(a),a.fire("deleted")},_onMouseMove:function(i){this._tooltip.updatePosition(i.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var yb=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;i--!==0;){var u=a[i];if(!e(t[u],n[u]))return!1}return!0}return t!==t&&n!==n};const Wm=yh(yb);function Vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vm(Object(n),!0).forEach(function(r){xb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xs={onEdited:"draw:edited",onDrawStart:"draw:drawstart",onDrawStop:"draw:drawstop",onDrawVertex:"draw:drawvertex",onEditStart:"draw:editstart",onEditMove:"draw:editmove",onEditResize:"draw:editresize",onEditVertex:"draw:editvertex",onEditStop:"draw:editstop",onDeleted:"draw:deleted",onDeleteStart:"draw:deletestart",onDeleteStop:"draw:deletestop"};function mx(e){var t=ia(),n=it.useRef(),r=it.useRef(e),i=function(u){var f=e.onCreated,g=t.layerContainer||t.map;g.addLayer(u.layer),f&&f(u)};return Ns.useEffect(function(){var a=t.map,u=e.onMounted;for(var f in xs)a.on(xs[f],function(g){var _=Object.keys(xs).filter(function(x){return xs[x]===g.type});if(_.length===1){var v=_[0];e[v]&&e[v](g)}});return a.on(ti.Draw.Event.CREATED,i),n.current=Zm(e,t),a.addControl(n.current),u&&u(n.current),function(){a.off(ti.Draw.Event.CREATED,i);for(var g in xs)e[g]&&a.off(xs[g],e[g]);n.current.remove(a)}},[e.onCreated,e.onDeleted,e.onEdited]),Ns.useEffect(function(){if(!(Wm(e.draw,r.current.draw)&&Wm(e.edit,r.current.edit)&&e.position===r.current.position)){var a=t.map;n.current.remove(a),n.current=Zm(e,t),n.current.addTo(a);var u=e.onMounted;return u&&u(n.current),function(){n.current.remove(a)}}},[e.draw,e.edit,e.position,e.onCreated,e.onDeleted,e.onEdited]),null}function Zm(e,t){var n=t.layerContainer,r=e.draw,i=e.edit,a=e.position,u={edit:yl(yl({},i),{},{featureGroup:n})};return r&&(u.draw=yl({},r)),a&&(u.position=a),new J.Control.Draw(u)}mx.propTypes=yl(yl({},Object.keys(xs).reduce(function(e,t){return e[t]=Wt.PropTypes.func,e},{})),{},{onCreated:Wt.PropTypes.func,onMounted:Wt.PropTypes.func,draw:Wt.PropTypes.shape({polyline:Wt.PropTypes.oneOfType([Wt.PropTypes.object,Wt.PropTypes.bool]),polygon:Wt.PropTypes.oneOfType([Wt.PropTypes.object,Wt.PropTypes.bool]),rectangle:Wt.PropTypes.oneOfType([Wt.PropTypes.object,Wt.PropTypes.bool]),circle:Wt.PropTypes.oneOfType([Wt.PropTypes.object,Wt.PropTypes.bool]),marker:Wt.PropTypes.oneOfType([Wt.PropTypes.object,Wt.PropTypes.bool])}),edit:Wt.PropTypes.shape({edit:Wt.PropTypes.oneOfType([Wt.PropTypes.object,Wt.PropTypes.bool]),remove:Wt.PropTypes.oneOfType([Wt.PropTypes.object,Wt.PropTypes.bool]),poly:Wt.PropTypes.oneOfType([Wt.PropTypes.object,Wt.PropTypes.bool]),allowIntersection:Wt.PropTypes.bool}),position:Wt.PropTypes.oneOf(["topright","topleft","bottomright","bottomleft"]),leaflet:Wt.PropTypes.shape({map:Wt.PropTypes.instanceOf(J.Map),layerContainer:Wt.PropTypes.shape({addLayer:Wt.PropTypes.func.isRequired,removeLayer:Wt.PropTypes.func.isRequired})})});const zs=Array(100).fill(null).map((e,t)=>({id:`tree_${t+1}`,latitude:18.52+(Math.random()*.1-.05),longitude:73.85+(Math.random()*.1-.05),botanical_name_short:`Tree Species ${t%8+1}`,common_name:`Common Name ${t%8+1}`,CO2_sequestered_kg:50+Math.random()*100,ward:String(Math.floor(Math.random()*15)+1)})),wb=zs.map(e=>({...e,height_m:5+Math.random()*10,girth_cm:30+Math.random()*100,canopy_dia_m:3+Math.random()*5,wood_density:.4+Math.random()*.5,economic_i:["Timber","Fruit","Medicinal","Ornamental","Shade"][Math.floor(Math.random()*5)],flowering:["Spring","Summer","Monsoon","Winter","Year-round"][Math.floor(Math.random()*5)]})),_x=[...new Set(zs.map(e=>e.ward))].sort((e,t)=>parseInt(e)-parseInt(t)),kb=_x.map(e=>{const n=zs.filter(r=>r.ward===e).reduce((r,i)=>r+i.CO2_sequestered_kg,0);return{ward:e,co2_kg:n}}),Lb=_x.map(e=>{const t=zs.filter(n=>n.ward===e);return{ward:e,tree_count:t.length}}),Ym={total_trees:zs.length,total_co2_annual_kg:zs.reduce((e,t)=>e+t.CO2_sequestered_kg,0)},bb=null,Eb=[{common:"Neem",botanical:"Azadirachta indica"},{common:"Peepal",botanical:"Ficus religiosa"},{common:"Banyan",botanical:"Ficus benghalensis"},{common:"Mango",botanical:"Mangifera indica"},{common:"Tamarind",botanical:"Tamarindus indica"},{common:"Gulmohar",botanical:"Delonix regia"},{common:"Copperpod",botanical:"Peltophorum pterocarpum"},{common:"Rain Tree",botanical:"Samanea saman"}],Sb=Eb.map((e,t)=>{const n=parseFloat((2+Math.random()*3).toFixed(1)),r=parseFloat(Math.max(.5,n-(.5+Math.random()*1)).toFixed(1)),i=parseFloat((n+.5+Math.random()*2.5).toFixed(1));return{id:`species_${t+1}`,common_name:e.common,botanical_name:e.botanical,mean_cooling_effect_celsius:n,p90_cooling_effect_celsius:i,p10_cooling_effect_celsius:r,height_m_min:5+Math.floor(Math.random()*5),height_m_max:15+Math.floor(Math.random()*10),girth_cm_min:50+Math.floor(Math.random()*50),girth_cm_max:150+Math.floor(Math.random()*150),canopy_dia_m_min:3+Math.floor(Math.random()*4),canopy_dia_m_max:8+Math.floor(Math.random()*7),co2_seq_kg_min:20+Math.floor(Math.random()*30),co2_seq_kg_max:80+Math.floor(Math.random()*70)}}),vx=it.createContext(void 0),Tb=({children:e})=>{const[t,n]=it.useState([]),[r,i]=it.useState([]),[a,u]=it.useState([]),[f,g]=it.useState([]),[_,v]=it.useState(Ym),[x,k]=it.useState(bb),[S,C]=it.useState([]),[N,A]=it.useState(null),[P,M]=it.useState([]),O=it.useCallback(()=>{n(zs),i(wb)},[]),B=it.useCallback(et=>r.find(nt=>nt.id===et)||null,[r]),F=it.useCallback(()=>{u(kb)},[]),G=it.useCallback(()=>{g(Lb)},[]),H=it.useCallback(()=>{v(Ym)},[]),V=it.useCallback(()=>{},[]),$=it.useCallback(()=>{C(Sb)},[]);return it.useEffect(()=>{O(),H(),F(),G(),V(),$()},[O,H,F,G,V,$]),I.jsx(vx.Provider,{value:{trees:t,fetchTrees:O,getTreeDetails:B,wardCO2Data:a,fetchWardCO2Data:F,wardTreeCountData:f,fetchWardTreeCountData:G,cityStats:_,fetchCityStats:H,wardBoundaries:x,fetchWardBoundaries:V,treeSpeciesData:S,fetchTreeSpeciesData:$,selectedArea:N,setSelectedArea:A,simulatedPlantingPoints:P,setSimulatedPlantingPoints:M},children:e})},sa=()=>{const e=it.useContext(vx);if(e===void 0)throw new Error("useTreeStore must be used within a TreeStoreProvider");return e},Cb=({onTreeClick:e})=>{const t=fx(),{trees:n,fetchTrees:r}=sa();return it.useEffect(()=>{r()},[r]),it.useEffect(()=>{if(!t||!n||n.length===0){t.eachLayer(a=>{a.isTreeMarker&&t.removeLayer(a)});return}const i=ti.layerGroup();return n.forEach(a=>{const u=ti.circleMarker([a.latitude,a.longitude],{radius:5,fillColor:"#00BCD4",fillOpacity:.9,color:"#FFFFFF",weight:2,opacity:1,pane:"markerPane"});u.isTreeMarker=!0;const f=document.createElement("div");f.className="tree-popup p-3 bg-white rounded-lg shadow-sm space-y-2",f.style.minWidth="220px",f.innerHTML=`
        <div>
          <h3 class="text-md font-bold text-primary-700 mb-0.5">${a.common_name}</h3>
          <p class="text-xs text-gray-500 italic">${a.botanical_name_short}</p>
        </div>
        
        <div class="border-t border-gray-200 pt-2 space-y-1">
          <div class="flex items-center text-xs text-gray-600">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1.5 opacity-70"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg> <!-- Generic ID icon -->
            ID: <span class="font-medium ml-1">${a.id}</span>
          </div>
          <div class="flex items-center text-xs text-gray-600">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1.5 opacity-70"><path d="M21.2 15c.7-1.2 1-2.5.7-3.9-.6-2.4-3-4-5.4-4-1.6 0-3.1.8-4 2.2M7.2 20.9c.4.3.8.7 1.2 1M4.2 14.4c-.1.9.1 1.8.7 2.6M7 17.7c-.4-.3-.8-.7-1.2-1M10.2 3.1c.4-.3.8-.7 1.2-1M4.2 9.6C4.1 8.7 4.3 7.8 4.8 7M7 6.3c-.4.3-.8.7-1.2 1M18.8 15c-.7-1.2-1-2.5-.7-3.9.6-2.4 3-4 5.4-4 1.6 0 3.1.8 4-2.2M16.8 3.1c-.4-.3-.8-.7-1.2-1M20.2 9.6c.1.9-.1 1.8-.7 2.6M17 6.3c.4.3.8.7 1.2 1M12 18a6 6 0 0 0 0-12v0a6 6 0 0 0 0 12v0Z"></path></svg> <!-- CO2/Leaf icon -->
            CO₂ Sequestered: <span class="font-medium ml-1">${a.CO2_sequestered_kg.toFixed(1)} kg</span>
          </div>
        </div>
        
        <button 
          class="mt-3 w-full btn btn-primary btn-sm text-xs py-1.5 view-details-btn-internal"
        >
          View Details
        </button>
      `;const g=f.querySelector(".view-details-btn-internal");g&&g.addEventListener("click",()=>{typeof e=="function"?e(a.id):console.error("onTreeClick is not a function in MapTreeLayer. Props:",e)}),u.bindPopup(f,{minWidth:200}),i.addLayer(u)}),i.addTo(t),()=>{t.removeLayer(i)}},[t,n,e]),null};var Mb=Object.defineProperty,Pb=(e,t,n)=>t in e?Mb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,te=(e,t,n)=>Pb(e,typeof t!="symbol"?t+"":t,n);function _n(e,t){return Object.assign(t,e.geocodingQueryParams)}function Nn(e,t){return Object.assign(t,e.reverseQueryParams)}const Nb=/[&<>"'`]/g,Ib=/[&<>"'`]/,Ob={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function Db(e){return Ob[e]}function Rb(e){return e==null?"":e?(e=""+e,Ib.test(e)?e.replace(Nb,Db):e):e+""}function ie(e,t){const n={Accept:"application/json"},r=new URL(e);return Object.entries(t).forEach(([i,a])=>{(Array.isArray(a)?a:[a]).forEach(u=>{r.searchParams.append(i,u)})}),fetch(r.toString(),{headers:n}).then(i=>i.json())}function Ab(e,t){return e.replace(/\{ *([\w_]+) *\}/g,(n,r)=>{let i=t[r];return i===void 0?i="":typeof i=="function"&&(i=i(t)),Rb(i)})}class yx{constructor(t){te(this,"options",{serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",apiKey:""}),J.Util.setOptions(this,t)}async geocode(t){const n=_n(this.options,{token:this.options.apiKey,SingleLine:t,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"});return(await ie(this.options.serviceUrl+"/findAddressCandidates",n)).candidates.map(r=>{const i=new J.LatLng(r.location.y,r.location.x),a=new J.LatLngBounds(new J.LatLng(r.extent.ymax,r.extent.xmax),new J.LatLng(r.extent.ymin,r.extent.xmin));return{name:r.address,bbox:a,center:i}})}suggest(t){return this.geocode(t)}async reverse(t,n){const r=Nn(this.options,{location:t.lng+","+t.lat,distance:100,f:"json"}),i=await ie(this.options.serviceUrl+"/reverseGeocode",r);if(!i||i.error)return[];const a=new J.LatLng(i.location.y,i.location.x),u=new J.LatLngBounds(a,a);return[{name:i.address.Match_addr,center:a,bbox:u}]}}function zb(e){return new yx(e)}class xx{constructor(t){te(this,"options",{serviceUrl:"https://dev.virtualearth.net/REST/v1/Locations/"}),J.Util.setOptions(this,t)}async geocode(t){const n=_n(this.options,{query:t,key:this.options.apiKey}),r=await ie(this.options.serviceUrl,n);return this._parseResults(r)}async reverse(t,n){const r=Nn(this.options,{key:this.options.apiKey}),i=await ie(this.options.serviceUrl+t.lat+","+t.lng,r);return this._parseResults(i)}_parseResults(t){return t.resourceSets[0].resources.map(n=>{const r=n.bbox;return{name:n.name,bbox:new J.LatLngBounds([r[0],r[1]],[r[2],r[3]]),center:new J.LatLng(...n.point.coordinates)}})}}function Fb(e){return new xx(e)}class wx{constructor(t){if(te(this,"options",{apiKey:"",serviceUrl:"https://atlas.microsoft.com/search"}),J.Util.setOptions(this,t),!this.options.apiKey)throw new Error("Azure Maps Geocoder requires an API key.")}async geocode(t){const n={"api-version":"1.0",query:t,"subscription-key":this.options.apiKey},r=this.options.serviceUrl+"/address/json";return((await ie(r,n)).results||[]).map(i=>({name:i.address.freeformAddress,bbox:new J.LatLngBounds([i.viewport.topLeftPoint.lat,i.viewport.topLeftPoint.lon],[i.viewport.btmRightPoint.lat,i.viewport.btmRightPoint.lon]),center:new J.LatLng(i.position.lat,i.position.lon)}))}async reverse(t,n){const r={"api-version":"1.0",query:t.lat+","+t.lng,"subscription-key":this.options.apiKey},i=this.options.serviceUrl+"/address/reverse/json";return((await ie(i,r)).addresses||[]).map(a=>({name:a.address.freeformAddress,bbox:new J.LatLngBounds([a.viewport.topLeftPoint.lat,a.viewport.topLeftPoint.lon],[a.viewport.btmRightPoint.lat,a.viewport.btmRightPoint.lon]),center:new J.LatLng(t.lat,t.lng)}))}}function Bb(e){return new wx(e)}class kx{constructor(t){te(this,"options",{serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json"}),J.Util.setOptions(this,t)}async geocode(t){const n=_n(this.options,{key:this.options.apiKey,address:t}),r=await ie(this.options.serviceUrl,n);return this._parseResults(r)}async reverse(t,n){const r=Nn(this.options,{key:this.options.apiKey,latlng:t.lat+","+t.lng}),i=await ie(this.options.serviceUrl,r);return this._parseResults(i)}_parseResults(t){var n;return(n=t.results||[])==null?void 0:n.map(r=>{const i=new J.LatLng(r.geometry.location.lat,r.geometry.location.lng),a=new J.LatLngBounds(new J.LatLng(r.geometry.viewport.northeast.lat,r.geometry.viewport.northeast.lng),new J.LatLng(r.geometry.viewport.southwest.lat,r.geometry.viewport.southwest.lng));return{name:r.formatted_address,bbox:a,center:i,properties:r.address_components}})}}function jb(e){return new kx(e)}class Lx{constructor(t){if(te(this,"options",{serviceUrl:"https://geocoder.api.here.com/6.2/",app_id:"",app_code:"",apiKey:"",maxResults:5}),J.Util.setOptions(this,t),t!=null&&t.apiKey)throw Error("apiKey is not supported, use app_id/app_code instead!")}geocode(t){const n=_n(this.options,{searchtext:t,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"geocode.json",n)}reverse(t,n){let r=t.lat+","+t.lng;this.options.reverseGeocodeProxRadius&&(r+=","+this.options.reverseGeocodeProxRadius);const i=Nn(this.options,{prox:r,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"reversegeocode.json",i)}async getJSON(t,n){var r,i;return(((i=(r=(await ie(t,n)).response.view)==null?void 0:r[0])==null?void 0:i.result)||[]).map(a=>{const u=a.location,f=new J.LatLng(u.displayPosition.latitude,u.displayPosition.longitude),g=new J.LatLngBounds(new J.LatLng(u.mapView.topLeft.latitude,u.mapView.topLeft.longitude),new J.LatLng(u.mapView.bottomRight.latitude,u.mapView.bottomRight.longitude));return{name:u.address.label,properties:u.address,bbox:g,center:f}})}}class bx{constructor(t){te(this,"options",{serviceUrl:"https://geocode.search.hereapi.com/v1",apiKey:"",app_id:"",app_code:"",maxResults:10}),J.Util.setOptions(this,t)}geocode(t){const n=_n(this.options,{q:t,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!n.at&&!n.in)throw Error("at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.");return this.getJSON(this.options.serviceUrl+"/discover",n)}reverse(t,n){const r=Nn(this.options,{at:t.lat+","+t.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});return this.getJSON(this.options.serviceUrl+"/revgeocode",r)}async getJSON(t,n){return((await ie(t,n)).items||[]).map(r=>{const i=new J.LatLng(r.position.lat,r.position.lng);let a;return r.mapView?a=new J.LatLngBounds(new J.LatLng(r.mapView.south,r.mapView.west),new J.LatLng(r.mapView.north,r.mapView.east)):a=new J.LatLngBounds(new J.LatLng(r.position.lat,r.position.lng),new J.LatLng(r.position.lat,r.position.lng)),{name:r.address.label,properties:r.address,bbox:a,center:i}})}}function Ub(e){return e!=null&&e.apiKey?new bx(e):new Lx(e)}function Ex(e){let t;if(t=e.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))return new J.LatLng((/N/i.test(t[1])?1:-1)*+t[2],(/E/i.test(t[3])?1:-1)*+t[4]);if(t=e.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))return new J.LatLng((/N/i.test(t[2])?1:-1)*+t[1],(/E/i.test(t[4])?1:-1)*+t[3]);if(t=e.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?$/))return new J.LatLng((/N/i.test(t[1])?1:-1)*(+t[2]+ +t[3]/60),(/E/i.test(t[4])?1:-1)*(+t[5]+ +t[6]/60));if(t=e.match(/^(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([NS])\W*(\d{1,3})°?\s*(\d{1,3}(?:\.\d*)?)?['′]?\s*([EW])$/))return new J.LatLng((/N/i.test(t[3])?1:-1)*(+t[1]+ +t[2]/60),(/E/i.test(t[6])?1:-1)*(+t[4]+ +t[5]/60));if(t=e.match(/^([NS])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\W*([EW])\s*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?$/))return new J.LatLng((/N/i.test(t[1])?1:-1)*(+t[2]+ +t[3]/60+ +t[4]/3600),(/E/i.test(t[5])?1:-1)*(+t[6]+ +t[7]/60+ +t[8]/3600));if(t=e.match(/^(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]\s*([NS])\W*(\d{1,3})°?\s*(\d{1,2})['′]?\s*(\d{1,3}(?:\.\d*)?)?["″]?\s*([EW])$/))return new J.LatLng((/N/i.test(t[4])?1:-1)*(+t[1]+ +t[2]/60+ +t[3]/3600),(/E/i.test(t[8])?1:-1)*(+t[5]+ +t[6]/60+ +t[7]/3600));if(t=e.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))return new J.LatLng(+t[1],+t[2])}class Sx{constructor(t){te(this,"options",{next:void 0,sizeInMeters:1e4}),J.Util.setOptions(this,t)}async geocode(t){const n=Ex(t);return n?[{name:t,center:n,bbox:n.toBounds(this.options.sizeInMeters)}]:this.options.next?this.options.next.geocode(t):[]}}function Hb(e){return new Sx(e)}class Tx{constructor(t){te(this,"options",{serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/"}),J.Util.setOptions(this,t)}_getProperties(t){const n={text:t.text,address:t.address};return(t.context||[]).forEach(r=>{const i=r.id.split(".")[0];n[i]=r.text,r.short_code&&(n.countryShortCode=r.short_code)}),n}async geocode(t){const n=this.options.serviceUrl+encodeURIComponent(t)+".json",r=_n(this.options,{access_token:this.options.apiKey});r.proximity!==void 0&&r.proximity.lat!==void 0&&r.proximity.lng!==void 0&&(r.proximity=r.proximity.lng+","+r.proximity.lat);const i=await ie(n,r);return this._parseResults(i)}suggest(t){return this.geocode(t)}async reverse(t,n){const r=this.options.serviceUrl+t.lng+","+t.lat+".json",i=Nn(this.options,{access_token:this.options.apiKey}),a=await ie(r,i);return this._parseResults(a)}_parseResults(t){var n;return(n=t.features)!=null&&n.length?t.features.map(r=>{const i=new J.LatLng(...r.center.reverse());let a;return r.bbox?a=new J.LatLngBounds(new J.LatLng(...r.bbox.slice(0,2).reverse()),new J.LatLng(...r.bbox.slice(2,4).reverse())):a=new J.LatLngBounds(i,i),{name:r.place_name,bbox:a,center:i,properties:this._getProperties(r)}}):[]}}function Gb(e){return new Tx(e)}let Cx=class{constructor(t){te(this,"options",{serviceUrl:"https://www.mapquestapi.com/geocoding/v1"}),J.Util.setOptions(this,t),this.options.apiKey=decodeURIComponent(this.options.apiKey)}_formatName(...t){return t.filter(n=>!!n).join(", ")}async geocode(t){const n=_n(this.options,{key:this.options.apiKey,location:t,limit:5,outFormat:"json"}),r=await ie(this.options.serviceUrl+"/address",n);return this._parseResults(r)}async reverse(t,n){const r=Nn(this.options,{key:this.options.apiKey,location:t.lat+","+t.lng,outputFormat:"json"}),i=await ie(this.options.serviceUrl+"/reverse",r);return this._parseResults(i)}_parseResults(t){var n,r;return(((r=(n=t.results)==null?void 0:n[0])==null?void 0:r.locations)||[]).map(i=>{const a=new J.LatLng(i.latLng.lat,i.latLng.lng);return{name:this._formatName(i.street,i.adminArea4,i.adminArea3,i.adminArea1),bbox:new J.LatLngBounds(a,a),center:a}})}};function Wb(e){return new Cx(e)}class Mx{constructor(t){te(this,"options",{userId:"",apiKey:"",serviceUrl:"https://neutrinoapi.com/"}),J.Util.setOptions(this,t)}async geocode(t){const n=_n(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:t.split(/\s+/).join(".")}),r=await ie(this.options.serviceUrl+"geocode-address",n);if(!r.locations)return[];r.geometry=r.locations[0];const i=new J.LatLng(r.geometry.latitude,r.geometry.longitude),a=new J.LatLngBounds(i,i);return[{name:r.geometry.address,bbox:a,center:i}]}suggest(t){return this.geocode(t)}async reverse(t,n){const r=Nn(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:t.lat,longitude:t.lng}),i=await ie(this.options.serviceUrl+"geocode-reverse",r);if(i.status.status!==200||!i.found)return[];const a=new J.LatLng(t.lat,t.lng),u=new J.LatLngBounds(a,a);return[{name:i.address,bbox:u,center:a}]}}function Vb(e){return new Mx(e)}let ip=class{constructor(t){te(this,"options",{serviceUrl:"https://nominatim.openstreetmap.org/",htmlTemplate(n){const r=n.address;let i;const a=[];return(r.road||r.building)&&a.push("{building} {road} {house_number}"),(r.city||r.town||r.village||r.hamlet)&&(i=a.length>0?"leaflet-control-geocoder-address-detail":"",a.push('<span class="'+i+'">{postcode} {city} {town} {village} {hamlet}</span>')),(r.state||r.country)&&(i=a.length>0?"leaflet-control-geocoder-address-context":"",a.push('<span class="'+i+'">{state} {country}</span>')),Ab(a.join("<br/>"),r)}}),J.Util.setOptions(this,t||{})}async geocode(t){const n=_n(this.options,{q:t,limit:5,format:"json",addressdetails:1});return(await ie(this.options.serviceUrl+"search",n)).map(r=>{const i=r.boundingbox;return{icon:r.icon,name:r.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(r):void 0,bbox:new J.LatLngBounds([+i[0],+i[2]],[+i[1],+i[3]]),center:new J.LatLng(+r.lat,+r.lon),properties:r}})}async reverse(t,n){const r=Nn(this.options,{lat:t.lat,lon:t.lng,zoom:Math.round(Math.log(n/256)/Math.log(2)),addressdetails:1,format:"json"}),i=await ie(this.options.serviceUrl+"reverse",r);if(!(i!=null&&i.lat)||!(i!=null&&i.lon))return[];const a=new J.LatLng(+i.lat,+i.lon),u=new J.LatLngBounds(a,a);return[{name:i.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(i):void 0,center:a,bbox:u,properties:i}]}};function Zb(e){return new ip(e)}class Px{constructor(t){te(this,"options",{}),J.Util.setOptions(this,t)}async geocode(t){try{const n=this.options.OpenLocationCode.decode(t);return[{name:t,center:new J.LatLng(n.latitudeCenter,n.longitudeCenter),bbox:new J.LatLngBounds(new J.LatLng(n.latitudeLo,n.longitudeLo),new J.LatLng(n.latitudeHi,n.longitudeHi))}]}catch(n){return console.warn(n),[]}}async reverse(t,n){try{return[{name:this.options.OpenLocationCode.encode(t.lat,t.lng,this.options.codeLength),center:new J.LatLng(t.lat,t.lng),bbox:new J.LatLngBounds(new J.LatLng(t.lat,t.lng),new J.LatLng(t.lat,t.lng))}]}catch(r){return console.warn(r),[]}}}function Yb(e){return new Px(e)}class Nx{constructor(t){te(this,"options",{serviceUrl:"https://api.opencagedata.com/geocode/v1/json"}),J.Util.setOptions(this,t)}async geocode(t){const n=_n(this.options,{key:this.options.apiKey,q:t}),r=await ie(this.options.serviceUrl,n);return this._parseResults(r)}suggest(t){return this.geocode(t)}async reverse(t,n){const r=Nn(this.options,{key:this.options.apiKey,q:[t.lat,t.lng].join(",")}),i=await ie(this.options.serviceUrl,r);return this._parseResults(i)}_parseResults(t){return(t.results||[]).map(n=>{const r=new J.LatLng(n.geometry.lat,n.geometry.lng),i=n.annotations&&n.annotations.bounds?new J.LatLngBounds(new J.LatLng(n.annotations.bounds.northeast.lat,n.annotations.bounds.northeast.lng),new J.LatLng(n.annotations.bounds.southwest.lat,n.annotations.bounds.southwest.lng)):new J.LatLngBounds(r,r);return{name:n.formatted,bbox:i,center:r,properties:n}})}}function qb(e){return new Nx(e)}class ru{constructor(t){te(this,"options",{serviceUrl:"https://api.geocode.earth/v1"}),J.Util.setOptions(this,t)}async geocode(t){const n=_n(this.options,{api_key:this.options.apiKey,text:t}),r=await ie(this.options.serviceUrl+"/search",n);return this._parseResults(r,"bbox")}async suggest(t){const n=_n(this.options,{api_key:this.options.apiKey,text:t}),r=await ie(this.options.serviceUrl+"/autocomplete",n);return this._parseResults(r,"bbox")}async reverse(t,n){const r=Nn(this.options,{api_key:this.options.apiKey,"point.lat":t.lat,"point.lon":t.lng}),i=await ie(this.options.serviceUrl+"/reverse",r);return this._parseResults(i,"bounds")}_parseResults(t,n){const r=[];return new J.GeoJSON(t,{pointToLayer(i,a){return new J.CircleMarker(a,{radius:10})},onEachFeature(i,a){const u={};let f,g;a.getBounds?(f=a.getBounds(),g=f.getCenter()):a.feature.bbox?(g=a.getLatLng(),f=new J.LatLngBounds(J.GeoJSON.coordsToLatLng(a.feature.bbox.slice(0,2)),J.GeoJSON.coordsToLatLng(a.feature.bbox.slice(2,4)))):(g=a.getLatLng(),f=new J.LatLngBounds(g,g)),u.name=a.feature.properties.label,u.center=g,u[n]=f,u.properties=a.feature.properties,r.push(u)}}),r}}function rp(e){return new ru(e)}const Xb=ru,$b=rp,Kb=ru,Qb=rp;class Ix extends ru{constructor(t){super(Object.assign({serviceUrl:"https://api.openrouteservice.org/geocode"},t))}}function Jb(e){return new Ix(e)}class Ox{constructor(t){te(this,"options",{serviceUrl:"https://photon.komoot.io/api/",reverseUrl:"https://photon.komoot.io/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]}),J.Util.setOptions(this,t)}async geocode(t,n){var r,i,a,u;const f=_n(this.options,{q:t}),g=(i=(r=n==null?void 0:n.map)==null?void 0:r.getCenter)==null?void 0:i.call(r);g&&(f.lat=g.lat,f.lon=g.lng);const _=(u=(a=n==null?void 0:n.map)==null?void 0:a.getZoom)==null?void 0:u.call(a);_&&(f.zoom=_);const v=await ie(this.options.serviceUrl,f);return this._parseResults(v)}suggest(t){return this.geocode(t)}async reverse(t,n){const r=Nn(this.options,{lat:t.lat,lon:t.lng}),i=await ie(this.options.reverseUrl,r);return this._parseResults(i)}_parseResults(t){return(t.features||[]).map(n=>{var r;const i=n.geometry.coordinates,a=new J.LatLng(i[1],i[0]),u=(r=n.properties)==null?void 0:r.extent,f=u?new J.LatLngBounds([u[1],u[0]],[u[3],u[2]]):new J.LatLngBounds(a,a);return{name:this._decodeFeatureName(n),html:this.options.htmlTemplate?this.options.htmlTemplate(n):void 0,center:a,bbox:f,properties:n.properties}})}_decodeFeatureName(t){return(this.options.nameProperties||[]).map(n=>{var r;return(r=t.properties)==null?void 0:r[n]}).filter(n=>!!n).join(", ")}}function tE(e){return new Ox(e)}class Dx{constructor(t){te(this,"options",{serviceUrl:"https://api.what3words.com/v2/"}),J.Util.setOptions(this,t)}async geocode(t){const n=await ie(this.options.serviceUrl+"forward",_n(this.options,{key:this.options.apiKey,addr:t.split(/\s+/).join(".")}));if(!n.geometry)return[];const r=new J.LatLng(n.geometry.lat,n.geometry.lng),i=new J.LatLngBounds(r,r);return[{name:n.words,bbox:i,center:r}]}suggest(t){return this.geocode(t)}async reverse(t,n){const r=await ie(this.options.serviceUrl+"reverse",Nn(this.options,{key:this.options.apiKey,coords:[t.lat,t.lng].join(",")}));if(r.status.status!=200)return[];const i=new J.LatLng(r.geometry.lat,r.geometry.lng),a=new J.LatLngBounds(i,i);return[{name:r.words,bbox:a,center:i}]}}function eE(e){return new Dx(e)}const nE=Object.freeze(Object.defineProperty({__proto__:null,ArcGis:yx,AzureMaps:wx,Bing:xx,GeocodeEarth:Xb,Google:kx,HERE:Lx,HEREv2:bx,LatLng:Sx,MapQuest:Cx,Mapbox:Tx,Mapzen:Kb,Neutrino:Mx,Nominatim:ip,OpenCage:Nx,OpenLocationCode:Px,Openrouteservice:Ix,Pelias:ru,Photon:Ox,What3Words:Dx,arcgis:zb,azure:Bb,bing:Fb,geocodeEarth:$b,geocodingParams:_n,google:jb,here:Ub,latLng:Hb,mapQuest:Wb,mapbox:Gb,mapzen:Qb,neutrino:Vb,nominatim:Zb,openLocationCode:Yb,opencage:qb,openrouteservice:Jb,parseLatLng:Ex,pelias:rp,photon:tE,reverseParams:Nn,what3words:eE},Symbol.toStringTag,{value:"Module"}));class sp{constructor(...t){}}Object.assign(sp.prototype,J.Control.prototype);Object.assign(sp.prototype,J.Evented.prototype);class op extends sp{constructor(t){super(t),te(this,"options",{showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",query:"",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0}),te(this,"_alts"),te(this,"_container"),te(this,"_errorElement"),te(this,"_geocodeMarker"),te(this,"_input"),te(this,"_lastGeocode"),te(this,"_map"),te(this,"_preventBlurCollapse"),te(this,"_requestCount",0),te(this,"_results"),te(this,"_selection"),te(this,"_suggestTimeout"),J.Util.setOptions(this,t),this.options.geocoder||(this.options.geocoder=new ip)}addThrobberClass(){this._container.classList.add("leaflet-control-geocoder-throbber")}removeThrobberClass(){this._container.classList.remove("leaflet-control-geocoder-throbber")}onAdd(t){var n;const r="leaflet-control-geocoder",i=J.DomUtil.create("div",r+" leaflet-bar"),a=J.DomUtil.create("button",r+"-icon",i),u=J.DomUtil.create("div",r+"-form",i);this._map=t,this._container=i,a.innerHTML="&nbsp;",a.type="button",a.setAttribute("aria-label",this.options.iconLabel);const f=this._input=J.DomUtil.create("input","",u);return f.type="search",f.value=this.options.query,f.placeholder=this.options.placeholder,J.DomEvent.disableClickPropagation(f),this._errorElement=J.DomUtil.create("div",r+"-form-no-error",i),this._errorElement.innerHTML=this.options.errorMessage,this._alts=J.DomUtil.create("ul",r+"-alternatives leaflet-control-geocoder-alternatives-minimized",i),J.DomEvent.disableClickPropagation(this._alts),J.DomEvent.addListener(f,"keydown",this._keydown,this),(n=this.options.geocoder)!=null&&n.suggest&&J.DomEvent.addListener(f,"input",this._change,this),J.DomEvent.addListener(f,"blur",()=>{this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1}),this.options.collapsed?this.options.expand==="click"?J.DomEvent.addListener(i,"click",g=>{g.button===0&&g.detail!==2&&this._toggle()}):this.options.expand==="touch"?J.DomEvent.addListener(i,J.Browser.touch?"touchstart mousedown":"mousedown",g=>{this._toggle(),g.preventDefault(),g.stopPropagation()},this):(J.DomEvent.addListener(i,"mouseover",this._expand,this),J.DomEvent.addListener(i,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),J.Browser.touch?J.DomEvent.addListener(i,"touchstart",()=>this._geocode()):J.DomEvent.addListener(i,"click",()=>this._geocode())),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),J.DomEvent.disableClickPropagation(i),i}setQuery(t){return this._input.value=t,this}_geocodeResult(t,n){!n&&this.options.showUniqueResult&&t.length===1?this._geocodeResultSelected(t[0]):t.length>0?(this._alts.innerHTML="",this._results=t,this._alts.classList.remove("leaflet-control-geocoder-alternatives-minimized"),this._container.classList.add("leaflet-control-geocoder-options-open"),this._results.forEach((r,i)=>this._alts.appendChild(this._createAlt(r,i)))):(this._container.classList.add("leaflet-control-geocoder-options-error"),this._errorElement.classList.add("leaflet-control-geocoder-error"))}markGeocode(t){const n=t.geocode;return this._map.fitBounds(n.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new J.Marker(n.center).bindPopup(n.html||n.name).addTo(this._map).openPopup(),this}async _geocode(t=!1){const n=this._input.value;if(!t&&n.length<this.options.queryMinLength)return;const r=++this._requestCount;this._lastGeocode=n,t||this._clearResults();const i={input:n};this.fire(t?"startsuggest":"startgeocode",i);const a={map:this._map},u=t?await this.options.geocoder.suggest(n,a):await this.options.geocoder.geocode(n,a);if(r===this._requestCount){const f={input:n,results:u};this.fire(t?"finishsuggest":"finishgeocode",f),this._geocodeResult(u,t)}}_geocodeResultSelected(t){const n={geocode:t};this.fire("markgeocode",n)}_toggle(){this._container.classList.contains("leaflet-control-geocoder-expanded")?this._collapse():this._expand()}_expand(){this._container.classList.add("leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")}_collapse(){this._container.classList.remove("leaflet-control-geocoder-expanded"),this._alts.classList.add("leaflet-control-geocoder-alternatives-minimized"),this._errorElement.classList.remove("leaflet-control-geocoder-error"),this._container.classList.remove("leaflet-control-geocoder-options-open"),this._container.classList.remove("leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")}_clearResults(){this._alts.classList.add("leaflet-control-geocoder-alternatives-minimized"),this._selection=null,this._errorElement.classList.remove("leaflet-control-geocoder-error"),this._container.classList.remove("leaflet-control-geocoder-options-open"),this._container.classList.remove("leaflet-control-geocoder-options-error")}_createAlt(t,n){const r=J.DomUtil.create("li",""),i=J.DomUtil.create("a","",r),a=this.options.showResultIcons&&t.icon?J.DomUtil.create("img","",i):null,u=t.html?void 0:document.createTextNode(t.name),f=g=>{this._preventBlurCollapse=!0,J.DomEvent.stop(g),this._geocodeResultSelected(t),J.DomEvent.on(r,"click touchend",()=>{this.options.collapsed?this._collapse():this._clearResults()})};return a&&(a.src=t.icon),r.setAttribute("data-result-index",String(n)),t.html?i.innerHTML=i.innerHTML+t.html:u&&i.appendChild(u),J.DomEvent.addListener(r,"mousedown touchstart",f,this),r}_keydown(t){const n=r=>{this._selection&&(this._selection.classList.remove("leaflet-control-geocoder-selected"),this._selection=this._selection[r>0?"nextSibling":"previousSibling"]),this._selection||(this._selection=this._alts[r>0?"firstChild":"lastChild"]),this._selection&&this._selection.classList.add("leaflet-control-geocoder-selected")};switch(t.key){case"Escape":this.options.collapsed?this._collapse():this._clearResults();break;case"ArrowUp":n(-1);break;case"ArrowDown":n(1);break;case"Enter":if(this._selection){const r=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[r]),this._clearResults()}else this._geocode();break;default:return}J.DomEvent.preventDefault(t)}_change(){const t=this._input.value;t!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),t.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(()=>this._geocode(!0),this.options.suggestTimeout):this._clearResults())}}function iE(e){return new op(e)}/* @preserve
 * Leaflet Control Geocoder
 * https://github.com/perliedman/leaflet-control-geocoder
 *
 * Copyright (c) 2012 sa3m (https://github.com/sa3m)
 * Copyright (c) 2018 Per Liedman
 * All rights reserved.
 */Object.assign(op,nE);Object.assign(J.Control,{Geocoder:op,geocoder:iE});const rE=()=>{const e=fx(),t=it.useRef(null);return it.useEffect(()=>{if(!e)return;if(!ti.Control.Geocoder){console.error("L.Control.Geocoder not found.");return}let n;typeof ti.Control.Geocoder.nominatim=="function"?n=ti.Control.Geocoder.nominatim():typeof ti.Control.Geocoder.Nominatim=="function"&&(n=new ti.Control.Geocoder.Nominatim);const r={defaultMarkGeocode:!1,collapsed:!1,placeholder:"Search address or place...",geocoder:n},i=ti.Control.geocoder(r);if(!t.current){const a=ti.DomUtil.create("div","leaflet-geocoder-custom-wrapper leaflet-control");t.current=a,a.style.position="absolute",a.style.top="10px",a.style.left="50%",a.style.transform="translateX(-50%)",a.style.zIndex="1001",a.style.width="320px";const u=i.getContainer();if(u){a.appendChild(u),u.style.width="100%";const f=u.querySelector(".leaflet-control-geocoder-form");f&&(f.style.width="100%",f.style.position="relative");const g=u.querySelector('input[type="text"]');if(g){const x=g;x.style.width="100%",x.style.minHeight="40px",x.style.paddingLeft="36px",x.style.paddingRight="30px",x.style.boxSizing="border-box",x.style.borderRadius="4px",x.style.backgroundImage="url(images/geocoder.png)",x.style.backgroundRepeat="no-repeat",x.style.backgroundPosition="10px center"}const _=u.querySelector(".leaflet-control-geocoder-icon-close");_&&(_.style.position="absolute",_.style.right="8px",_.style.top="50%",_.style.transform="translateY(-50%)",_.style.zIndex="1");const v=u.querySelector(".leaflet-control-geocoder-alternatives");v&&(v.style.width="100%",v.style.maxWidth="none",v.style.zIndex="1005",v.style.marginTop="2px",v.style.borderRadius="4px",v.style.boxShadow="0 2px 6px rgba(0,0,0,0.2)")}e.getContainer().appendChild(a)}return i.on("markgeocode",function(a){const u=a.geocode.center;e.setView(u,15)}),()=>{t.current&&t.current.parentNode&&(t.current.parentNode.removeChild(t.current),t.current=null)}},[e]),null},sE=()=>{const{simulatedPlantingPoints:e}=sa();return!e||e.length===0?null:I.jsx(I.Fragment,{children:e.map((t,n)=>{const r=[t[1],t[0]],i=t[0].toFixed(5),a=t[1].toFixed(5);return I.jsx(lb,{center:r,radius:4,pathOptions:{color:"#ffffff",weight:1,fillColor:"#4ade80",fillOpacity:.8},children:I.jsxs(gb,{children:[I.jsxs("div",{children:["Simulated Tree #",n+1]}),I.jsxs("div",{children:["Lat: ",a,", Lon: ",i]})," "]})},`simulated-tree-${n}`)})})},oE=({onTreeSelect:e,sidebarOpen:t,toggleSidebar:n,baseMap:r,showLSTOverlay:i})=>{const a=[[18.41668612,73.7606651],[18.62786903,73.96308303]],u="./lst_pune.png",f=ti.latLngBounds(a).getCenter(),g=15,_=it.useRef(null);it.useEffect(()=>{_.current&&_.current.fitBounds(a,{paddingTopLeft:[0,0],paddingBottomRight:[0,0]})},[a]);const v=it.useRef(null),[x,k]=it.useState(!1),{setSelectedArea:S}=sa(),C=M=>{M?(v.current=M,k(!0)):(v.current=null,k(!1))},N=M=>{const O=M.layer;v.current&&(v.current.clearLayers(),v.current.addLayer(O));const B=O.toGeoJSON();S({type:"geojson",geojsonData:B})},A=M=>{M.layers.eachLayer(O=>{const B=O.toGeoJSON();S({type:"geojson",geojsonData:B})})},P=()=>{S(null),v.current&&v.current.clearLayers()};return I.jsxs("div",{className:"map-container",children:[I.jsxs(fb,{center:f,zoom:g,zoomControl:!1,style:{height:"100%",width:"100%"},whenCreated:M=>{_.current=M},children:[r==="streets"&&I.jsx(qu,{attribution:"© OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r==="satellite"&&I.jsx(qu,{attribution:"© Esri",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}),r==="light"&&I.jsx(qu,{attribution:"© OpenStreetMap",url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"}),r==="dark"&&I.jsx(qu,{attribution:"© OpenStreetMap",url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),I.jsx(db,{position:"bottomleft"}),I.jsx(Cb,{onTreeClick:e}),I.jsx(rE,{}),I.jsx(sE,{}),i&&I.jsx(cb,{url:u,bounds:a,opacity:.65,zIndex:150}),I.jsx(ub,{ref:C,children:x&&v.current&&I.jsx(mx,{position:"topleft",onCreated:N,onEdited:A,onDeleted:P,draw:{polygon:!0,rectangle:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:void 0,fillOpacity:.2,clickable:!0},showArea:!0,metric:!1},circle:!1,circlemarker:!1,marker:!1,polyline:!1},edit:{featureGroup:v.current}})})]}),I.jsxs("button",{className:`absolute top-1/2 transform -translate-y-1/2 z-[1010] bg-white p-2 shadow-xl hover:bg-gray-100 transition-all duration-300 ease-in-out border-t border-b border-l border-gray-300 rounded-l-md ${t?"right-[var(--sidebar-width)]":"right-0"}`,onClick:n,"aria-label":t?"Collapse sidebar":"Expand sidebar",title:t?"Collapse sidebar":"Expand sidebar",children:[" ",t?I.jsx(K0,{size:20,className:"text-gray-700"}):I.jsx($0,{size:20,className:"text-gray-700"})," "]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function su(e){return e+.5|0}const Or=(e,t,n)=>Math.max(Math.min(e,n),t);function il(e){return Or(su(e*2.55),0,255)}function Hr(e){return Or(su(e*255),0,255)}function tr(e){return Or(su(e/2.55)/100,0,1)}function qm(e){return Or(su(e*100),0,100)}const Qn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Gd=[..."0123456789ABCDEF"],aE=e=>Gd[e&15],lE=e=>Gd[(e&240)>>4]+Gd[e&15],Xu=e=>(e&240)>>4===(e&15),uE=e=>Xu(e.r)&&Xu(e.g)&&Xu(e.b)&&Xu(e.a);function cE(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Qn[e[1]]*17,g:255&Qn[e[2]]*17,b:255&Qn[e[3]]*17,a:t===5?Qn[e[4]]*17:255}:(t===7||t===9)&&(n={r:Qn[e[1]]<<4|Qn[e[2]],g:Qn[e[3]]<<4|Qn[e[4]],b:Qn[e[5]]<<4|Qn[e[6]],a:t===9?Qn[e[7]]<<4|Qn[e[8]]:255})),n}const hE=(e,t)=>e<255?t(e):"";function fE(e){var t=uE(e)?aE:lE;return e?"#"+t(e.r)+t(e.g)+t(e.b)+hE(e.a,t):void 0}const dE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Rx(e,t,n){const r=t*Math.min(n,1-n),i=(a,u=(a+e/30)%12)=>n-r*Math.max(Math.min(u-3,9-u,1),-1);return[i(0),i(8),i(4)]}function gE(e,t,n){const r=(i,a=(i+e/60)%6)=>n-n*t*Math.max(Math.min(a,4-a,1),0);return[r(5),r(3),r(1)]}function pE(e,t,n){const r=Rx(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function mE(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}function ap(e){const n=e.r/255,r=e.g/255,i=e.b/255,a=Math.max(n,r,i),u=Math.min(n,r,i),f=(a+u)/2;let g,_,v;return a!==u&&(v=a-u,_=f>.5?v/(2-a-u):v/(a+u),g=mE(n,r,i,v,a),g=g*60+.5),[g|0,_||0,f]}function lp(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Hr)}function up(e,t,n){return lp(Rx,e,t,n)}function _E(e,t,n){return lp(pE,e,t,n)}function vE(e,t,n){return lp(gE,e,t,n)}function Ax(e){return(e%360+360)%360}function yE(e){const t=dE.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?il(+t[5]):Hr(+t[5]));const i=Ax(+t[2]),a=+t[3]/100,u=+t[4]/100;return t[1]==="hwb"?r=_E(i,a,u):t[1]==="hsv"?r=vE(i,a,u):r=up(i,a,u),{r:r[0],g:r[1],b:r[2],a:n}}function xE(e,t){var n=ap(e);n[0]=Ax(n[0]+t),n=up(n),e.r=n[0],e.g=n[1],e.b=n[2]}function wE(e){if(!e)return;const t=ap(e),n=t[0],r=qm(t[1]),i=qm(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${i}%, ${tr(e.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const Xm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$m={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function kE(){const e={},t=Object.keys($m),n=Object.keys(Xm);let r,i,a,u,f;for(r=0;r<t.length;r++){for(u=f=t[r],i=0;i<n.length;i++)a=n[i],f=f.replace(a,Xm[a]);a=parseInt($m[u],16),e[f]=[a>>16&255,a>>8&255,a&255]}return e}let $u;function LE(e){$u||($u=kE(),$u.transparent=[0,0,0,0]);const t=$u[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const bE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function EE(e){const t=bE.exec(e);let n=255,r,i,a;if(t){if(t[7]!==r){const u=+t[7];n=t[8]?il(u):Or(u*255,0,255)}return r=+t[1],i=+t[3],a=+t[5],r=255&(t[2]?il(r):Or(r,0,255)),i=255&(t[4]?il(i):Or(i,0,255)),a=255&(t[6]?il(a):Or(a,0,255)),{r,g:i,b:a,a:n}}}function SE(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${tr(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Of=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,vo=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function TE(e,t,n){const r=vo(tr(e.r)),i=vo(tr(e.g)),a=vo(tr(e.b));return{r:Hr(Of(r+n*(vo(tr(t.r))-r))),g:Hr(Of(i+n*(vo(tr(t.g))-i))),b:Hr(Of(a+n*(vo(tr(t.b))-a))),a:e.a+n*(t.a-e.a)}}function Ku(e,t,n){if(e){let r=ap(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=up(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function zx(e,t){return e&&Object.assign(t||{},e)}function Km(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Hr(e[3]))):(t=zx(e,{r:0,g:0,b:0,a:1}),t.a=Hr(t.a)),t}function CE(e){return e.charAt(0)==="r"?EE(e):yE(e)}class Gl{constructor(t){if(t instanceof Gl)return t;const n=typeof t;let r;n==="object"?r=Km(t):n==="string"&&(r=cE(t)||LE(t)||CE(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=zx(this._rgb);return t&&(t.a=tr(t.a)),t}set rgb(t){this._rgb=Km(t)}rgbString(){return this._valid?SE(this._rgb):void 0}hexString(){return this._valid?fE(this._rgb):void 0}hslString(){return this._valid?wE(this._rgb):void 0}mix(t,n){if(t){const r=this.rgb,i=t.rgb;let a;const u=n===a?.5:n,f=2*u-1,g=r.a-i.a,_=((f*g===-1?f:(f+g)/(1+f*g))+1)/2;a=1-_,r.r=255&_*r.r+a*i.r+.5,r.g=255&_*r.g+a*i.g+.5,r.b=255&_*r.b+a*i.b+.5,r.a=u*r.a+(1-u)*i.a,this.rgb=r}return this}interpolate(t,n){return t&&(this._rgb=TE(this._rgb,t._rgb,n)),this}clone(){return new Gl(this.rgb)}alpha(t){return this._rgb.a=Hr(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=su(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ku(this._rgb,2,t),this}darken(t){return Ku(this._rgb,2,-t),this}saturate(t){return Ku(this._rgb,1,t),this}desaturate(t){return Ku(this._rgb,1,-t),this}rotate(t){return xE(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Xi(){}const ME=(()=>{let e=0;return()=>e++})();function oe(e){return e==null}function Ie(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Zt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function ln(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ni(e,t){return ln(e)?e:t}function jt(e,t){return typeof e>"u"?t:e}const PE=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Fx=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ue(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function ee(e,t,n,r){let i,a,u;if(Ie(e))for(a=e.length,i=0;i<a;i++)t.call(n,e[i],i);else if(Zt(e))for(u=Object.keys(e),a=u.length,i=0;i<a;i++)t.call(n,e[u[i]],u[i])}function rh(e,t){let n,r,i,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],a=t[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function sh(e){if(Ie(e))return e.map(sh);if(Zt(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=sh(e[n[i]]);return t}return e}function Bx(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function NE(e,t,n,r){if(!Bx(e))return;const i=t[e],a=n[e];Zt(i)&&Zt(a)?Wl(i,a,r):t[e]=sh(a)}function Wl(e,t,n){const r=Ie(t)?t:[t],i=r.length;if(!Zt(e))return e;n=n||{};const a=n.merger||NE;let u;for(let f=0;f<i;++f){if(u=r[f],!Zt(u))continue;const g=Object.keys(u);for(let _=0,v=g.length;_<v;++_)a(g[_],e,u,n)}return e}function xl(e,t){return Wl(e,t,{merger:IE})}function IE(e,t,n){if(!Bx(e))return;const r=t[e],i=n[e];Zt(r)&&Zt(i)?xl(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=sh(i))}const Qm={"":e=>e,x:e=>e.x,y:e=>e.y};function OE(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function DE(e){const t=OE(e);return n=>{for(const r of t){if(r==="")break;n=n&&n[r]}return n}}function Vl(e,t){return(Qm[t]||(Qm[t]=DE(t)))(e)}function cp(e){return e.charAt(0).toUpperCase()+e.slice(1)}const oh=e=>typeof e<"u",Vr=e=>typeof e=="function",Jm=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function RE(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Le=Math.PI,_e=2*Le,AE=_e+Le,ah=Number.POSITIVE_INFINITY,zE=Le/180,De=Le/2,ps=Le/4,t_=Le*2/3,Wd=Math.log10,qo=Math.sign;function wl(e,t,n){return Math.abs(e-t)<n}function e_(e){const t=Math.round(e);e=wl(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Wd(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function FE(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((i,a)=>i-a).pop(),t}function BE(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Zl(e){return!BE(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function jE(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function UE(e,t,n){let r,i,a;for(r=0,i=e.length;r<i;r++)a=e[r][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function ir(e){return e*(Le/180)}function HE(e){return e*(180/Le)}function n_(e){if(!ln(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function jx(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*Le&&(a+=_e),{angle:a,distance:i}}function Vd(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function GE(e,t){return(e-t+AE)%_e-Le}function Ri(e){return(e%_e+_e)%_e}function Yl(e,t,n,r){const i=Ri(e),a=Ri(t),u=Ri(n),f=Ri(a-i),g=Ri(u-i),_=Ri(i-a),v=Ri(i-u);return i===a||i===u||r&&a===u||f>g&&_<v}function pn(e,t,n){return Math.max(t,Math.min(n,e))}function WE(e){return pn(e,-32768,32767)}function Ss(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function hp(e,t,n){n=n||(u=>e[u]<t);let r=e.length-1,i=0,a;for(;r-i>1;)a=i+r>>1,n(a)?i=a:r=a;return{lo:i,hi:r}}const Ts=(e,t,n,r)=>hp(e,n,r?i=>{const a=e[i][t];return a<n||a===n&&e[i+1][t]===n}:i=>e[i][t]<n),VE=(e,t,n)=>hp(e,n,r=>e[r][t]>=n);function ZE(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}const Ux=["push","pop","shift","splice","unshift"];function YE(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ux.forEach(n=>{const r="_onData"+cp(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...a){const u=i.apply(this,a);return e._chartjs.listeners.forEach(f=>{typeof f[r]=="function"&&f[r](...a)}),u}})})}function i_(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(Ux.forEach(a=>{delete e[a]}),delete e._chartjs)}function qE(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Hx=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Gx(e,t){let n=[],r=!1;return function(...i){n=i,r||(r=!0,Hx.call(window,()=>{r=!1,e.apply(t,n)}))}}function XE(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const fp=e=>e==="start"?"left":e==="end"?"right":"center",rn=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,$E=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t;function KE(e,t,n){const r=t.length;let i=0,a=r;if(e._sorted){const{iScale:u,vScale:f,_parsed:g}=e,_=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,v=u.axis,{min:x,max:k,minDefined:S,maxDefined:C}=u.getUserBounds();if(S){if(i=Math.min(Ts(g,v,x).lo,n?r:Ts(t,v,u.getPixelForValue(x)).lo),_){const N=g.slice(0,i+1).reverse().findIndex(A=>!oe(A[f.axis]));i-=Math.max(0,N)}i=pn(i,0,r-1)}if(C){let N=Math.max(Ts(g,u.axis,k,!0).hi+1,n?0:Ts(t,v,u.getPixelForValue(k),!0).hi+1);if(_){const A=g.slice(N-1).findIndex(P=>!oe(P[f.axis]));N+=Math.max(0,A)}a=pn(N,i,r)-i}else a=r-i}return{start:i,count:a}}function QE(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const a=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),a}const Qu=e=>e===0||e===1,r_=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*_e/n)),s_=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*_e/n)+1,kl={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*De)+1,easeOutSine:e=>Math.sin(e*De),easeInOutSine:e=>-.5*(Math.cos(Le*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Qu(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Qu(e)?e:r_(e,.075,.3),easeOutElastic:e=>Qu(e)?e:s_(e,.075,.3),easeInOutElastic(e){return Qu(e)?e:e<.5?.5*r_(e*2,.1125,.45):.5+.5*s_(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-kl.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?kl.easeInBounce(e*2)*.5:kl.easeOutBounce(e*2-1)*.5+.5};function dp(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function o_(e){return dp(e)?e:new Gl(e)}function Df(e){return dp(e)?e:new Gl(e).saturate(.5).darken(.1).hexString()}const JE=["x","y","borderWidth","radius","tension"],tS=["color","borderColor","backgroundColor"];function eS(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:tS},numbers:{type:"number",properties:JE}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function nS(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const a_=new Map;function iS(e,t){t=t||{};const n=e+JSON.stringify(t);let r=a_.get(n);return r||(r=new Intl.NumberFormat(e,t),a_.set(n,r)),r}function gp(e,t,n){return iS(t,n).format(e)}const Wx={values(e){return Ie(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let i,a=e;if(n.length>1){const _=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(_<1e-4||_>1e15)&&(i="scientific"),a=rS(e,n)}const u=Wd(Math.abs(a)),f=isNaN(u)?1:Math.max(Math.min(-1*Math.floor(u),20),0),g={notation:i,minimumFractionDigits:f,maximumFractionDigits:f};return Object.assign(g,this.options.ticks.format),gp(e,r,g)},logarithmic(e,t,n){if(e===0)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Wd(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?Wx.numeric.call(this,e,t,n):""}};function rS(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var Vx={formatters:Wx};function sS(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Vx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Fs=Object.create(null),Zd=Object.create(null);function Ll(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const a=n[r];e=e[a]||(e[a]=Object.create(null))}return e}function Rf(e,t,n){return typeof t=="string"?Wl(Ll(e,t),n):Wl(Ll(e,""),t)}class oS{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Df(i.backgroundColor),this.hoverBorderColor=(r,i)=>Df(i.borderColor),this.hoverColor=(r,i)=>Df(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Rf(this,t,n)}get(t){return Ll(this,t)}describe(t,n){return Rf(Zd,t,n)}override(t,n){return Rf(Fs,t,n)}route(t,n,r,i){const a=Ll(this,t),u=Ll(this,r),f="_"+n;Object.defineProperties(a,{[f]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const g=this[f],_=u[i];return Zt(g)?Object.assign({},_,g):jt(g,_)},set(g){this[f]=g}}})}apply(t){t.forEach(n=>n(this))}}var Se=new oS({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[eS,nS,sS]);function aS(e){return!e||oe(e.size)||oe(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function l_(e,t,n,r,i){let a=t[i];return a||(a=t[i]=e.measureText(i).width,n.push(i)),a>r&&(r=a),r}function ms(e,t,n){const r=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function u_(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Yd(e,t,n,r){Zx(e,t,n,r,null)}function Zx(e,t,n,r,i){let a,u,f,g,_,v,x,k;const S=t.pointStyle,C=t.rotation,N=t.radius;let A=(C||0)*zE;if(S&&typeof S=="object"&&(a=S.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(A),e.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),e.restore();return}if(!(isNaN(N)||N<=0)){switch(e.beginPath(),S){default:i?e.ellipse(n,r,i/2,N,0,0,_e):e.arc(n,r,N,0,_e),e.closePath();break;case"triangle":v=i?i/2:N,e.moveTo(n+Math.sin(A)*v,r-Math.cos(A)*N),A+=t_,e.lineTo(n+Math.sin(A)*v,r-Math.cos(A)*N),A+=t_,e.lineTo(n+Math.sin(A)*v,r-Math.cos(A)*N),e.closePath();break;case"rectRounded":_=N*.516,g=N-_,u=Math.cos(A+ps)*g,x=Math.cos(A+ps)*(i?i/2-_:g),f=Math.sin(A+ps)*g,k=Math.sin(A+ps)*(i?i/2-_:g),e.arc(n-x,r-f,_,A-Le,A-De),e.arc(n+k,r-u,_,A-De,A),e.arc(n+x,r+f,_,A,A+De),e.arc(n-k,r+u,_,A+De,A+Le),e.closePath();break;case"rect":if(!C){g=Math.SQRT1_2*N,v=i?i/2:g,e.rect(n-v,r-g,2*v,2*g);break}A+=ps;case"rectRot":x=Math.cos(A)*(i?i/2:N),u=Math.cos(A)*N,f=Math.sin(A)*N,k=Math.sin(A)*(i?i/2:N),e.moveTo(n-x,r-f),e.lineTo(n+k,r-u),e.lineTo(n+x,r+f),e.lineTo(n-k,r+u),e.closePath();break;case"crossRot":A+=ps;case"cross":x=Math.cos(A)*(i?i/2:N),u=Math.cos(A)*N,f=Math.sin(A)*N,k=Math.sin(A)*(i?i/2:N),e.moveTo(n-x,r-f),e.lineTo(n+x,r+f),e.moveTo(n+k,r-u),e.lineTo(n-k,r+u);break;case"star":x=Math.cos(A)*(i?i/2:N),u=Math.cos(A)*N,f=Math.sin(A)*N,k=Math.sin(A)*(i?i/2:N),e.moveTo(n-x,r-f),e.lineTo(n+x,r+f),e.moveTo(n+k,r-u),e.lineTo(n-k,r+u),A+=ps,x=Math.cos(A)*(i?i/2:N),u=Math.cos(A)*N,f=Math.sin(A)*N,k=Math.sin(A)*(i?i/2:N),e.moveTo(n-x,r-f),e.lineTo(n+x,r+f),e.moveTo(n+k,r-u),e.lineTo(n-k,r+u);break;case"line":u=i?i/2:Math.cos(A)*N,f=Math.sin(A)*N,e.moveTo(n-u,r-f),e.lineTo(n+u,r+f);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(A)*(i?i/2:N),r+Math.sin(A)*N);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function ql(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function zh(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Fh(e){e.restore()}function lS(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const a=(t.x+n.x)/2;e.lineTo(a,t.y),e.lineTo(a,n.y)}else i==="after"!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function uS(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function cS(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),oe(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function hS(e,t,n,r,i){if(i.strikethrough||i.underline){const a=e.measureText(r),u=t-a.actualBoundingBoxLeft,f=t+a.actualBoundingBoxRight,g=n-a.actualBoundingBoxAscent,_=n+a.actualBoundingBoxDescent,v=i.strikethrough?(g+_)/2:_;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(u,v),e.lineTo(f,v),e.stroke()}}function fS(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Xl(e,t,n,r,i,a={}){const u=Ie(t)?t:[t],f=a.strokeWidth>0&&a.strokeColor!=="";let g,_;for(e.save(),e.font=i.string,cS(e,a),g=0;g<u.length;++g)_=u[g],a.backdrop&&fS(e,a.backdrop),f&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),oe(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(_,n,r,a.maxWidth)),e.fillText(_,n,r,a.maxWidth),hS(e,n,r,_,a),r+=Number(i.lineHeight);e.restore()}function qd(e,t){const{x:n,y:r,w:i,h:a,radius:u}=t;e.arc(n+u.topLeft,r+u.topLeft,u.topLeft,1.5*Le,Le,!0),e.lineTo(n,r+a-u.bottomLeft),e.arc(n+u.bottomLeft,r+a-u.bottomLeft,u.bottomLeft,Le,De,!0),e.lineTo(n+i-u.bottomRight,r+a),e.arc(n+i-u.bottomRight,r+a-u.bottomRight,u.bottomRight,De,0,!0),e.lineTo(n+i,r+u.topRight),e.arc(n+i-u.topRight,r+u.topRight,u.topRight,0,-De,!0),e.lineTo(n+u.topLeft,r)}const dS=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,gS=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function pS(e,t){const n=(""+e).match(dS);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const mS=e=>+e||0;function pp(e,t){const n={},r=Zt(t),i=r?Object.keys(t):t,a=Zt(e)?r?u=>jt(e[u],e[t[u]]):u=>e[u]:()=>e;for(const u of i)n[u]=mS(a(u));return n}function _S(e){return pp(e,{top:"y",right:"x",bottom:"y",left:"x"})}function bl(e){return pp(e,["topLeft","topRight","bottomLeft","bottomRight"])}function li(e){const t=_S(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function on(e,t){e=e||{},t=t||Se.font;let n=jt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=jt(e.style,t.style);r&&!(""+r).match(gS)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:jt(e.family,t.family),lineHeight:pS(jt(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:jt(e.weight,t.weight),string:""};return i.string=aS(i),i}function Ju(e,t,n,r){let i,a,u;for(i=0,a=e.length;i<a;++i)if(u=e[i],u!==void 0&&u!==void 0)return u}function vS(e,t,n){const{min:r,max:i}=e,a=Fx(t,(i-r)/2),u=(f,g)=>n&&f===0?0:f+g;return{min:u(r,-Math.abs(a)),max:u(i,a)}}function Hs(e,t){return Object.assign(Object.create(e),t)}function mp(e,t=[""],n,r,i=()=>e[0]){const a=n||e;typeof r>"u"&&(r=$x("_fallback",e));const u={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:r,_getTarget:i,override:f=>mp([f,...e],t,a,r)};return new Proxy(u,{deleteProperty(f,g){return delete f[g],delete f._keys,delete e[0][g],!0},get(f,g){return qx(f,g,()=>SS(g,t,e,f))},getOwnPropertyDescriptor(f,g){return Reflect.getOwnPropertyDescriptor(f._scopes[0],g)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(f,g){return h_(f).includes(g)},ownKeys(f){return h_(f)},set(f,g,_){const v=f._storage||(f._storage=i());return f[g]=v[g]=_,delete f._keys,!0}})}function Xo(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Yx(e,r),setContext:a=>Xo(e,a,n,r),override:a=>Xo(e.override(a),t,n,r)};return new Proxy(i,{deleteProperty(a,u){return delete a[u],delete e[u],!0},get(a,u,f){return qx(a,u,()=>xS(a,u,f))},getOwnPropertyDescriptor(a,u){return a._descriptors.allKeys?Reflect.has(e,u)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,u)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(a,u){return Reflect.has(e,u)},ownKeys(){return Reflect.ownKeys(e)},set(a,u,f){return e[u]=f,delete a[u],!0}})}function Yx(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Vr(n)?n:()=>n,isIndexable:Vr(r)?r:()=>r}}const yS=(e,t)=>e?e+cp(t):t,_p=(e,t)=>Zt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function qx(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const r=n();return e[t]=r,r}function xS(e,t,n){const{_proxy:r,_context:i,_subProxy:a,_descriptors:u}=e;let f=r[t];return Vr(f)&&u.isScriptable(t)&&(f=wS(t,f,e,n)),Ie(f)&&f.length&&(f=kS(t,f,e,u.isIndexable)),_p(t,f)&&(f=Xo(f,i,a&&a[t],u)),f}function wS(e,t,n,r){const{_proxy:i,_context:a,_subProxy:u,_stack:f}=n;if(f.has(e))throw new Error("Recursion detected: "+Array.from(f).join("->")+"->"+e);f.add(e);let g=t(a,u||r);return f.delete(e),_p(e,g)&&(g=vp(i._scopes,i,e,g)),g}function kS(e,t,n,r){const{_proxy:i,_context:a,_subProxy:u,_descriptors:f}=n;if(typeof a.index<"u"&&r(e))return t[a.index%t.length];if(Zt(t[0])){const g=t,_=i._scopes.filter(v=>v!==g);t=[];for(const v of g){const x=vp(_,i,e,v);t.push(Xo(x,a,u&&u[e],f))}}return t}function Xx(e,t,n){return Vr(e)?e(t,n):e}const LS=(e,t)=>e===!0?t:typeof e=="string"?Vl(t,e):void 0;function bS(e,t,n,r,i){for(const a of t){const u=LS(n,a);if(u){e.add(u);const f=Xx(u._fallback,n,i);if(typeof f<"u"&&f!==n&&f!==r)return f}else if(u===!1&&typeof r<"u"&&n!==r)return null}return!1}function vp(e,t,n,r){const i=t._rootScopes,a=Xx(t._fallback,n,r),u=[...e,...i],f=new Set;f.add(r);let g=c_(f,u,n,a||n,r);return g===null||typeof a<"u"&&a!==n&&(g=c_(f,u,a,g,r),g===null)?!1:mp(Array.from(f),[""],i,a,()=>ES(t,n,r))}function c_(e,t,n,r,i){for(;n;)n=bS(e,t,n,r,i);return n}function ES(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];return Ie(i)&&Zt(n)?n:i||{}}function SS(e,t,n,r){let i;for(const a of t)if(i=$x(yS(a,e),n),typeof i<"u")return _p(e,i)?vp(n,r,e,i):i}function $x(e,t){for(const n of t){if(!n)continue;const r=n[e];if(typeof r<"u")return r}}function h_(e){let t=e._keys;return t||(t=e._keys=TS(e._scopes)),t}function TS(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}const CS=Number.EPSILON||1e-14,$o=(e,t)=>t<e.length&&!e[t].skip&&e[t],Kx=e=>e==="x"?"y":"x";function MS(e,t,n,r){const i=e.skip?t:e,a=t,u=n.skip?t:n,f=Vd(a,i),g=Vd(u,a);let _=f/(f+g),v=g/(f+g);_=isNaN(_)?0:_,v=isNaN(v)?0:v;const x=r*_,k=r*v;return{previous:{x:a.x-x*(u.x-i.x),y:a.y-x*(u.y-i.y)},next:{x:a.x+k*(u.x-i.x),y:a.y+k*(u.y-i.y)}}}function PS(e,t,n){const r=e.length;let i,a,u,f,g,_=$o(e,0);for(let v=0;v<r-1;++v)if(g=_,_=$o(e,v+1),!(!g||!_)){if(wl(t[v],0,CS)){n[v]=n[v+1]=0;continue}i=n[v]/t[v],a=n[v+1]/t[v],f=Math.pow(i,2)+Math.pow(a,2),!(f<=9)&&(u=3/Math.sqrt(f),n[v]=i*u*t[v],n[v+1]=a*u*t[v])}}function NS(e,t,n="x"){const r=Kx(n),i=e.length;let a,u,f,g=$o(e,0);for(let _=0;_<i;++_){if(u=f,f=g,g=$o(e,_+1),!f)continue;const v=f[n],x=f[r];u&&(a=(v-u[n])/3,f[`cp1${n}`]=v-a,f[`cp1${r}`]=x-a*t[_]),g&&(a=(g[n]-v)/3,f[`cp2${n}`]=v+a,f[`cp2${r}`]=x+a*t[_])}}function IS(e,t="x"){const n=Kx(t),r=e.length,i=Array(r).fill(0),a=Array(r);let u,f,g,_=$o(e,0);for(u=0;u<r;++u)if(f=g,g=_,_=$o(e,u+1),!!g){if(_){const v=_[t]-g[t];i[u]=v!==0?(_[n]-g[n])/v:0}a[u]=f?_?qo(i[u-1])!==qo(i[u])?0:(i[u-1]+i[u])/2:i[u-1]:i[u]}PS(e,i,a),NS(e,a,t)}function tc(e,t,n){return Math.max(Math.min(e,n),t)}function OS(e,t){let n,r,i,a,u,f=ql(e[0],t);for(n=0,r=e.length;n<r;++n)u=a,a=f,f=n<r-1&&ql(e[n+1],t),a&&(i=e[n],u&&(i.cp1x=tc(i.cp1x,t.left,t.right),i.cp1y=tc(i.cp1y,t.top,t.bottom)),f&&(i.cp2x=tc(i.cp2x,t.left,t.right),i.cp2y=tc(i.cp2y,t.top,t.bottom)))}function DS(e,t,n,r,i){let a,u,f,g;if(t.spanGaps&&(e=e.filter(_=>!_.skip)),t.cubicInterpolationMode==="monotone")IS(e,i);else{let _=r?e[e.length-1]:e[0];for(a=0,u=e.length;a<u;++a)f=e[a],g=MS(_,f,e[Math.min(a+1,u-(r?0:1))%u],t.tension),f.cp1x=g.previous.x,f.cp1y=g.previous.y,f.cp2x=g.next.x,f.cp2y=g.next.y,_=f}t.capBezierPoints&&OS(e,n)}function yp(){return typeof window<"u"&&typeof document<"u"}function xp(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function lh(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const Bh=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function RS(e,t){return Bh(e).getPropertyValue(t)}const AS=["top","right","bottom","left"];function Ps(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const a=AS[i];r[a]=parseFloat(e[t+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const zS=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function FS(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:a}=r;let u=!1,f,g;if(zS(i,a,e.target))f=i,g=a;else{const _=t.getBoundingClientRect();f=r.clientX-_.left,g=r.clientY-_.top,u=!0}return{x:f,y:g,box:u}}function ws(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=Bh(n),a=i.boxSizing==="border-box",u=Ps(i,"padding"),f=Ps(i,"border","width"),{x:g,y:_,box:v}=FS(e,n),x=u.left+(v&&f.left),k=u.top+(v&&f.top);let{width:S,height:C}=t;return a&&(S-=u.width+f.width,C-=u.height+f.height),{x:Math.round((g-x)/S*n.width/r),y:Math.round((_-k)/C*n.height/r)}}function BS(e,t,n){let r,i;if(t===void 0||n===void 0){const a=e&&xp(e);if(!a)t=e.clientWidth,n=e.clientHeight;else{const u=a.getBoundingClientRect(),f=Bh(a),g=Ps(f,"border","width"),_=Ps(f,"padding");t=u.width-_.width-g.width,n=u.height-_.height-g.height,r=lh(f.maxWidth,a,"clientWidth"),i=lh(f.maxHeight,a,"clientHeight")}}return{width:t,height:n,maxWidth:r||ah,maxHeight:i||ah}}const ec=e=>Math.round(e*10)/10;function jS(e,t,n,r){const i=Bh(e),a=Ps(i,"margin"),u=lh(i.maxWidth,e,"clientWidth")||ah,f=lh(i.maxHeight,e,"clientHeight")||ah,g=BS(e,t,n);let{width:_,height:v}=g;if(i.boxSizing==="content-box"){const k=Ps(i,"border","width"),S=Ps(i,"padding");_-=S.width+k.width,v-=S.height+k.height}return _=Math.max(0,_-a.width),v=Math.max(0,r?_/r:v-a.height),_=ec(Math.min(_,u,g.maxWidth)),v=ec(Math.min(v,f,g.maxHeight)),_&&!v&&(v=ec(_/2)),(t!==void 0||n!==void 0)&&r&&g.height&&v>g.height&&(v=g.height,_=ec(Math.floor(v*r))),{width:_,height:v}}function f_(e,t,n){const r=t||1,i=Math.floor(e.height*r),a=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const u=e.canvas;return u.style&&(n||!u.style.height&&!u.style.width)&&(u.style.height=`${e.height}px`,u.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||u.height!==i||u.width!==a?(e.currentDevicePixelRatio=r,u.height=i,u.width=a,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const US=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};yp()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function d_(e,t){const n=RS(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function ks(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function HS(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:r==="middle"?n<.5?e.y:t.y:r==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function GS(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},u=ks(e,i,n),f=ks(i,a,n),g=ks(a,t,n),_=ks(u,f,n),v=ks(f,g,n);return ks(_,v,n)}const WS=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},VS=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Bo(e,t,n){return e?WS(t,n):VS()}function Qx(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Jx(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function t1(e){return e==="angle"?{between:Yl,compare:GE,normalize:Ri}:{between:Ss,compare:(t,n)=>t-n,normalize:t=>t}}function g_({start:e,end:t,count:n,loop:r,style:i}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n===0,style:i}}function ZS(e,t,n){const{property:r,start:i,end:a}=n,{between:u,normalize:f}=t1(r),g=t.length;let{start:_,end:v,loop:x}=e,k,S;if(x){for(_+=g,v+=g,k=0,S=g;k<S&&u(f(t[_%g][r]),i,a);++k)_--,v--;_%=g,v%=g}return v<_&&(v+=g),{start:_,end:v,loop:x,style:e.style}}function e1(e,t,n){if(!n)return[e];const{property:r,start:i,end:a}=n,u=t.length,{compare:f,between:g,normalize:_}=t1(r),{start:v,end:x,loop:k,style:S}=ZS(e,t,n),C=[];let N=!1,A=null,P,M,O;const B=()=>g(i,O,P)&&f(i,O)!==0,F=()=>f(a,P)===0||g(a,O,P),G=()=>N||B(),H=()=>!N||F();for(let V=v,$=v;V<=x;++V)M=t[V%u],!M.skip&&(P=_(M[r]),P!==O&&(N=g(P,i,a),A===null&&G()&&(A=f(P,i)===0?V:$),A!==null&&H()&&(C.push(g_({start:A,end:V,loop:k,count:u,style:S})),A=null),$=V,O=P));return A!==null&&C.push(g_({start:A,end:x,loop:k,count:u,style:S})),C}function n1(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const a=e1(r[i],e.points,t);a.length&&n.push(...a)}return n}function YS(e,t,n,r){let i=0,a=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(a+=i);a>i&&e[a%t].skip;)a--;return a%=t,{start:i,end:a}}function qS(e,t,n,r){const i=e.length,a=[];let u=t,f=e[t],g;for(g=t+1;g<=n;++g){const _=e[g%i];_.skip||_.stop?f.skip||(r=!1,a.push({start:t%i,end:(g-1)%i,loop:r}),t=u=_.stop?g:null):(u=g,f.skip&&(t=g)),f=_}return u!==null&&a.push({start:t%i,end:u%i,loop:r}),a}function XS(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const a=!!e._loop,{start:u,end:f}=YS(n,i,a,r);if(r===!0)return p_(e,[{start:u,end:f,loop:a}],n,t);const g=f<u?f+i:f,_=!!e._fullLoop&&u===0&&f===i-1;return p_(e,qS(n,u,g,_),n,t)}function p_(e,t,n,r){return!r||!r.setContext||!n?t:$S(e,t,n,r)}function $S(e,t,n,r){const i=e._chart.getContext(),a=m_(e.options),{_datasetIndex:u,options:{spanGaps:f}}=e,g=n.length,_=[];let v=a,x=t[0].start,k=x;function S(C,N,A,P){const M=f?-1:1;if(C!==N){for(C+=g;n[C%g].skip;)C-=M;for(;n[N%g].skip;)N+=M;C%g!==N%g&&(_.push({start:C%g,end:N%g,loop:A,style:P}),v=P,x=N%g)}}for(const C of t){x=f?x:C.start;let N=n[x%g],A;for(k=x+1;k<=C.end;k++){const P=n[k%g];A=m_(r.setContext(Hs(i,{type:"segment",p0:N,p1:P,p0DataIndex:(k-1)%g,p1DataIndex:k%g,datasetIndex:u}))),KS(A,v)&&S(x,k-1,C.loop,v),N=P,v=A}x<k-1&&S(x,k-1,C.loop,v)}return _}function m_(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function KS(e,t){if(!t)return!1;const n=[],r=function(i,a){return dp(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function nc(e,t,n){return e.options.clip?e[n]:t[n]}function QS(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:nc(n,t,"left"),right:nc(n,t,"right"),top:nc(r,t,"top"),bottom:nc(r,t,"bottom")}:t}function i1(e,t){const n=t._clip;if(n.disabled)return!1;const r=QS(t,e.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class JS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,i){const a=n.listeners[i],u=n.duration;a.forEach(f=>f({chart:t,initial:n.initial,numSteps:u,currentStep:Math.min(r-n.start,u)}))}_refresh(){this._request||(this._running=!0,this._request=Hx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const a=r.items;let u=a.length-1,f=!1,g;for(;u>=0;--u)g=a[u],g._active?(g._total>r.duration&&(r.duration=g._total),g.tick(t),f=!0):(a[u]=a[a.length-1],a.pop());f&&(i.draw(),this._notify(i,r,t,"progress")),a.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),n+=a.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var $i=new JS;const __="transparent",tT={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=o_(e||__),i=r.valid&&o_(t||__);return i&&i.valid?i.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class eT{constructor(t,n,r,i){const a=n[r];i=Ju([t.to,i,a,t.from]);const u=Ju([t.from,a,i]);this._active=!0,this._fn=t.fn||tT[t.type||typeof u],this._easing=kl[t.easing]||kl.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=u,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],a=r-this._start,u=this._duration-a;this._start=r,this._duration=Math.floor(Math.max(u,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=Ju([t.to,n,i,t.from]),this._from=Ju([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,i=this._prop,a=this._from,u=this._loop,f=this._to;let g;if(this._active=a!==f&&(u||n<r),!this._active){this._target[i]=f,this._notify(!0);return}if(n<0){this._target[i]=a;return}g=n/r%2,g=u&&g>1?2-g:g,g=this._easing(Math.min(1,Math.max(0,g))),this._target[i]=this._fn(a,f,g)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class r1{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Zt(t))return;const n=Object.keys(Se.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const a=t[i];if(!Zt(a))return;const u={};for(const f of n)u[f]=a[f];(Ie(a.properties)&&a.properties||[i]).forEach(f=>{(f===i||!r.has(f))&&r.set(f,u)})})}_animateOptions(t,n){const r=n.options,i=iT(t,r);if(!i)return[];const a=this._createAnimations(i,r);return r.$shared&&nT(t.options.$animations,r).then(()=>{t.options=r},()=>{}),a}_createAnimations(t,n){const r=this._properties,i=[],a=t.$animations||(t.$animations={}),u=Object.keys(n),f=Date.now();let g;for(g=u.length-1;g>=0;--g){const _=u[g];if(_.charAt(0)==="$")continue;if(_==="options"){i.push(...this._animateOptions(t,n));continue}const v=n[_];let x=a[_];const k=r.get(_);if(x)if(k&&x.active()){x.update(k,v,f);continue}else x.cancel();if(!k||!k.duration){t[_]=v;continue}a[_]=x=new eT(k,t,_,v),i.push(x)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return $i.add(this._chart,r),!0}}function nT(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const a=e[r[i]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function iT(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function v_(e,t){const n=e&&e.options||{},r=n.reverse,i=n.min===void 0?t:0,a=n.max===void 0?t:0;return{start:r?a:i,end:r?i:a}}function rT(e,t,n){if(n===!1)return!1;const r=v_(e,n),i=v_(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function sT(e){let t,n,r,i;return Zt(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:e===!1}}function s1(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,a;for(i=0,a=r.length;i<a;++i)n.push(r[i].index);return n}function y_(e,t,n,r={}){const i=e.keys,a=r.mode==="single";let u,f,g,_;if(t===null)return;let v=!1;for(u=0,f=i.length;u<f;++u){if(g=+i[u],g===n){if(v=!0,r.all)continue;break}_=e.values[g],ln(_)&&(a||t===0||qo(t)===qo(_))&&(t+=_)}return!v&&!r.all?0:t}function oT(e,t){const{iScale:n,vScale:r}=t,i=n.axis==="x"?"x":"y",a=r.axis==="x"?"x":"y",u=Object.keys(e),f=new Array(u.length);let g,_,v;for(g=0,_=u.length;g<_;++g)v=u[g],f[g]={[i]:v,[a]:e[v]};return f}function Af(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function aT(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function lT(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function uT(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function x_(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const a=e[i.index];if(n&&a>0||!n&&a<0)return i.index}return null}function w_(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:a,vScale:u,index:f}=r,g=a.axis,_=u.axis,v=aT(a,u,r),x=t.length;let k;for(let S=0;S<x;++S){const C=t[S],{[g]:N,[_]:A}=C,P=C._stacks||(C._stacks={});k=P[_]=uT(i,v,N),k[f]=A,k._top=x_(k,u,!0,r.type),k._bottom=x_(k,u,!1,r.type);const M=k._visualValues||(k._visualValues={});M[f]=A}}function zf(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function cT(e,t){return Hs(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function hT(e,t,n){return Hs(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function qa(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const i of t){const a=i._stacks;if(!a||a[r]===void 0||a[r][n]===void 0)return;delete a[r][n],a[r]._visualValues!==void 0&&a[r]._visualValues[n]!==void 0&&delete a[r]._visualValues[n]}}}const Ff=e=>e==="reset"||e==="none",k_=(e,t)=>t?e:Object.assign({},e),fT=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:s1(n,!0),values:null};class jo{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Af(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&qa(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(x,k,S,C)=>x==="x"?k:x==="r"?C:S,a=n.xAxisID=jt(r.xAxisID,zf(t,"x")),u=n.yAxisID=jt(r.yAxisID,zf(t,"y")),f=n.rAxisID=jt(r.rAxisID,zf(t,"r")),g=n.indexAxis,_=n.iAxisID=i(g,a,u,f),v=n.vAxisID=i(g,u,a,f);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(u),n.rScale=this.getScaleForId(f),n.iScale=this.getScaleForId(_),n.vScale=this.getScaleForId(v)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&i_(this._data,this),t._stacked&&qa(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(Zt(n)){const i=this._cachedMeta;this._data=oT(n,i)}else if(r!==n){if(r){i_(r,this);const i=this._cachedMeta;qa(i),i._parsed=[]}n&&Object.isExtensible(n)&&YE(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const a=n._stacked;n._stacked=Af(n.vScale,n),n.stack!==r.stack&&(i=!0,qa(n),n.stack=r.stack),this._resyncElements(t),(i||a!==n._stacked)&&(w_(this,n._parsed),n._stacked=Af(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:i}=this,{iScale:a,_stacked:u}=r,f=a.axis;let g=t===0&&n===i.length?!0:r._sorted,_=t>0&&r._parsed[t-1],v,x,k;if(this._parsing===!1)r._parsed=i,r._sorted=!0,k=i;else{Ie(i[t])?k=this.parseArrayData(r,i,t,n):Zt(i[t])?k=this.parseObjectData(r,i,t,n):k=this.parsePrimitiveData(r,i,t,n);const S=()=>x[f]===null||_&&x[f]<_[f];for(v=0;v<n;++v)r._parsed[v+t]=x=k[v],g&&(S()&&(g=!1),_=x);r._sorted=g}u&&w_(this,k)}parsePrimitiveData(t,n,r,i){const{iScale:a,vScale:u}=t,f=a.axis,g=u.axis,_=a.getLabels(),v=a===u,x=new Array(i);let k,S,C;for(k=0,S=i;k<S;++k)C=k+r,x[k]={[f]:v||a.parse(_[C],C),[g]:u.parse(n[C],C)};return x}parseArrayData(t,n,r,i){const{xScale:a,yScale:u}=t,f=new Array(i);let g,_,v,x;for(g=0,_=i;g<_;++g)v=g+r,x=n[v],f[g]={x:a.parse(x[0],v),y:u.parse(x[1],v)};return f}parseObjectData(t,n,r,i){const{xScale:a,yScale:u}=t,{xAxisKey:f="x",yAxisKey:g="y"}=this._parsing,_=new Array(i);let v,x,k,S;for(v=0,x=i;v<x;++v)k=v+r,S=n[k],_[v]={x:a.parse(Vl(S,f),k),y:u.parse(Vl(S,g),k)};return _}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const i=this.chart,a=this._cachedMeta,u=n[t.axis],f={keys:s1(i,!0),values:n._stacks[t.axis]._visualValues};return y_(f,u,a.index,{mode:r})}updateRangeFromParsed(t,n,r,i){const a=r[n.axis];let u=a===null?NaN:a;const f=i&&r._stacks[n.axis];i&&f&&(i.values=f,u=y_(i,a,this._cachedMeta.index)),t.min=Math.min(t.min,u),t.max=Math.max(t.max,u)}getMinMax(t,n){const r=this._cachedMeta,i=r._parsed,a=r._sorted&&t===r.iScale,u=i.length,f=this._getOtherScale(t),g=fT(n,r,this.chart),_={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:v,max:x}=lT(f);let k,S;function C(){S=i[k];const N=S[f.axis];return!ln(S[t.axis])||v>N||x<N}for(k=0;k<u&&!(!C()&&(this.updateRangeFromParsed(_,t,S,g),a));++k);if(a){for(k=u-1;k>=0;--k)if(!C()){this.updateRangeFromParsed(_,t,S,g);break}}return _}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let i,a,u;for(i=0,a=n.length;i<a;++i)u=n[i][t.axis],ln(u)&&r.push(u);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,i=n.vScale,a=this.getParsed(t);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=sT(jt(this.options.clip,rT(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],a=n.chartArea,u=[],f=this._drawStart||0,g=this._drawCount||i.length-f,_=this.options.drawActiveElementsOnTop;let v;for(r.dataset&&r.dataset.draw(t,a,f,g),v=f;v<f+g;++v){const x=i[v];x.hidden||(x.active&&_?u.push(x):x.draw(t,a))}for(v=0;v<u.length;++v)u[v].draw(t,a)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const i=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const u=this._cachedMeta.data[t];a=u.$context||(u.$context=hT(this.getContext(),t,u)),a.parsed=this.getParsed(t),a.raw=i.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=cT(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=r,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const i=n==="active",a=this._cachedDataOpts,u=t+"-"+n,f=a[u],g=this.enableOptionSharing&&oh(r);if(f)return k_(f,g);const _=this.chart.config,v=_.datasetElementScopeKeys(this._type,t),x=i?[`${t}Hover`,"hover",t,""]:[t,""],k=_.getOptionScopes(this.getDataset(),v),S=Object.keys(Se.elements[t]),C=()=>this.getContext(r,i,n),N=_.resolveNamedOptions(k,S,C,x);return N.$shared&&(N.$shared=g,a[u]=Object.freeze(k_(N,g))),N}_resolveAnimations(t,n,r){const i=this.chart,a=this._cachedDataOpts,u=`animation-${n}`,f=a[u];if(f)return f;let g;if(i.options.animation!==!1){const v=this.chart.config,x=v.datasetAnimationScopeKeys(this._type,n),k=v.getOptionScopes(this.getDataset(),x);g=v.createResolver(k,this.getContext(t,r,n))}const _=new r1(i,g&&g.animations);return g&&g._cacheable&&(a[u]=Object.freeze(_)),_}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Ff(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),i=this._sharedOptions,a=this.getSharedOptions(r),u=this.includeOptions(n,a)||a!==i;return this.updateSharedOptions(a,n,r),{sharedOptions:a,includeOptions:u}}updateElement(t,n,r,i){Ff(i)?Object.assign(t,r):this._resolveAnimations(n,i).update(t,r)}updateSharedOptions(t,n,r){t&&!Ff(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,i){t.active=i;const a=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(t,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[f,g,_]of this._syncList)this[f](g,_);this._syncList=[];const i=r.length,a=n.length,u=Math.min(a,i);u&&this.parse(0,u),a>i?this._insertElements(i,a-i,t):a<i&&this._removeElements(a,i-a)}_insertElements(t,n,r=!0){const i=this._cachedMeta,a=i.data,u=t+n;let f;const g=_=>{for(_.length+=n,f=_.length-1;f>=u;f--)_[f]=_[f-n]};for(g(a),f=t;f<u;++f)a[f]=new this.dataElementType;this._parsing&&g(i._parsed),this.parse(t,n),r&&this.updateElements(a,t,n,"reset")}updateElements(t,n,r,i){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(t,n);r._stacked&&qa(r,i)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,i]=t;this[n](r,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Et(jo,"defaults",{}),Et(jo,"datasetElementType",null),Et(jo,"dataElementType",null);function dT(e,t,n){let r=1,i=1,a=0,u=0;if(t<_e){const f=e,g=f+t,_=Math.cos(f),v=Math.sin(f),x=Math.cos(g),k=Math.sin(g),S=(O,B,F)=>Yl(O,f,g,!0)?1:Math.max(B,B*n,F,F*n),C=(O,B,F)=>Yl(O,f,g,!0)?-1:Math.min(B,B*n,F,F*n),N=S(0,_,x),A=S(De,v,k),P=C(Le,_,x),M=C(Le+De,v,k);r=(N-P)/2,i=(A-M)/2,a=-(N+P)/2,u=-(A+M)/2}return{ratioX:r,ratioY:i,offsetX:a,offsetY:u}}class rl extends jo{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let a=g=>+r[g];if(Zt(r[t])){const{key:g="value"}=this._parsing;a=_=>+Vl(r[_],g)}let u,f;for(u=t,f=t+n;u<f;++u)i._parsed[u]=a(u)}}_getRotation(){return ir(this.options.rotation-90)}_getCircumference(){return ir(this.options.circumference)}_getRotationExtents(){let t=_e,n=-_e;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,a=i._getRotation(),u=i._getCircumference();t=Math.min(t,a),n=Math.max(n,a+u)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,a=i.data,u=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,f=Math.max((Math.min(r.width,r.height)-u)/2,0),g=Math.min(PE(this.options.cutout,f),1),_=this._getRingWeight(this.index),{circumference:v,rotation:x}=this._getRotationExtents(),{ratioX:k,ratioY:S,offsetX:C,offsetY:N}=dT(x,v,g),A=(r.width-u)/k,P=(r.height-u)/S,M=Math.max(Math.min(A,P)/2,0),O=Fx(this.options.radius,M),B=Math.max(O*g,0),F=(O-B)/this._getVisibleDatasetWeightTotal();this.offsetX=C*O,this.offsetY=N*O,i.total=this.calculateTotal(),this.outerRadius=O-F*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-F*_,0),this.updateElements(a,0,a.length,t)}_circumference(t,n){const r=this.options,i=this._cachedMeta,a=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*a/_e)}updateElements(t,n,r,i){const a=i==="reset",u=this.chart,f=u.chartArea,_=u.options.animation,v=(f.left+f.right)/2,x=(f.top+f.bottom)/2,k=a&&_.animateScale,S=k?0:this.innerRadius,C=k?0:this.outerRadius,{sharedOptions:N,includeOptions:A}=this._getSharedOptions(n,i);let P=this._getRotation(),M;for(M=0;M<n;++M)P+=this._circumference(M,a);for(M=n;M<n+r;++M){const O=this._circumference(M,a),B=t[M],F={x:v+this.offsetX,y:x+this.offsetY,startAngle:P,endAngle:P+O,circumference:O,outerRadius:C,innerRadius:S};A&&(F.options=N||this.resolveDataElementOptions(M,B.active?"active":i)),P+=O,this.updateElement(B,M,F,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let r=0,i;for(i=0;i<n.length;i++){const a=t._parsed[i];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(a))}return r}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?_e*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],a=gp(n._parsed[t],r.options.locale);return{label:i[t]||"",value:a}}getMaxBorderWidth(t){let n=0;const r=this.chart;let i,a,u,f,g;if(!t){for(i=0,a=r.data.datasets.length;i<a;++i)if(r.isDatasetVisible(i)){u=r.getDatasetMeta(i),t=u.data,f=u.controller;break}}if(!t)return 0;for(i=0,a=t.length;i<a;++i)g=f.resolveDataElementOptions(i),g.borderAlign!=="inner"&&(n=Math.max(n,g.borderWidth||0,g.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,i=t.length;r<i;++r){const a=this.resolveDataElementOptions(r);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(jt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Et(rl,"id","doughnut"),Et(rl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Et(rl,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),Et(rl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=t.legend.options;return n.labels.map((a,u)=>{const g=t.getDatasetMeta(0).controller.getStyle(u);return{text:a,fillStyle:g.backgroundColor,strokeStyle:g.borderColor,fontColor:i,lineWidth:g.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(u),index:u}})}return[]}},onClick(t,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Tc extends jo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:a}=n,u=this.chart._animationsDisabled;let{start:f,count:g}=KE(n,i,u);this._drawStart=f,this._drawCount=g,QE(n)&&(f=0,g=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=i;const _=this.resolveDatasetElementOptions(t);this.options.showLine||(_.borderWidth=0),_.segment=this.options.segment,this.updateElement(r,void 0,{animated:!u,options:_},t),this.updateElements(i,f,g,t)}updateElements(t,n,r,i){const a=i==="reset",{iScale:u,vScale:f,_stacked:g,_dataset:_}=this._cachedMeta,{sharedOptions:v,includeOptions:x}=this._getSharedOptions(n,i),k=u.axis,S=f.axis,{spanGaps:C,segment:N}=this.options,A=Zl(C)?C:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||a||i==="none",M=n+r,O=t.length;let B=n>0&&this.getParsed(n-1);for(let F=0;F<O;++F){const G=t[F],H=P?G:{};if(F<n||F>=M){H.skip=!0;continue}const V=this.getParsed(F),$=oe(V[S]),et=H[k]=u.getPixelForValue(V[k],F),nt=H[S]=a||$?f.getBasePixel():f.getPixelForValue(g?this.applyStack(f,V,g):V[S],F);H.skip=isNaN(et)||isNaN(nt)||$,H.stop=F>0&&Math.abs(V[k]-B[k])>A,N&&(H.parsed=V,H.raw=_.data[F]),x&&(H.options=v||this.resolveDataElementOptions(F,G.active?"active":i)),P||this.updateElement(G,F,H,i),B=V}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return r;const a=i[0].size(this.resolveDataElementOptions(0)),u=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,a,u)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Et(Tc,"id","line"),Et(Tc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Et(Tc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Xd extends rl{}Et(Xd,"id","pie"),Et(Xd,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function _s(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class wp{constructor(t){Et(this,"options");this.options=t||{}}static override(t){Object.assign(wp.prototype,t)}init(){}formats(){return _s()}parse(){return _s()}format(){return _s()}add(){return _s()}diff(){return _s()}startOf(){return _s()}endOf(){return _s()}}var gT={_date:wp};function pT(e,t,n,r){const{controller:i,data:a,_sorted:u}=e,f=i._cachedMeta.iScale,g=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(f&&t===f.axis&&t!=="r"&&u&&a.length){const _=f._reversePixels?VE:Ts;if(r){if(i._sharedOptions){const v=a[0],x=typeof v.getRange=="function"&&v.getRange(t);if(x){const k=_(a,t,n-x),S=_(a,t,n+x);return{lo:k.lo,hi:S.hi}}}}else{const v=_(a,t,n);if(g){const{vScale:x}=i._cachedMeta,{_parsed:k}=e,S=k.slice(0,v.lo+1).reverse().findIndex(N=>!oe(N[x.axis]));v.lo-=Math.max(0,S);const C=k.slice(v.hi).findIndex(N=>!oe(N[x.axis]));v.hi+=Math.max(0,C)}return v}}return{lo:0,hi:a.length-1}}function ou(e,t,n,r,i){const a=e.getSortedVisibleDatasetMetas(),u=n[t];for(let f=0,g=a.length;f<g;++f){const{index:_,data:v}=a[f],{lo:x,hi:k}=pT(a[f],t,u,i);for(let S=x;S<=k;++S){const C=v[S];C.skip||r(C,_,S)}}}function mT(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,i){const a=t?Math.abs(r.x-i.x):0,u=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(u,2))}}function Bf(e,t,n,r,i){const a=[];return!i&&!e.isPointInArea(t)||ou(e,n,t,function(f,g,_){!i&&!ql(f,e.chartArea,0)||f.inRange(t.x,t.y,r)&&a.push({element:f,datasetIndex:g,index:_})},!0),a}function _T(e,t,n,r){let i=[];function a(u,f,g){const{startAngle:_,endAngle:v}=u.getProps(["startAngle","endAngle"],r),{angle:x}=jx(u,{x:t.x,y:t.y});Yl(x,_,v)&&i.push({element:u,datasetIndex:f,index:g})}return ou(e,n,t,a),i}function vT(e,t,n,r,i,a){let u=[];const f=mT(n);let g=Number.POSITIVE_INFINITY;function _(v,x,k){const S=v.inRange(t.x,t.y,i);if(r&&!S)return;const C=v.getCenterPoint(i);if(!(!!a||e.isPointInArea(C))&&!S)return;const A=f(t,C);A<g?(u=[{element:v,datasetIndex:x,index:k}],g=A):A===g&&u.push({element:v,datasetIndex:x,index:k})}return ou(e,n,t,_),u}function jf(e,t,n,r,i,a){return!a&&!e.isPointInArea(t)?[]:n==="r"&&!r?_T(e,t,n,i):vT(e,t,n,r,i,a)}function L_(e,t,n,r,i){const a=[],u=n==="x"?"inXRange":"inYRange";let f=!1;return ou(e,n,t,(g,_,v)=>{g[u]&&g[u](t[n],i)&&(a.push({element:g,datasetIndex:_,index:v}),f=f||g.inRange(t.x,t.y,i))}),r&&!f?[]:a}var yT={evaluateInteractionItems:ou,modes:{index(e,t,n,r){const i=ws(t,e),a=n.axis||"x",u=n.includeInvisible||!1,f=n.intersect?Bf(e,i,a,r,u):jf(e,i,a,!1,r,u),g=[];return f.length?(e.getSortedVisibleDatasetMetas().forEach(_=>{const v=f[0].index,x=_.data[v];x&&!x.skip&&g.push({element:x,datasetIndex:_.index,index:v})}),g):[]},dataset(e,t,n,r){const i=ws(t,e),a=n.axis||"xy",u=n.includeInvisible||!1;let f=n.intersect?Bf(e,i,a,r,u):jf(e,i,a,!1,r,u);if(f.length>0){const g=f[0].datasetIndex,_=e.getDatasetMeta(g).data;f=[];for(let v=0;v<_.length;++v)f.push({element:_[v],datasetIndex:g,index:v})}return f},point(e,t,n,r){const i=ws(t,e),a=n.axis||"xy",u=n.includeInvisible||!1;return Bf(e,i,a,r,u)},nearest(e,t,n,r){const i=ws(t,e),a=n.axis||"xy",u=n.includeInvisible||!1;return jf(e,i,a,n.intersect,r,u)},x(e,t,n,r){const i=ws(t,e);return L_(e,i,"x",n.intersect,r)},y(e,t,n,r){const i=ws(t,e);return L_(e,i,"y",n.intersect,r)}}};const o1=["left","top","right","bottom"];function Xa(e,t){return e.filter(n=>n.pos===t)}function b_(e,t){return e.filter(n=>o1.indexOf(n.pos)===-1&&n.box.axis===t)}function $a(e,t){return e.sort((n,r)=>{const i=t?r:n,a=t?n:r;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function xT(e){const t=[];let n,r,i,a,u,f;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],{position:a,options:{stack:u,stackWeight:f=1}}=i,t.push({index:n,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:u&&a+u,stackWeight:f});return t}function wT(e){const t={};for(const n of e){const{stack:r,pos:i,stackWeight:a}=n;if(!r||!o1.includes(i))continue;const u=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=a}return t}function kT(e,t){const n=wT(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let a,u,f;for(a=0,u=e.length;a<u;++a){f=e[a];const{fullSize:g}=f.box,_=n[f.stack],v=_&&f.stackWeight/_.weight;f.horizontal?(f.width=v?v*r:g&&t.availableWidth,f.height=i):(f.width=r,f.height=v?v*i:g&&t.availableHeight)}return n}function LT(e){const t=xT(e),n=$a(t.filter(_=>_.box.fullSize),!0),r=$a(Xa(t,"left"),!0),i=$a(Xa(t,"right")),a=$a(Xa(t,"top"),!0),u=$a(Xa(t,"bottom")),f=b_(t,"x"),g=b_(t,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:i.concat(g).concat(u).concat(f),chartArea:Xa(t,"chartArea"),vertical:r.concat(i).concat(g),horizontal:a.concat(u).concat(f)}}function E_(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function a1(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function bT(e,t,n,r){const{pos:i,box:a}=n,u=e.maxPadding;if(!Zt(i)){n.size&&(e[i]-=n.size);const x=r[n.stack]||{size:0,count:1};x.size=Math.max(x.size,n.horizontal?a.height:a.width),n.size=x.size/x.count,e[i]+=n.size}a.getPadding&&a1(u,a.getPadding());const f=Math.max(0,t.outerWidth-E_(u,e,"left","right")),g=Math.max(0,t.outerHeight-E_(u,e,"top","bottom")),_=f!==e.w,v=g!==e.h;return e.w=f,e.h=g,n.horizontal?{same:_,other:v}:{same:v,other:_}}function ET(e){const t=e.maxPadding;function n(r){const i=Math.max(t[r]-e[r],0);return e[r]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function ST(e,t){const n=t.maxPadding;function r(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(u=>{a[u]=Math.max(t[u],n[u])}),a}return r(e?["left","right"]:["top","bottom"])}function sl(e,t,n,r){const i=[];let a,u,f,g,_,v;for(a=0,u=e.length,_=0;a<u;++a){f=e[a],g=f.box,g.update(f.width||t.w,f.height||t.h,ST(f.horizontal,t));const{same:x,other:k}=bT(t,n,f,r);_|=x&&i.length,v=v||k,g.fullSize||i.push(f)}return _&&sl(i,t,n,r)||v}function ic(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function S_(e,t,n,r){const i=n.padding;let{x:a,y:u}=t;for(const f of e){const g=f.box,_=r[f.stack]||{count:1,placed:0,weight:1},v=f.stackWeight/_.weight||1;if(f.horizontal){const x=t.w*v,k=_.size||g.height;oh(_.start)&&(u=_.start),g.fullSize?ic(g,i.left,u,n.outerWidth-i.right-i.left,k):ic(g,t.left+_.placed,u,x,k),_.start=u,_.placed+=x,u=g.bottom}else{const x=t.h*v,k=_.size||g.width;oh(_.start)&&(a=_.start),g.fullSize?ic(g,a,i.top,k,n.outerHeight-i.bottom-i.top):ic(g,a,t.top+_.placed,k,x),_.start=a,_.placed+=x,a=g.right}}t.x=a,t.y=u}var ri={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=li(e.options.layout.padding),a=Math.max(t-i.width,0),u=Math.max(n-i.height,0),f=LT(e.boxes),g=f.vertical,_=f.horizontal;ee(e.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const v=g.reduce((N,A)=>A.box.options&&A.box.options.display===!1?N:N+1,0)||1,x=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:a,availableHeight:u,vBoxMaxWidth:a/2/v,hBoxMaxHeight:u/2}),k=Object.assign({},i);a1(k,li(r));const S=Object.assign({maxPadding:k,w:a,h:u,x:i.left,y:i.top},i),C=kT(g.concat(_),x);sl(f.fullSize,S,x,C),sl(g,S,x,C),sl(_,S,x,C)&&sl(g,S,x,C),ET(S),S_(f.leftAndTop,S,x,C),S.x+=S.w,S.y+=S.h,S_(f.rightAndBottom,S,x,C),e.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},ee(f.chartArea,N=>{const A=N.box;Object.assign(A,e.chartArea),A.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class l1{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,i){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(t){return!0}updateConfig(t){}}class TT extends l1{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Cc="$chartjs",CT={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},T_=e=>e===null||e==="";function MT(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[Cc]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",T_(i)){const a=d_(e,"width");a!==void 0&&(e.width=a)}if(T_(r))if(e.style.height==="")e.height=e.width/(t||2);else{const a=d_(e,"height");a!==void 0&&(e.height=a)}return e}const u1=US?{passive:!0}:!1;function PT(e,t,n){e&&e.addEventListener(t,n,u1)}function NT(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,u1)}function IT(e,t){const n=CT[e.type]||e.type,{x:r,y:i}=ws(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:i!==void 0?i:null}}function uh(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function OT(e,t,n){const r=e.canvas,i=new MutationObserver(a=>{let u=!1;for(const f of a)u=u||uh(f.addedNodes,r),u=u&&!uh(f.removedNodes,r);u&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function DT(e,t,n){const r=e.canvas,i=new MutationObserver(a=>{let u=!1;for(const f of a)u=u||uh(f.removedNodes,r),u=u&&!uh(f.addedNodes,r);u&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const $l=new Map;let C_=0;function c1(){const e=window.devicePixelRatio;e!==C_&&(C_=e,$l.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function RT(e,t){$l.size||window.addEventListener("resize",c1),$l.set(e,t)}function AT(e){$l.delete(e),$l.size||window.removeEventListener("resize",c1)}function zT(e,t,n){const r=e.canvas,i=r&&xp(r);if(!i)return;const a=Gx((f,g)=>{const _=i.clientWidth;n(f,g),_<i.clientWidth&&n()},window),u=new ResizeObserver(f=>{const g=f[0],_=g.contentRect.width,v=g.contentRect.height;_===0&&v===0||a(_,v)});return u.observe(i),RT(e,a),u}function Uf(e,t,n){n&&n.disconnect(),t==="resize"&&AT(e)}function FT(e,t,n){const r=e.canvas,i=Gx(a=>{e.ctx!==null&&n(IT(a,e))},e);return PT(r,t,i),i}class BT extends l1{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(MT(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[Cc])return!1;const r=n[Cc].initial;["height","width"].forEach(a=>{const u=r[a];oe(u)?n.removeAttribute(a):n.setAttribute(a,u)});const i=r.style||{};return Object.keys(i).forEach(a=>{n.style[a]=i[a]}),n.width=n.width,delete n[Cc],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),u={attach:OT,detach:DT,resize:zT}[n]||FT;i[n]=u(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),i=r[n];if(!i)return;({attach:Uf,detach:Uf,resize:Uf}[n]||NT)(t,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,i){return jS(t,n,r,i)}isAttached(t){const n=t&&xp(t);return!!(n&&n.isConnected)}}function jT(e){return!yp()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?TT:BT}var gc;let Xr=(gc=class{constructor(){Et(this,"x");Et(this,"y");Et(this,"active",!1);Et(this,"options");Et(this,"$animations")}tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return Zl(this.x)&&Zl(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const i={};return t.forEach(a=>{i[a]=r[a]&&r[a].active()?r[a]._to:this[a]}),i}},Et(gc,"defaults",{}),Et(gc,"defaultRoutes"),gc);function UT(e,t){const n=e.options.ticks,r=HT(e),i=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?WT(t):[],u=a.length,f=a[0],g=a[u-1],_=[];if(u>i)return VT(t,_,a,u/i),_;const v=GT(a,t,i);if(u>0){let x,k;const S=u>1?Math.round((g-f)/(u-1)):null;for(rc(t,_,v,oe(S)?0:f-S,f),x=0,k=u-1;x<k;x++)rc(t,_,v,a[x],a[x+1]);return rc(t,_,v,g,oe(S)?t.length:g+S),_}return rc(t,_,v),_}function HT(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}function GT(e,t,n){const r=ZT(e),i=t.length/n;if(!r)return Math.max(i,1);const a=FE(r);for(let u=0,f=a.length-1;u<f;u++){const g=a[u];if(g>i)return g}return Math.max(i,1)}function WT(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function VT(e,t,n,r){let i=0,a=n[0],u;for(r=Math.ceil(r),u=0;u<e.length;u++)u===a&&(t.push(e[u]),i++,a=n[i*r])}function rc(e,t,n,r,i){const a=jt(r,0),u=Math.min(jt(i,e.length),e.length);let f=0,g,_,v;for(n=Math.ceil(n),i&&(g=i-r,n=g/Math.floor(g/n)),v=a;v<0;)f++,v=Math.round(a+f*n);for(_=Math.max(a,0);_<u;_++)_===v&&(t.push(e[_]),f++,v=Math.round(a+f*n))}function ZT(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const YT=e=>e==="left"?"right":e==="right"?"left":e,M_=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,P_=(e,t)=>Math.min(t||e,e);function N_(e,t){const n=[],r=e.length/t,i=e.length;let a=0;for(;a<i;a+=r)n.push(e[Math.floor(a)]);return n}function qT(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),a=e._startPixel,u=e._endPixel,f=1e-6;let g=e.getPixelForTick(i),_;if(!(n&&(r===1?_=Math.max(g-a,u-g):t===0?_=(e.getPixelForTick(1)-g)/2:_=(g-e.getPixelForTick(i-1))/2,g+=i<t?_:-_,g<a-f||g>u+f)))return g}function XT(e,t){ee(e,n=>{const r=n.gc,i=r.length/2;let a;if(i>t){for(a=0;a<i;++a)delete n.data[r[a]];r.splice(0,i)}})}function Ka(e){return e.drawTicks?e.tickLength:0}function I_(e,t){if(!e.display)return 0;const n=on(e.font,t),r=li(e.padding);return(Ie(e.text)?e.text.length:1)*n.lineHeight+r.height}function $T(e,t){return Hs(e,{scale:t,type:"scale"})}function KT(e,t,n){return Hs(e,{tick:n,index:t,type:"tick"})}function QT(e,t,n){let r=fp(e);return(n&&t!=="right"||!n&&t==="right")&&(r=YT(r)),r}function JT(e,t,n,r){const{top:i,left:a,bottom:u,right:f,chart:g}=e,{chartArea:_,scales:v}=g;let x=0,k,S,C;const N=u-i,A=f-a;if(e.isHorizontal()){if(S=rn(r,a,f),Zt(n)){const P=Object.keys(n)[0],M=n[P];C=v[P].getPixelForValue(M)+N-t}else n==="center"?C=(_.bottom+_.top)/2+N-t:C=M_(e,n,t);k=f-a}else{if(Zt(n)){const P=Object.keys(n)[0],M=n[P];S=v[P].getPixelForValue(M)-A+t}else n==="center"?S=(_.left+_.right)/2-A+t:S=M_(e,n,t);C=rn(r,u,i),x=n==="left"?-De:De}return{titleX:S,titleY:C,maxWidth:k,rotation:x}}class oa extends Xr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return t=Ni(t,Number.POSITIVE_INFINITY),n=Ni(n,Number.NEGATIVE_INFINITY),r=Ni(r,Number.POSITIVE_INFINITY),i=Ni(i,Number.NEGATIVE_INFINITY),{min:Ni(t,r),max:Ni(n,i),minDefined:ln(t),maxDefined:ln(n)}}getMinMax(t){let{min:n,max:r,minDefined:i,maxDefined:a}=this.getUserBounds(),u;if(i&&a)return{min:n,max:r};const f=this.getMatchingVisibleMetas();for(let g=0,_=f.length;g<_;++g)u=f[g].controller.getMinMax(this,t),i||(n=Math.min(n,u.min)),a||(r=Math.max(r,u.max));return n=a&&n>r?r:n,r=i&&n>r?n:r,{min:Ni(n,Ni(r,n)),max:Ni(r,Ni(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ue(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:i,grace:a,ticks:u}=this.options,f=u.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=vS(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const g=f<this.ticks.length;this._convertTicksToLabels(g?N_(this.ticks,f):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),u.display&&(u.autoSkip||u.source==="auto")&&(this.ticks=UT(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),g&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ue(this.options.afterUpdate,[this])}beforeSetDimensions(){ue(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ue(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ue(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ue(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,i,a;for(r=0,i=t.length;r<i;r++)a=t[r],a.label=ue(n.callback,[a.value,r,t],this)}afterTickToLabelConversion(){ue(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ue(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=P_(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,a=n.maxRotation;let u=i,f,g,_;if(!this._isVisible()||!n.display||i>=a||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const v=this._getLabelSizes(),x=v.widest.width,k=v.highest.height,S=pn(this.chart.width-x,0,this.maxWidth);f=t.offset?this.maxWidth/r:S/(r-1),x+6>f&&(f=S/(r-(t.offset?.5:1)),g=this.maxHeight-Ka(t.grid)-n.padding-I_(t.title,this.chart.options.font),_=Math.sqrt(x*x+k*k),u=HE(Math.min(Math.asin(pn((v.highest.height+6)/f,-1,1)),Math.asin(pn(g/_,-1,1))-Math.asin(pn(k/_,-1,1)))),u=Math.max(i,Math.min(a,u))),this.labelRotation=u}afterCalculateLabelRotation(){ue(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ue(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:a}}=this,u=this._isVisible(),f=this.isHorizontal();if(u){const g=I_(i,n.options.font);if(f?(t.width=this.maxWidth,t.height=Ka(a)+g):(t.height=this.maxHeight,t.width=Ka(a)+g),r.display&&this.ticks.length){const{first:_,last:v,widest:x,highest:k}=this._getLabelSizes(),S=r.padding*2,C=ir(this.labelRotation),N=Math.cos(C),A=Math.sin(C);if(f){const P=r.mirror?0:A*x.width+N*k.height;t.height=Math.min(this.maxHeight,t.height+P+S)}else{const P=r.mirror?0:N*x.width+A*k.height;t.width=Math.min(this.maxWidth,t.width+P+S)}this._calculatePadding(_,v,A,N)}}this._handleMargins(),f?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,i){const{ticks:{align:a,padding:u},position:f}=this.options,g=this.labelRotation!==0,_=f!=="top"&&this.axis==="x";if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let k=0,S=0;g?_?(k=i*t.width,S=r*n.height):(k=r*t.height,S=i*n.width):a==="start"?S=n.width:a==="end"?k=t.width:a!=="inner"&&(k=t.width/2,S=n.width/2),this.paddingLeft=Math.max((k-v+u)*this.width/(this.width-v),0),this.paddingRight=Math.max((S-x+u)*this.width/(this.width-x),0)}else{let v=n.height/2,x=t.height/2;a==="start"?(v=0,x=t.height):a==="end"&&(v=n.height,x=0),this.paddingTop=v+u,this.paddingBottom=x+u}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ue(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)oe(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=N_(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,r){const{ctx:i,_longestTextCache:a}=this,u=[],f=[],g=Math.floor(n/P_(n,r));let _=0,v=0,x,k,S,C,N,A,P,M,O,B,F;for(x=0;x<n;x+=g){if(C=t[x].label,N=this._resolveTickFontOptions(x),i.font=A=N.string,P=a[A]=a[A]||{data:{},gc:[]},M=N.lineHeight,O=B=0,!oe(C)&&!Ie(C))O=l_(i,P.data,P.gc,O,C),B=M;else if(Ie(C))for(k=0,S=C.length;k<S;++k)F=C[k],!oe(F)&&!Ie(F)&&(O=l_(i,P.data,P.gc,O,F),B+=M);u.push(O),f.push(B),_=Math.max(O,_),v=Math.max(B,v)}XT(a,n);const G=u.indexOf(_),H=f.indexOf(v),V=$=>({width:u[$]||0,height:f[$]||0});return{first:V(0),last:V(n-1),widest:V(G),highest:V(H),widths:u,heights:f}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return WE(this._alignToPixels?ms(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=KT(this.getContext(),t,r))}return this.$context||(this.$context=$T(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=ir(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),a=this._getLabelSizes(),u=t.autoSkipPadding||0,f=a?a.widest.width+u:0,g=a?a.highest.height+u:0;return this.isHorizontal()?g*r>f*i?f/r:g/i:g*i<f*r?g/r:f/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,i=this.options,{grid:a,position:u,border:f}=i,g=a.offset,_=this.isHorizontal(),x=this.ticks.length+(g?1:0),k=Ka(a),S=[],C=f.setContext(this.getContext()),N=C.display?C.width:0,A=N/2,P=function(gt){return ms(r,gt,N)};let M,O,B,F,G,H,V,$,et,nt,at,rt;if(u==="top")M=P(this.bottom),H=this.bottom-k,$=M-A,nt=P(t.top)+A,rt=t.bottom;else if(u==="bottom")M=P(this.top),nt=t.top,rt=P(t.bottom)-A,H=M+A,$=this.top+k;else if(u==="left")M=P(this.right),G=this.right-k,V=M-A,et=P(t.left)+A,at=t.right;else if(u==="right")M=P(this.left),et=t.left,at=P(t.right)-A,G=M+A,V=this.left+k;else if(n==="x"){if(u==="center")M=P((t.top+t.bottom)/2+.5);else if(Zt(u)){const gt=Object.keys(u)[0],xt=u[gt];M=P(this.chart.scales[gt].getPixelForValue(xt))}nt=t.top,rt=t.bottom,H=M+A,$=H+k}else if(n==="y"){if(u==="center")M=P((t.left+t.right)/2);else if(Zt(u)){const gt=Object.keys(u)[0],xt=u[gt];M=P(this.chart.scales[gt].getPixelForValue(xt))}G=M-A,V=G-k,et=t.left,at=t.right}const tt=jt(i.ticks.maxTicksLimit,x),ht=Math.max(1,Math.ceil(x/tt));for(O=0;O<x;O+=ht){const gt=this.getContext(O),xt=a.setContext(gt),Q=f.setContext(gt),dt=xt.lineWidth,X=xt.color,_t=Q.dash||[],wt=Q.dashOffset,zt=xt.tickWidth,pt=xt.tickColor,Nt=xt.tickBorderDash||[],St=xt.tickBorderDashOffset;B=qT(this,O,g),B!==void 0&&(F=ms(r,B,dt),_?G=V=et=at=F:H=$=nt=rt=F,S.push({tx1:G,ty1:H,tx2:V,ty2:$,x1:et,y1:nt,x2:at,y2:rt,width:dt,color:X,borderDash:_t,borderDashOffset:wt,tickWidth:zt,tickColor:pt,tickBorderDash:Nt,tickBorderDashOffset:St}))}return this._ticksLength=x,this._borderValue=M,S}_computeLabelItems(t){const n=this.axis,r=this.options,{position:i,ticks:a}=r,u=this.isHorizontal(),f=this.ticks,{align:g,crossAlign:_,padding:v,mirror:x}=a,k=Ka(r.grid),S=k+v,C=x?-v:S,N=-ir(this.labelRotation),A=[];let P,M,O,B,F,G,H,V,$,et,nt,at,rt="middle";if(i==="top")G=this.bottom-C,H=this._getXAxisLabelAlignment();else if(i==="bottom")G=this.top+C,H=this._getXAxisLabelAlignment();else if(i==="left"){const ht=this._getYAxisLabelAlignment(k);H=ht.textAlign,F=ht.x}else if(i==="right"){const ht=this._getYAxisLabelAlignment(k);H=ht.textAlign,F=ht.x}else if(n==="x"){if(i==="center")G=(t.top+t.bottom)/2+S;else if(Zt(i)){const ht=Object.keys(i)[0],gt=i[ht];G=this.chart.scales[ht].getPixelForValue(gt)+S}H=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")F=(t.left+t.right)/2-S;else if(Zt(i)){const ht=Object.keys(i)[0],gt=i[ht];F=this.chart.scales[ht].getPixelForValue(gt)}H=this._getYAxisLabelAlignment(k).textAlign}n==="y"&&(g==="start"?rt="top":g==="end"&&(rt="bottom"));const tt=this._getLabelSizes();for(P=0,M=f.length;P<M;++P){O=f[P],B=O.label;const ht=a.setContext(this.getContext(P));V=this.getPixelForTick(P)+a.labelOffset,$=this._resolveTickFontOptions(P),et=$.lineHeight,nt=Ie(B)?B.length:1;const gt=nt/2,xt=ht.color,Q=ht.textStrokeColor,dt=ht.textStrokeWidth;let X=H;u?(F=V,H==="inner"&&(P===M-1?X=this.options.reverse?"left":"right":P===0?X=this.options.reverse?"right":"left":X="center"),i==="top"?_==="near"||N!==0?at=-nt*et+et/2:_==="center"?at=-tt.highest.height/2-gt*et+et:at=-tt.highest.height+et/2:_==="near"||N!==0?at=et/2:_==="center"?at=tt.highest.height/2-gt*et:at=tt.highest.height-nt*et,x&&(at*=-1),N!==0&&!ht.showLabelBackdrop&&(F+=et/2*Math.sin(N))):(G=V,at=(1-nt)*et/2);let _t;if(ht.showLabelBackdrop){const wt=li(ht.backdropPadding),zt=tt.heights[P],pt=tt.widths[P];let Nt=at-wt.top,St=0-wt.left;switch(rt){case"middle":Nt-=zt/2;break;case"bottom":Nt-=zt;break}switch(H){case"center":St-=pt/2;break;case"right":St-=pt;break;case"inner":P===M-1?St-=pt:P>0&&(St-=pt/2);break}_t={left:St,top:Nt,width:pt+wt.width,height:zt+wt.height,color:ht.backdropColor}}A.push({label:B,font:$,textOffset:at,options:{rotation:N,color:xt,strokeColor:Q,strokeWidth:dt,textAlign:X,textBaseline:rt,translation:[F,G],backdrop:_t}})}return A}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-ir(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:i,padding:a}}=this.options,u=this._getLabelSizes(),f=t+a,g=u.widest.width;let _,v;return n==="left"?i?(v=this.right+a,r==="near"?_="left":r==="center"?(_="center",v+=g/2):(_="right",v+=g)):(v=this.right-f,r==="near"?_="right":r==="center"?(_="center",v-=g/2):(_="left",v=this.left)):n==="right"?i?(v=this.left+a,r==="near"?_="right":r==="center"?(_="center",v-=g/2):(_="left",v-=g)):(v=this.left+f,r==="near"?_="left":r==="center"?(_="center",v+=g/2):(_="right",v=this.right)):_="right",{textAlign:_,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:i,width:a,height:u}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,i,a,u),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(a=>a.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,u;const f=(g,_,v)=>{!v.width||!v.color||(r.save(),r.lineWidth=v.width,r.strokeStyle=v.color,r.setLineDash(v.borderDash||[]),r.lineDashOffset=v.borderDashOffset,r.beginPath(),r.moveTo(g.x,g.y),r.lineTo(_.x,_.y),r.stroke(),r.restore())};if(n.display)for(a=0,u=i.length;a<u;++a){const g=i[a];n.drawOnChartArea&&f({x:g.x1,y:g.y1},{x:g.x2,y:g.y2},g),n.drawTicks&&f({x:g.tx1,y:g.ty1},{x:g.tx2,y:g.ty2},{color:g.tickColor,width:g.tickWidth,borderDash:g.tickBorderDash,borderDashOffset:g.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:r,grid:i}}=this,a=r.setContext(this.getContext()),u=r.display?a.width:0;if(!u)return;const f=i.setContext(this.getContext(0)).lineWidth,g=this._borderValue;let _,v,x,k;this.isHorizontal()?(_=ms(t,this.left,u)-u/2,v=ms(t,this.right,f)+f/2,x=k=g):(x=ms(t,this.top,u)-u/2,k=ms(t,this.bottom,f)+f/2,_=v=g),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(_,x),n.lineTo(v,k),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&zh(r,i);const a=this.getLabelItems(t);for(const u of a){const f=u.options,g=u.font,_=u.label,v=u.textOffset;Xl(r,_,0,v,g,f)}i&&Fh(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const a=on(r.font),u=li(r.padding),f=r.align;let g=a.lineHeight/2;n==="bottom"||n==="center"||Zt(n)?(g+=u.bottom,Ie(r.text)&&(g+=a.lineHeight*(r.text.length-1))):g+=u.top;const{titleX:_,titleY:v,maxWidth:x,rotation:k}=JT(this,g,n,f);Xl(t,r.text,0,0,a,{color:r.color,maxWidth:x,rotation:k,textAlign:QT(f,n,i),textBaseline:"middle",translation:[_,v]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=jt(t.grid&&t.grid.z,-1),i=jt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==oa.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:r,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let a,u;for(a=0,u=n.length;a<u;++a){const f=n[a];f[r]===this.id&&(!t||f.type===t)&&i.push(f)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return on(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class sc{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;nC(n)&&(r=this.register(n));const i=this.items,a=t.id,u=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in i||(i[a]=t,tC(t,u,r),this.override&&Se.override(t.id,t.overrides)),u}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,i=this.scope;r in n&&delete n[r],i&&r in Se[i]&&(delete Se[i][r],this.override&&delete Fs[r])}}function tC(e,t,n){const r=Wl(Object.create(null),[n?Se.get(n):{},Se.get(t),e.defaults]);Se.set(t,r),e.defaultRoutes&&eC(t,e.defaultRoutes),e.descriptors&&Se.describe(t,e.descriptors)}function eC(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),a=[e].concat(r).join("."),u=t[n].split("."),f=u.pop(),g=u.join(".");Se.route(a,i,g,f)})}function nC(e){return"id"in e&&"defaults"in e}class iC{constructor(){this.controllers=new sc(jo,"datasets",!0),this.elements=new sc(Xr,"elements"),this.plugins=new sc(Object,"plugins"),this.scales=new sc(oa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(i=>{const a=r||this._getRegistryForType(i);r||a.isForType(i)||a===this.plugins&&i.id?this._exec(t,a,i):ee(i,u=>{const f=r||this._getRegistryForType(u);this._exec(t,f,u)})})}_exec(t,n,r){const i=cp(t);ue(r["before"+i],[],r),n[t](r),ue(r["after"+i],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}}var Di=new iC;class rC{constructor(){this._init=[]}notify(t,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const a=i?this._descriptors(t).filter(i):this._descriptors(t),u=this._notify(a,t,n,r);return n==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall")),u}_notify(t,n,r,i){i=i||{};for(const a of t){const u=a.plugin,f=u[r],g=[n,i,a.options];if(ue(f,g,u)===!1&&i.cancelable)return!1}return!0}invalidate(){oe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,i=jt(r.options&&r.options.plugins,{}),a=sC(r);return i===!1&&!n?[]:aC(t,a,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,i=(a,u)=>a.filter(f=>!u.some(g=>f.plugin.id===g.plugin.id));this._notify(i(n,r),t,"stop"),this._notify(i(r,n),t,"start")}}function sC(e){const t={},n=[],r=Object.keys(Di.plugins.items);for(let a=0;a<r.length;a++)n.push(Di.getPlugin(r[a]));const i=e.plugins||[];for(let a=0;a<i.length;a++){const u=i[a];n.indexOf(u)===-1&&(n.push(u),t[u.id]=!0)}return{plugins:n,localIds:t}}function oC(e,t){return!t&&e===!1?null:e===!0?{}:e}function aC(e,{plugins:t,localIds:n},r,i){const a=[],u=e.getContext();for(const f of t){const g=f.id,_=oC(r[g],i);_!==null&&a.push({plugin:f,options:lC(e.config,{plugin:f,local:n[g]},_,u)})}return a}function lC(e,{plugin:t,local:n},r,i){const a=e.pluginScopeKeys(t),u=e.getOptionScopes(r,a);return n&&t.defaults&&u.push(t.defaults),e.createResolver(u,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $d(e,t){const n=Se.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function uC(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function cC(e,t){return e===t?"_index_":"_value_"}function O_(e){if(e==="x"||e==="y"||e==="r")return e}function hC(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Kd(e,...t){if(O_(e))return e;for(const n of t){const r=n.axis||hC(n.position)||e.length>1&&O_(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function D_(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function fC(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(n.length)return D_(e,"x",n[0])||D_(e,"y",n[0])}return{}}function dC(e,t){const n=Fs[e.type]||{scales:{}},r=t.scales||{},i=$d(e.type,t),a=Object.create(null);return Object.keys(r).forEach(u=>{const f=r[u];if(!Zt(f))return console.error(`Invalid scale configuration for scale: ${u}`);if(f._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${u}`);const g=Kd(u,f,fC(u,e),Se.scales[f.type]),_=cC(g,i),v=n.scales||{};a[u]=xl(Object.create(null),[{axis:g},f,v[g],v[_]])}),e.data.datasets.forEach(u=>{const f=u.type||e.type,g=u.indexAxis||$d(f,t),v=(Fs[f]||{}).scales||{};Object.keys(v).forEach(x=>{const k=uC(x,g),S=u[k+"AxisID"]||k;a[S]=a[S]||Object.create(null),xl(a[S],[{axis:k},r[S],v[x]])})}),Object.keys(a).forEach(u=>{const f=a[u];xl(f,[Se.scales[f.type],Se.scale])}),a}function h1(e){const t=e.options||(e.options={});t.plugins=jt(t.plugins,{}),t.scales=dC(e,t)}function f1(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function gC(e){return e=e||{},e.data=f1(e.data),h1(e),e}const R_=new Map,d1=new Set;function oc(e,t){let n=R_.get(e);return n||(n=t(),R_.set(e,n),d1.add(n)),n}const Qa=(e,t,n)=>{const r=Vl(t,n);r!==void 0&&e.add(r)};class pC{constructor(t){this._config=gC(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=f1(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),h1(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return oc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return oc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return oc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return oc(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let i=r.get(t);return(!i||n)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,n,r){const{options:i,type:a}=this,u=this._cachedScopes(t,r),f=u.get(n);if(f)return f;const g=new Set;n.forEach(v=>{t&&(g.add(t),v.forEach(x=>Qa(g,t,x))),v.forEach(x=>Qa(g,i,x)),v.forEach(x=>Qa(g,Fs[a]||{},x)),v.forEach(x=>Qa(g,Se,x)),v.forEach(x=>Qa(g,Zd,x))});const _=Array.from(g);return _.length===0&&_.push(Object.create(null)),d1.has(n)&&u.set(n,_),_}chartOptionScopes(){const{options:t,type:n}=this;return[t,Fs[n]||{},Se.datasets[n]||{},{type:n},Se,Zd]}resolveNamedOptions(t,n,r,i=[""]){const a={$shared:!0},{resolver:u,subPrefixes:f}=A_(this._resolverCache,t,i);let g=u;if(_C(u,n)){a.$shared=!1,r=Vr(r)?r():r;const _=this.createResolver(t,r,f);g=Xo(u,r,_)}for(const _ of n)a[_]=g[_];return a}createResolver(t,n,r=[""],i){const{resolver:a}=A_(this._resolverCache,t,r);return Zt(n)?Xo(a,n,void 0,i):a}}function A_(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let a=r.get(i);return a||(a={resolver:mp(t,n),subPrefixes:n.filter(f=>!f.toLowerCase().includes("hover"))},r.set(i,a)),a}const mC=e=>Zt(e)&&Object.getOwnPropertyNames(e).some(t=>Vr(e[t]));function _C(e,t){const{isScriptable:n,isIndexable:r}=Yx(e);for(const i of t){const a=n(i),u=r(i),f=(u||a)&&e[i];if(a&&(Vr(f)||mC(f))||u&&Ie(f))return!0}return!1}var vC="4.4.9";const yC=["top","bottom","left","right","chartArea"];function z_(e,t){return e==="top"||e==="bottom"||yC.indexOf(e)===-1&&t==="x"}function F_(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function B_(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),ue(n&&n.onComplete,[e],t)}function xC(e){const t=e.chart,n=t.options.animation;ue(n&&n.onProgress,[e],t)}function g1(e){return yp()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Mc={},j_=e=>{const t=g1(e);return Object.values(Mc).filter(n=>n.canvas===t).pop()};function wC(e,t,n){const r=Object.keys(e);for(const i of r){const a=+i;if(a>=t){const u=e[i];delete e[i],(n>0||a>t)&&(e[a+n]=u)}}}function kC(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}var Sr;let au=(Sr=class{static register(...t){Di.add(...t),U_()}static unregister(...t){Di.remove(...t),U_()}constructor(t,n){const r=this.config=new pC(n),i=g1(t),a=j_(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const u=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||jT(i)),this.platform.updateConfig(r);const f=this.platform.acquireContext(i,u.aspectRatio),g=f&&f.canvas,_=g&&g.height,v=g&&g.width;if(this.id=ME(),this.ctx=f,this.canvas=g,this.width=v,this.height=_,this._options=u,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new rC,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=XE(x=>this.update(x),u.resizeDelay||0),this._dataChanges=[],Mc[this.id]=this,!f||!g){console.error("Failed to create chart: can't acquire context from the given item");return}$i.listen(this,"complete",B_),$i.listen(this,"progress",xC),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:i,_aspectRatio:a}=this;return oe(t)?n&&a?a:i?r/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Di}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():f_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return u_(this.canvas,this.ctx),this}stop(){return $i.stop(this),this}resize(t,n){$i.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,i=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,u=this.platform.getMaximumSize(i,t,n,a),f=r.devicePixelRatio||this.platform.getDevicePixelRatio(),g=this.width?"resize":"attach";this.width=u.width,this.height=u.height,this._aspectRatio=this.aspectRatio,f_(this,f,!0)&&(this.notifyPlugins("resize",{size:u}),ue(r.onResize,[this,u],this),this.attached&&this._doResize(g)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ee(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,i=Object.keys(r).reduce((u,f)=>(u[f]=!1,u),{});let a=[];n&&(a=a.concat(Object.keys(n).map(u=>{const f=n[u],g=Kd(u,f),_=g==="r",v=g==="x";return{options:f,dposition:_?"chartArea":v?"bottom":"left",dtype:_?"radialLinear":v?"category":"linear"}}))),ee(a,u=>{const f=u.options,g=f.id,_=Kd(g,f),v=jt(f.type,u.dtype);(f.position===void 0||z_(f.position,_)!==z_(u.dposition))&&(f.position=u.dposition),i[g]=!0;let x=null;if(g in r&&r[g].type===v)x=r[g];else{const k=Di.getScale(v);x=new k({id:g,type:v,ctx:this.ctx,chart:this}),r[x.id]=x}x.init(f,t)}),ee(i,(u,f)=>{u||delete r[f]}),ee(r,u=>{ri.configure(this,u,u.options),ri.addBox(this,u)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((i,a)=>i.index-a.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(F_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,i)=>{n.filter(a=>a===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const a=n[r];let u=this.getDatasetMeta(r);const f=a.type||this.config.type;if(u.type&&u.type!==f&&(this._destroyDatasetMeta(r),u=this.getDatasetMeta(r)),u.type=f,u.indexAxis=a.indexAxis||$d(f,this.options),u.order=a.order||0,u.index=r,u.label=""+a.label,u.visible=this.isDatasetVisible(r),u.controller)u.controller.updateIndex(r),u.controller.linkScales();else{const g=Di.getController(f),{datasetElementType:_,dataElementType:v}=Se.datasets[f];Object.assign(g,{dataElementType:Di.getElement(v),datasetElementType:_&&Di.getElement(_)}),u.controller=new g(this,r),t.push(u.controller)}}return this._updateMetasets(),t}_resetElements(){ee(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let u=0;for(let _=0,v=this.data.datasets.length;_<v;_++){const{controller:x}=this.getDatasetMeta(_),k=!i&&a.indexOf(x)===-1;x.buildOrUpdateElements(k),u=Math.max(+x.getMaxOverflow(),u)}u=this._minPadding=r.layout.autoPadding?u:0,this._updateLayout(u),i||ee(a,_=>{_.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(F_("z","_idx"));const{_active:f,_lastEvent:g}=this;g?this._eventHandler(g,!0):f.length&&this._updateHoverStyles(f,f,!0),this.render()}_updateScales(){ee(this.scales,t=>{ri.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!Jm(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:a}of n){const u=r==="_removeElements"?-a:a;wC(t,i,u)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=a=>new Set(t.filter(u=>u[0]===a).map((u,f)=>f+","+u.splice(1).join(","))),i=r(0);for(let a=1;a<n;a++)if(!Jm(i,r(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ri.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ee(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Vr(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),i={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&($i.has(this)?this.attached&&!$i.running(this)&&$i.start(this):(this.draw(),B_({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let i,a;for(i=0,a=n.length;i<a;++i){const u=n[i];(!t||u.visible)&&r.push(u)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r={meta:t,index:t.index,cancelable:!0},i=i1(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&zh(n,i),t.controller.draw(),i&&Fh(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return ql(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,i){const a=yT.modes[n];return typeof a=="function"?a(this,t,r,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let i=r.filter(a=>a&&a._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Hs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const i=r?"show":"hide",a=this.getDatasetMeta(t),u=a.controller._resolveAnimations(void 0,i);oh(n)?(a.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),u.update(a,{visible:r}),this.update(f=>f.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),$i.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),u_(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Mc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(a,u)=>{n.addEventListener(this,a,u),t[a]=u},i=(a,u,f)=>{a.offsetX=u,a.offsetY=f,this._eventHandler(a)};ee(this.options.events,a=>r(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(g,_)=>{n.addEventListener(this,g,_),t[g]=_},i=(g,_)=>{t[g]&&(n.removeEventListener(this,g,_),delete t[g])},a=(g,_)=>{this.canvas&&this.resize(g,_)};let u;const f=()=>{i("attach",f),this.attached=!0,this.resize(),r("resize",a),r("detach",u)};u=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),r("attach",f)},n.isAttached(this.canvas)?f():u()}unbindEvents(){ee(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},ee(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const i=r?"set":"remove";let a,u,f,g;for(n==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),f=0,g=t.length;f<g;++f){u=t[f];const _=u&&this.getDatasetMeta(u.datasetIndex).controller;_&&_[i+"HoverStyle"](u.element,u.datasetIndex,u.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:a,index:u})=>{const f=this.getDatasetMeta(a);if(!f)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:f.data[u],index:u}});!rh(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){const i=this.options.hover,a=(g,_)=>g.filter(v=>!_.some(x=>v.datasetIndex===x.datasetIndex&&v.index===x.index)),u=a(n,t),f=r?t:a(t,n);u.length&&this.updateHoverStyle(u,i.mode,!1),f.length&&i.mode&&this.updateHoverStyle(f,i.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=u=>(u.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const a=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(a||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:i=[],options:a}=this,u=n,f=this._getActiveElements(t,i,r,u),g=RE(t),_=kC(t,this._lastEvent,r,g);r&&(this._lastEvent=null,ue(a.onHover,[t,f,this],this),g&&ue(a.onClick,[t,f,this],this));const v=!rh(f,i);return(v||n)&&(this._active=f,this._updateHoverStyles(f,i,n)),this._lastEvent=_,v}_getActiveElements(t,n,r,i){if(t.type==="mouseout")return[];if(!r)return n;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,i)}},Et(Sr,"defaults",Se),Et(Sr,"instances",Mc),Et(Sr,"overrides",Fs),Et(Sr,"registry",Di),Et(Sr,"version",vC),Et(Sr,"getChart",j_),Sr);function U_(){return ee(au.instances,e=>e._plugins.invalidate())}function LC(e,t,n){const{startAngle:r,pixelMargin:i,x:a,y:u,outerRadius:f,innerRadius:g}=t;let _=i/f;e.beginPath(),e.arc(a,u,f,r-_,n+_),g>i?(_=i/g,e.arc(a,u,g,n+_,r-_,!0)):e.arc(a,u,i,n+De,r-De),e.closePath(),e.clip()}function bC(e){return pp(e,["outerStart","outerEnd","innerStart","innerEnd"])}function EC(e,t,n,r){const i=bC(e.options.borderRadius),a=(n-t)/2,u=Math.min(a,r*t/2),f=g=>{const _=(n-Math.min(a,g))*r/2;return pn(g,0,Math.min(a,_))};return{outerStart:f(i.outerStart),outerEnd:f(i.outerEnd),innerStart:pn(i.innerStart,0,u),innerEnd:pn(i.innerEnd,0,u)}}function yo(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function ch(e,t,n,r,i,a){const{x:u,y:f,startAngle:g,pixelMargin:_,innerRadius:v}=t,x=Math.max(t.outerRadius+r+n-_,0),k=v>0?v+r+n+_:0;let S=0;const C=i-g;if(r){const ht=v>0?v-r:0,gt=x>0?x-r:0,xt=(ht+gt)/2,Q=xt!==0?C*xt/(xt+r):C;S=(C-Q)/2}const N=Math.max(.001,C*x-n/Le)/x,A=(C-N)/2,P=g+A+S,M=i-A-S,{outerStart:O,outerEnd:B,innerStart:F,innerEnd:G}=EC(t,k,x,M-P),H=x-O,V=x-B,$=P+O/H,et=M-B/V,nt=k+F,at=k+G,rt=P+F/nt,tt=M-G/at;if(e.beginPath(),a){const ht=($+et)/2;if(e.arc(u,f,x,$,ht),e.arc(u,f,x,ht,et),B>0){const dt=yo(V,et,u,f);e.arc(dt.x,dt.y,B,et,M+De)}const gt=yo(at,M,u,f);if(e.lineTo(gt.x,gt.y),G>0){const dt=yo(at,tt,u,f);e.arc(dt.x,dt.y,G,M+De,tt+Math.PI)}const xt=(M-G/k+(P+F/k))/2;if(e.arc(u,f,k,M-G/k,xt,!0),e.arc(u,f,k,xt,P+F/k,!0),F>0){const dt=yo(nt,rt,u,f);e.arc(dt.x,dt.y,F,rt+Math.PI,P-De)}const Q=yo(H,P,u,f);if(e.lineTo(Q.x,Q.y),O>0){const dt=yo(H,$,u,f);e.arc(dt.x,dt.y,O,P-De,$)}}else{e.moveTo(u,f);const ht=Math.cos($)*x+u,gt=Math.sin($)*x+f;e.lineTo(ht,gt);const xt=Math.cos(et)*x+u,Q=Math.sin(et)*x+f;e.lineTo(xt,Q)}e.closePath()}function SC(e,t,n,r,i){const{fullCircles:a,startAngle:u,circumference:f}=t;let g=t.endAngle;if(a){ch(e,t,n,r,g,i);for(let _=0;_<a;++_)e.fill();isNaN(f)||(g=u+(f%_e||_e))}return ch(e,t,n,r,g,i),e.fill(),g}function TC(e,t,n,r,i){const{fullCircles:a,startAngle:u,circumference:f,options:g}=t,{borderWidth:_,borderJoinStyle:v,borderDash:x,borderDashOffset:k}=g,S=g.borderAlign==="inner";if(!_)return;e.setLineDash(x||[]),e.lineDashOffset=k,S?(e.lineWidth=_*2,e.lineJoin=v||"round"):(e.lineWidth=_,e.lineJoin=v||"bevel");let C=t.endAngle;if(a){ch(e,t,n,r,C,i);for(let N=0;N<a;++N)e.stroke();isNaN(f)||(C=u+(f%_e||_e))}S&&LC(e,t,C),a||(ch(e,t,n,r,C,i),e.stroke())}class ol extends Xr{constructor(n){super();Et(this,"circumference");Et(this,"endAngle");Et(this,"fullCircles");Et(this,"innerRadius");Et(this,"outerRadius");Et(this,"pixelMargin");Et(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const a=this.getProps(["x","y"],i),{angle:u,distance:f}=jx(a,{x:n,y:r}),{startAngle:g,endAngle:_,innerRadius:v,outerRadius:x,circumference:k}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),S=(this.options.spacing+this.options.borderWidth)/2,C=jt(k,_-g),N=Yl(u,g,_)&&g!==_,A=C>=_e||N,P=Ss(f,v+S,x+S);return A&&P}getCenterPoint(n){const{x:r,y:i,startAngle:a,endAngle:u,innerRadius:f,outerRadius:g}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:_,spacing:v}=this.options,x=(a+u)/2,k=(f+g+v+_)/2;return{x:r+Math.cos(x)*k,y:i+Math.sin(x)*k}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,a=(r.offset||0)/4,u=(r.spacing||0)/2,f=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>_e?Math.floor(i/_e):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const g=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(g)*a,Math.sin(g)*a);const _=1-Math.sin(Math.min(Le,i||0)),v=a*_;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,SC(n,this,v,u,f),TC(n,this,v,u,f),n.restore()}}Et(ol,"id","arc"),Et(ol,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Et(ol,"defaultRoutes",{backgroundColor:"backgroundColor"}),Et(ol,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function p1(e,t,n=t){e.lineCap=jt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(jt(n.borderDash,t.borderDash)),e.lineDashOffset=jt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=jt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=jt(n.borderWidth,t.borderWidth),e.strokeStyle=jt(n.borderColor,t.borderColor)}function CC(e,t,n){e.lineTo(n.x,n.y)}function MC(e){return e.stepped?lS:e.tension||e.cubicInterpolationMode==="monotone"?uS:CC}function m1(e,t,n={}){const r=e.length,{start:i=0,end:a=r-1}=n,{start:u,end:f}=t,g=Math.max(i,u),_=Math.min(a,f),v=i<u&&a<u||i>f&&a>f;return{count:r,start:g,loop:t.loop,ilen:_<g&&!v?r+_-g:_-g}}function PC(e,t,n,r){const{points:i,options:a}=t,{count:u,start:f,loop:g,ilen:_}=m1(i,n,r),v=MC(a);let{move:x=!0,reverse:k}=r||{},S,C,N;for(S=0;S<=_;++S)C=i[(f+(k?_-S:S))%u],!C.skip&&(x?(e.moveTo(C.x,C.y),x=!1):v(e,N,C,k,a.stepped),N=C);return g&&(C=i[(f+(k?_:0))%u],v(e,N,C,k,a.stepped)),!!g}function NC(e,t,n,r){const i=t.points,{count:a,start:u,ilen:f}=m1(i,n,r),{move:g=!0,reverse:_}=r||{};let v=0,x=0,k,S,C,N,A,P;const M=B=>(u+(_?f-B:B))%a,O=()=>{N!==A&&(e.lineTo(v,A),e.lineTo(v,N),e.lineTo(v,P))};for(g&&(S=i[M(0)],e.moveTo(S.x,S.y)),k=0;k<=f;++k){if(S=i[M(k)],S.skip)continue;const B=S.x,F=S.y,G=B|0;G===C?(F<N?N=F:F>A&&(A=F),v=(x*v+B)/++x):(O(),e.lineTo(B,F),C=G,x=0,N=A=F),P=F}O()}function Qd(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?NC:PC}function IC(e){return e.stepped?HS:e.tension||e.cubicInterpolationMode==="monotone"?GS:ks}function OC(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),p1(e,t.options),e.stroke(i)}function DC(e,t,n,r){const{segments:i,options:a}=t,u=Qd(t);for(const f of i)p1(e,a,f.style),e.beginPath(),u(e,t,f,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}const RC=typeof Path2D=="function";function AC(e,t,n,r){RC&&!t.options.segment?OC(e,t,n,r):DC(e,t,n,r)}class rr extends Xr{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;DS(this._points,r,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=XS(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){const r=this.options,i=t[n],a=this.points,u=n1(this,{property:n,start:i,end:i});if(!u.length)return;const f=[],g=IC(r);let _,v;for(_=0,v=u.length;_<v;++_){const{start:x,end:k}=u[_],S=a[x],C=a[k];if(S===C){f.push(S);continue}const N=Math.abs((i-S[n])/(C[n]-S[n])),A=g(S,C,N,r.stepped);A[n]=t[n],f.push(A)}return f.length===1?f[0]:f}pathSegment(t,n,r){return Qd(this)(t,this,n,r)}path(t,n,r){const i=this.segments,a=Qd(this);let u=this._loop;n=n||0,r=r||this.points.length-n;for(const f of i)u&=a(t,this,f,{start:n,end:n+r-1});return!!u}draw(t,n,r,i){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),AC(t,this,r,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Et(rr,"id","line"),Et(rr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Et(rr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Et(rr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function H_(e,t,n,r){const i=e.options,{[n]:a}=e.getProps([n],r);return Math.abs(t-a)<i.radius+i.hitRadius}class El extends Xr{constructor(n){super();Et(this,"parsed");Et(this,"skip");Et(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const a=this.options,{x:u,y:f}=this.getProps(["x","y"],i);return Math.pow(n-u,2)+Math.pow(r-f,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(n,r){return H_(this,n,"x",r)}inYRange(n,r){return H_(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!ql(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Yd(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Et(El,"id","point"),Et(El,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Et(El,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function zC(e,t,n){const r=e.segments,i=e.points,a=t.points,u=[];for(const f of r){let{start:g,end:_}=f;_=kp(g,_,i);const v=Jd(n,i[g],i[_],f.loop);if(!t.segments){u.push({source:f,target:v,start:i[g],end:i[_]});continue}const x=n1(t,v);for(const k of x){const S=Jd(n,a[k.start],a[k.end],k.loop),C=e1(f,i,S);for(const N of C)u.push({source:N,target:k,start:{[n]:G_(v,S,"start",Math.max)},end:{[n]:G_(v,S,"end",Math.min)}})}}return u}function Jd(e,t,n,r){if(r)return;let i=t[e],a=n[e];return e==="angle"&&(i=Ri(i),a=Ri(a)),{property:e,start:i,end:a}}function FC(e,t){const{x:n=null,y:r=null}=e||{},i=t.points,a=[];return t.segments.forEach(({start:u,end:f})=>{f=kp(u,f,i);const g=i[u],_=i[f];r!==null?(a.push({x:g.x,y:r}),a.push({x:_.x,y:r})):n!==null&&(a.push({x:n,y:g.y}),a.push({x:n,y:_.y}))}),a}function kp(e,t,n){for(;t>e;t--){const r=n[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function G_(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function _1(e,t){let n=[],r=!1;return Ie(e)?(r=!0,n=e):n=FC(e,t),n.length?new rr({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function W_(e){return e&&e.fill!==!1}function BC(e,t,n){let i=e[t].fill;const a=[t];let u;if(!n)return i;for(;i!==!1&&a.indexOf(i)===-1;){if(!ln(i))return i;if(u=e[i],!u)return!1;if(u.visible)return i;a.push(i),i=u.fill}return!1}function jC(e,t,n){const r=WC(e);if(Zt(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return ln(i)&&Math.floor(i)===i?UC(r[0],t,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function UC(e,t,n,r){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=r?!1:n}function HC(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Zt(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function GC(e,t,n){let r;return e==="start"?r=n:e==="end"?r=t.options.reverse?t.min:t.max:Zt(e)?r=e.value:r=t.getBaseValue(),r}function WC(e){const t=e.options,n=t.fill;let r=jt(n&&n.target,n);return r===void 0&&(r=!!t.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function VC(e){const{scale:t,index:n,line:r}=e,i=[],a=r.segments,u=r.points,f=ZC(t,n);f.push(_1({x:null,y:t.bottom},r));for(let g=0;g<a.length;g++){const _=a[g];for(let v=_.start;v<=_.end;v++)YC(i,u[v],f)}return new rr({points:i,options:{}})}function ZC(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const a=r[i];if(a.index===t)break;a.hidden||n.unshift(a.dataset)}return n}function YC(e,t,n){const r=[];for(let i=0;i<n.length;i++){const a=n[i],{first:u,last:f,point:g}=qC(a,t,"x");if(!(!g||u&&f)){if(u)r.unshift(g);else if(e.push(g),!f)break}}e.push(...r)}function qC(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const i=r[n],a=e.segments,u=e.points;let f=!1,g=!1;for(let _=0;_<a.length;_++){const v=a[_],x=u[v.start][n],k=u[v.end][n];if(Ss(i,x,k)){f=i===x,g=i===k;break}}return{first:f,last:g,point:r}}class v1{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,r){const{x:i,y:a,radius:u}=this;return n=n||{start:0,end:_e},t.arc(i,a,u,n.end,n.start,!0),!r.bounds}interpolate(t){const{x:n,y:r,radius:i}=this,a=t.angle;return{x:n+Math.cos(a)*i,y:r+Math.sin(a)*i,angle:a}}}function XC(e){const{chart:t,fill:n,line:r}=e;if(ln(n))return $C(t,n);if(n==="stack")return VC(e);if(n==="shape")return!0;const i=KC(e);return i instanceof v1?i:_1(i,r)}function $C(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function KC(e){return(e.scale||{}).getPointPositionForValue?JC(e):QC(e)}function QC(e){const{scale:t={},fill:n}=e,r=HC(n,t);if(ln(r)){const i=t.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function JC(e){const{scale:t,fill:n}=e,r=t.options,i=t.getLabels().length,a=r.reverse?t.max:t.min,u=GC(n,t,a),f=[];if(r.grid.circular){const g=t.getPointPositionForValue(0,a);return new v1({x:g.x,y:g.y,radius:t.getDistanceFromCenterForValue(u)})}for(let g=0;g<i;++g)f.push(t.getPointPositionForValue(g,u));return f}function Hf(e,t,n){const r=XC(t),{chart:i,index:a,line:u,scale:f,axis:g}=t,_=u.options,v=_.fill,x=_.backgroundColor,{above:k=x,below:S=x}=v||{},C=i.getDatasetMeta(a),N=i1(i,C);r&&u.points.length&&(zh(e,n),tM(e,{line:u,target:r,above:k,below:S,area:n,scale:f,axis:g,clip:N}),Fh(e))}function tM(e,t){const{line:n,target:r,above:i,below:a,area:u,scale:f,clip:g}=t,_=n._loop?"angle":t.axis;e.save(),_==="x"&&a!==i&&(V_(e,r,u.top),Z_(e,{line:n,target:r,color:i,scale:f,property:_,clip:g}),e.restore(),e.save(),V_(e,r,u.bottom)),Z_(e,{line:n,target:r,color:a,scale:f,property:_,clip:g}),e.restore()}function V_(e,t,n){const{segments:r,points:i}=t;let a=!0,u=!1;e.beginPath();for(const f of r){const{start:g,end:_}=f,v=i[g],x=i[kp(g,_,i)];a?(e.moveTo(v.x,v.y),a=!1):(e.lineTo(v.x,n),e.lineTo(v.x,v.y)),u=!!t.pathSegment(e,f,{move:u}),u?e.closePath():e.lineTo(x.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Z_(e,t){const{line:n,target:r,property:i,color:a,scale:u,clip:f}=t,g=zC(n,r,i);for(const{source:_,target:v,start:x,end:k}of g){const{style:{backgroundColor:S=a}={}}=_,C=r!==!0;e.save(),e.fillStyle=S,eM(e,u,f,C&&Jd(i,x,k)),e.beginPath();const N=!!n.pathSegment(e,_);let A;if(C){N?e.closePath():Y_(e,r,k,i);const P=!!r.pathSegment(e,v,{move:N,reverse:!0});A=N&&P,A||Y_(e,r,x,i)}e.closePath(),e.fill(A?"evenodd":"nonzero"),e.restore()}}function eM(e,t,n,r){const i=t.chart.chartArea,{property:a,start:u,end:f}=r||{};if(a==="x"||a==="y"){let g,_,v,x;a==="x"?(g=u,_=i.top,v=f,x=i.bottom):(g=i.left,_=u,v=i.right,x=f),e.beginPath(),n&&(g=Math.max(g,n.left),v=Math.min(v,n.right),_=Math.max(_,n.top),x=Math.min(x,n.bottom)),e.rect(g,_,v-g,x-_),e.clip()}}function Y_(e,t,n,r){const i=t.interpolate(n,r);i&&e.lineTo(i.x,i.y)}var y1={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,i=[];let a,u,f,g;for(u=0;u<r;++u)a=e.getDatasetMeta(u),f=a.dataset,g=null,f&&f.options&&f instanceof rr&&(g={visible:e.isDatasetVisible(u),index:u,fill:jC(f,u,r),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:f}),a.$filler=g,i.push(g);for(u=0;u<r;++u)g=i[u],!(!g||g.fill===!1)&&(g.fill=BC(i,u,n.propagate))},beforeDraw(e,t,n){const r=n.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let u=i.length-1;u>=0;--u){const f=i[u].$filler;f&&(f.line.updateControlPoints(a,f.axis),r&&f.fill&&Hf(e.ctx,f,a))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const a=r[i].$filler;W_(a)&&Hf(e.ctx,a,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;!W_(r)||n.drawTime!=="beforeDatasetDraw"||Hf(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const q_=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},nM=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class X_ extends Xr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=ue(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,i=on(r.font),a=i.size,u=this._computeTitleHeight(),{boxWidth:f,itemHeight:g}=q_(r,a);let _,v;n.font=i.string,this.isHorizontal()?(_=this.maxWidth,v=this._fitRows(u,a,f,g)+10):(v=this.maxHeight,_=this._fitCols(u,i,f,g)+10),this.width=Math.min(_,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,i){const{ctx:a,maxWidth:u,options:{labels:{padding:f}}}=this,g=this.legendHitBoxes=[],_=this.lineWidths=[0],v=i+f;let x=t;a.textAlign="left",a.textBaseline="middle";let k=-1,S=-v;return this.legendItems.forEach((C,N)=>{const A=r+n/2+a.measureText(C.text).width;(N===0||_[_.length-1]+A+2*f>u)&&(x+=v,_[_.length-(N>0?0:1)]=0,S+=v,k++),g[N]={left:0,top:S,row:k,width:A,height:i},_[_.length-1]+=A+f}),x}_fitCols(t,n,r,i){const{ctx:a,maxHeight:u,options:{labels:{padding:f}}}=this,g=this.legendHitBoxes=[],_=this.columnSizes=[],v=u-t;let x=f,k=0,S=0,C=0,N=0;return this.legendItems.forEach((A,P)=>{const{itemWidth:M,itemHeight:O}=iM(r,n,a,A,i);P>0&&S+O+2*f>v&&(x+=k+f,_.push({width:k,height:S}),C+=k+f,N++,k=S=0),g[P]={left:C,top:S,col:N,width:M,height:O},k=Math.max(k,M),S+=O+f}),x+=k,_.push({width:k,height:S}),x}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:a}}=this,u=Bo(a,this.left,this.width);if(this.isHorizontal()){let f=0,g=rn(r,this.left+i,this.right-this.lineWidths[f]);for(const _ of n)f!==_.row&&(f=_.row,g=rn(r,this.left+i,this.right-this.lineWidths[f])),_.top+=this.top+t+i,_.left=u.leftForLtr(u.x(g),_.width),g+=_.width+i}else{let f=0,g=rn(r,this.top+t+i,this.bottom-this.columnSizes[f].height);for(const _ of n)_.col!==f&&(f=_.col,g=rn(r,this.top+t+i,this.bottom-this.columnSizes[f].height)),_.top=g,_.left+=this.left+i,_.left=u.leftForLtr(u.x(_.left),_.width),g+=_.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;zh(t,this),this._draw(),Fh(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:i}=this,{align:a,labels:u}=t,f=Se.color,g=Bo(t.rtl,this.left,this.width),_=on(u.font),{padding:v}=u,x=_.size,k=x/2;let S;this.drawTitle(),i.textAlign=g.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=_.string;const{boxWidth:C,boxHeight:N,itemHeight:A}=q_(u,x),P=function(G,H,V){if(isNaN(C)||C<=0||isNaN(N)||N<0)return;i.save();const $=jt(V.lineWidth,1);if(i.fillStyle=jt(V.fillStyle,f),i.lineCap=jt(V.lineCap,"butt"),i.lineDashOffset=jt(V.lineDashOffset,0),i.lineJoin=jt(V.lineJoin,"miter"),i.lineWidth=$,i.strokeStyle=jt(V.strokeStyle,f),i.setLineDash(jt(V.lineDash,[])),u.usePointStyle){const et={radius:N*Math.SQRT2/2,pointStyle:V.pointStyle,rotation:V.rotation,borderWidth:$},nt=g.xPlus(G,C/2),at=H+k;Zx(i,et,nt,at,u.pointStyleWidth&&C)}else{const et=H+Math.max((x-N)/2,0),nt=g.leftForLtr(G,C),at=bl(V.borderRadius);i.beginPath(),Object.values(at).some(rt=>rt!==0)?qd(i,{x:nt,y:et,w:C,h:N,radius:at}):i.rect(nt,et,C,N),i.fill(),$!==0&&i.stroke()}i.restore()},M=function(G,H,V){Xl(i,V.text,G,H+A/2,_,{strikethrough:V.hidden,textAlign:g.textAlign(V.textAlign)})},O=this.isHorizontal(),B=this._computeTitleHeight();O?S={x:rn(a,this.left+v,this.right-r[0]),y:this.top+v+B,line:0}:S={x:this.left+v,y:rn(a,this.top+B+v,this.bottom-n[0].height),line:0},Qx(this.ctx,t.textDirection);const F=A+v;this.legendItems.forEach((G,H)=>{i.strokeStyle=G.fontColor,i.fillStyle=G.fontColor;const V=i.measureText(G.text).width,$=g.textAlign(G.textAlign||(G.textAlign=u.textAlign)),et=C+k+V;let nt=S.x,at=S.y;g.setWidth(this.width),O?H>0&&nt+et+v>this.right&&(at=S.y+=F,S.line++,nt=S.x=rn(a,this.left+v,this.right-r[S.line])):H>0&&at+F>this.bottom&&(nt=S.x=nt+n[S.line].width+v,S.line++,at=S.y=rn(a,this.top+B+v,this.bottom-n[S.line].height));const rt=g.x(nt);if(P(rt,at,G),nt=$E($,nt+C+k,O?nt+et:this.right,t.rtl),M(g.x(nt),at,G),O)S.x+=et+v;else if(typeof G.text!="string"){const tt=_.lineHeight;S.y+=x1(G,tt)+v}else S.y+=F}),Jx(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=on(n.font),i=li(n.padding);if(!n.display)return;const a=Bo(t.rtl,this.left,this.width),u=this.ctx,f=n.position,g=r.size/2,_=i.top+g;let v,x=this.left,k=this.width;if(this.isHorizontal())k=Math.max(...this.lineWidths),v=this.top+_,x=rn(t.align,x,this.right-k);else{const C=this.columnSizes.reduce((N,A)=>Math.max(N,A.height),0);v=_+rn(t.align,this.top,this.bottom-C-t.labels.padding-this._computeTitleHeight())}const S=rn(f,x,x+k);u.textAlign=a.textAlign(fp(f)),u.textBaseline="middle",u.strokeStyle=n.color,u.fillStyle=n.color,u.font=r.string,Xl(u,n.text,S,v,r)}_computeTitleHeight(){const t=this.options.title,n=on(t.font),r=li(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,i,a;if(Ss(t,this.left,this.right)&&Ss(n,this.top,this.bottom)){for(a=this.legendHitBoxes,r=0;r<a.length;++r)if(i=a[r],Ss(t,i.left,i.left+i.width)&&Ss(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!oM(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,a=nM(i,r);i&&!a&&ue(n.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!a&&ue(n.onHover,[t,r,this],this)}else r&&ue(n.onClick,[t,r,this],this)}}function iM(e,t,n,r,i){const a=rM(r,e,t,n),u=sM(i,r,t.lineHeight);return{itemWidth:a,itemHeight:u}}function rM(e,t,n,r){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((a,u)=>a.length>u.length?a:u)),t+n.size/2+r.measureText(i).width}function sM(e,t,n){let r=e;return typeof t.text!="string"&&(r=x1(t,n)),r}function x1(e,t){const n=e.text?e.text.length:0;return t*n}function oM(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var w1={id:"legend",_element:X_,start(e,t,n){const r=e.legend=new X_({ctx:e.ctx,options:n,chart:e});ri.configure(e,r,n),ri.addBox(e,r)},stop(e){ri.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;ri.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:a,useBorderRadius:u,borderRadius:f}}=e.legend.options;return e._getSortedDatasetMetas().map(g=>{const _=g.controller.getStyle(n?0:void 0),v=li(_.borderWidth);return{text:t[g.index].label,fillStyle:_.backgroundColor,fontColor:a,hidden:!g.visible,lineCap:_.borderCapStyle,lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:(v.width+v.height)/4,strokeStyle:_.borderColor,pointStyle:r||_.pointStyle,rotation:_.rotation,textAlign:i||_.textAlign,borderRadius:u&&(f||_.borderRadius),datasetIndex:g.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class k1 extends Xr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=Ie(r.text)?r.text.length:1;this._padding=li(r.padding);const a=i*on(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:r,bottom:i,right:a,options:u}=this,f=u.align;let g=0,_,v,x;return this.isHorizontal()?(v=rn(f,r,a),x=n+t,_=a-r):(u.position==="left"?(v=r+t,x=rn(f,i,n),g=Le*-.5):(v=a-t,x=rn(f,n,i),g=Le*.5),_=i-n),{titleX:v,titleY:x,maxWidth:_,rotation:g}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const r=on(n.font),a=r.lineHeight/2+this._padding.top,{titleX:u,titleY:f,maxWidth:g,rotation:_}=this._drawArgs(a);Xl(t,n.text,0,0,r,{color:n.color,maxWidth:g,rotation:_,textAlign:fp(n.align),textBaseline:"middle",translation:[u,f]})}}function aM(e,t){const n=new k1({ctx:e.ctx,options:t,chart:e});ri.configure(e,n,t),ri.addBox(e,n),e.titleBlock=n}var L1={id:"title",_element:k1,start(e,t,n){aM(e,n)},stop(e){const t=e.titleBlock;ri.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;ri.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const al={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,a=0;for(t=0,n=e.length;t<n;++t){const f=e[t].element;if(f&&f.hasValue()){const g=f.tooltipPosition();r.add(g.x),i+=g.y,++a}}return a===0||r.size===0?!1:{x:[...r].reduce((f,g)=>f+g)/r.size,y:i/a}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,i=Number.POSITIVE_INFINITY,a,u,f;for(a=0,u=e.length;a<u;++a){const g=e[a].element;if(g&&g.hasValue()){const _=g.getCenterPoint(),v=Vd(t,_);v<i&&(i=v,f=g)}}if(f){const g=f.tooltipPosition();n=g.x,r=g.y}return{x:n,y:r}}};function Ii(e,t){return t&&(Ie(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ki(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function lM(e,t){const{element:n,datasetIndex:r,index:i}=t,a=e.getDatasetMeta(r).controller,{label:u,value:f}=a.getLabelAndValue(i);return{chart:e,label:u,parsed:a.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:f,dataset:a.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function $_(e,t){const n=e.chart.ctx,{body:r,footer:i,title:a}=e,{boxWidth:u,boxHeight:f}=t,g=on(t.bodyFont),_=on(t.titleFont),v=on(t.footerFont),x=a.length,k=i.length,S=r.length,C=li(t.padding);let N=C.height,A=0,P=r.reduce((B,F)=>B+F.before.length+F.lines.length+F.after.length,0);if(P+=e.beforeBody.length+e.afterBody.length,x&&(N+=x*_.lineHeight+(x-1)*t.titleSpacing+t.titleMarginBottom),P){const B=t.displayColors?Math.max(f,g.lineHeight):g.lineHeight;N+=S*B+(P-S)*g.lineHeight+(P-1)*t.bodySpacing}k&&(N+=t.footerMarginTop+k*v.lineHeight+(k-1)*t.footerSpacing);let M=0;const O=function(B){A=Math.max(A,n.measureText(B).width+M)};return n.save(),n.font=_.string,ee(e.title,O),n.font=g.string,ee(e.beforeBody.concat(e.afterBody),O),M=t.displayColors?u+2+t.boxPadding:0,ee(r,B=>{ee(B.before,O),ee(B.lines,O),ee(B.after,O)}),M=0,n.font=v.string,ee(e.footer,O),n.restore(),A+=C.width,{width:A,height:N}}function uM(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function cM(e,t,n,r){const{x:i,width:a}=r,u=n.caretSize+n.caretPadding;if(e==="left"&&i+a+u>t.width||e==="right"&&i-a-u<0)return!0}function hM(e,t,n,r){const{x:i,width:a}=n,{width:u,chartArea:{left:f,right:g}}=e;let _="center";return r==="center"?_=i<=(f+g)/2?"left":"right":i<=a/2?_="left":i>=u-a/2&&(_="right"),cM(_,e,t,n)&&(_="center"),_}function K_(e,t,n){const r=n.yAlign||t.yAlign||uM(e,n);return{xAlign:n.xAlign||t.xAlign||hM(e,t,n,r),yAlign:r}}function fM(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function dM(e,t,n){let{y:r,height:i}=e;return t==="top"?r+=n:t==="bottom"?r-=i+n:r-=i/2,r}function Q_(e,t,n,r){const{caretSize:i,caretPadding:a,cornerRadius:u}=e,{xAlign:f,yAlign:g}=n,_=i+a,{topLeft:v,topRight:x,bottomLeft:k,bottomRight:S}=bl(u);let C=fM(t,f);const N=dM(t,g,_);return g==="center"?f==="left"?C+=_:f==="right"&&(C-=_):f==="left"?C-=Math.max(v,k)+i:f==="right"&&(C+=Math.max(x,S)+i),{x:pn(C,0,r.width-t.width),y:pn(N,0,r.height-t.height)}}function ac(e,t,n){const r=li(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function J_(e){return Ii([],Ki(e))}function gM(e,t,n){return Hs(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function tv(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const b1={beforeTitle:Xi,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Xi,beforeBody:Xi,beforeLabel:Xi,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return oe(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Xi,afterBody:Xi,beforeFooter:Xi,footer:Xi,afterFooter:Xi};function bn(e,t,n,r){const i=e[t].call(n,r);return typeof i>"u"?b1[t].call(n,r):i}class tg extends Xr{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,a=new r1(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=gM(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,i=bn(r,"beforeTitle",this,t),a=bn(r,"title",this,t),u=bn(r,"afterTitle",this,t);let f=[];return f=Ii(f,Ki(i)),f=Ii(f,Ki(a)),f=Ii(f,Ki(u)),f}getBeforeBody(t,n){return J_(bn(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:r}=n,i=[];return ee(t,a=>{const u={before:[],lines:[],after:[]},f=tv(r,a);Ii(u.before,Ki(bn(f,"beforeLabel",this,a))),Ii(u.lines,bn(f,"label",this,a)),Ii(u.after,Ki(bn(f,"afterLabel",this,a))),i.push(u)}),i}getAfterBody(t,n){return J_(bn(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:r}=n,i=bn(r,"beforeFooter",this,t),a=bn(r,"footer",this,t),u=bn(r,"afterFooter",this,t);let f=[];return f=Ii(f,Ki(i)),f=Ii(f,Ki(a)),f=Ii(f,Ki(u)),f}_createItems(t){const n=this._active,r=this.chart.data,i=[],a=[],u=[];let f=[],g,_;for(g=0,_=n.length;g<_;++g)f.push(lM(this.chart,n[g]));return t.filter&&(f=f.filter((v,x,k)=>t.filter(v,x,k,r))),t.itemSort&&(f=f.sort((v,x)=>t.itemSort(v,x,r))),ee(f,v=>{const x=tv(t.callbacks,v);i.push(bn(x,"labelColor",this,v)),a.push(bn(x,"labelPointStyle",this,v)),u.push(bn(x,"labelTextColor",this,v))}),this.labelColors=i,this.labelPointStyles=a,this.labelTextColors=u,this.dataPoints=f,f}update(t,n){const r=this.options.setContext(this.getContext()),i=this._active;let a,u=[];if(!i.length)this.opacity!==0&&(a={opacity:0});else{const f=al[r.position].call(this,i,this._eventPosition);u=this._createItems(r),this.title=this.getTitle(u,r),this.beforeBody=this.getBeforeBody(u,r),this.body=this.getBody(u,r),this.afterBody=this.getAfterBody(u,r),this.footer=this.getFooter(u,r);const g=this._size=$_(this,r),_=Object.assign({},f,g),v=K_(this.chart,r,_),x=Q_(r,_,v,this.chart);this.xAlign=v.xAlign,this.yAlign=v.yAlign,a={opacity:1,x:x.x,y:x.y,width:g.width,height:g.height,caretX:f.x,caretY:f.y}}this._tooltipItems=u,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,i){const a=this.getCaretPosition(t,r,i);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(t,n,r){const{xAlign:i,yAlign:a}=this,{caretSize:u,cornerRadius:f}=r,{topLeft:g,topRight:_,bottomLeft:v,bottomRight:x}=bl(f),{x:k,y:S}=t,{width:C,height:N}=n;let A,P,M,O,B,F;return a==="center"?(B=S+N/2,i==="left"?(A=k,P=A-u,O=B+u,F=B-u):(A=k+C,P=A+u,O=B-u,F=B+u),M=A):(i==="left"?P=k+Math.max(g,v)+u:i==="right"?P=k+C-Math.max(_,x)-u:P=this.caretX,a==="top"?(O=S,B=O-u,A=P-u,M=P+u):(O=S+N,B=O+u,A=P+u,M=P-u),F=O),{x1:A,x2:P,x3:M,y1:O,y2:B,y3:F}}drawTitle(t,n,r){const i=this.title,a=i.length;let u,f,g;if(a){const _=Bo(r.rtl,this.x,this.width);for(t.x=ac(this,r.titleAlign,r),n.textAlign=_.textAlign(r.titleAlign),n.textBaseline="middle",u=on(r.titleFont),f=r.titleSpacing,n.fillStyle=r.titleColor,n.font=u.string,g=0;g<a;++g)n.fillText(i[g],_.x(t.x),t.y+u.lineHeight/2),t.y+=u.lineHeight+f,g+1===a&&(t.y+=r.titleMarginBottom-f)}}_drawColorBox(t,n,r,i,a){const u=this.labelColors[r],f=this.labelPointStyles[r],{boxHeight:g,boxWidth:_}=a,v=on(a.bodyFont),x=ac(this,"left",a),k=i.x(x),S=g<v.lineHeight?(v.lineHeight-g)/2:0,C=n.y+S;if(a.usePointStyle){const N={radius:Math.min(_,g)/2,pointStyle:f.pointStyle,rotation:f.rotation,borderWidth:1},A=i.leftForLtr(k,_)+_/2,P=C+g/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,Yd(t,N,A,P),t.strokeStyle=u.borderColor,t.fillStyle=u.backgroundColor,Yd(t,N,A,P)}else{t.lineWidth=Zt(u.borderWidth)?Math.max(...Object.values(u.borderWidth)):u.borderWidth||1,t.strokeStyle=u.borderColor,t.setLineDash(u.borderDash||[]),t.lineDashOffset=u.borderDashOffset||0;const N=i.leftForLtr(k,_),A=i.leftForLtr(i.xPlus(k,1),_-2),P=bl(u.borderRadius);Object.values(P).some(M=>M!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,qd(t,{x:N,y:C,w:_,h:g,radius:P}),t.fill(),t.stroke(),t.fillStyle=u.backgroundColor,t.beginPath(),qd(t,{x:A,y:C+1,w:_-2,h:g-2,radius:P}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(N,C,_,g),t.strokeRect(N,C,_,g),t.fillStyle=u.backgroundColor,t.fillRect(A,C+1,_-2,g-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:i}=this,{bodySpacing:a,bodyAlign:u,displayColors:f,boxHeight:g,boxWidth:_,boxPadding:v}=r,x=on(r.bodyFont);let k=x.lineHeight,S=0;const C=Bo(r.rtl,this.x,this.width),N=function(V){n.fillText(V,C.x(t.x+S),t.y+k/2),t.y+=k+a},A=C.textAlign(u);let P,M,O,B,F,G,H;for(n.textAlign=u,n.textBaseline="middle",n.font=x.string,t.x=ac(this,A,r),n.fillStyle=r.bodyColor,ee(this.beforeBody,N),S=f&&A!=="right"?u==="center"?_/2+v:_+2+v:0,B=0,G=i.length;B<G;++B){for(P=i[B],M=this.labelTextColors[B],n.fillStyle=M,ee(P.before,N),O=P.lines,f&&O.length&&(this._drawColorBox(n,t,B,C,r),k=Math.max(x.lineHeight,g)),F=0,H=O.length;F<H;++F)N(O[F]),k=x.lineHeight;ee(P.after,N)}S=0,k=x.lineHeight,ee(this.afterBody,N),t.y-=a}drawFooter(t,n,r){const i=this.footer,a=i.length;let u,f;if(a){const g=Bo(r.rtl,this.x,this.width);for(t.x=ac(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=g.textAlign(r.footerAlign),n.textBaseline="middle",u=on(r.footerFont),n.fillStyle=r.footerColor,n.font=u.string,f=0;f<a;++f)n.fillText(i[f],g.x(t.x),t.y+u.lineHeight/2),t.y+=u.lineHeight+r.footerSpacing}}drawBackground(t,n,r,i){const{xAlign:a,yAlign:u}=this,{x:f,y:g}=t,{width:_,height:v}=r,{topLeft:x,topRight:k,bottomLeft:S,bottomRight:C}=bl(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(f+x,g),u==="top"&&this.drawCaret(t,n,r,i),n.lineTo(f+_-k,g),n.quadraticCurveTo(f+_,g,f+_,g+k),u==="center"&&a==="right"&&this.drawCaret(t,n,r,i),n.lineTo(f+_,g+v-C),n.quadraticCurveTo(f+_,g+v,f+_-C,g+v),u==="bottom"&&this.drawCaret(t,n,r,i),n.lineTo(f+S,g+v),n.quadraticCurveTo(f,g+v,f,g+v-S),u==="center"&&a==="left"&&this.drawCaret(t,n,r,i),n.lineTo(f,g+x),n.quadraticCurveTo(f,g,f+x,g),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,i=r&&r.x,a=r&&r.y;if(i||a){const u=al[t.position].call(this,this._active,this._eventPosition);if(!u)return;const f=this._size=$_(this,t),g=Object.assign({},u,this._size),_=K_(n,t,g),v=Q_(t,g,_,n);(i._to!==v.x||a._to!==v.y)&&(this.xAlign=_.xAlign,this.yAlign=_.yAlign,this.width=f.width,this.height=f.height,this.caretX=u.x,this.caretY=u.y,this._resolveAnimations().update(this,v))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const u=li(n.padding),f=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&f&&(t.save(),t.globalAlpha=r,this.drawBackground(a,t,i,n),Qx(t,n.textDirection),a.y+=u.top,this.drawTitle(a,t,n),this.drawBody(a,t,n),this.drawFooter(a,t,n),Jx(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,i=t.map(({datasetIndex:f,index:g})=>{const _=this.chart.getDatasetMeta(f);if(!_)throw new Error("Cannot find a dataset at index "+f);return{datasetIndex:f,element:_.data[g],index:g}}),a=!rh(r,i),u=this._positionChanged(i,n);(a||u)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,a=this._active||[],u=this._getActiveElements(t,a,n,r),f=this._positionChanged(u,t),g=n||!rh(u,a)||f;return g&&(this._active=u,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),g}_getActiveElements(t,n,r,i){const a=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(f=>this.chart.data.datasets[f.datasetIndex]&&this.chart.getDatasetMeta(f.datasetIndex).controller.getParsed(f.index)!==void 0);const u=this.chart.getElementsAtEventForMode(t,a.mode,a,r);return a.reverse&&u.reverse(),u}_positionChanged(t,n){const{caretX:r,caretY:i,options:a}=this,u=al[a.position].call(this,t,n);return u!==!1&&(r!==u.x||i!==u.y)}}Et(tg,"positioners",al);var E1={id:"tooltip",_element:tg,positioners:al,afterInit(e,t,n){n&&(e.tooltip=new tg({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:b1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const pM=(e,t,n,r)=>(typeof t=="string"?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function mM(e,t,n,r){const i=e.indexOf(t);if(i===-1)return pM(e,t,n,r);const a=e.lastIndexOf(t);return i!==a?n:i}const _M=(e,t)=>e===null?null:pn(Math.round(e),0,t);function ev(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class hh extends oa{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:a}of n)r[i]===a&&r.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(oe(t))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:mM(r,t,jt(n,t),this._addedLabels),_M(n,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const t=this.min,n=this.max,r=this.options.offset,i=[];let a=this.getLabels();a=t===0&&n===a.length-1?a:a.slice(t,n+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let u=t;u<=n;u++)i.push({value:u});return i}getLabelForValue(t){return ev.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Et(hh,"id","category"),Et(hh,"defaults",{ticks:{callback:ev}});function vM(e,t){const n=[],{bounds:i,step:a,min:u,max:f,precision:g,count:_,maxTicks:v,maxDigits:x,includeBounds:k}=e,S=a||1,C=v-1,{min:N,max:A}=t,P=!oe(u),M=!oe(f),O=!oe(_),B=(A-N)/(x+1);let F=e_((A-N)/C/S)*S,G,H,V,$;if(F<1e-14&&!P&&!M)return[{value:N},{value:A}];$=Math.ceil(A/F)-Math.floor(N/F),$>C&&(F=e_($*F/C/S)*S),oe(g)||(G=Math.pow(10,g),F=Math.ceil(F*G)/G),i==="ticks"?(H=Math.floor(N/F)*F,V=Math.ceil(A/F)*F):(H=N,V=A),P&&M&&a&&jE((f-u)/a,F/1e3)?($=Math.round(Math.min((f-u)/F,v)),F=(f-u)/$,H=u,V=f):O?(H=P?u:H,V=M?f:V,$=_-1,F=(V-H)/$):($=(V-H)/F,wl($,Math.round($),F/1e3)?$=Math.round($):$=Math.ceil($));const et=Math.max(n_(F),n_(H));G=Math.pow(10,oe(g)?et:g),H=Math.round(H*G)/G,V=Math.round(V*G)/G;let nt=0;for(P&&(k&&H!==u?(n.push({value:u}),H<u&&nt++,wl(Math.round((H+nt*F)*G)/G,u,nv(u,B,e))&&nt++):H<u&&nt++);nt<$;++nt){const at=Math.round((H+nt*F)*G)/G;if(M&&at>f)break;n.push({value:at})}return M&&k&&V!==f?n.length&&wl(n[n.length-1].value,f,nv(f,B,e))?n[n.length-1].value=f:n.push({value:f}):(!M||V===f)&&n.push({value:V}),n}function nv(e,t,{horizontal:n,minRotation:r}){const i=ir(r),a=(n?Math.sin(i):Math.cos(i))||.001,u=.75*t*(""+e).length;return Math.min(t/a,u)}class yM extends oa{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return oe(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:a}=this;const u=g=>i=n?i:g,f=g=>a=r?a:g;if(t){const g=qo(i),_=qo(a);g<0&&_<0?f(0):g>0&&_>0&&u(0)}if(i===a){let g=a===0?1:Math.abs(a*.05);f(a+g),t||u(i-g)}this.min=i,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,u=vM(i,a);return t.bounds==="ticks"&&UE(u,this,"value"),t.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}configure(){const t=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const i=(r-n)/Math.max(t.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(t){return gp(t,this.chart.options.locale,this.options.ticks.format)}}class fh extends yM{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=ln(t)?t:0,this.max=ln(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,r=ir(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Et(fh,"id","linear"),Et(fh,"defaults",{ticks:{callback:Vx.formatters.numeric}});const jh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Sn=Object.keys(jh);function iv(e,t){return e-t}function rv(e,t){if(oe(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:a}=e._parseOpts;let u=t;return typeof r=="function"&&(u=r(u)),ln(u)||(u=typeof r=="string"?n.parse(u,r):n.parse(u)),u===null?null:(i&&(u=i==="week"&&(Zl(a)||a===!0)?n.startOf(u,"isoWeek",a):n.startOf(u,i)),+u)}function sv(e,t,n,r){const i=Sn.length;for(let a=Sn.indexOf(e);a<i-1;++a){const u=jh[Sn[a]],f=u.steps?u.steps:Number.MAX_SAFE_INTEGER;if(u.common&&Math.ceil((n-t)/(f*u.size))<=r)return Sn[a]}return Sn[i-1]}function xM(e,t,n,r,i){for(let a=Sn.length-1;a>=Sn.indexOf(n);a--){const u=Sn[a];if(jh[u].common&&e._adapter.diff(i,r,u)>=t-1)return u}return Sn[n?Sn.indexOf(n):0]}function wM(e){for(let t=Sn.indexOf(e)+1,n=Sn.length;t<n;++t)if(jh[Sn[t]].common)return Sn[t]}function ov(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:i}=hp(n,t),a=n[r]>=t?n[r]:n[i];e[a]=!0}}function kM(e,t,n,r){const i=e._adapter,a=+i.startOf(t[0].value,r),u=t[t.length-1].value;let f,g;for(f=a;f<=u;f=+i.add(f,1,r))g=n[f],g>=0&&(t[g].major=!0);return t}function av(e,t,n){const r=[],i={},a=t.length;let u,f;for(u=0;u<a;++u)f=t[u],i[f]=u,r.push({value:f,major:!1});return a===0||!n?r:kM(e,r,i,n)}class dh extends oa{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const r=t.time||(t.time={}),i=this._adapter=new gT._date(t.adapters.date);i.init(n),xl(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:rv(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:i,max:a,minDefined:u,maxDefined:f}=this.getUserBounds();function g(_){!u&&!isNaN(_.min)&&(i=Math.min(i,_.min)),!f&&!isNaN(_.max)&&(a=Math.max(a,_.max))}(!u||!f)&&(g(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&g(this.getMinMax(!1))),i=ln(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),a=ln(a)&&!isNaN(a)?a:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,u=this.max,f=ZE(i,a,u);return this._unit=n.unit||(r.autoSkip?sv(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):xM(this,f.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:wM(this._unit),this.initOffsets(i),t.reverse&&f.reverse(),av(this,f,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,i,a;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?r=a:r=(a-this.getDecimalForValue(t[t.length-2]))/2);const u=t.length<3?.5:.25;n=pn(n,0,u),r=pn(r,0,u),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,i=this.options,a=i.time,u=a.unit||sv(a.minUnit,n,r,this._getLabelCapacity(n)),f=jt(i.ticks.stepSize,1),g=u==="week"?a.isoWeekday:!1,_=Zl(g)||g===!0,v={};let x=n,k,S;if(_&&(x=+t.startOf(x,"isoWeek",g)),x=+t.startOf(x,_?"day":u),t.diff(r,n,u)>1e5*f)throw new Error(n+" and "+r+" are too far apart with stepSize of "+f+" "+u);const C=i.ticks.source==="data"&&this.getDataTimestamps();for(k=x,S=0;k<r;k=+t.add(k,f,u),S++)ov(v,k,C);return(k===r||i.bounds==="ticks"||S===1)&&ov(v,k,C),Object.keys(v).sort(iv).map(N=>+N)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,a=this._unit,u=n||i[a];return this._adapter.format(t,u)}_tickFormatFunction(t,n,r,i){const a=this.options,u=a.ticks.callback;if(u)return ue(u,[t,n,r],this);const f=a.time.displayFormats,g=this._unit,_=this._majorUnit,v=g&&f[g],x=_&&f[_],k=r[n],S=_&&x&&k&&k.major;return this._adapter.format(t,i||(S?x:v))}generateTickLabels(t){let n,r,i;for(n=0,r=t.length;n<r;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,i=ir(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(i),u=Math.sin(i),f=this._resolveTickFontOptions(0).size;return{w:r*a+f*u,h:r*u+f*a}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,a=this._tickFormatFunction(t,0,av(this,[t],this._majorUnit),i),u=this._getLabelSize(a),f=Math.floor(this.isHorizontal()?this.width/u.w:this.height/u.h)-1;return f>0?f:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)t.push(rv(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return qE(t.sort(iv))}}Et(dh,"id","time"),Et(dh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function lc(e,t,n){let r=0,i=e.length-1,a,u,f,g;n?(t>=e[r].pos&&t<=e[i].pos&&({lo:r,hi:i}=Ts(e,"pos",t)),{pos:a,time:f}=e[r],{pos:u,time:g}=e[i]):(t>=e[r].time&&t<=e[i].time&&({lo:r,hi:i}=Ts(e,"time",t)),{time:a,pos:f}=e[r],{time:u,pos:g}=e[i]);const _=u-a;return _?f+(g-f)*(t-a)/_:f}class lv extends dh{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=lc(n,this.min),this._tableRange=lc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,i=[],a=[];let u,f,g,_,v;for(u=0,f=t.length;u<f;++u)_=t[u],_>=n&&_<=r&&i.push(_);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(u=0,f=i.length;u<f;++u)v=i[u+1],g=i[u-1],_=i[u],Math.round((v+g)/2)!==_&&a.push({time:_,pos:u/(f-1)});return a}_generate(){const t=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,a)=>i-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(lc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return lc(this._table,r*this._tableRange+this._minPos,!0)}}Et(lv,"id","timeseries"),Et(lv,"defaults",dh.defaults);const S1="label";function uv(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function LM(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function T1(e,t){e.labels=t}function C1(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S1;const r=[];e.datasets=t.map(i=>{const a=e.datasets.find(u=>u[n]===i[n]);return!a||!i.data||r.includes(a)?{...i}:(r.push(a),Object.assign(a,i),a)})}function bM(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S1;const n={labels:[],datasets:[]};return T1(n,e.labels),C1(n,e.datasets,t),n}function EM(e,t){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:a,type:u,data:f,options:g,plugins:_=[],fallbackContent:v,updateMode:x,...k}=e,S=it.useRef(null),C=it.useRef(null),N=()=>{S.current&&(C.current=new au(S.current,{type:u,data:bM(f,a),options:g&&{...g},plugins:_}),uv(t,C.current))},A=()=>{uv(t,null),C.current&&(C.current.destroy(),C.current=null)};return it.useEffect(()=>{!i&&C.current&&g&&LM(C.current,g)},[i,g]),it.useEffect(()=>{!i&&C.current&&T1(C.current.config.data,f.labels)},[i,f.labels]),it.useEffect(()=>{!i&&C.current&&f.datasets&&C1(C.current.config.data,f.datasets,a)},[i,f.datasets]),it.useEffect(()=>{C.current&&(i?(A(),setTimeout(N)):C.current.update(x))},[i,g,f.labels,f.datasets,x]),it.useEffect(()=>{C.current&&(A(),setTimeout(N))},[u]),it.useEffect(()=>(N(),()=>A()),[]),Ns.createElement("canvas",{ref:S,role:"img",height:n,width:r,...k},v)}const SM=it.forwardRef(EM);function M1(e,t){return au.register(t),it.forwardRef((n,r)=>Ns.createElement(SM,{...n,ref:r,type:e}))}const P1=M1("line",Tc),cv=M1("pie",Xd);var nn=63710088e-1,N1={centimeters:nn*100,centimetres:nn*100,degrees:360/(2*Math.PI),feet:nn*3.28084,inches:nn*39.37,kilometers:nn/1e3,kilometres:nn/1e3,meters:nn,metres:nn,miles:nn/1609.344,millimeters:nn*1e3,millimetres:nn*1e3,nauticalmiles:nn/1852,radians:1,yards:nn*1.0936};function Uh(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function I1(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!hv(e[0])||!hv(e[1]))throw new Error("coordinates must contain numbers");return Uh({type:"Point",coordinates:e},t,n)}function TM(e,t,n={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let a=0;a<i[i.length-1].length;a++)if(i[i.length-1][a]!==i[0][a])throw new Error("First and last Position are not equivalent.")}return Uh({type:"Polygon",coordinates:e},t,n)}function eg(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function CM(e,t,n={}){return Uh({type:"MultiPolygon",coordinates:e},t,n)}function MM(e,t="kilometers"){const n=N1[t];if(!n)throw new Error(t+" units is invalid");return e*n}function PM(e,t="kilometers"){const n=N1[t];if(!n)throw new Error(t+" units is invalid");return e/n}function hv(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function NM(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function IM(e){return e.type==="Feature"?e.geometry:e}function O1(e,t,n){if(e!==null)for(var r,i,a,u,f,g,_,v=0,x=0,k,S=e.type,C=S==="FeatureCollection",N=S==="Feature",A=C?e.features.length:1,P=0;P<A;P++){_=C?e.features[P].geometry:N?e.geometry:e,k=_?_.type==="GeometryCollection":!1,f=k?_.geometries.length:1;for(var M=0;M<f;M++){var O=0,B=0;if(u=k?_.geometries[M]:_,u!==null){g=u.coordinates;var F=u.type;switch(v=0,F){case null:break;case"Point":if(t(g,x,P,O,B)===!1)return!1;x++,O++;break;case"LineString":case"MultiPoint":for(r=0;r<g.length;r++){if(t(g[r],x,P,O,B)===!1)return!1;x++,F==="MultiPoint"&&O++}F==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(r=0;r<g.length;r++){for(i=0;i<g[r].length-v;i++){if(t(g[r][i],x,P,O,B)===!1)return!1;x++}F==="MultiLineString"&&O++,F==="Polygon"&&B++}F==="Polygon"&&O++;break;case"MultiPolygon":for(r=0;r<g.length;r++){for(B=0,i=0;i<g[r].length;i++){for(a=0;a<g[r][i].length-v;a++){if(t(g[r][i][a],x,P,O,B)===!1)return!1;x++}B++}O++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(O1(u.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function fv(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function Lp(e,t){var n,r,i,a,u,f,g,_,v,x,k=0,S=e.type==="FeatureCollection",C=e.type==="Feature",N=S?e.features.length:1;for(n=0;n<N;n++){for(f=S?e.features[n].geometry:C?e.geometry:e,_=S?e.features[n].properties:C?e.properties:{},v=S?e.features[n].bbox:C?e.bbox:void 0,x=S?e.features[n].id:C?e.id:void 0,g=f?f.type==="GeometryCollection":!1,u=g?f.geometries.length:1,i=0;i<u;i++){if(a=g?f.geometries[i]:f,a===null){if(t(null,k,_,v,x)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,k,_,v,x)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<a.geometries.length;r++)if(t(a.geometries[r],k,_,v,x)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}k++}}function OM(e,t,n){var r=n;return Lp(e,function(i,a,u,f,g){a===0&&n===void 0?r=i:r=t(r,i,a,u,f,g)}),r}function Gf(e){return OM(e,(t,n)=>t+DM(n),0)}function DM(e){let t=0,n;switch(e.type){case"Polygon":return dv(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=dv(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function dv(e){let t=0;if(e&&e.length>0){t+=Math.abs(gv(e[0]));for(let n=1;n<e.length;n++)t-=Math.abs(gv(e[n]))}return t}var RM=nn*nn/2,Wf=Math.PI/180;function gv(e){const t=e.length-1;if(t<=2)return 0;let n=0,r=0;for(;r<t;){const i=e[r],a=e[r+1===t?0:r+1],u=e[r+2>=t?(r+2)%t:r+2],f=i[0]*Wf,g=a[1]*Wf,_=u[0]*Wf;n+=(_-f)*Math.sin(g),r++}return n*RM}function D1(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return O1(e,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}const or=11102230246251565e-32,en=134217729,AM=(3+8*or)*or;function Vf(e,t,n,r,i){let a,u,f,g,_=t[0],v=r[0],x=0,k=0;v>_==v>-_?(a=_,_=t[++x]):(a=v,v=r[++k]);let S=0;if(x<e&&k<n)for(v>_==v>-_?(u=_+a,f=a-(u-_),_=t[++x]):(u=v+a,f=a-(u-v),v=r[++k]),a=u,f!==0&&(i[S++]=f);x<e&&k<n;)v>_==v>-_?(u=a+_,g=u-a,f=a-(u-g)+(_-g),_=t[++x]):(u=a+v,g=u-a,f=a-(u-g)+(v-g),v=r[++k]),a=u,f!==0&&(i[S++]=f);for(;x<e;)u=a+_,g=u-a,f=a-(u-g)+(_-g),_=t[++x],a=u,f!==0&&(i[S++]=f);for(;k<n;)u=a+v,g=u-a,f=a-(u-g)+(v-g),v=r[++k],a=u,f!==0&&(i[S++]=f);return(a!==0||S===0)&&(i[S++]=a),S}function zM(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function lu(e){return new Float64Array(e)}const FM=(3+16*or)*or,BM=(2+12*or)*or,jM=(9+64*or)*or*or,xo=lu(4),pv=lu(8),mv=lu(12),_v=lu(16),dn=lu(4);function UM(e,t,n,r,i,a,u){let f,g,_,v,x,k,S,C,N,A,P,M,O,B,F,G,H,V;const $=e-i,et=n-i,nt=t-a,at=r-a;B=$*at,k=en*$,S=k-(k-$),C=$-S,k=en*at,N=k-(k-at),A=at-N,F=C*A-(B-S*N-C*N-S*A),G=nt*et,k=en*nt,S=k-(k-nt),C=nt-S,k=en*et,N=k-(k-et),A=et-N,H=C*A-(G-S*N-C*N-S*A),P=F-H,x=F-P,xo[0]=F-(P+x)+(x-H),M=B+P,x=M-B,O=B-(M-x)+(P-x),P=O-G,x=O-P,xo[1]=O-(P+x)+(x-G),V=M+P,x=V-M,xo[2]=M-(V-x)+(P-x),xo[3]=V;let rt=zM(4,xo),tt=BM*u;if(rt>=tt||-rt>=tt||(x=e-$,f=e-($+x)+(x-i),x=n-et,_=n-(et+x)+(x-i),x=t-nt,g=t-(nt+x)+(x-a),x=r-at,v=r-(at+x)+(x-a),f===0&&g===0&&_===0&&v===0)||(tt=jM*u+AM*Math.abs(rt),rt+=$*v+at*f-(nt*_+et*g),rt>=tt||-rt>=tt))return rt;B=f*at,k=en*f,S=k-(k-f),C=f-S,k=en*at,N=k-(k-at),A=at-N,F=C*A-(B-S*N-C*N-S*A),G=g*et,k=en*g,S=k-(k-g),C=g-S,k=en*et,N=k-(k-et),A=et-N,H=C*A-(G-S*N-C*N-S*A),P=F-H,x=F-P,dn[0]=F-(P+x)+(x-H),M=B+P,x=M-B,O=B-(M-x)+(P-x),P=O-G,x=O-P,dn[1]=O-(P+x)+(x-G),V=M+P,x=V-M,dn[2]=M-(V-x)+(P-x),dn[3]=V;const ht=Vf(4,xo,4,dn,pv);B=$*v,k=en*$,S=k-(k-$),C=$-S,k=en*v,N=k-(k-v),A=v-N,F=C*A-(B-S*N-C*N-S*A),G=nt*_,k=en*nt,S=k-(k-nt),C=nt-S,k=en*_,N=k-(k-_),A=_-N,H=C*A-(G-S*N-C*N-S*A),P=F-H,x=F-P,dn[0]=F-(P+x)+(x-H),M=B+P,x=M-B,O=B-(M-x)+(P-x),P=O-G,x=O-P,dn[1]=O-(P+x)+(x-G),V=M+P,x=V-M,dn[2]=M-(V-x)+(P-x),dn[3]=V;const gt=Vf(ht,pv,4,dn,mv);B=f*v,k=en*f,S=k-(k-f),C=f-S,k=en*v,N=k-(k-v),A=v-N,F=C*A-(B-S*N-C*N-S*A),G=g*_,k=en*g,S=k-(k-g),C=g-S,k=en*_,N=k-(k-_),A=_-N,H=C*A-(G-S*N-C*N-S*A),P=F-H,x=F-P,dn[0]=F-(P+x)+(x-H),M=B+P,x=M-B,O=B-(M-x)+(P-x),P=O-G,x=O-P,dn[1]=O-(P+x)+(x-G),V=M+P,x=V-M,dn[2]=M-(V-x)+(P-x),dn[3]=V;const xt=Vf(gt,mv,4,dn,_v);return _v[xt-1]}function HM(e,t,n,r,i,a){const u=(t-a)*(n-i),f=(e-i)*(r-a),g=u-f,_=Math.abs(u+f);return Math.abs(g)>=FM*_?g:-UM(e,t,n,r,i,a,_)}function GM(e,t){var n,r,i=0,a,u,f,g,_,v,x,k=e[0],S=e[1],C=t.length;for(n=0;n<C;n++){r=0;var N=t[n],A=N.length-1;if(v=N[0],v[0]!==N[A][0]&&v[1]!==N[A][1])throw new Error("First and last coordinates in a ring must be the same");for(u=v[0]-k,f=v[1]-S,r;r<A;r++){if(x=N[r+1],g=x[0]-k,_=x[1]-S,f===0&&_===0){if(g<=0&&u>=0||u<=0&&g>=0)return 0}else if(_>=0&&f<=0||_<=0&&f>=0){if(a=HM(u,g,f,_,0,0),a===0)return 0;(a>0&&_>0&&f<=0||a<0&&_<=0&&f>0)&&i++}v=x,f=_,u=g}}return i%2!==0}function R1(e,t,n={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const r=NM(e),i=IM(t),a=i.type,u=t.bbox;let f=i.coordinates;if(u&&WM(r,u)===!1)return!1;a==="Polygon"&&(f=[f]);let g=!1;for(var _=0;_<f.length;++_){const v=GM(r,f[_]);if(v===0)return!n.ignoreBoundary;v&&(g=!0)}return g}function WM(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function VM(e,t={}){const n=D1(e),r=(n[0]+n[2])/2,i=(n[1]+n[3])/2;return I1([r,i],t.properties,t)}var A1={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Rv,function(){function n(h,s){(s==null||s>h.length)&&(s=h.length);for(var o=0,c=Array(s);o<s;o++)c[o]=h[o];return c}function r(h,s,o){return s=v(s),function(c,p){if(p&&(typeof p=="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(c)}(h,k()?Reflect.construct(s,o||[],v(h).constructor):s.apply(h,o))}function i(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")}function a(h,s,o){if(k())return Reflect.construct.apply(null,arguments);var c=[null];c.push.apply(c,s);var p=new(h.bind.apply(h,c));return o&&S(p,o.prototype),p}function u(h,s){for(var o=0;o<s.length;o++){var c=s[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,A(c.key),c)}}function f(h,s,o){return s&&u(h.prototype,s),o&&u(h,o),Object.defineProperty(h,"prototype",{writable:!1}),h}function g(h,s){var o=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(!o){if(Array.isArray(h)||(o=P(h))||s){o&&(h=o);var c=0,p=function(){};return{s:p,n:function(){return c>=h.length?{done:!0}:{done:!1,value:h[c++]}},e:function(D){throw D},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,b=!0,T=!1;return{s:function(){o=o.call(h)},n:function(){var D=o.next();return b=D.done,D},e:function(D){T=!0,y=D},f:function(){try{b||o.return==null||o.return()}finally{if(T)throw y}}}}function _(){return _=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(h,s,o){var c=function(y,b){for(;!{}.hasOwnProperty.call(y,b)&&(y=v(y))!==null;);return y}(h,s);if(c){var p=Object.getOwnPropertyDescriptor(c,s);return p.get?p.get.call(arguments.length<3?h:o):p.value}},_.apply(null,arguments)}function v(h){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},v(h)}function x(h,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(s&&s.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),s&&S(h,s)}function k(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k=function(){return!!h})()}function S(h,s){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,c){return o.__proto__=c,o},S(h,s)}function C(h,s,o,c){var p=_(v(1&c?h.prototype:h),s,o);return 2&c&&typeof p=="function"?function(y){return p.apply(o,y)}:p}function N(h){return function(s){if(Array.isArray(s))return n(s)}(h)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(h)||P(h)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function A(h){var s=function(o,c){if(typeof o!="object"||!o)return o;var p=o[Symbol.toPrimitive];if(p!==void 0){var y=p.call(o,c);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(h,"string");return typeof s=="symbol"?s:s+""}function P(h,s){if(h){if(typeof h=="string")return n(h,s);var o={}.toString.call(h).slice(8,-1);return o==="Object"&&h.constructor&&(o=h.constructor.name),o==="Map"||o==="Set"?Array.from(h):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(h,s):void 0}}function M(h){var s=typeof Map=="function"?new Map:void 0;return M=function(o){if(o===null||!function(p){try{return Function.toString.call(p).indexOf("[native code]")!==-1}catch{return typeof p=="function"}}(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(s!==void 0){if(s.has(o))return s.get(o);s.set(o,c)}function c(){return a(o,arguments,v(this).constructor)}return c.prototype=Object.create(o.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),S(c,o)},M(h)}var O=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(s){this._quadrantSegments=s,this._quadrantSegments===0&&(this._joinStyle=h.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=h.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),s<=0&&(this._quadrantSegments=1),this._joinStyle!==h.JOIN_ROUND&&(this._quadrantSegments=h.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(s){this._joinStyle=s}},{key:"setSimplifyFactor",value:function(s){this._simplifyFactor=s<0?0:s}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(s){this._endCapStyle=s}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(s){this._mitreLimit=s}},{key:"setSingleSided",value:function(s){this._isSingleSided=s}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=h.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=h.CAP_ROUND,this._joinStyle=h.JOIN_ROUND,this._mitreLimit=h.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=h.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var s=arguments[0];this.setQuadrantSegments(s)}else if(arguments.length===2){var o=arguments[0],c=arguments[1];this.setQuadrantSegments(o),this.setEndCapStyle(c)}else if(arguments.length===4){var p=arguments[0],y=arguments[1],b=arguments[2],T=arguments[3];this.setQuadrantSegments(p),this.setEndCapStyle(y),this.setJoinStyle(b),this.setMitreLimit(T)}}}},{key:"bufferDistanceError",value:function(s){var o=Math.PI/2/s;return 1-Math.cos(o/2)}}])}();O.CAP_ROUND=1,O.CAP_FLAT=2,O.CAP_SQUARE=3,O.JOIN_ROUND=1,O.JOIN_MITRE=2,O.JOIN_BEVEL=3,O.DEFAULT_QUADRANT_SEGMENTS=8,O.DEFAULT_MITRE_LIMIT=5,O.DEFAULT_SIMPLIFY_FACTOR=.01;var B=function(h){function s(o){var c;return i(this,s),(c=r(this,s,[o])).name=Object.keys({Exception:s})[0],c}return x(s,h),f(s,[{key:"toString",value:function(){return this.message}}])}(M(Error)),F=function(h){function s(o){var c;return i(this,s),(c=r(this,s,[o])).name=Object.keys({IllegalArgumentException:s})[0],c}return x(s,h),f(s)}(B),G=function(){return f(function h(){i(this,h)},[{key:"filter",value:function(h){}}])}();function H(){}function V(){}function $(){}var et,nt,at,rt,tt,ht,gt,xt,Q=function(){return f(function h(){i(this,h)},null,[{key:"equalsWithTolerance",value:function(h,s,o){return Math.abs(h-s)<=o}}])}(),dt=function(){return f(function h(s,o){i(this,h),this.low=o||0,this.high=s||0},null,[{key:"toBinaryString",value:function(h){var s,o="";for(s=2147483648;s>0;s>>>=1)o+=(h.high&s)===s?"1":"0";for(s=2147483648;s>0;s>>>=1)o+=(h.low&s)===s?"1":"0";return o}}])}();function X(){}function _t(){}X.NaN=NaN,X.isNaN=function(h){return Number.isNaN(h)},X.isInfinite=function(h){return!Number.isFinite(h)},X.MAX_VALUE=Number.MAX_VALUE,X.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,X.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(ht=2146435072,gt=new Float64Array(1),xt=new Int32Array(gt.buffer),X.doubleToLongBits=function(h){gt[0]=h;var s=0|xt[0],o=0|xt[1];return(o&ht)===ht&&1048575&o&&s!==0&&(s=0,o=2146959360),new dt(o,s)},X.longBitsToDouble=function(h){return xt[0]=h.low,xt[1]=h.high,gt[0]}):(et=1023,nt=Math.log2,at=Math.floor,rt=Math.pow,tt=function(){for(var h=53;h>0;h--){var s=rt(2,h)-1;if(at(nt(s))+1===h)return s}return 0}(),X.doubleToLongBits=function(h){var s,o,c,p,y,b,T,D,z;if(h<0||1/h===Number.NEGATIVE_INFINITY?(b=1<<31,h=-h):b=0,h===0)return new dt(D=b,z=0);if(h===1/0)return new dt(D=2146435072|b,z=0);if(h!=h)return new dt(D=2146959360,z=0);if(p=0,z=0,(s=at(h))>1)if(s<=tt)(p=at(nt(s)))<=20?(z=0,D=s<<20-p&1048575):(z=s%(o=rt(2,c=p-20))<<32-c,D=s/o&1048575);else for(c=s,z=0;(c=at(o=c/2))!==0;)p++,z>>>=1,z|=(1&D)<<31,D>>>=1,o!==c&&(D|=524288);if(T=p+et,y=s===0,s=h-s,p<52&&s!==0)for(c=0;;){if((o=2*s)>=1?(s=o-1,y?(T--,y=!1):(c<<=1,c|=1,p++)):(s=o,y?--T==0&&(p++,y=!1):(c<<=1,p++)),p===20)D|=c,c=0;else if(p===52){z|=c;break}if(o===1){p<20?D|=c<<20-p:p<52&&(z|=c<<52-p);break}}return D|=T<<20,new dt(D|=b,z)},X.longBitsToDouble=function(h){var s,o,c,p,y=h.high,b=h.low,T=y&1<<31?-1:1;for(c=((2146435072&y)>>20)-et,p=0,o=1<<19,s=1;s<=20;s++)y&o&&(p+=rt(2,-s)),o>>>=1;for(o=1<<31,s=21;s<=52;s++)b&o&&(p+=rt(2,-s)),o>>>=1;if(c===-1023){if(p===0)return 0*T;c=-1022}else{if(c===1024)return p===0?T/0:NaN;p+=1}return T*p*rt(2,c)});var wt=function(h){function s(o){var c;return i(this,s),(c=r(this,s,[o])).name=Object.keys({RuntimeException:s})[0],c}return x(s,h),f(s)}(B),zt=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,null,[{key:"constructor_",value:function(){if(arguments.length===0)wt.constructor_.call(this);else if(arguments.length===1){var o=arguments[0];wt.constructor_.call(this,o)}}}])}(wt),pt=function(){function h(){i(this,h)}return f(h,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)h.shouldNeverReachHere(null);else if(arguments.length===1){var s=arguments[0];throw new zt("Should never reach here"+(s!==null?": "+s:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var s=arguments[0];h.isTrue(s,null)}else if(arguments.length===2){var o=arguments[1];if(!arguments[0])throw o===null?new zt:new zt(o)}}},{key:"equals",value:function(){if(arguments.length===2){var s=arguments[0],o=arguments[1];h.equals(s,o,null)}else if(arguments.length===3){var c=arguments[0],p=arguments[1],y=arguments[2];if(!p.equals(c))throw new zt("Expected "+c+" but encountered "+p+(y!==null?": "+y:""))}}}])}(),Nt=new ArrayBuffer(8),St=new Float64Array(Nt),We=new Int32Array(Nt),Z=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"getM",value:function(){return X.NaN}},{key:"setOrdinate",value:function(s,o){switch(s){case h.X:this.x=o;break;case h.Y:this.y=o;break;case h.Z:this.setZ(o);break;default:throw new F("Invalid ordinate index: "+s)}}},{key:"equals2D",value:function(){if(arguments.length===1){var s=arguments[0];return this.x===s.x&&this.y===s.y}if(arguments.length===2){var o=arguments[0],c=arguments[1];return!!Q.equalsWithTolerance(this.x,o.x,c)&&!!Q.equalsWithTolerance(this.y,o.y,c)}}},{key:"setM",value:function(s){throw new F("Invalid ordinate index: "+h.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(s){switch(s){case h.X:return this.x;case h.Y:return this.y;case h.Z:return this.getZ()}throw new F("Invalid ordinate index: "+s)}},{key:"equals3D",value:function(s){return this.x===s.x&&this.y===s.y&&(this.getZ()===s.getZ()||X.isNaN(this.getZ())&&X.isNaN(s.getZ()))}},{key:"equals",value:function(s){return s instanceof h&&this.equals2D(s)}},{key:"equalInZ",value:function(s,o){return Q.equalsWithTolerance(this.getZ(),s.getZ(),o)}},{key:"setX",value:function(s){this.x=s}},{key:"compareTo",value:function(s){var o=s;return this.x<o.x?-1:this.x>o.x?1:this.y<o.y?-1:this.y>o.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(s){this.z=s}},{key:"clone",value:function(){try{return null}catch(s){if(s instanceof CloneNotSupportedException)return pt.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw s}}},{key:"copy",value:function(){return new h(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(s){var o=this.x-s.x,c=this.y-s.y,p=this.getZ()-s.getZ();return Math.sqrt(o*o+c*c+p*p)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(s){this.y=s}},{key:"distance",value:function(s){var o=this.x-s.x,c=this.y-s.y;return Math.sqrt(o*o+c*c)}},{key:"hashCode",value:function(){var s=17;return s=37*(s=37*s+h.hashCode(this.x))+h.hashCode(this.y)}},{key:"setCoordinate",value:function(s){this.x=s.x,this.y=s.y,this.z=s.getZ()}},{key:"interfaces_",get:function(){return[H,V,$]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)h.constructor_.call(this,0,0);else if(arguments.length===1){var s=arguments[0];h.constructor_.call(this,s.x,s.y,s.getZ())}else if(arguments.length===2){var o=arguments[0],c=arguments[1];h.constructor_.call(this,o,c,h.NULL_ORDINATE)}else if(arguments.length===3){var p=arguments[0],y=arguments[1],b=arguments[2];this.x=p,this.y=y,this.z=b}}},{key:"hashCode",value:function(s){return St[0]=s,We[0]^We[1]}}])}(),uu=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"compare",value:function(s,o){var c=h.compare(s.x,o.x);if(c!==0)return c;var p=h.compare(s.y,o.y);return p!==0?p:this._dimensionsToTest<=2?0:h.compare(s.getZ(),o.getZ())}},{key:"interfaces_",get:function(){return[_t]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)h.constructor_.call(this,2);else if(arguments.length===1){var s=arguments[0];if(s!==2&&s!==3)throw new F("only 2 or 3 dimensions may be specified");this._dimensionsToTest=s}}},{key:"compare",value:function(s,o){return s<o?-1:s>o?1:X.isNaN(s)?X.isNaN(o)?0:-1:X.isNaN(o)?1:0}}])}();Z.DimensionalComparator=uu,Z.NULL_ORDINATE=X.NaN,Z.X=0,Z.Y=1,Z.Z=2,Z.M=3;var $t=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(s){if(!(s instanceof h))return!1;var o=s;return this.isNull()?o.isNull():this._maxx===o.getMaxX()&&this._maxy===o.getMaxY()&&this._minx===o.getMinX()&&this._miny===o.getMinY()}},{key:"intersection",value:function(s){if(this.isNull()||s.isNull()||!this.intersects(s))return new h;var o=this._minx>s._minx?this._minx:s._minx,c=this._miny>s._miny?this._miny:s._miny;return new h(o,this._maxx<s._maxx?this._maxx:s._maxx,c,this._maxy<s._maxy?this._maxy:s._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof Z){var s=arguments[0];return this.covers(s.x,s.y)}if(arguments[0]instanceof h){var o=arguments[0];return!this.isNull()&&!o.isNull()&&o.getMinX()>=this._minx&&o.getMaxX()<=this._maxx&&o.getMinY()>=this._miny&&o.getMaxY()<=this._maxy}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];return!this.isNull()&&c>=this._minx&&c<=this._maxx&&p>=this._miny&&p<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof h){var s=arguments[0];return!this.isNull()&&!s.isNull()&&!(s._minx>this._maxx||s._maxx<this._minx||s._miny>this._maxy||s._maxy<this._miny)}if(arguments[0]instanceof Z){var o=arguments[0];return this.intersects(o.x,o.y)}}else if(arguments.length===2){if(arguments[0]instanceof Z&&arguments[1]instanceof Z){var c=arguments[0],p=arguments[1];return!this.isNull()&&!((c.x<p.x?c.x:p.x)>this._maxx)&&!((c.x>p.x?c.x:p.x)<this._minx)&&!((c.y<p.y?c.y:p.y)>this._maxy)&&!((c.y>p.y?c.y:p.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var y=arguments[0],b=arguments[1];return!this.isNull()&&!(y>this._maxx||y<this._minx||b>this._maxy||b<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var s=this.getWidth(),o=this.getHeight();return Math.sqrt(s*s+o*o)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof Z){var s=arguments[0];this.expandToInclude(s.x,s.y)}else if(arguments[0]instanceof h){var o=arguments[0];if(o.isNull())return null;this.isNull()?(this._minx=o.getMinX(),this._maxx=o.getMaxX(),this._miny=o.getMinY(),this._maxy=o.getMaxY()):(o._minx<this._minx&&(this._minx=o._minx),o._maxx>this._maxx&&(this._maxx=o._maxx),o._miny<this._miny&&(this._miny=o._miny),o._maxy>this._maxy&&(this._maxy=o._maxy))}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.isNull()?(this._minx=c,this._maxx=c,this._miny=p,this._maxy=p):(c<this._minx&&(this._minx=c),c>this._maxx&&(this._maxx=c),p<this._miny&&(this._miny=p),p>this._maxy&&(this._maxy=p))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var s=this.getWidth(),o=this.getHeight();return s<o?s:o}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(s){var o=s;return this.isNull()?o.isNull()?0:-1:o.isNull()?1:this._minx<o._minx?-1:this._minx>o._minx?1:this._miny<o._miny?-1:this._miny>o._miny?1:this._maxx<o._maxx?-1:this._maxx>o._maxx?1:this._maxy<o._maxy?-1:this._maxy>o._maxy?1:0}},{key:"translate",value:function(s,o){if(this.isNull())return null;this.init(this.getMinX()+s,this.getMaxX()+s,this.getMinY()+o,this.getMaxY()+o)}},{key:"copy",value:function(){return new h(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(s){return!(!this.isNull()&&!s.isNull())||s._minx>this._maxx||s._maxx<this._minx||s._miny>this._maxy||s._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var s=this.getWidth(),o=this.getHeight();return s>o?s:o}},{key:"expandBy",value:function(){if(arguments.length===1){var s=arguments[0];this.expandBy(s,s)}else if(arguments.length===2){var o=arguments[0],c=arguments[1];if(this.isNull())return null;this._minx-=o,this._maxx+=o,this._miny-=c,this._maxy+=c,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof h){var s=arguments[0];return this.covers(s)}if(arguments[0]instanceof Z){var o=arguments[0];return this.covers(o)}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];return this.covers(c,p)}}},{key:"centre",value:function(){return this.isNull()?null:new Z((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Z){var s=arguments[0];this.init(s.x,s.x,s.y,s.y)}else if(arguments[0]instanceof h){var o=arguments[0];this._minx=o._minx,this._maxx=o._maxx,this._miny=o._miny,this._maxy=o._maxy}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.init(c.x,p.x,c.y,p.y)}else if(arguments.length===4){var y=arguments[0],b=arguments[1],T=arguments[2],D=arguments[3];y<b?(this._minx=y,this._maxx=b):(this._minx=b,this._maxx=y),T<D?(this._miny=T,this._maxy=D):(this._miny=D,this._maxy=T)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(s){if(this.intersects(s))return 0;var o=0;this._maxx<s._minx?o=s._minx-this._maxx:this._minx>s._maxx&&(o=this._minx-s._maxx);var c=0;return this._maxy<s._miny?c=s._miny-this._maxy:this._miny>s._maxy&&(c=this._miny-s._maxy),o===0?c:c===0?o:Math.sqrt(o*o+c*c)}},{key:"hashCode",value:function(){var s=17;return s=37*(s=37*(s=37*(s=37*s+Z.hashCode(this._minx))+Z.hashCode(this._maxx))+Z.hashCode(this._miny))+Z.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[H,$]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Z){var s=arguments[0];this.init(s.x,s.x,s.y,s.y)}else if(arguments[0]instanceof h){var o=arguments[0];this.init(o)}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.init(c.x,p.x,c.y,p.y)}else if(arguments.length===4){var y=arguments[0],b=arguments[1],T=arguments[2],D=arguments[3];this.init(y,b,T,D)}}},{key:"intersects",value:function(){if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];return c.x>=(s.x<o.x?s.x:o.x)&&c.x<=(s.x>o.x?s.x:o.x)&&c.y>=(s.y<o.y?s.y:o.y)&&c.y<=(s.y>o.y?s.y:o.y)}if(arguments.length===4){var p=arguments[0],y=arguments[1],b=arguments[2],T=arguments[3],D=Math.min(b.x,T.x),z=Math.max(b.x,T.x),W=Math.min(p.x,y.x),Y=Math.max(p.x,y.x);return!(W>z)&&!(Y<D)&&(D=Math.min(b.y,T.y),z=Math.max(b.y,T.y),W=Math.min(p.y,y.y),Y=Math.max(p.y,y.y),!(W>z)&&!(Y<D))}}}])}(),kt=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===h.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(s){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(s){return this===s||this.equalsExact(s,0)}},{key:"geometryChanged",value:function(){this.apply(h.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(s){return s!==null&&this.norm().equalsExact(s.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var s;if(arguments.length===1){var o=arguments[0];return s=o,this.getTypeCode()!==s.getTypeCode()?this.getTypeCode()-s.getTypeCode():this.isEmpty()&&s.isEmpty()?0:this.isEmpty()?-1:s.isEmpty()?1:this.compareToSameClass(o)}if(arguments.length===2){var c=arguments[0],p=arguments[1];return s=c,this.getTypeCode()!==s.getTypeCode()?this.getTypeCode()-s.getTypeCode():this.isEmpty()&&s.isEmpty()?0:this.isEmpty()?-1:s.isEmpty()?1:this.compareToSameClass(c,p)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(s){if(s.getTypeCode()===h.TYPECODE_GEOMETRYCOLLECTION)throw new F("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(s,o,c){return c===0?s.equals(o):s.distance(o)<=c}},{key:"norm",value:function(){var s=this.copy();return s.normalize(),s}},{key:"reverse",value:function(){var s=this.reverseInternal();return this.envelope!=null&&(s.envelope=this.envelope.copy()),s.setSRID(this.getSRID()),s}},{key:"copy",value:function(){var s=this.copyInternal();return s.envelope=this._envelope==null?null:this._envelope.copy(),s._SRID=this._SRID,s._userData=this._userData,s}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new $t(this._envelope)}},{key:"setSRID",value:function(s){this._SRID=s}},{key:"setUserData",value:function(s){this._userData=s}},{key:"compare",value:function(s,o){for(var c=s.iterator(),p=o.iterator();c.hasNext()&&p.hasNext();){var y=c.next(),b=p.next(),T=y.compareTo(b);if(T!==0)return T}return c.hasNext()?1:p.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(s){return this.getClass()===s.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===h.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===h.TYPECODE_MULTIPOINT||this.getTypeCode()===h.TYPECODE_MULTILINESTRING||this.getTypeCode()===h.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[V,H,$]}},{key:"getClass",value:function(){return h}}],[{key:"hasNonEmptyElements",value:function(s){for(var o=0;o<s.length;o++)if(!s[o].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(s){for(var o=0;o<s.length;o++)if(s[o]===null)return!0;return!1}}])}();kt.constructor_=function(h){h&&(this._envelope=null,this._userData=null,this._factory=h,this._SRID=h.getSRID())},kt.TYPECODE_POINT=0,kt.TYPECODE_MULTIPOINT=1,kt.TYPECODE_LINESTRING=2,kt.TYPECODE_LINEARRING=3,kt.TYPECODE_MULTILINESTRING=4,kt.TYPECODE_POLYGON=5,kt.TYPECODE_MULTIPOLYGON=6,kt.TYPECODE_GEOMETRYCOLLECTION=7,kt.TYPENAME_POINT="Point",kt.TYPENAME_MULTIPOINT="MultiPoint",kt.TYPENAME_LINESTRING="LineString",kt.TYPENAME_LINEARRING="LinearRing",kt.TYPENAME_MULTILINESTRING="MultiLineString",kt.TYPENAME_POLYGON="Polygon",kt.TYPENAME_MULTIPOLYGON="MultiPolygon",kt.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",kt.geometryChangedFilter={get interfaces_(){return[G]},filter:function(h){h.geometryChangedAction()}};var j=function(){function h(){i(this,h)}return f(h,null,[{key:"toLocationSymbol",value:function(s){switch(s){case h.EXTERIOR:return"e";case h.BOUNDARY:return"b";case h.INTERIOR:return"i";case h.NONE:return"-"}throw new F("Unknown location value: "+s)}}])}();j.INTERIOR=0,j.BOUNDARY=1,j.EXTERIOR=2,j.NONE=-1;var xn=function(){return f(function h(){i(this,h)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),Gs=function(h){function s(o){var c;return i(this,s),(c=r(this,s,[o])).name=Object.keys({NoSuchElementException:s})[0],c}return x(s,h),f(s)}(B),ui=function(h){function s(o){var c;return i(this,s),(c=r(this,s,[o])).name=Object.keys({UnsupportedOperationException:s})[0],c}return x(s,h),f(s)}(B),la=function(h){function s(){return i(this,s),r(this,s,arguments)}return x(s,h),f(s,[{key:"contains",value:function(){}}])}(xn),Kr=function(h){function s(o){var c;return i(this,s),(c=r(this,s)).map=new Map,o instanceof xn&&c.addAll(o),c}return x(s,h),f(s,[{key:"contains",value:function(o){var c=o.hashCode?o.hashCode():o;return!!this.map.has(c)}},{key:"add",value:function(o){var c=o.hashCode?o.hashCode():o;return!this.map.has(c)&&!!this.map.set(c,o)}},{key:"addAll",value:function(o){var c,p=g(o);try{for(p.s();!(c=p.n()).done;){var y=c.value;this.add(y)}}catch(b){p.e(b)}finally{p.f()}return!0}},{key:"remove",value:function(){throw new ui}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Ws(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(la),Ws=function(){return f(function h(s){i(this,h),this.iterator=s.values();var o=this.iterator.next(),c=o.done,p=o.value;this.done=c,this.value=p},[{key:"next",value:function(){if(this.done)throw new Gs;var h=this.value,s=this.iterator.next(),o=s.done,c=s.value;return this.done=o,this.value=c,h}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new ui}}])}(),ut=function(){function h(){i(this,h)}return f(h,null,[{key:"opposite",value:function(s){return s===h.LEFT?h.RIGHT:s===h.RIGHT?h.LEFT:s}}])}();ut.ON=0,ut.LEFT=1,ut.RIGHT=2;var ua=function(h){function s(o){var c;return i(this,s),(c=r(this,s,[o])).name=Object.keys({EmptyStackException:s})[0],c}return x(s,h),f(s)}(B),Vs=function(h){function s(o){var c;return i(this,s),(c=r(this,s,[o])).name=Object.keys({IndexOutOfBoundsException:s})[0],c}return x(s,h),f(s)}(B),wi=function(h){function s(){return i(this,s),r(this,s,arguments)}return x(s,h),f(s,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(xn),cu=function(h){function s(){var o;return i(this,s),(o=r(this,s)).array=[],o}return x(s,h),f(s,[{key:"add",value:function(o){return this.array.push(o),!0}},{key:"get",value:function(o){if(o<0||o>=this.size())throw new Vs;return this.array[o]}},{key:"push",value:function(o){return this.array.push(o),o}},{key:"pop",value:function(){if(this.array.length===0)throw new ua;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new ua;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(o){return this.array.indexOf(o)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(wi);function Ot(h,s){return h.interfaces_&&h.interfaces_.indexOf(s)>-1}var Qr=function(){return f(function h(s){i(this,h),this.str=s},[{key:"append",value:function(h){this.str+=h}},{key:"setCharAt",value:function(h,s){this.str=this.str.substr(0,h)+s+this.str.substr(h+1)}},{key:"toString",value:function(){return this.str}}])}(),fr=function(){function h(s){i(this,h),this.value=s}return f(h,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(s){return this.value<s?-1:this.value>s?1:0}}],[{key:"compare",value:function(s,o){return s<o?-1:s>o?1:0}},{key:"isNan",value:function(s){return Number.isNaN(s)}},{key:"valueOf",value:function(s){return new h(s)}}])}(),Zs=function(){return f(function h(){i(this,h)},null,[{key:"isWhitespace",value:function(h){return h<=32&&h>=0||h===127}},{key:"toUpperCase",value:function(h){return h.toUpperCase()}}])}(),Ct=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"le",value:function(s){return this._hi<s._hi||this._hi===s._hi&&this._lo<=s._lo}},{key:"extractSignificantDigits",value:function(s,o){var c=this.abs(),p=h.magnitude(c._hi),y=h.TEN.pow(p);(c=c.divide(y)).gt(h.TEN)?(c=c.divide(h.TEN),p+=1):c.lt(h.ONE)&&(c=c.multiply(h.TEN),p-=1);for(var b=p+1,T=new Qr,D=h.MAX_PRINT_DIGITS-1,z=0;z<=D;z++){s&&z===b&&T.append(".");var W=Math.trunc(c._hi);if(W<0)break;var Y=!1,st=0;W>9?(Y=!0,st="9"):st="0"+W,T.append(st),c=c.subtract(h.valueOf(W)).multiply(h.TEN),Y&&c.selfAdd(h.TEN);var ft=!0,yt=h.magnitude(c._hi);if(yt<0&&Math.abs(yt)>=D-z&&(ft=!1),!ft)break}return o[0]=p,T.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof h){var s=arguments[0];return this.add(s.negate())}if(typeof arguments[0]=="number"){var o=arguments[0];return this.add(-o)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof h){var s=arguments[0];return this._hi===s._hi&&this._lo===s._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof h){var s=arguments[0];return this.isNaN()?this:this.selfAdd(-s._hi,-s._lo)}if(typeof arguments[0]=="number"){var o=arguments[0];return this.isNaN()?this:this.selfAdd(-o,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(s){return this.le(s)?this:s}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof h){var s=arguments[0];return this.selfDivide(s._hi,s._lo)}if(typeof arguments[0]=="number"){var o=arguments[0];return this.selfDivide(o,0)}}else if(arguments.length===2){var c,p,y,b,T=arguments[0],D=arguments[1],z=null,W=null,Y=null,st=null;return y=this._hi/T,st=(z=(Y=h.SPLIT*y)-(z=Y-y))*(W=(st=h.SPLIT*T)-(W=st-T))-(b=y*T)+z*(p=T-W)+(c=y-z)*W+c*p,st=y+(Y=(this._hi-b-st+this._lo-y*D)/T),this._hi=st,this._lo=y-st+Y,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof h){var s,o,c,p,y=arguments[0],b=null,T=null,D=null,z=null;return s=(c=this._hi/y._hi)-(b=(D=h.SPLIT*c)-(b=D-c)),z=b*(T=(z=h.SPLIT*y._hi)-(T=z-y._hi))-(p=c*y._hi)+b*(o=y._hi-T)+s*T+s*o,new h(z=c+(D=(this._hi-p-z+this._lo-c*y._lo)/y._hi),c-z+D)}if(typeof arguments[0]=="number"){var W=arguments[0];return X.isNaN(W)?h.createNaN():h.copy(this).selfDivide(W,0)}}},{key:"ge",value:function(s){return this._hi>s._hi||this._hi===s._hi&&this._lo>=s._lo}},{key:"pow",value:function(s){if(s===0)return h.valueOf(1);var o=new h(this),c=h.valueOf(1),p=Math.abs(s);if(p>1)for(;p>0;)p%2==1&&c.selfMultiply(o),(p/=2)>0&&(o=o.sqr());else c=o;return s<0?c.reciprocal():c}},{key:"ceil",value:function(){if(this.isNaN())return h.NaN;var s=Math.ceil(this._hi),o=0;return s===this._hi&&(o=Math.ceil(this._lo)),new h(s,o)}},{key:"compareTo",value:function(s){var o=s;return this._hi<o._hi?-1:this._hi>o._hi?1:this._lo<o._lo?-1:this._lo>o._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof h){var s=arguments[0];return this.init(s),this}if(typeof arguments[0]=="number"){var o=arguments[0];return this.init(o),this}}},{key:"max",value:function(s){return this.ge(s)?this:s}},{key:"sqrt",value:function(){if(this.isZero())return h.valueOf(0);if(this.isNegative())return h.NaN;var s=1/Math.sqrt(this._hi),o=this._hi*s,c=h.valueOf(o),p=this.subtract(c.sqr())._hi*(.5*s);return c.add(p)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof h){var s=arguments[0];return this.selfAdd(s._hi,s._lo)}if(typeof arguments[0]=="number"){var o,c,p,y,b,T=arguments[0],D=null;return D=(p=this._hi+T)-(y=p-this._hi),c=(b=(D=T-y+(this._hi-D))+this._lo)+(p-(o=p+b)),this._hi=o+c,this._lo=c+(o-this._hi),this}}else if(arguments.length===2){var z,W,Y,st,ft=arguments[0],yt=arguments[1],bt=null,Gt=null,At=null;Y=this._hi+ft,W=this._lo+yt,Gt=Y-(At=Y-this._hi),bt=W-(st=W-this._lo);var Jt=(z=Y+(At=(Gt=ft-At+(this._hi-Gt))+W))+(At=(bt=yt-st+(this._lo-bt))+(At+(Y-z))),he=At+(z-Jt);return this._hi=Jt,this._lo=he,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof h){var s=arguments[0];return this.selfMultiply(s._hi,s._lo)}if(typeof arguments[0]=="number"){var o=arguments[0];return this.selfMultiply(o,0)}}else if(arguments.length===2){var c,p,y=arguments[0],b=arguments[1],T=null,D=null,z=null,W=null;T=(z=h.SPLIT*this._hi)-this._hi,W=h.SPLIT*y,T=z-T,c=this._hi-T,D=W-y;var Y=(z=this._hi*y)+(W=T*(D=W-D)-z+T*(p=y-D)+c*D+c*p+(this._hi*b+this._lo*y)),st=W+(T=z-Y);return this._hi=Y,this._lo=st,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return h.NaN;var s=Math.floor(this._hi),o=0;return s===this._hi&&(o=Math.floor(this._lo)),new h(s,o)}},{key:"negate",value:function(){return this.isNaN()?this:new h(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(s){if(s instanceof CloneNotSupportedException)return null;throw s}}},{key:"multiply",value:function(){if(arguments[0]instanceof h){var s=arguments[0];return s.isNaN()?h.createNaN():h.copy(this).selfMultiply(s)}if(typeof arguments[0]=="number"){var o=arguments[0];return X.isNaN(o)?h.createNaN():h.copy(this).selfMultiply(o,0)}}},{key:"isNaN",value:function(){return X.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var s=h.magnitude(this._hi);return s>=-3&&s<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var s=this.getSpecialNumberString();if(s!==null)return s;var o=new Array(1).fill(null),c=this.extractSignificantDigits(!0,o),p=o[0]+1,y=c;if(c.charAt(0)===".")y="0"+c;else if(p<0)y="0."+h.stringOfChar("0",-p)+c;else if(c.indexOf(".")===-1){var b=p-c.length;y=c+h.stringOfChar("0",b)+".0"}return this.isNegative()?"-"+y:y}},{key:"reciprocal",value:function(){var s,o,c,p,y=null,b=null,T=null,D=null;s=(c=1/this._hi)-(y=(T=h.SPLIT*c)-(y=T-c)),b=(D=h.SPLIT*this._hi)-this._hi;var z=c+(T=(1-(p=c*this._hi)-(D=y*(b=D-b)-p+y*(o=this._hi-b)+s*b+s*o)-c*this._lo)/this._hi);return new h(z,c-z+T)}},{key:"toSciNotation",value:function(){if(this.isZero())return h.SCI_NOT_ZERO;var s=this.getSpecialNumberString();if(s!==null)return s;var o=new Array(1).fill(null),c=this.extractSignificantDigits(!1,o),p=h.SCI_NOT_EXPONENT_CHAR+o[0];if(c.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+c);var y="";c.length>1&&(y=c.substring(1));var b=c.charAt(0)+"."+y;return this.isNegative()?"-"+b+p:b+p}},{key:"abs",value:function(){return this.isNaN()?h.NaN:this.isNegative()?this.negate():new h(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(s){return this._hi<s._hi||this._hi===s._hi&&this._lo<s._lo}},{key:"add",value:function(){if(arguments[0]instanceof h){var s=arguments[0];return h.copy(this).selfAdd(s)}if(typeof arguments[0]=="number"){var o=arguments[0];return h.copy(this).selfAdd(o)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var s=arguments[0];this._hi=s,this._lo=0}else if(arguments[0]instanceof h){var o=arguments[0];this._hi=o._hi,this._lo=o._lo}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this._hi=c,this._lo=p}}},{key:"gt",value:function(s){return this._hi>s._hi||this._hi===s._hi&&this._lo>s._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?h.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[$,H,V]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var s=arguments[0];this.init(s)}else if(arguments[0]instanceof h){var o=arguments[0];this.init(o)}else if(typeof arguments[0]=="string"){var c=arguments[0];h.constructor_.call(this,h.parse(c))}}else if(arguments.length===2){var p=arguments[0],y=arguments[1];this.init(p,y)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],o=arguments[1],c=arguments[2],p=arguments[3];return h.determinant(h.valueOf(s),h.valueOf(o),h.valueOf(c),h.valueOf(p))}if(arguments[3]instanceof h&&arguments[2]instanceof h&&arguments[0]instanceof h&&arguments[1]instanceof h){var y=arguments[1],b=arguments[2],T=arguments[3];return arguments[0].multiply(T).selfSubtract(y.multiply(b))}}},{key:"sqr",value:function(s){return h.valueOf(s).selfMultiply(s)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var s=arguments[0];return h.parse(s)}if(typeof arguments[0]=="number")return new h(arguments[0])}},{key:"sqrt",value:function(s){return h.valueOf(s).sqrt()}},{key:"parse",value:function(s){for(var o=0,c=s.length;Zs.isWhitespace(s.charAt(o));)o++;var p=!1;if(o<c){var y=s.charAt(o);y!=="-"&&y!=="+"||(o++,y==="-"&&(p=!0))}for(var b=new h,T=0,D=0,z=0,W=!1;!(o>=c);){var Y=s.charAt(o);if(o++,Zs.isDigit(Y)){var st=Y-"0";b.selfMultiply(h.TEN),b.selfAdd(st),T++}else{if(Y!=="."){if(Y==="e"||Y==="E"){var ft=s.substring(o);try{z=fr.parseInt(ft)}catch(Jt){throw Jt instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+ft+" in string "+s):Jt}break}throw new NumberFormatException("Unexpected character '"+Y+"' at position "+o+" in string "+s)}D=T,W=!0}}var yt=b;W||(D=T);var bt=T-D-z;if(bt===0)yt=b;else if(bt>0){var Gt=h.TEN.pow(bt);yt=b.divide(Gt)}else if(bt<0){var At=h.TEN.pow(-bt);yt=b.multiply(At)}return p?yt.negate():yt}},{key:"createNaN",value:function(){return new h(X.NaN,X.NaN)}},{key:"copy",value:function(s){return new h(s)}},{key:"magnitude",value:function(s){var o=Math.abs(s),c=Math.log(o)/Math.log(10),p=Math.trunc(Math.floor(c));return 10*Math.pow(10,p)<=o&&(p+=1),p}},{key:"stringOfChar",value:function(s,o){for(var c=new Qr,p=0;p<o;p++)c.append(s);return c.toString()}}])}();Ct.PI=new Ct(3.141592653589793,12246467991473532e-32),Ct.TWO_PI=new Ct(6.283185307179586,24492935982947064e-32),Ct.PI_2=new Ct(1.5707963267948966,6123233995736766e-32),Ct.E=new Ct(2.718281828459045,14456468917292502e-32),Ct.NaN=new Ct(X.NaN,X.NaN),Ct.EPS=123259516440783e-46,Ct.SPLIT=134217729,Ct.MAX_PRINT_DIGITS=32,Ct.TEN=Ct.valueOf(10),Ct.ONE=Ct.valueOf(1),Ct.SCI_NOT_EXPONENT_CHAR="E",Ct.SCI_NOT_ZERO="0.0E0";var ca=function(){function h(){i(this,h)}return f(h,null,[{key:"orientationIndex",value:function(s,o,c){var p=h.orientationIndexFilter(s,o,c);if(p<=1)return p;var y=Ct.valueOf(o.x).selfAdd(-s.x),b=Ct.valueOf(o.y).selfAdd(-s.y),T=Ct.valueOf(c.x).selfAdd(-o.x),D=Ct.valueOf(c.y).selfAdd(-o.y);return y.selfMultiply(D).selfSubtract(b.selfMultiply(T)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof Ct&&arguments[2]instanceof Ct&&arguments[0]instanceof Ct&&arguments[1]instanceof Ct){var s=arguments[1],o=arguments[2],c=arguments[3];return arguments[0].multiply(c).selfSubtract(s.multiply(o)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var p=arguments[0],y=arguments[1],b=arguments[2],T=arguments[3],D=Ct.valueOf(p),z=Ct.valueOf(y),W=Ct.valueOf(b),Y=Ct.valueOf(T);return D.multiply(Y).selfSubtract(z.multiply(W)).signum()}}},{key:"intersection",value:function(s,o,c,p){var y=new Ct(s.y).selfSubtract(o.y),b=new Ct(o.x).selfSubtract(s.x),T=new Ct(s.x).selfMultiply(o.y).selfSubtract(new Ct(o.x).selfMultiply(s.y)),D=new Ct(c.y).selfSubtract(p.y),z=new Ct(p.x).selfSubtract(c.x),W=new Ct(c.x).selfMultiply(p.y).selfSubtract(new Ct(p.x).selfMultiply(c.y)),Y=b.multiply(W).selfSubtract(z.multiply(T)),st=D.multiply(T).selfSubtract(y.multiply(W)),ft=y.multiply(z).selfSubtract(D.multiply(b)),yt=Y.selfDivide(ft).doubleValue(),bt=st.selfDivide(ft).doubleValue();return X.isNaN(yt)||X.isInfinite(yt)||X.isNaN(bt)||X.isInfinite(bt)?null:new Z(yt,bt)}},{key:"orientationIndexFilter",value:function(s,o,c){var p=null,y=(s.x-c.x)*(o.y-c.y),b=(s.y-c.y)*(o.x-c.x),T=y-b;if(y>0){if(b<=0)return h.signum(T);p=y+b}else{if(!(y<0)||b>=0)return h.signum(T);p=-y-b}var D=h.DP_SAFE_EPSILON*p;return T>=D||-T>=D?h.signum(T):2}},{key:"signum",value:function(s){return s>0?1:s<0?-1:0}}])}();ca.DP_SAFE_EPSILON=1e-15;var Bt=function(){return f(function h(){i(this,h)},[{key:"getM",value:function(h){if(this.hasM()){var s=this.getDimension()-this.getMeasures();return this.getOrdinate(h,s)}return X.NaN}},{key:"setOrdinate",value:function(h,s,o){}},{key:"getZ",value:function(h){return this.hasZ()?this.getOrdinate(h,2):X.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(h,s){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(h){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(h){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(h){}},{key:"copy",value:function(){}},{key:"getY",value:function(h){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[V]}}])}();Bt.X=0,Bt.Y=1,Bt.Z=2,Bt.M=3;var Mt=function(){function h(){i(this,h)}return f(h,null,[{key:"index",value:function(s,o,c){return ca.orientationIndex(s,o,c)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var s=arguments[0],o=s.length-1;if(o<3)throw new F("Ring has fewer than 4 points, so orientation cannot be determined");for(var c=s[0],p=0,y=1;y<=o;y++){var b=s[y];b.y>c.y&&(c=b,p=y)}var T=p;do(T-=1)<0&&(T=o);while(s[T].equals2D(c)&&T!==p);var D=p;do D=(D+1)%o;while(s[D].equals2D(c)&&D!==p);var z=s[T],W=s[D];if(z.equals2D(c)||W.equals2D(c)||z.equals2D(W))return!1;var Y=h.index(z,c,W);return Y===0?z.x>W.x:Y>0}if(Ot(arguments[0],Bt)){var st=arguments[0],ft=st.size()-1;if(ft<3)throw new F("Ring has fewer than 4 points, so orientation cannot be determined");for(var yt=st.getCoordinate(0),bt=0,Gt=1;Gt<=ft;Gt++){var At=st.getCoordinate(Gt);At.y>yt.y&&(yt=At,bt=Gt)}var Jt=null,he=bt;do(he-=1)<0&&(he=ft),Jt=st.getCoordinate(he);while(Jt.equals2D(yt)&&he!==bt);var Pe=null,Mi=bt;do Mi=(Mi+1)%ft,Pe=st.getCoordinate(Mi);while(Pe.equals2D(yt)&&Mi!==bt);if(Jt.equals2D(yt)||Pe.equals2D(yt)||Jt.equals2D(Pe))return!1;var ds=h.index(Jt,yt,Pe);return ds===0?Jt.x>Pe.x:ds>0}}}])}();Mt.CLOCKWISE=-1,Mt.RIGHT=Mt.CLOCKWISE,Mt.COUNTERCLOCKWISE=1,Mt.LEFT=Mt.COUNTERCLOCKWISE,Mt.COLLINEAR=0,Mt.STRAIGHT=Mt.COLLINEAR;var Hh=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(h,s){var o=this.getRightmostSideOfSegment(h,s);return o<0&&(o=this.getRightmostSideOfSegment(h,s-1)),o<0&&(this._minCoord=null,this.checkForRightmostCoordinate(h)),o}},{key:"findRightmostEdgeAtVertex",value:function(){var h=this._minDe.getEdge().getCoordinates();pt.isTrue(this._minIndex>0&&this._minIndex<h.length,"rightmost point expected to be interior vertex of edge");var s=h[this._minIndex-1],o=h[this._minIndex+1],c=Mt.index(this._minCoord,o,s),p=!1;(s.y<this._minCoord.y&&o.y<this._minCoord.y&&c===Mt.COUNTERCLOCKWISE||s.y>this._minCoord.y&&o.y>this._minCoord.y&&c===Mt.CLOCKWISE)&&(p=!0),p&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(h,s){var o=h.getEdge().getCoordinates();if(s<0||s+1>=o.length||o[s].y===o[s+1].y)return-1;var c=ut.LEFT;return o[s].y<o[s+1].y&&(c=ut.RIGHT),c}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(h){for(var s=h.getEdge().getCoordinates(),o=0;o<s.length-1;o++)(this._minCoord===null||s[o].x>this._minCoord.x)&&(this._minDe=h,this._minIndex=o,this._minCoord=s[o])}},{key:"findRightmostEdgeAtNode",value:function(){var h=this._minDe.getNode().getEdges();this._minDe=h.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(h){for(var s=h.iterator();s.hasNext();){var o=s.next();o.isForward()&&this.checkForRightmostCoordinate(o)}pt.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ut.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),Un=function(h){function s(o,c){var p;return i(this,s),(p=r(this,s,[c?o+" [ "+c+" ]":o])).pt=c?new Z(c):void 0,p.name=Object.keys({TopologyException:s})[0],p}return x(s,h),f(s,[{key:"getCoordinate",value:function(){return this.pt}}])}(wt),ha=function(){return f(function h(){i(this,h),this.array=[]},[{key:"addLast",value:function(h){this.array.push(h)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),Tt=function(h){function s(o){var c;return i(this,s),(c=r(this,s)).array=[],o instanceof xn&&c.addAll(o),c}return x(s,h),f(s,[{key:"interfaces_",get:function(){return[wi,xn]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(o){return arguments.length===1?this.array.push(o):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(o){var c,p=g(o);try{for(p.s();!(c=p.n()).done;){var y=c.value;this.array.push(y)}}catch(b){p.e(b)}finally{p.f()}}},{key:"set",value:function(o,c){var p=this.array[o];return this.array[o]=c,p}},{key:"iterator",value:function(){return new Gh(this)}},{key:"get",value:function(o){if(o<0||o>=this.size())throw new Vs;return this.array[o]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(o){o?this.array.sort(function(c,p){return o.compare(c,p)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(o){for(var c=0,p=this.array.length;c<p;c++)if(this.array[c]===o)return!!this.array.splice(c,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(wi),Gh=function(){return f(function h(s){i(this,h),this.arrayList=s,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Gs;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(h){return this.arrayList.set(this.position-1,h)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),Jr=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var h=this._dirEdgeList.iterator();h.hasNext();)h.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(h){for(var s=null,o=h.getEdges().iterator();o.hasNext();){var c=o.next();if(c.isVisited()||c.getSym().isVisited()){s=c;break}}if(s===null)throw new Un("unable to find edge to compute depths at "+h.getCoordinate());h.getEdges().computeDepths(s);for(var p=h.getEdges().iterator();p.hasNext();){var y=p.next();y.setVisited(!0),this.copySymDepths(y)}}},{key:"computeDepth",value:function(h){this.clearVisitedEdges();var s=this._finder.getEdge();s.getNode(),s.getLabel(),s.setEdgeDepths(ut.RIGHT,h),this.copySymDepths(s),this.computeDepths(s)}},{key:"create",value:function(h){this.addReachable(h),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var h=this._dirEdgeList.iterator();h.hasNext();){var s=h.next();s.getDepth(ut.RIGHT)>=1&&s.getDepth(ut.LEFT)<=0&&!s.isInteriorAreaEdge()&&s.setInResult(!0)}}},{key:"computeDepths",value:function(h){var s=new Kr,o=new ha,c=h.getNode();for(o.addLast(c),s.add(c),h.setVisited(!0);!o.isEmpty();){var p=o.removeFirst();s.add(p),this.computeNodeDepth(p);for(var y=p.getEdges().iterator();y.hasNext();){var b=y.next().getSym();if(!b.isVisited()){var T=b.getNode();s.contains(T)||(o.addLast(T),s.add(T))}}}}},{key:"compareTo",value:function(h){var s=h;return this._rightMostCoord.x<s._rightMostCoord.x?-1:this._rightMostCoord.x>s._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var h=new $t,s=this._dirEdgeList.iterator();s.hasNext();)for(var o=s.next().getEdge().getCoordinates(),c=0;c<o.length-1;c++)h.expandToInclude(o[c]);this._env=h}return this._env}},{key:"addReachable",value:function(h){var s=new cu;for(s.add(h);!s.empty();){var o=s.pop();this.add(o,s)}}},{key:"copySymDepths",value:function(h){var s=h.getSym();s.setDepth(ut.LEFT,h.getDepth(ut.RIGHT)),s.setDepth(ut.RIGHT,h.getDepth(ut.LEFT))}},{key:"add",value:function(h,s){h.setVisited(!0),this._nodes.add(h);for(var o=h.getEdges().iterator();o.hasNext();){var c=o.next();this._dirEdgeList.add(c);var p=c.getSym().getNode();p.isVisited()||s.push(p)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[H]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new Tt,this._nodes=new Tt,this._rightMostCoord=null,this._env=null,this._finder=new Hh}}])}(),fa=function(){return f(function h(){i(this,h)},null,[{key:"intersection",value:function(h,s,o,c){var p=h.x<s.x?h.x:s.x,y=h.y<s.y?h.y:s.y,b=h.x>s.x?h.x:s.x,T=h.y>s.y?h.y:s.y,D=o.x<c.x?o.x:c.x,z=o.y<c.y?o.y:c.y,W=o.x>c.x?o.x:c.x,Y=o.y>c.y?o.y:c.y,st=((p>D?p:D)+(b<W?b:W))/2,ft=((y>z?y:z)+(T<Y?T:Y))/2,yt=h.x-st,bt=h.y-ft,Gt=s.x-st,At=s.y-ft,Jt=o.x-st,he=o.y-ft,Pe=c.x-st,Mi=c.y-ft,ds=bt-At,$n=Gt-yt,Fa=yt*At-Gt*bt,Ba=he-Mi,Lr=Pe-Jt,Mu=Jt*Mi-Pe*he,gs=ds*Lr-Ba*$n,qi=($n*Mu-Lr*Fa)/gs,po=(Ba*Fa-ds*Mu)/gs;return X.isNaN(qi)||X.isInfinite(qi)||X.isNaN(po)||X.isInfinite(po)?null:new Z(qi+st,po+ft)}}])}(),wn=function(){return f(function h(){i(this,h)},null,[{key:"arraycopy",value:function(h,s,o,c,p){for(var y=0,b=s;b<s+p;b++)o[c+y]=h[b],y++}},{key:"getProperty",value:function(h){return{"line.separator":`
`}[h]}}])}(),dr=function(){function h(){i(this,h)}return f(h,null,[{key:"log10",value:function(s){var o=Math.log(s);return X.isInfinite(o)||X.isNaN(o)?o:o/h.LOG_10}},{key:"min",value:function(s,o,c,p){var y=s;return o<y&&(y=o),c<y&&(y=c),p<y&&(y=p),y}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],o=arguments[1],c=arguments[2];return s<o?o:s>c?c:s}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var p=arguments[0],y=arguments[1],b=arguments[2];return p<y?y:p>b?b:p}}},{key:"wrap",value:function(s,o){return s<0?o- -s%o:s%o}},{key:"max",value:function(){if(arguments.length===3){var s=arguments[1],o=arguments[2],c=arguments[0];return s>c&&(c=s),o>c&&(c=o),c}if(arguments.length===4){var p=arguments[1],y=arguments[2],b=arguments[3],T=arguments[0];return p>T&&(T=p),y>T&&(T=y),b>T&&(T=b),T}}},{key:"average",value:function(s,o){return(s+o)/2}}])}();dr.LOG_10=Math.log(10);var In=function(){function h(){i(this,h)}return f(h,null,[{key:"segmentToSegment",value:function(s,o,c,p){if(s.equals(o))return h.pointToSegment(s,c,p);if(c.equals(p))return h.pointToSegment(p,s,o);var y=!1;if($t.intersects(s,o,c,p)){var b=(o.x-s.x)*(p.y-c.y)-(o.y-s.y)*(p.x-c.x);if(b===0)y=!0;else{var T=(s.y-c.y)*(p.x-c.x)-(s.x-c.x)*(p.y-c.y),D=((s.y-c.y)*(o.x-s.x)-(s.x-c.x)*(o.y-s.y))/b,z=T/b;(z<0||z>1||D<0||D>1)&&(y=!0)}}else y=!0;return y?dr.min(h.pointToSegment(s,c,p),h.pointToSegment(o,c,p),h.pointToSegment(c,s,o),h.pointToSegment(p,s,o)):0}},{key:"pointToSegment",value:function(s,o,c){if(o.x===c.x&&o.y===c.y)return s.distance(o);var p=(c.x-o.x)*(c.x-o.x)+(c.y-o.y)*(c.y-o.y),y=((s.x-o.x)*(c.x-o.x)+(s.y-o.y)*(c.y-o.y))/p;if(y<=0)return s.distance(o);if(y>=1)return s.distance(c);var b=((o.y-s.y)*(c.x-o.x)-(o.x-s.x)*(c.y-o.y))/p;return Math.abs(b)*Math.sqrt(p)}},{key:"pointToLinePerpendicular",value:function(s,o,c){var p=(c.x-o.x)*(c.x-o.x)+(c.y-o.y)*(c.y-o.y),y=((o.y-s.y)*(c.x-o.x)-(o.x-s.x)*(c.y-o.y))/p;return Math.abs(y)*Math.sqrt(p)}},{key:"pointToSegmentString",value:function(s,o){if(o.length===0)throw new F("Line array must contain at least one vertex");for(var c=s.distance(o[0]),p=0;p<o.length-1;p++){var y=h.pointToSegment(s,o[p],o[p+1]);y<c&&(c=y)}return c}}])}(),da=function(){return f(function h(){i(this,h)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||Ot(arguments[0],Bt);else if(arguments.length!==2){if(arguments.length===3){var h=arguments[0],s=arguments[1];return this.create(h,s)}}}}])}(),Ys=function(){return f(function h(){i(this,h)},[{key:"filter",value:function(h){}}])}(),Wh=function(){return f(function h(){i(this,h)},null,[{key:"ofLine",value:function(h){var s=h.size();if(s<=1)return 0;var o=0,c=new Z;h.getCoordinate(0,c);for(var p=c.x,y=c.y,b=1;b<s;b++){h.getCoordinate(b,c);var T=c.x,D=c.y,z=T-p,W=D-y;o+=Math.sqrt(z*z+W*W),p=T,y=D}return o}}])}(),hu=f(function h(){i(this,h)}),Ui=function(){function h(){i(this,h)}return f(h,null,[{key:"copyCoord",value:function(s,o,c,p){for(var y=Math.min(s.getDimension(),c.getDimension()),b=0;b<y;b++)c.setOrdinate(p,b,s.getOrdinate(o,b))}},{key:"isRing",value:function(s){var o=s.size();return o===0||!(o<=3)&&s.getOrdinate(0,Bt.X)===s.getOrdinate(o-1,Bt.X)&&s.getOrdinate(0,Bt.Y)===s.getOrdinate(o-1,Bt.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(Ot(arguments[0],Bt)&&Number.isInteger(arguments[1])){var s=arguments[0],o=arguments[1];h.scroll(s,o,h.isRing(s))}else if(Ot(arguments[0],Bt)&&arguments[1]instanceof Z){var c=arguments[0],p=arguments[1],y=h.indexOf(p,c);if(y<=0)return null;h.scroll(c,y)}}else if(arguments.length===3){var b=arguments[0],T=arguments[1],D=arguments[2];if(T<=0)return null;for(var z=b.copy(),W=D?b.size()-1:b.size(),Y=0;Y<W;Y++)for(var st=0;st<b.getDimension();st++)b.setOrdinate(Y,st,z.getOrdinate((T+Y)%W,st));if(D)for(var ft=0;ft<b.getDimension();ft++)b.setOrdinate(W,ft,b.getOrdinate(0,ft))}}},{key:"isEqual",value:function(s,o){var c=s.size();if(c!==o.size())return!1;for(var p=Math.min(s.getDimension(),o.getDimension()),y=0;y<c;y++)for(var b=0;b<p;b++){var T=s.getOrdinate(y,b),D=o.getOrdinate(y,b);if(s.getOrdinate(y,b)!==o.getOrdinate(y,b)&&(!X.isNaN(T)||!X.isNaN(D)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var s=arguments[0];return h.minCoordinateIndex(s,0,s.size()-1)}if(arguments.length===3){for(var o=arguments[0],c=arguments[2],p=-1,y=null,b=arguments[1];b<=c;b++){var T=o.getCoordinate(b);(y===null||y.compareTo(T)>0)&&(y=T,p=b)}return p}}},{key:"extend",value:function(s,o,c){var p=s.create(c,o.getDimension()),y=o.size();if(h.copy(o,0,p,0,y),y>0)for(var b=y;b<c;b++)h.copy(o,y-1,p,b,1);return p}},{key:"reverse",value:function(s){for(var o=s.size()-1,c=Math.trunc(o/2),p=0;p<=c;p++)h.swap(s,p,o-p)}},{key:"swap",value:function(s,o,c){if(o===c)return null;for(var p=0;p<s.getDimension();p++){var y=s.getOrdinate(o,p);s.setOrdinate(o,p,s.getOrdinate(c,p)),s.setOrdinate(c,p,y)}}},{key:"copy",value:function(s,o,c,p,y){for(var b=0;b<y;b++)h.copyCoord(s,o+b,c,p+b)}},{key:"ensureValidRing",value:function(s,o){var c=o.size();return c===0?o:c<=3?h.createClosedRing(s,o,4):o.getOrdinate(0,Bt.X)===o.getOrdinate(c-1,Bt.X)&&o.getOrdinate(0,Bt.Y)===o.getOrdinate(c-1,Bt.Y)?o:h.createClosedRing(s,o,c+1)}},{key:"indexOf",value:function(s,o){for(var c=0;c<o.size();c++)if(s.x===o.getOrdinate(c,Bt.X)&&s.y===o.getOrdinate(c,Bt.Y))return c;return-1}},{key:"createClosedRing",value:function(s,o,c){var p=s.create(c,o.getDimension()),y=o.size();h.copy(o,0,p,0,y);for(var b=y;b<c;b++)h.copy(o,0,p,b,1);return p}},{key:"minCoordinate",value:function(s){for(var o=null,c=0;c<s.size();c++){var p=s.getCoordinate(c);(o===null||o.compareTo(p)>0)&&(o=p)}return o}}])}(),ct=function(){function h(){i(this,h)}return f(h,null,[{key:"toDimensionSymbol",value:function(s){switch(s){case h.FALSE:return h.SYM_FALSE;case h.TRUE:return h.SYM_TRUE;case h.DONTCARE:return h.SYM_DONTCARE;case h.P:return h.SYM_P;case h.L:return h.SYM_L;case h.A:return h.SYM_A}throw new F("Unknown dimension value: "+s)}},{key:"toDimensionValue",value:function(s){switch(Zs.toUpperCase(s)){case h.SYM_FALSE:return h.FALSE;case h.SYM_TRUE:return h.TRUE;case h.SYM_DONTCARE:return h.DONTCARE;case h.SYM_P:return h.P;case h.SYM_L:return h.L;case h.SYM_A:return h.A}throw new F("Unknown dimension symbol: "+s)}}])}();ct.P=0,ct.L=1,ct.A=2,ct.FALSE=-1,ct.TRUE=-2,ct.DONTCARE=-3,ct.SYM_FALSE="F",ct.SYM_TRUE="T",ct.SYM_DONTCARE="*",ct.SYM_P="0",ct.SYM_L="1",ct.SYM_A="2";var qs=function(){return f(function h(){i(this,h)},[{key:"filter",value:function(h){}}])}(),gr=function(){return f(function h(){i(this,h)},[{key:"filter",value:function(h,s){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),ts=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new $t:this._points.expandEnvelope(new $t)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new s(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof kt){var o=arguments[0],c=arguments[1];if(!this.isEquivalentClass(o))return!1;var p=o;if(this._points.size()!==p._points.size())return!1;for(var y=0;y<this._points.size();y++)if(!this.equal(this._points.getCoordinate(y),p._points.getCoordinate(y),c))return!1;return!0}return C(s,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var o=0;o<Math.trunc(this._points.size()/2);o++){var c=this._points.size()-1-o;if(!this._points.getCoordinate(o).equals(this._points.getCoordinate(c))){if(this._points.getCoordinate(o).compareTo(this._points.getCoordinate(c))>0){var p=this._points.copy();Ui.reverse(p),this._points=p}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?ct.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var o=this._points.copy();return Ui.reverse(o),this.getFactory().createLineString(o)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return kt.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Wh.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var o=arguments[0],c=0,p=0;c<this._points.size()&&p<o._points.size();){var y=this._points.getCoordinate(c).compareTo(o._points.getCoordinate(p));if(y!==0)return y;c++,p++}return c<this._points.size()?1:p<o._points.size()?-1:0}if(arguments.length===2){var b=arguments[0];return arguments[1].compare(this._points,b._points)}}},{key:"apply",value:function(){if(Ot(arguments[0],Ys))for(var o=arguments[0],c=0;c<this._points.size();c++)o.filter(this._points.getCoordinate(c));else if(Ot(arguments[0],gr)){var p=arguments[0];if(this._points.size()===0)return null;for(var y=0;y<this._points.size()&&(p.filter(this._points,y),!p.isDone());y++);p.isGeometryChanged()&&this.geometryChanged()}else Ot(arguments[0],qs)?arguments[0].filter(this):Ot(arguments[0],G)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new ui}},{key:"isEquivalentClass",value:function(o){return o instanceof s}},{key:"getCoordinateN",value:function(o){return this._points.getCoordinate(o)}},{key:"getGeometryType",value:function(){return kt.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(o){if(o===null&&(o=this.getFactory().getCoordinateSequenceFactory().create([])),o.size()===1)throw new F("Invalid number of points in LineString (found "+o.size()+" - must be 0 or >= 2)");this._points=o}},{key:"isCoordinate",value:function(o){for(var c=0;c<this._points.size();c++)if(this._points.getCoordinate(c).equals(o))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(o){return this.getFactory().createPoint(this._points.getCoordinate(o))}},{key:"interfaces_",get:function(){return[hu]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var o=arguments[0],c=arguments[1];kt.constructor_.call(this,c),this.init(o)}}}}])}(kt),fu=f(function h(){i(this,h)}),ga=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new $t;var o=new $t;return o.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),o}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new s(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof kt){var o=arguments[0],c=arguments[1];return!!this.isEquivalentClass(o)&&(!(!this.isEmpty()||!o.isEmpty())||this.isEmpty()===o.isEmpty()&&this.equal(o.getCoordinate(),this.getCoordinate(),c))}return C(s,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return ct.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return kt.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var o=arguments[0];return this.getCoordinate().compareTo(o.getCoordinate())}if(arguments.length===2){var c=arguments[0];return arguments[1].compare(this._coordinates,c._coordinates)}}},{key:"apply",value:function(){if(Ot(arguments[0],Ys)){var o=arguments[0];if(this.isEmpty())return null;o.filter(this.getCoordinate())}else if(Ot(arguments[0],gr)){var c=arguments[0];if(this.isEmpty())return null;c.filter(this._coordinates,0),c.isGeometryChanged()&&this.geometryChanged()}else Ot(arguments[0],qs)?arguments[0].filter(this):Ot(arguments[0],G)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return kt.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(o){o===null&&(o=this.getFactory().getCoordinateSequenceFactory().create([])),pt.isTrue(o.size()<=1),this._coordinates=o}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[fu]}}],[{key:"constructor_",value:function(){this._coordinates=null;var o=arguments[0],c=arguments[1];kt.constructor_.call(this,c),this.init(o)}}])}(kt),du=function(){function h(){i(this,h)}return f(h,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var s=arguments[0];return Math.abs(h.ofRingSigned(s))}if(Ot(arguments[0],Bt)){var o=arguments[0];return Math.abs(h.ofRingSigned(o))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var s=arguments[0];if(s.length<3)return 0;for(var o=0,c=s[0].x,p=1;p<s.length-1;p++){var y=s[p].x-c,b=s[p+1].y;o+=y*(s[p-1].y-b)}return o/2}if(Ot(arguments[0],Bt)){var T=arguments[0],D=T.size();if(D<3)return 0;var z=new Z,W=new Z,Y=new Z;T.getCoordinate(0,W),T.getCoordinate(1,Y);var st=W.x;Y.x-=st;for(var ft=0,yt=1;yt<D-1;yt++)z.y=W.y,W.x=Y.x,W.y=Y.y,T.getCoordinate(yt+1,Y),Y.x-=st,ft+=W.x*(z.y-Y.y);return ft/2}}}])}(),Re=function(){return f(function h(){i(this,h)},null,[{key:"sort",value:function(){var h=arguments,s=arguments[0];if(arguments.length===1)s.sort(function(st,ft){return st.compareTo(ft)});else if(arguments.length===2)s.sort(function(st,ft){return h[1].compare(st,ft)});else if(arguments.length===3){var o=s.slice(arguments[1],arguments[2]);o.sort();var c=s.slice(0,arguments[1]).concat(o,s.slice(arguments[2],s.length));s.splice(0,s.length);var p,y=g(c);try{for(y.s();!(p=y.n()).done;){var b=p.value;s.push(b)}}catch(st){y.e(st)}finally{y.f()}}else if(arguments.length===4){var T=s.slice(arguments[1],arguments[2]);T.sort(function(st,ft){return h[3].compare(st,ft)});var D=s.slice(0,arguments[1]).concat(T,s.slice(arguments[2],s.length));s.splice(0,s.length);var z,W=g(D);try{for(W.s();!(z=W.n()).done;){var Y=z.value;s.push(Y)}}catch(st){W.e(st)}finally{W.f()}}}},{key:"asList",value:function(h){var s,o=new Tt,c=g(h);try{for(c.s();!(s=c.n()).done;){var p=s.value;o.add(p)}}catch(y){c.e(y)}finally{c.f()}return o}},{key:"copyOf",value:function(h,s){return h.slice(0,s)}}])}(),Lt=f(function h(){i(this,h)}),es=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var o=new Array(this.getNumPoints()).fill(null),c=-1,p=this._shell.getCoordinates(),y=0;y<p.length;y++)o[++c]=p[y];for(var b=0;b<this._holes.length;b++)for(var T=this._holes[b].getCoordinates(),D=0;D<T.length;D++)o[++c]=T[D];return o}},{key:"getArea",value:function(){var o=0;o+=du.ofRing(this._shell.getCoordinateSequence());for(var c=0;c<this._holes.length;c++)o-=du.ofRing(this._holes[c].getCoordinateSequence());return o}},{key:"copyInternal",value:function(){for(var o=this._shell.copy(),c=new Array(this._holes.length).fill(null),p=0;p<this._holes.length;p++)c[p]=this._holes[p].copy();return new s(o,c,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var o=this._shell.getCoordinateSequence(),c=this.getEnvelopeInternal(),p=0;p<5;p++){var y=o.getX(p);if(y!==c.getMinX()&&y!==c.getMaxX())return!1;var b=o.getY(p);if(b!==c.getMinY()&&b!==c.getMaxY())return!1}for(var T=o.getX(0),D=o.getY(0),z=1;z<=4;z++){var W=o.getX(z),Y=o.getY(z);if(W!==T==(Y!==D))return!1;T=W,D=Y}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof kt){var o=arguments[0],c=arguments[1];if(!this.isEquivalentClass(o))return!1;var p=o,y=this._shell,b=p._shell;if(!y.equalsExact(b,c)||this._holes.length!==p._holes.length)return!1;for(var T=0;T<this._holes.length;T++)if(!this._holes[T].equalsExact(p._holes[T],c))return!1;return!0}return C(s,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var o=0;o<this._holes.length;o++)this._holes[o]=this.normalized(this._holes[o],!1);Re.sort(this._holes)}else if(arguments.length===2){var c=arguments[0],p=arguments[1];if(c.isEmpty())return null;var y=c.getCoordinateSequence(),b=Ui.minCoordinateIndex(y,0,y.size()-2);Ui.scroll(y,b,!0),Mt.isCCW(y)===p&&Ui.reverse(y)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var o=this.getExteriorRing().reverse(),c=new Array(this.getNumInteriorRing()).fill(null),p=0;p<c.length;p++)c[p]=this.getInteriorRingN(p).reverse();return this.getFactory().createPolygon(o,c)}},{key:"getTypeCode",value:function(){return kt.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var o=0;o+=this._shell.getLength();for(var c=0;c<this._holes.length;c++)o+=this._holes[c].getLength();return o}},{key:"getNumPoints",value:function(){for(var o=this._shell.getNumPoints(),c=0;c<this._holes.length;c++)o+=this._holes[c].getNumPoints();return o}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(o,c){var p=o.copy();return this.normalize(p,c),p}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var o=arguments[0],c=this._shell,p=o._shell;return c.compareToSameClass(p)}if(arguments.length===2){var y=arguments[1],b=arguments[0],T=this._shell,D=b._shell,z=T.compareToSameClass(D,y);if(z!==0)return z;for(var W=this.getNumInteriorRing(),Y=b.getNumInteriorRing(),st=0;st<W&&st<Y;){var ft=this.getInteriorRingN(st),yt=b.getInteriorRingN(st),bt=ft.compareToSameClass(yt,y);if(bt!==0)return bt;st++}return st<W?1:st<Y?-1:0}}},{key:"apply",value:function(){if(Ot(arguments[0],Ys)){var o=arguments[0];this._shell.apply(o);for(var c=0;c<this._holes.length;c++)this._holes[c].apply(o)}else if(Ot(arguments[0],gr)){var p=arguments[0];if(this._shell.apply(p),!p.isDone())for(var y=0;y<this._holes.length&&(this._holes[y].apply(p),!p.isDone());y++);p.isGeometryChanged()&&this.geometryChanged()}else if(Ot(arguments[0],qs))arguments[0].filter(this);else if(Ot(arguments[0],G)){var b=arguments[0];b.filter(this),this._shell.apply(b);for(var T=0;T<this._holes.length;T++)this._holes[T].apply(b)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var o=new Array(this._holes.length+1).fill(null);o[0]=this._shell;for(var c=0;c<this._holes.length;c++)o[c+1]=this._holes[c];return o.length<=1?this.getFactory().createLinearRing(o[0].getCoordinateSequence()):this.getFactory().createMultiLineString(o)}},{key:"getGeometryType",value:function(){return kt.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(o){return this._holes[o]}},{key:"interfaces_",get:function(){return[Lt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var o=arguments[0],c=arguments[1],p=arguments[2];if(kt.constructor_.call(this,p),o===null&&(o=this.getFactory().createLinearRing()),c===null&&(c=[]),kt.hasNullElements(c))throw new F("holes must not contain null elements");if(o.isEmpty()&&kt.hasNonEmptyElements(c))throw new F("shell is empty but holes are not");this._shell=o,this._holes=c}}])}(kt),gu=function(h){function s(){return i(this,s),r(this,s,arguments)}return x(s,h),f(s)}(la),pa=function(h){function s(o){var c;return i(this,s),(c=r(this,s)).array=[],o instanceof xn&&c.addAll(o),c}return x(s,h),f(s,[{key:"contains",value:function(o){var c,p=g(this.array);try{for(p.s();!(c=p.n()).done;)if(c.value.compareTo(o)===0)return!0}catch(y){p.e(y)}finally{p.f()}return!1}},{key:"add",value:function(o){if(this.contains(o))return!1;for(var c=0,p=this.array.length;c<p;c++)if(this.array[c].compareTo(o)===1)return!!this.array.splice(c,0,o);return this.array.push(o),!0}},{key:"addAll",value:function(o){var c,p=g(o);try{for(p.s();!(c=p.n()).done;){var y=c.value;this.add(y)}}catch(b){p.e(b)}finally{p.f()}return!0}},{key:"remove",value:function(){throw new ui}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new pu(this.array)}}])}(gu),pu=function(){return f(function h(s){i(this,h),this.array=s,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new Gs;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new ui}}])}(),Ve=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"computeEnvelopeInternal",value:function(){for(var o=new $t,c=0;c<this._geometries.length;c++)o.expandToInclude(this._geometries[c].getEnvelopeInternal());return o}},{key:"getGeometryN",value:function(o){return this._geometries[o]}},{key:"getCoordinates",value:function(){for(var o=new Array(this.getNumPoints()).fill(null),c=-1,p=0;p<this._geometries.length;p++)for(var y=this._geometries[p].getCoordinates(),b=0;b<y.length;b++)o[++c]=y[b];return o}},{key:"getArea",value:function(){for(var o=0,c=0;c<this._geometries.length;c++)o+=this._geometries[c].getArea();return o}},{key:"copyInternal",value:function(){for(var o=new Array(this._geometries.length).fill(null),c=0;c<o.length;c++)o[c]=this._geometries[c].copy();return new s(o,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof kt){var o=arguments[0],c=arguments[1];if(!this.isEquivalentClass(o))return!1;var p=o;if(this._geometries.length!==p._geometries.length)return!1;for(var y=0;y<this._geometries.length;y++)if(!this._geometries[y].equalsExact(p._geometries[y],c))return!1;return!0}return C(s,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var o=0;o<this._geometries.length;o++)this._geometries[o].normalize();Re.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var o=ct.FALSE,c=0;c<this._geometries.length;c++)o=Math.max(o,this._geometries[c].getBoundaryDimension());return o}},{key:"reverseInternal",value:function(){for(var o=this._geometries.length,c=new Tt(o),p=0;p<o;p++)c.add(this._geometries[p].reverse());return this.getFactory().buildGeometry(c)}},{key:"getTypeCode",value:function(){return kt.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var o=ct.FALSE,c=0;c<this._geometries.length;c++)o=Math.max(o,this._geometries[c].getDimension());return o}},{key:"getLength",value:function(){for(var o=0,c=0;c<this._geometries.length;c++)o+=this._geometries[c].getLength();return o}},{key:"getNumPoints",value:function(){for(var o=0,c=0;c<this._geometries.length;c++)o+=this._geometries[c].getNumPoints();return o}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var o=arguments[0],c=new pa(Re.asList(this._geometries)),p=new pa(Re.asList(o._geometries));return this.compare(c,p)}if(arguments.length===2){for(var y=arguments[1],b=arguments[0],T=this.getNumGeometries(),D=b.getNumGeometries(),z=0;z<T&&z<D;){var W=this.getGeometryN(z),Y=b.getGeometryN(z),st=W.compareToSameClass(Y,y);if(st!==0)return st;z++}return z<T?1:z<D?-1:0}}},{key:"apply",value:function(){if(Ot(arguments[0],Ys))for(var o=arguments[0],c=0;c<this._geometries.length;c++)this._geometries[c].apply(o);else if(Ot(arguments[0],gr)){var p=arguments[0];if(this._geometries.length===0)return null;for(var y=0;y<this._geometries.length&&(this._geometries[y].apply(p),!p.isDone());y++);p.isGeometryChanged()&&this.geometryChanged()}else if(Ot(arguments[0],qs)){var b=arguments[0];b.filter(this);for(var T=0;T<this._geometries.length;T++)this._geometries[T].apply(b)}else if(Ot(arguments[0],G)){var D=arguments[0];D.filter(this);for(var z=0;z<this._geometries.length;z++)this._geometries[z].apply(D)}}},{key:"getBoundary",value:function(){return kt.checkNotGeometryCollection(this),pt.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return kt.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var o=0;o<this._geometries.length;o++)if(!this._geometries[o].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var o=arguments[0],c=arguments[1];if(kt.constructor_.call(this,c),o===null&&(o=[]),kt.hasNullElements(o))throw new F("geometries must not contain null elements");this._geometries=o}}}}])}(kt),Xs=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"copyInternal",value:function(){for(var o=new Array(this._geometries.length).fill(null),c=0;c<o.length;c++)o[c]=this._geometries[c].copy();return new s(o,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof kt){var o=arguments[0],c=arguments[1];return!!this.isEquivalentClass(o)&&C(s,"equalsExact",this,1).call(this,o,c)}return C(s,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var o=arguments[0];return this._geometries[o].getCoordinate()}return C(s,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return ct.FALSE}},{key:"getTypeCode",value:function(){return kt.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return kt.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[fu]}}],[{key:"constructor_",value:function(){var o=arguments[0],c=arguments[1];Ve.constructor_.call(this,o,c)}}])}(Ve),Hn=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"copyInternal",value:function(){return new s(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return ct.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||C(s,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var o=this._points.copy();return Ui.reverse(o),this.getFactory().createLinearRing(o)}},{key:"getTypeCode",value:function(){return kt.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!C(s,"isClosed",this,1).call(this))throw new F("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<s.MINIMUM_VALID_SIZE)throw new F("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return kt.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var o=arguments[0],c=arguments[1];ts.constructor_.call(this,o,c),this.validateConstruction()}}])}(ts);Hn.MINIMUM_VALID_SIZE=4;var ki=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"setOrdinate",value:function(o,c){switch(o){case s.X:this.x=c;break;case s.Y:this.y=c;break;default:throw new F("Invalid ordinate index: "+o)}}},{key:"getZ",value:function(){return Z.NULL_ORDINATE}},{key:"getOrdinate",value:function(o){switch(o){case s.X:return this.x;case s.Y:return this.y}throw new F("Invalid ordinate index: "+o)}},{key:"setZ",value:function(o){throw new F("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new s(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(o){this.x=o.x,this.y=o.y,this.z=o.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)Z.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof s){var o=arguments[0];Z.constructor_.call(this,o.x,o.y)}else if(arguments[0]instanceof Z){var c=arguments[0];Z.constructor_.call(this,c.x,c.y)}}else if(arguments.length===2){var p=arguments[0],y=arguments[1];Z.constructor_.call(this,p,y,Z.NULL_ORDINATE)}}}])}(Z);ki.X=0,ki.Y=1,ki.Z=-1,ki.M=-1;var Hi=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(o,c){switch(o){case s.X:this.x=c;break;case s.Y:this.y=c;break;case s.M:this._m=c;break;default:throw new F("Invalid ordinate index: "+o)}}},{key:"setM",value:function(o){this._m=o}},{key:"getZ",value:function(){return Z.NULL_ORDINATE}},{key:"getOrdinate",value:function(o){switch(o){case s.X:return this.x;case s.Y:return this.y;case s.M:return this._m}throw new F("Invalid ordinate index: "+o)}},{key:"setZ",value:function(o){throw new F("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new s(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(o){this.x=o.x,this.y=o.y,this.z=o.getZ(),this._m=o.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Z.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof s){var o=arguments[0];Z.constructor_.call(this,o.x,o.y),this._m=o._m}else if(arguments[0]instanceof Z){var c=arguments[0];Z.constructor_.call(this,c.x,c.y),this._m=this.getM()}}else if(arguments.length===3){var p=arguments[0],y=arguments[1],b=arguments[2];Z.constructor_.call(this,p,y,Z.NULL_ORDINATE),this._m=b}}}])}(Z);Hi.X=0,Hi.Y=1,Hi.Z=-1,Hi.M=2;var ma=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(o,c){switch(o){case Z.X:this.x=c;break;case Z.Y:this.y=c;break;case Z.Z:this.z=c;break;case Z.M:this._m=c;break;default:throw new F("Invalid ordinate index: "+o)}}},{key:"setM",value:function(o){this._m=o}},{key:"getOrdinate",value:function(o){switch(o){case Z.X:return this.x;case Z.Y:return this.y;case Z.Z:return this.getZ();case Z.M:return this.getM()}throw new F("Invalid ordinate index: "+o)}},{key:"copy",value:function(){return new s(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(o){this.x=o.x,this.y=o.y,this.z=o.getZ(),this._m=o.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)Z.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof s){var o=arguments[0];Z.constructor_.call(this,o),this._m=o._m}else if(arguments[0]instanceof Z){var c=arguments[0];Z.constructor_.call(this,c),this._m=this.getM()}}else if(arguments.length===4){var p=arguments[0],y=arguments[1],b=arguments[2],T=arguments[3];Z.constructor_.call(this,p,y,b),this._m=T}}}])}(Z),$s=function(){function h(){i(this,h)}return f(h,null,[{key:"measures",value:function(s){return s instanceof ki?0:s instanceof Hi||s instanceof ma?1:0}},{key:"dimension",value:function(s){return s instanceof ki?2:s instanceof Hi?3:s instanceof ma?4:3}},{key:"create",value:function(){if(arguments.length===1){var s=arguments[0];return h.create(s,0)}if(arguments.length===2){var o=arguments[0],c=arguments[1];return o===2?new ki:o===3&&c===0?new Z:o===3&&c===1?new Hi:o===4&&c===1?new ma:new Z}}}])}(),ns=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"getCoordinate",value:function(o){return this.get(o)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&Ot(arguments[0],xn)){for(var o=arguments[1],c=!1,p=arguments[0].iterator();p.hasNext();)this.add(p.next(),o),c=!0;return c}return C(s,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var o=C(s,"clone",this,1).call(this),c=0;c<this.size();c++)o.add(c,this.get(c).clone());return o}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(s.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(s.coordArrayType);for(var o=this.size(),c=new Array(o).fill(null),p=0;p<o;p++)c[p]=this.get(o-p-1);return c}}},{key:"add",value:function(){if(arguments.length===1){var o=arguments[0];return C(s,"add",this,1).call(this,o)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var c=arguments[0],p=arguments[1];return this.add(c,p,!0),!0}if(arguments[0]instanceof Z&&typeof arguments[1]=="boolean"){var y=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(y))return null;C(s,"add",this,1).call(this,y)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var b=arguments[0],T=arguments[1];return this.add(b,T),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var D=arguments[0],z=arguments[1];if(arguments[2])for(var W=0;W<D.length;W++)this.add(D[W],z);else for(var Y=D.length-1;Y>=0;Y--)this.add(D[Y],z);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Z){var st=arguments[0],ft=arguments[1];if(!arguments[2]){var yt=this.size();if(yt>0&&(st>0&&this.get(st-1).equals2D(ft)||st<yt&&this.get(st).equals2D(ft)))return null}C(s,"add",this,1).call(this,st,ft)}}else if(arguments.length===4){var bt=arguments[0],Gt=arguments[1],At=arguments[2],Jt=arguments[3],he=1;At>Jt&&(he=-1);for(var Pe=At;Pe!==Jt;Pe+=he)this.add(bt[Pe],Gt);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var o=this.get(0).copy();this.add(o,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var o=arguments[0];this.ensureCapacity(o.length),this.add(o,!0)}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.ensureCapacity(c.length),this.add(c,p)}}}}])}(Tt);ns.coordArrayType=new Array(0).fill(null);var xe=function(){function h(){i(this,h)}return f(h,null,[{key:"isRing",value:function(s){return!(s.length<4)&&!!s[0].equals2D(s[s.length-1])}},{key:"ptNotInList",value:function(s,o){for(var c=0;c<s.length;c++){var p=s[c];if(h.indexOf(p,o)<0)return p}return null}},{key:"scroll",value:function(s,o){var c=h.indexOf(o,s);if(c<0)return null;var p=new Array(s.length).fill(null);wn.arraycopy(s,c,p,0,s.length-c),wn.arraycopy(s,0,p,s.length-c,c),wn.arraycopy(p,0,s,0,s.length)}},{key:"equals",value:function(){if(arguments.length===2){var s=arguments[0],o=arguments[1];if(s===o)return!0;if(s===null||o===null||s.length!==o.length)return!1;for(var c=0;c<s.length;c++)if(!s[c].equals(o[c]))return!1;return!0}if(arguments.length===3){var p=arguments[0],y=arguments[1],b=arguments[2];if(p===y)return!0;if(p===null||y===null||p.length!==y.length)return!1;for(var T=0;T<p.length;T++)if(b.compare(p[T],y[T])!==0)return!1;return!0}}},{key:"intersection",value:function(s,o){for(var c=new ns,p=0;p<s.length;p++)o.intersects(s[p])&&c.add(s[p],!0);return c.toCoordinateArray()}},{key:"measures",value:function(s){if(s===null||s.length===0)return 0;var o,c=0,p=g(s);try{for(p.s();!(o=p.n()).done;){var y=o.value;c=Math.max(c,$s.measures(y))}}catch(b){p.e(b)}finally{p.f()}return c}},{key:"hasRepeatedPoints",value:function(s){for(var o=1;o<s.length;o++)if(s[o-1].equals(s[o]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(s){return h.hasRepeatedPoints(s)?new ns(s,!1).toCoordinateArray():s}},{key:"reverse",value:function(s){for(var o=s.length-1,c=Math.trunc(o/2),p=0;p<=c;p++){var y=s[p];s[p]=s[o-p],s[o-p]=y}}},{key:"removeNull",value:function(s){for(var o=0,c=0;c<s.length;c++)s[c]!==null&&o++;var p=new Array(o).fill(null);if(o===0)return p;for(var y=0,b=0;b<s.length;b++)s[b]!==null&&(p[y++]=s[b]);return p}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var s=arguments[0],o=new Array(s.length).fill(null),c=0;c<s.length;c++)o[c]=s[c].copy();return o}if(arguments.length===5)for(var p=arguments[0],y=arguments[1],b=arguments[2],T=arguments[3],D=arguments[4],z=0;z<D;z++)b[T+z]=p[y+z].copy()}},{key:"isEqualReversed",value:function(s,o){for(var c=0;c<s.length;c++){var p=s[c],y=o[s.length-c-1];if(p.compareTo(y)!==0)return!1}return!0}},{key:"envelope",value:function(s){for(var o=new $t,c=0;c<s.length;c++)o.expandToInclude(s[c]);return o}},{key:"toCoordinateArray",value:function(s){return s.toArray(h.coordArrayType)}},{key:"dimension",value:function(s){if(s===null||s.length===0)return 3;var o,c=0,p=g(s);try{for(p.s();!(o=p.n()).done;){var y=o.value;c=Math.max(c,$s.dimension(y))}}catch(b){p.e(b)}finally{p.f()}return c}},{key:"atLeastNCoordinatesOrNothing",value:function(s,o){return o.length>=s?o:[]}},{key:"indexOf",value:function(s,o){for(var c=0;c<o.length;c++)if(s.equals(o[c]))return c;return-1}},{key:"increasingDirection",value:function(s){for(var o=0;o<Math.trunc(s.length/2);o++){var c=s.length-1-o,p=s[o].compareTo(s[c]);if(p!==0)return p}return 1}},{key:"compare",value:function(s,o){for(var c=0;c<s.length&&c<o.length;){var p=s[c].compareTo(o[c]);if(p!==0)return p;c++}return c<o.length?-1:c<s.length?1:0}},{key:"minCoordinate",value:function(s){for(var o=null,c=0;c<s.length;c++)(o===null||o.compareTo(s[c])>0)&&(o=s[c]);return o}},{key:"extract",value:function(s,o,c){o=dr.clamp(o,0,s.length);var p=(c=dr.clamp(c,-1,s.length))-o+1;c<0&&(p=0),o>=s.length&&(p=0),c<o&&(p=0);var y=new Array(p).fill(null);if(p===0)return y;for(var b=0,T=o;T<=c;T++)y[b++]=s[T];return y}}])}(),Vh=function(){return f(function h(){i(this,h)},[{key:"compare",value:function(h,s){var o=h,c=s;return xe.compare(o,c)}},{key:"interfaces_",get:function(){return[_t]}}])}(),Ks=function(){return f(function h(){i(this,h)},[{key:"compare",value:function(h,s){var o=h,c=s;if(o.length<c.length)return-1;if(o.length>c.length)return 1;if(o.length===0)return 0;var p=xe.compare(o,c);return xe.isEqualReversed(o,c)?0:p}},{key:"OLDcompare",value:function(h,s){var o=h,c=s;if(o.length<c.length)return-1;if(o.length>c.length)return 1;if(o.length===0)return 0;for(var p=xe.increasingDirection(o),y=xe.increasingDirection(c),b=p>0?0:o.length-1,T=y>0?0:o.length-1,D=0;D<o.length;D++){var z=o[b].compareTo(c[T]);if(z!==0)return z;b+=p,T+=y}return 0}},{key:"interfaces_",get:function(){return[_t]}}])}();xe.ForwardComparator=Vh,xe.BidirectionalComparator=Ks,xe.coordArrayType=new Array(0).fill(null);var Qs=function(){return f(function h(s){i(this,h),this.str=s},[{key:"append",value:function(h){this.str+=h}},{key:"setCharAt",value:function(h,s){this.str=this.str.substr(0,h)+s+this.str.substr(h+1)}},{key:"toString",value:function(){return this.str}}])}(),is=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"getM",value:function(s){return this.hasM()?this._coordinates[s].getM():X.NaN}},{key:"setOrdinate",value:function(s,o,c){switch(o){case Bt.X:this._coordinates[s].x=c;break;case Bt.Y:this._coordinates[s].y=c;break;default:this._coordinates[s].setOrdinate(o,c)}}},{key:"getZ",value:function(s){return this.hasZ()?this._coordinates[s].getZ():X.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(s,o){switch(o){case Bt.X:return this._coordinates[s].x;case Bt.Y:return this._coordinates[s].y;default:return this._coordinates[s].getOrdinate(o)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var s=arguments[0];return this._coordinates[s]}if(arguments.length===2){var o=arguments[0];arguments[1].setCoordinate(this._coordinates[o])}}},{key:"getCoordinateCopy",value:function(s){var o=this.createCoordinate();return o.setCoordinate(this._coordinates[s]),o}},{key:"createCoordinate",value:function(){return $s.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(s){return this._coordinates[s].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(s){for(var o=0;o<this._coordinates.length;o++)s.expandToInclude(this._coordinates[o]);return s}},{key:"copy",value:function(){for(var s=new Array(this.size()).fill(null),o=0;o<this._coordinates.length;o++){var c=this.createCoordinate();c.setCoordinate(this._coordinates[o]),s[o]=c}return new h(s,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var s=new Qs(17*this._coordinates.length);s.append("("),s.append(this._coordinates[0]);for(var o=1;o<this._coordinates.length;o++)s.append(", "),s.append(this._coordinates[o]);return s.append(")"),s.toString()}return"()"}},{key:"getY",value:function(s){return this._coordinates[s].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[Bt,$]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var s=arguments[0];h.constructor_.call(this,s,xe.dimension(s),xe.measures(s))}else if(Number.isInteger(arguments[0])){var o=arguments[0];this._coordinates=new Array(o).fill(null);for(var c=0;c<o;c++)this._coordinates[c]=new Z}else if(Ot(arguments[0],Bt)){var p=arguments[0];if(p===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=p.getDimension(),this._measures=p.getMeasures(),this._coordinates=new Array(p.size()).fill(null);for(var y=0;y<this._coordinates.length;y++)this._coordinates[y]=p.getCoordinateCopy(y)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var b=arguments[0],T=arguments[1];h.constructor_.call(this,b,T,xe.measures(b))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var D=arguments[0],z=arguments[1];this._coordinates=new Array(D).fill(null),this._dimension=z;for(var W=0;W<D;W++)this._coordinates[W]=$s.create(z)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Y=arguments[0],st=arguments[1],ft=arguments[2];this._dimension=st,this._measures=ft,this._coordinates=Y===null?new Array(0).fill(null):Y}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var yt=arguments[0],bt=arguments[1],Gt=arguments[2];this._coordinates=new Array(yt).fill(null),this._dimension=bt,this._measures=Gt;for(var At=0;At<yt;At++)this._coordinates[At]=this.createCoordinate()}}}}])}(),_a=function(){function h(){i(this,h)}return f(h,[{key:"readResolve",value:function(){return h.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new is(arguments[0]);if(Ot(arguments[0],Bt))return new is(arguments[0])}else{if(arguments.length===2){var s=arguments[1];return s>3&&(s=3),s<2&&(s=2),new is(arguments[0],s)}if(arguments.length===3){var o=arguments[2],c=arguments[1]-o;return o>1&&(o=1),c>3&&(c=3),c<2&&(c=2),new is(arguments[0],c+o,o)}}}},{key:"interfaces_",get:function(){return[da,$]}}],[{key:"instance",value:function(){return h.instanceObject}}])}();_a.instanceObject=new _a;var va=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"copyInternal",value:function(){for(var o=new Array(this._geometries.length).fill(null),c=0;c<o.length;c++)o[c]=this._geometries[c].copy();return new s(o,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof kt){var o=arguments[0],c=arguments[1];return!!this.isEquivalentClass(o)&&C(s,"equalsExact",this,1).call(this,o,c)}return C(s,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return kt.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var o=new Tt,c=0;c<this._geometries.length;c++)for(var p=this._geometries[c].getBoundary(),y=0;y<p.getNumGeometries();y++)o.add(p.getGeometryN(y));var b=new Array(o.size()).fill(null);return this.getFactory().createMultiLineString(o.toArray(b))}},{key:"getGeometryType",value:function(){return kt.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Lt]}}],[{key:"constructor_",value:function(){var o=arguments[0],c=arguments[1];Ve.constructor_.call(this,o,c)}}])}(Ve),mu=function(){return f(function h(){i(this,h)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),ya=function(h){function s(){var o;return i(this,s),(o=r(this,s)).map=new Map,o}return x(s,h),f(s,[{key:"get",value:function(o){return this.map.get(o)||null}},{key:"put",value:function(o,c){return this.map.set(o,c),c}},{key:"values",value:function(){for(var o=new Tt,c=this.map.values(),p=c.next();!p.done;)o.add(p.value),p=c.next();return o}},{key:"entrySet",value:function(){var o=new Kr;return this.map.entries().forEach(function(c){return o.add(c)}),o}},{key:"size",value:function(){return this.map.size()}}])}(mu),Ze=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"equals",value:function(s){if(!(s instanceof h))return!1;var o=s;return this._modelType===o._modelType&&this._scale===o._scale}},{key:"compareTo",value:function(s){var o=s,c=this.getMaximumSignificantDigits(),p=o.getMaximumSignificantDigits();return fr.compare(c,p)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===h.FLOATING||this._modelType===h.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var s="UNKNOWN";return this._modelType===h.FLOATING?s="Floating":this._modelType===h.FLOATING_SINGLE?s="Floating-Single":this._modelType===h.FIXED&&(s="Fixed (Scale="+this.getScale()+")"),s}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var s=arguments[0];return X.isNaN(s)||this._modelType===h.FLOATING_SINGLE?s:this._modelType===h.FIXED?Math.round(s*this._scale)/this._scale:s}if(arguments[0]instanceof Z){var o=arguments[0];if(this._modelType===h.FLOATING)return null;o.x=this.makePrecise(o.x),o.y=this.makePrecise(o.y)}}},{key:"getMaximumSignificantDigits",value:function(){var s=16;return this._modelType===h.FLOATING?s=16:this._modelType===h.FLOATING_SINGLE?s=6:this._modelType===h.FIXED&&(s=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),s}},{key:"setScale",value:function(s){this._scale=Math.abs(s)}},{key:"interfaces_",get:function(){return[$,H]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=h.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Gi){var s=arguments[0];this._modelType=s,s===h.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var o=arguments[0];this._modelType=h.FIXED,this.setScale(o)}else if(arguments[0]instanceof h){var c=arguments[0];this._modelType=c._modelType,this._scale=c._scale}}}},{key:"mostPrecise",value:function(s,o){return s.compareTo(o)>=0?s:o}}])}(),Gi=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"readResolve",value:function(){return h.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[$]}}],[{key:"constructor_",value:function(){this._name=null;var s=arguments[0];this._name=s,h.nameToTypeMap.put(s,this)}}])}();Gi.nameToTypeMap=new ya,Ze.Type=Gi,Ze.FIXED=new Gi("FIXED"),Ze.FLOATING=new Gi("FLOATING"),Ze.FLOATING_SINGLE=new Gi("FLOATING SINGLE"),Ze.maximumPreciseValue=9007199254740992;var Js=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"copyInternal",value:function(){for(var o=new Array(this._geometries.length).fill(null),c=0;c<o.length;c++)o[c]=this._geometries[c].copy();return new s(o,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof kt){var o=arguments[0],c=arguments[1];return!!this.isEquivalentClass(o)&&C(s,"equalsExact",this,1).call(this,o,c)}return C(s,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?ct.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var o=0;o<this._geometries.length;o++)if(!this._geometries[o].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return kt.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new ui}},{key:"getGeometryType",value:function(){return kt.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[hu]}}],[{key:"constructor_",value:function(){var o=arguments[0],c=arguments[1];Ve.constructor_.call(this,o,c)}}])}(Ve),Gn=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"createEmpty",value:function(s){switch(s){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new F("Invalid dimension: "+s)}}},{key:"toGeometry",value:function(s){return s.isNull()?this.createPoint():s.getMinX()===s.getMaxX()&&s.getMinY()===s.getMaxY()?this.createPoint(new Z(s.getMinX(),s.getMinY())):s.getMinX()===s.getMaxX()||s.getMinY()===s.getMaxY()?this.createLineString([new Z(s.getMinX(),s.getMinY()),new Z(s.getMaxX(),s.getMaxY())]):this.createPolygon(this.createLinearRing([new Z(s.getMinX(),s.getMinY()),new Z(s.getMinX(),s.getMaxY()),new Z(s.getMaxX(),s.getMaxY()),new Z(s.getMaxX(),s.getMinY()),new Z(s.getMinX(),s.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var s=arguments[0];return this.createLineString(s!==null?this.getCoordinateSequenceFactory().create(s):null)}if(Ot(arguments[0],Bt))return new ts(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new Js(null,this):arguments.length===1?new Js(arguments[0],this):void 0}},{key:"buildGeometry",value:function(s){for(var o=null,c=!1,p=!1,y=s.iterator();y.hasNext();){var b=y.next(),T=b.getTypeCode();o===null&&(o=T),T!==o&&(c=!0),b instanceof Ve&&(p=!0)}if(o===null)return this.createGeometryCollection();if(c||p)return this.createGeometryCollection(h.toGeometryArray(s));var D=s.iterator().next();if(s.size()>1){if(D instanceof es)return this.createMultiPolygon(h.toPolygonArray(s));if(D instanceof ts)return this.createMultiLineString(h.toLineStringArray(s));if(D instanceof ga)return this.createMultiPoint(h.toPointArray(s));pt.shouldNeverReachHere("Unhandled geometry type: "+D.getGeometryType())}return D}},{key:"createMultiPointFromCoords",value:function(s){return this.createMultiPoint(s!==null?this.getCoordinateSequenceFactory().create(s):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Z){var s=arguments[0];return this.createPoint(s!==null?this.getCoordinateSequenceFactory().create([s]):null)}if(Ot(arguments[0],Bt))return new ga(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(Ot(arguments[0],Bt)){var s=arguments[0];return this.createPolygon(this.createLinearRing(s))}if(arguments[0]instanceof Array){var o=arguments[0];return this.createPolygon(this.createLinearRing(o))}if(arguments[0]instanceof Hn){var c=arguments[0];return this.createPolygon(c,null)}}else if(arguments.length===2)return new es(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Ve(null,this):arguments.length===1?new Ve(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var s=arguments[0];return this.createLinearRing(s!==null?this.getCoordinateSequenceFactory().create(s):null)}if(Ot(arguments[0],Bt))return new Hn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new va(null,this):arguments.length===1?new va(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new Xs(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new Xs(arguments[0],this);if(Ot(arguments[0],Bt)){var s=arguments[0];if(s===null)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(s.size()).fill(null),c=0;c<s.size();c++){var p=this.getCoordinateSequenceFactory().create(1,s.getDimension(),s.getMeasures());Ui.copy(s,c,p,0,1),o[c]=this.createPoint(p)}return this.createMultiPoint(o)}}}},{key:"interfaces_",get:function(){return[$]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)h.constructor_.call(this,new Ze,0);else if(arguments.length===1){if(Ot(arguments[0],da)){var s=arguments[0];h.constructor_.call(this,new Ze,0,s)}else if(arguments[0]instanceof Ze){var o=arguments[0];h.constructor_.call(this,o,0,h.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];h.constructor_.call(this,c,p,h.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var y=arguments[0],b=arguments[1],T=arguments[2];this._precisionModel=y,this._coordinateSequenceFactory=T,this._SRID=b}}},{key:"toMultiPolygonArray",value:function(s){var o=new Array(s.size()).fill(null);return s.toArray(o)}},{key:"toGeometryArray",value:function(s){if(s===null)return null;var o=new Array(s.size()).fill(null);return s.toArray(o)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return _a.instance()}},{key:"toMultiLineStringArray",value:function(s){var o=new Array(s.size()).fill(null);return s.toArray(o)}},{key:"toLineStringArray",value:function(s){var o=new Array(s.size()).fill(null);return s.toArray(o)}},{key:"toMultiPointArray",value:function(s){var o=new Array(s.size()).fill(null);return s.toArray(o)}},{key:"toLinearRingArray",value:function(s){var o=new Array(s.size()).fill(null);return s.toArray(o)}},{key:"toPointArray",value:function(s){var o=new Array(s.size()).fill(null);return s.toArray(o)}},{key:"toPolygonArray",value:function(s){var o=new Array(s.size()).fill(null);return s.toArray(o)}},{key:"createPointFromInternalCoord",value:function(s,o){return o.getPrecisionModel().makePrecise(s),o.getFactory().createPoint(s)}}])}(),Ht="XY",ae="XYZ",to="XYM",pr="XYZM",Wi={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},eo="EMPTY",It=1,Xt=2,Wn=3,rs=4,Me=5,Zh=6;for(var no in Wi)Wi[no].toUpperCase();var Vi=function(){return f(function h(s){i(this,h),this.wkt=s,this.index_=-1},[{key:"isAlpha_",value:function(h){return h>="a"&&h<="z"||h>="A"&&h<="Z"}},{key:"isNumeric_",value:function(h,s){return h>="0"&&h<="9"||h=="."&&!(s!==void 0&&s)}},{key:"isWhiteSpace_",value:function(h){return h==" "||h=="	"||h=="\r"||h==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var h,s=this.nextChar_(),o=this.index_,c=s;if(s=="(")h=Xt;else if(s==",")h=Me;else if(s==")")h=Wn;else if(this.isNumeric_(s)||s=="-")h=rs,c=this.readNumber_();else if(this.isAlpha_(s))h=It,c=this.readText_();else{if(this.isWhiteSpace_(s))return this.nextToken();if(s!=="")throw new Error("Unexpected character: "+s);h=Zh}return{position:o,value:c,type:h}}},{key:"readNumber_",value:function(){var h,s=this.index_,o=!1,c=!1;do h=="."?o=!0:h!="e"&&h!="E"||(c=!0),h=this.nextChar_();while(this.isNumeric_(h,o)||!c&&(h=="e"||h=="E")||c&&(h=="-"||h=="+"));return parseFloat(this.wkt.substring(s,this.index_--))}},{key:"readText_",value:function(){var h,s=this.index_;do h=this.nextChar_();while(this.isAlpha_(h));return this.wkt.substring(s,this.index_--).toUpperCase()}}])}(),we=function(){return f(function h(s,o){i(this,h),this.lexer_=s,this.token_,this.layout_=Ht,this.factory=o},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(h){return this.token_.type==h}},{key:"match",value:function(h){var s=this.isTokenType(h);return s&&this.consume_(),s}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var h=Ht,s=this.token_;if(this.isTokenType(It)){var o=s.value;o==="Z"?h=ae:o==="M"?h=to:o==="ZM"&&(h=pr),h!==Ht&&this.consume_()}return h}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Xt)){var h=[];do h.push(this.parseGeometry_());while(this.match(Me));if(this.match(Wn))return h}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Xt)){var h=this.parsePoint_();if(this.match(Wn))return h}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Xt)){var h=this.parsePointList_();if(this.match(Wn))return h}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Xt)){var h=this.parseLineStringTextList_();if(this.match(Wn))return h}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var h;if(this.match(Xt)){if(h=this.token_.type==Xt?this.parsePointTextList_():this.parsePointList_(),this.match(Wn))return h}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Xt)){var h=this.parseLineStringTextList_();if(this.match(Wn))return h}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Xt)){var h=this.parsePolygonTextList_();if(this.match(Wn))return h}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var h=[],s=this.layout_.length,o=0;o<s;++o){var c=this.token_;if(!this.match(rs))break;h.push(c.value)}if(h.length==s)return h;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var h=[this.parsePoint_()];this.match(Me);)h.push(this.parsePoint_());return h}},{key:"parsePointTextList_",value:function(){for(var h=[this.parsePointText_()];this.match(Me);)h.push(this.parsePointText_());return h}},{key:"parseLineStringTextList_",value:function(){for(var h=[this.parseLineStringText_()];this.match(Me);)h.push(this.parseLineStringText_());return h}},{key:"parsePolygonTextList_",value:function(){for(var h=[this.parsePolygonText_()];this.match(Me);)h.push(this.parsePolygonText_());return h}},{key:"isEmptyGeometry_",value:function(){var h=this.isTokenType(It)&&this.token_.value==eo;return h&&this.consume_(),h}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var h=this.factory,s=function(bt){return a(Z,N(bt))},o=function(bt){var Gt=bt.map(function(At){return h.createLinearRing(At.map(s))});return Gt.length>1?h.createPolygon(Gt[0],Gt.slice(1)):h.createPolygon(Gt[0])},c=this.token_;if(this.match(It)){var p=c.value;if(this.layout_=this.parseGeometryLayout_(),p=="GEOMETRYCOLLECTION"){var y=this.parseGeometryCollectionText_();return h.createGeometryCollection(y)}switch(p){case"POINT":var b=this.parsePointText_();return b?h.createPoint(a(Z,N(b))):h.createPoint();case"LINESTRING":var T=this.parseLineStringText_().map(s);return h.createLineString(T);case"LINEARRING":var D=this.parseLineStringText_().map(s);return h.createLinearRing(D);case"POLYGON":var z=this.parsePolygonText_();return z&&z.length!==0?o(z):h.createPolygon();case"MULTIPOINT":var W=this.parseMultiPointText_();if(!W||W.length===0)return h.createMultiPoint();var Y=W.map(s).map(function(bt){return h.createPoint(bt)});return h.createMultiPoint(Y);case"MULTILINESTRING":var st=this.parseMultiLineStringText_().map(function(bt){return h.createLineString(bt.map(s))});return h.createMultiLineString(st);case"MULTIPOLYGON":var ft=this.parseMultiPolygonText_();if(!ft||ft.length===0)return h.createMultiPolygon();var yt=ft.map(o);return h.createMultiPolygon(yt);default:throw new Error("Invalid geometry type: "+p)}}throw new Error(this.formatErrorMessage_())}}])}();function Li(h){if(h.isEmpty())return"";var s=h.getCoordinate(),o=[s.x,s.y];return s.z===void 0||Number.isNaN(s.z)||o.push(s.z),s.m===void 0||Number.isNaN(s.m)||o.push(s.m),o.join(" ")}function ci(h){for(var s=h.getCoordinates().map(function(y){var b=[y.x,y.y];return y.z===void 0||Number.isNaN(y.z)||b.push(y.z),y.m===void 0||Number.isNaN(y.m)||b.push(y.m),b}),o=[],c=0,p=s.length;c<p;++c)o.push(s[c].join(" "));return o.join(", ")}function mr(h){var s=[];s.push("("+ci(h.getExteriorRing())+")");for(var o=0,c=h.getNumInteriorRing();o<c;++o)s.push("("+ci(h.getInteriorRingN(o))+")");return s.join(", ")}var xa={Point:Li,LineString:ci,LinearRing:ci,Polygon:mr,MultiPoint:function(h){for(var s=[],o=0,c=h.getNumGeometries();o<c;++o)s.push("("+Li(h.getGeometryN(o))+")");return s.join(", ")},MultiLineString:function(h){for(var s=[],o=0,c=h.getNumGeometries();o<c;++o)s.push("("+ci(h.getGeometryN(o))+")");return s.join(", ")},MultiPolygon:function(h){for(var s=[],o=0,c=h.getNumGeometries();o<c;++o)s.push("("+mr(h.getGeometryN(o))+")");return s.join(", ")},GeometryCollection:function(h){for(var s=[],o=0,c=h.getNumGeometries();o<c;++o)s.push(_r(h.getGeometryN(o)));return s.join(", ")}};function _r(h){var s=h.getGeometryType(),o=xa[s];s=s.toUpperCase();var c=function(p){var y="";if(p.isEmpty())return y;var b=p.getCoordinate();return b.z===void 0||Number.isNaN(b.z)||(y+="Z"),b.m===void 0||Number.isNaN(b.m)||(y+="M"),y}(h);return c.length>0&&(s+=" "+c),h.isEmpty()?s+" "+eo:s+" ("+o(h)+")"}var wa=function(){return f(function h(s){i(this,h),this.geometryFactory=s||new Gn,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(h){var s=new Vi(h);return new we(s,this.geometryFactory).parse()}},{key:"write",value:function(h){return _r(h)}}])}(),ss=function(){return f(function h(s){i(this,h),this.parser=new wa(s)},[{key:"write",value:function(h){return this.parser.write(h)}}],[{key:"toLineString",value:function(h,s){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+h.x+" "+h.y+", "+s.x+" "+s.y+" )"}}])}(),Kt=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"getIndexAlongSegment",value:function(s,o){return this.computeIntLineIndex(),this._intLineIndex[s][o]}},{key:"getTopologySummary",value:function(){var s=new Qs;return this.isEndPoint()&&s.append(" endpoint"),this._isProper&&s.append(" proper"),this.isCollinear()&&s.append(" collinear"),s.toString()}},{key:"computeIntersection",value:function(s,o,c,p){this._inputLines[0][0]=s,this._inputLines[0][1]=o,this._inputLines[1][0]=c,this._inputLines[1][1]=p,this._result=this.computeIntersect(s,o,c,p)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var s=arguments[0];this.getEdgeDistance(s,0)>this.getEdgeDistance(s,1)?(this._intLineIndex[s][0]=0,this._intLineIndex[s][1]=1):(this._intLineIndex[s][0]=1,this._intLineIndex[s][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(s){this._precisionModel=s}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var s=arguments[0],o=0;o<this._result;o++)if(!this._intPt[o].equals2D(this._inputLines[s][0])&&!this._intPt[o].equals2D(this._inputLines[s][1]))return!0;return!1}}},{key:"getIntersection",value:function(s){return this._intPt[s]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==h.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(s,o){return h.computeEdgeDistance(this._intPt[o],this._inputLines[s][0],this._inputLines[s][1])}},{key:"isCollinear",value:function(){return this._result===h.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return ss.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+ss.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(s,o){return this._inputLines[s][o]}},{key:"isIntersection",value:function(s){for(var o=0;o<this._result;o++)if(this._intPt[o].equals2D(s))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(s,o){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[s][o]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Z,this._intPt[1]=new Z,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(s,o,c){var p=Math.abs(c.x-o.x),y=Math.abs(c.y-o.y),b=-1;if(s.equals(o))b=0;else if(s.equals(c))b=p>y?p:y;else{var T=Math.abs(s.x-o.x),D=Math.abs(s.y-o.y);(b=p>y?T:D)!==0||s.equals(o)||(b=Math.max(T,D))}return pt.isTrue(!(b===0&&!s.equals(o)),"Bad distance calculation"),b}},{key:"nonRobustComputeEdgeDistance",value:function(s,o,c){var p=s.x-o.x,y=s.y-o.y,b=Math.sqrt(p*p+y*y);return pt.isTrue(!(b===0&&!s.equals(o)),"Invalid distance calculation"),b}}])}();Kt.DONT_INTERSECT=0,Kt.DO_INTERSECT=1,Kt.COLLINEAR=2,Kt.NO_INTERSECTION=0,Kt.POINT_INTERSECTION=1,Kt.COLLINEAR_INTERSECTION=2;var hi=function(h){function s(){return i(this,s),r(this,s)}return x(s,h),f(s,[{key:"isInSegmentEnvelopes",value:function(o){var c=new $t(this._inputLines[0][0],this._inputLines[0][1]),p=new $t(this._inputLines[1][0],this._inputLines[1][1]);return c.contains(o)&&p.contains(o)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return C(s,"computeIntersection",this,1).apply(this,arguments);var o=arguments[0],c=arguments[1],p=arguments[2];if(this._isProper=!1,$t.intersects(c,p,o)&&Mt.index(c,p,o)===0&&Mt.index(p,c,o)===0)return this._isProper=!0,(o.equals(c)||o.equals(p))&&(this._isProper=!1),this._result=Kt.POINT_INTERSECTION,null;this._result=Kt.NO_INTERSECTION}},{key:"intersection",value:function(o,c,p,y){var b=this.intersectionSafe(o,c,p,y);return this.isInSegmentEnvelopes(b)||(b=new Z(s.nearestEndpoint(o,c,p,y))),this._precisionModel!==null&&this._precisionModel.makePrecise(b),b}},{key:"checkDD",value:function(o,c,p,y,b){var T=ca.intersection(o,c,p,y),D=this.isInSegmentEnvelopes(T);wn.out.println("DD in env = "+D+"  --------------------- "+T),b.distance(T)>1e-4&&wn.out.println("Distance = "+b.distance(T))}},{key:"intersectionSafe",value:function(o,c,p,y){var b=fa.intersection(o,c,p,y);return b===null&&(b=s.nearestEndpoint(o,c,p,y)),b}},{key:"computeCollinearIntersection",value:function(o,c,p,y){var b=$t.intersects(o,c,p),T=$t.intersects(o,c,y),D=$t.intersects(p,y,o),z=$t.intersects(p,y,c);return b&&T?(this._intPt[0]=p,this._intPt[1]=y,Kt.COLLINEAR_INTERSECTION):D&&z?(this._intPt[0]=o,this._intPt[1]=c,Kt.COLLINEAR_INTERSECTION):b&&D?(this._intPt[0]=p,this._intPt[1]=o,!p.equals(o)||T||z?Kt.COLLINEAR_INTERSECTION:Kt.POINT_INTERSECTION):b&&z?(this._intPt[0]=p,this._intPt[1]=c,!p.equals(c)||T||D?Kt.COLLINEAR_INTERSECTION:Kt.POINT_INTERSECTION):T&&D?(this._intPt[0]=y,this._intPt[1]=o,!y.equals(o)||b||z?Kt.COLLINEAR_INTERSECTION:Kt.POINT_INTERSECTION):T&&z?(this._intPt[0]=y,this._intPt[1]=c,!y.equals(c)||b||D?Kt.COLLINEAR_INTERSECTION:Kt.POINT_INTERSECTION):Kt.NO_INTERSECTION}},{key:"computeIntersect",value:function(o,c,p,y){if(this._isProper=!1,!$t.intersects(o,c,p,y))return Kt.NO_INTERSECTION;var b=Mt.index(o,c,p),T=Mt.index(o,c,y);if(b>0&&T>0||b<0&&T<0)return Kt.NO_INTERSECTION;var D=Mt.index(p,y,o),z=Mt.index(p,y,c);return D>0&&z>0||D<0&&z<0?Kt.NO_INTERSECTION:b===0&&T===0&&D===0&&z===0?this.computeCollinearIntersection(o,c,p,y):(b===0||T===0||D===0||z===0?(this._isProper=!1,o.equals2D(p)||o.equals2D(y)?this._intPt[0]=o:c.equals2D(p)||c.equals2D(y)?this._intPt[0]=c:b===0?this._intPt[0]=new Z(p):T===0?this._intPt[0]=new Z(y):D===0?this._intPt[0]=new Z(o):z===0&&(this._intPt[0]=new Z(c))):(this._isProper=!0,this._intPt[0]=this.intersection(o,c,p,y)),Kt.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(o,c,p,y){var b=o,T=In.pointToSegment(o,p,y),D=In.pointToSegment(c,p,y);return D<T&&(T=D,b=c),(D=In.pointToSegment(p,o,c))<T&&(T=D,b=p),(D=In.pointToSegment(y,o,c))<T&&(T=D,b=y),b}}])}(Kt),ka=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"countSegment",value:function(s,o){if(s.x<this._p.x&&o.x<this._p.x)return null;if(this._p.x===o.x&&this._p.y===o.y)return this._isPointOnSegment=!0,null;if(s.y===this._p.y&&o.y===this._p.y){var c=s.x,p=o.x;return c>p&&(c=o.x,p=s.x),this._p.x>=c&&this._p.x<=p&&(this._isPointOnSegment=!0),null}if(s.y>this._p.y&&o.y<=this._p.y||o.y>this._p.y&&s.y<=this._p.y){var y=Mt.index(s,o,this._p);if(y===Mt.COLLINEAR)return this._isPointOnSegment=!0,null;o.y<s.y&&(y=-y),y===Mt.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==j.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?j.BOUNDARY:this._crossingCount%2==1?j.INTERIOR:j.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var s=arguments[0];this._p=s}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof Z&&Ot(arguments[1],Bt)){for(var s=arguments[1],o=new h(arguments[0]),c=new Z,p=new Z,y=1;y<s.size();y++)if(s.getCoordinate(y,c),s.getCoordinate(y-1,p),o.countSegment(c,p),o.isOnSegment())return o.getLocation();return o.getLocation()}if(arguments[0]instanceof Z&&arguments[1]instanceof Array){for(var b=arguments[1],T=new h(arguments[0]),D=1;D<b.length;D++){var z=b[D],W=b[D-1];if(T.countSegment(z,W),T.isOnSegment())return T.getLocation()}return T.getLocation()}}}])}(),vr=function(){function h(){i(this,h)}return f(h,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof Z&&Ot(arguments[1],Bt)){for(var s=arguments[0],o=arguments[1],c=new hi,p=new Z,y=new Z,b=o.size(),T=1;T<b;T++)if(o.getCoordinate(T-1,p),o.getCoordinate(T,y),c.computeIntersection(s,p,y),c.hasIntersection())return!0;return!1}if(arguments[0]instanceof Z&&arguments[1]instanceof Array){for(var D=arguments[0],z=arguments[1],W=new hi,Y=1;Y<z.length;Y++){var st=z[Y-1],ft=z[Y];if(W.computeIntersection(D,st,ft),W.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(s,o){return ka.locatePointInRing(s,o)}},{key:"isInRing",value:function(s,o){return h.locateInRing(s,o)!==j.EXTERIOR}}])}(),un=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"setAllLocations",value:function(s){for(var o=0;o<this.location.length;o++)this.location[o]=s}},{key:"isNull",value:function(){for(var s=0;s<this.location.length;s++)if(this.location[s]!==j.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(s){for(var o=0;o<this.location.length;o++)this.location[o]===j.NONE&&(this.location[o]=s)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(s){if(s.location.length>this.location.length){var o=new Array(3).fill(null);o[ut.ON]=this.location[ut.ON],o[ut.LEFT]=j.NONE,o[ut.RIGHT]=j.NONE,this.location=o}for(var c=0;c<this.location.length;c++)this.location[c]===j.NONE&&c<s.location.length&&(this.location[c]=s.location[c])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var s=this.location[ut.LEFT];this.location[ut.LEFT]=this.location[ut.RIGHT],this.location[ut.RIGHT]=s}},{key:"toString",value:function(){var s=new Qr;return this.location.length>1&&s.append(j.toLocationSymbol(this.location[ut.LEFT])),s.append(j.toLocationSymbol(this.location[ut.ON])),this.location.length>1&&s.append(j.toLocationSymbol(this.location[ut.RIGHT])),s.toString()}},{key:"setLocations",value:function(s,o,c){this.location[ut.ON]=s,this.location[ut.LEFT]=o,this.location[ut.RIGHT]=c}},{key:"get",value:function(s){return s<this.location.length?this.location[s]:j.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var s=0;s<this.location.length;s++)if(this.location[s]===j.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var s=arguments[0];this.setLocation(ut.ON,s)}else if(arguments.length===2){var o=arguments[0],c=arguments[1];this.location[o]=c}}},{key:"init",value:function(s){this.location=new Array(s).fill(null),this.setAllLocations(j.NONE)}},{key:"isEqualOnSide",value:function(s,o){return this.location[o]===s.location[o]}},{key:"allPositionsEqual",value:function(s){for(var o=0;o<this.location.length;o++)if(this.location[o]!==s)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var s=arguments[0];this.init(s.length)}else if(Number.isInteger(arguments[0])){var o=arguments[0];this.init(1),this.location[ut.ON]=o}else if(arguments[0]instanceof h){var c=arguments[0];if(this.init(c.location.length),c!==null)for(var p=0;p<this.location.length;p++)this.location[p]=c.location[p]}}else if(arguments.length===3){var y=arguments[0],b=arguments[1],T=arguments[2];this.init(3),this.location[ut.ON]=y,this.location[ut.LEFT]=b,this.location[ut.RIGHT]=T}}}])}(),Qe=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"getGeometryCount",value:function(){var s=0;return this.elt[0].isNull()||s++,this.elt[1].isNull()||s++,s}},{key:"setAllLocations",value:function(s,o){this.elt[s].setAllLocations(o)}},{key:"isNull",value:function(s){return this.elt[s].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var s=arguments[0];this.setAllLocationsIfNull(0,s),this.setAllLocationsIfNull(1,s)}else if(arguments.length===2){var o=arguments[0],c=arguments[1];this.elt[o].setAllLocationsIfNull(c)}}},{key:"isLine",value:function(s){return this.elt[s].isLine()}},{key:"merge",value:function(s){for(var o=0;o<2;o++)this.elt[o]===null&&s.elt[o]!==null?this.elt[o]=new un(s.elt[o]):this.elt[o].merge(s.elt[o])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var s=arguments[0];return this.elt[s].get(ut.ON)}if(arguments.length===2){var o=arguments[0],c=arguments[1];return this.elt[o].get(c)}}},{key:"toString",value:function(){var s=new Qr;return this.elt[0]!==null&&(s.append("A:"),s.append(this.elt[0].toString())),this.elt[1]!==null&&(s.append(" B:"),s.append(this.elt[1].toString())),s.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var s=arguments[0];return this.elt[s].isArea()}}},{key:"isAnyNull",value:function(s){return this.elt[s].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var s=arguments[0],o=arguments[1];this.elt[s].setLocation(ut.ON,o)}else if(arguments.length===3){var c=arguments[0],p=arguments[1],y=arguments[2];this.elt[c].setLocation(p,y)}}},{key:"isEqualOnSide",value:function(s,o){return this.elt[0].isEqualOnSide(s.elt[0],o)&&this.elt[1].isEqualOnSide(s.elt[1],o)}},{key:"allPositionsEqual",value:function(s,o){return this.elt[s].allPositionsEqual(o)}},{key:"toLine",value:function(s){this.elt[s].isArea()&&(this.elt[s]=new un(this.elt[s].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var s=arguments[0];this.elt[0]=new un(s),this.elt[1]=new un(s)}else if(arguments[0]instanceof h){var o=arguments[0];this.elt[0]=new un(o.elt[0]),this.elt[1]=new un(o.elt[1])}}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.elt[0]=new un(j.NONE),this.elt[1]=new un(j.NONE),this.elt[c].setLocation(p)}else if(arguments.length===3){var y=arguments[0],b=arguments[1],T=arguments[2];this.elt[0]=new un(y,b,T),this.elt[1]=new un(y,b,T)}else if(arguments.length===4){var D=arguments[0],z=arguments[1],W=arguments[2],Y=arguments[3];this.elt[0]=new un(j.NONE,j.NONE,j.NONE),this.elt[1]=new un(j.NONE,j.NONE,j.NONE),this.elt[D].setLocations(z,W,Y)}}},{key:"toLineLabel",value:function(s){for(var o=new h(j.NONE),c=0;c<2;c++)o.setLocation(c,s.getLocation(c));return o}}])}(),io=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var h=new Array(this._pts.size()).fill(null),s=0;s<this._pts.size();s++)h[s]=this._pts.get(s);this._ring=this._geometryFactory.createLinearRing(h),this._isHole=Mt.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(h){this._startDe=h;var s=h,o=!0;do{if(s===null)throw new Un("Found null DirectedEdge");if(s.getEdgeRing()===this)throw new Un("Directed Edge visited twice during ring-building at "+s.getCoordinate());this._edges.add(s);var c=s.getLabel();pt.isTrue(c.isArea()),this.mergeLabel(c),this.addPoints(s.getEdge(),s.isForward(),o),o=!1,this.setEdgeRing(s,this),s=this.getNext(s)}while(s!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(h){return this._pts.get(h)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var h=this._startDe;do{var s=h.getNode().getEdges().getOutgoingDegree(this);s>this._maxNodeDegree&&(this._maxNodeDegree=s),h=this.getNext(h)}while(h!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(h,s,o){var c=h.getCoordinates();if(s){var p=1;o&&(p=0);for(var y=p;y<c.length;y++)this._pts.add(c[y])}else{var b=c.length-2;o&&(b=c.length-1);for(var T=b;T>=0;T--)this._pts.add(c[T])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var h=this._startDe;do h.getEdge().setInResult(!0),h=h.getNext();while(h!==this._startDe)}},{key:"containsPoint",value:function(h){var s=this.getLinearRing();if(!s.getEnvelopeInternal().contains(h)||!vr.isInRing(h,s.getCoordinates()))return!1;for(var o=this._holes.iterator();o.hasNext();)if(o.next().containsPoint(h))return!1;return!0}},{key:"addHole",value:function(h){this._holes.add(h)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var h=arguments[0];this.mergeLabel(h,0),this.mergeLabel(h,1)}else if(arguments.length===2){var s=arguments[1],o=arguments[0].getLocation(s,ut.RIGHT);if(o===j.NONE)return null;if(this._label.getLocation(s)===j.NONE)return this._label.setLocation(s,o),null}}},{key:"setShell",value:function(h){this._shell=h,h!==null&&h.addHole(this)}},{key:"toPolygon",value:function(h){for(var s=new Array(this._holes.size()).fill(null),o=0;o<this._holes.size();o++)s[o]=this._holes.get(o).getLinearRing();return h.createPolygon(this.getLinearRing(),s)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new Tt,this._pts=new Tt,this._label=new Qe(j.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Tt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var h=arguments[0],s=arguments[1];this._geometryFactory=s,this.computePoints(h),this.computeRing()}}}}])}(),Dt=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"setEdgeRing",value:function(o,c){o.setMinEdgeRing(c)}},{key:"getNext",value:function(o){return o.getNextMin()}}],[{key:"constructor_",value:function(){var o=arguments[0],c=arguments[1];io.constructor_.call(this,o,c)}}])}(io),Vn=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"buildMinimalRings",value:function(){var o=new Tt,c=this._startDe;do{if(c.getMinEdgeRing()===null){var p=new Dt(c,this._geometryFactory);o.add(p)}c=c.getNext()}while(c!==this._startDe);return o}},{key:"setEdgeRing",value:function(o,c){o.setEdgeRing(c)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var o=this._startDe;do o.getNode().getEdges().linkMinimalDirectedEdges(this),o=o.getNext();while(o!==this._startDe)}},{key:"getNext",value:function(o){return o.getNext()}}],[{key:"constructor_",value:function(){var o=arguments[0],c=arguments[1];io.constructor_.call(this,o,c)}}])}(io),Qt=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(h){this._isVisited=h}},{key:"setInResult",value:function(h){this._isInResult=h}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(h){this._label=h}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(h){this._isCovered=h,this._isCoveredSet=!0}},{key:"updateIM",value:function(h){pt.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(h)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var h=arguments[0];this._label=h}}}}])}(),os=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"isIncidentEdgeInResult",value:function(){for(var o=this.getEdges().getEdges().iterator();o.hasNext();)if(o.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(o){o.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(o){}},{key:"computeMergedLocation",value:function(o,c){var p=j.NONE;if(p=this._label.getLocation(c),!o.isNull(c)){var y=o.getLocation(c);p!==j.BOUNDARY&&(p=y)}return p}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return C(s,"setLabel",this,1).apply(this,arguments);var o=arguments[0],c=arguments[1];this._label===null?this._label=new Qe(o,c):this._label.setLocation(o,c)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof s){var o=arguments[0];this.mergeLabel(o._label)}else if(arguments[0]instanceof Qe)for(var c=arguments[0],p=0;p<2;p++){var y=this.computeMergedLocation(c,p);this._label.getLocation(p)===j.NONE&&this._label.setLocation(p,y)}}},{key:"add",value:function(o){this._edges.insert(o),o.setNode(this)}},{key:"setLabelBoundary",value:function(o){if(this._label===null)return null;var c=j.NONE;this._label!==null&&(c=this._label.getLocation(o));var p=null;switch(c){case j.BOUNDARY:p=j.INTERIOR;break;case j.INTERIOR:default:p=j.BOUNDARY}this._label.setLocation(o,p)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var o=arguments[0],c=arguments[1];this._coord=o,this._edges=c,this._label=new Qe(0,j.NONE)}}])}(Qt),La=function(h){function s(){return i(this,s),r(this,s,arguments)}return x(s,h),f(s)}(mu);function ro(h){return h==null?0:h.color}function Vt(h){return h==null?null:h.parent}function Ae(h,s){h!==null&&(h.color=s)}function as(h){return h==null?null:h.left}function yr(h){return h==null?null:h.right}var de=function(h){function s(){var o;return i(this,s),(o=r(this,s)).root_=null,o.size_=0,o}return x(s,h),f(s,[{key:"get",value:function(o){for(var c=this.root_;c!==null;){var p=o.compareTo(c.key);if(p<0)c=c.left;else{if(!(p>0))return c.value;c=c.right}}return null}},{key:"put",value:function(o,c){if(this.root_===null)return this.root_={key:o,value:c,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var p,y,b=this.root_;do if(p=b,(y=o.compareTo(b.key))<0)b=b.left;else{if(!(y>0)){var T=b.value;return b.value=c,T}b=b.right}while(b!==null);var D={key:o,left:null,right:null,value:c,parent:p,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return y<0?p.left=D:p.right=D,this.fixAfterInsertion(D),this.size_++,null}},{key:"fixAfterInsertion",value:function(o){var c;for(o.color=1;o!=null&&o!==this.root_&&o.parent.color===1;)Vt(o)===as(Vt(Vt(o)))?ro(c=yr(Vt(Vt(o))))===1?(Ae(Vt(o),0),Ae(c,0),Ae(Vt(Vt(o)),1),o=Vt(Vt(o))):(o===yr(Vt(o))&&(o=Vt(o),this.rotateLeft(o)),Ae(Vt(o),0),Ae(Vt(Vt(o)),1),this.rotateRight(Vt(Vt(o)))):ro(c=as(Vt(Vt(o))))===1?(Ae(Vt(o),0),Ae(c,0),Ae(Vt(Vt(o)),1),o=Vt(Vt(o))):(o===as(Vt(o))&&(o=Vt(o),this.rotateRight(o)),Ae(Vt(o),0),Ae(Vt(Vt(o)),1),this.rotateLeft(Vt(Vt(o))));this.root_.color=0}},{key:"values",value:function(){var o=new Tt,c=this.getFirstEntry();if(c!==null)for(o.add(c.value);(c=s.successor(c))!==null;)o.add(c.value);return o}},{key:"entrySet",value:function(){var o=new Kr,c=this.getFirstEntry();if(c!==null)for(o.add(c);(c=s.successor(c))!==null;)o.add(c);return o}},{key:"rotateLeft",value:function(o){if(o!=null){var c=o.right;o.right=c.left,c.left!=null&&(c.left.parent=o),c.parent=o.parent,o.parent==null?this.root_=c:o.parent.left===o?o.parent.left=c:o.parent.right=c,c.left=o,o.parent=c}}},{key:"rotateRight",value:function(o){if(o!=null){var c=o.left;o.left=c.right,c.right!=null&&(c.right.parent=o),c.parent=o.parent,o.parent==null?this.root_=c:o.parent.right===o?o.parent.right=c:o.parent.left=c,c.right=o,o.parent=c}}},{key:"getFirstEntry",value:function(){var o=this.root_;if(o!=null)for(;o.left!=null;)o=o.left;return o}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(o){for(var c=this.root_;c!==null;){var p=o.compareTo(c.key);if(p<0)c=c.left;else{if(!(p>0))return!0;c=c.right}}return!1}}],[{key:"successor",value:function(o){var c;if(o===null)return null;if(o.right!==null){for(c=o.right;c.left!==null;)c=c.left;return c}c=o.parent;for(var p=o;c!==null&&p===c.right;)p=c,c=c.parent;return c}}])}(La),bi=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"find",value:function(h){return this.nodeMap.get(h)}},{key:"addNode",value:function(){if(arguments[0]instanceof Z){var h=arguments[0],s=this.nodeMap.get(h);return s===null&&(s=this.nodeFact.createNode(h),this.nodeMap.put(h,s)),s}if(arguments[0]instanceof os){var o=arguments[0],c=this.nodeMap.get(o.getCoordinate());return c===null?(this.nodeMap.put(o.getCoordinate(),o),o):(c.mergeLabel(o),c)}}},{key:"print",value:function(h){for(var s=this.iterator();s.hasNext();)s.next().print(h)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(h){for(var s=new Tt,o=this.iterator();o.hasNext();){var c=o.next();c.getLabel().getLocation(h)===j.BOUNDARY&&s.add(c)}return s}},{key:"add",value:function(h){var s=h.getCoordinate();this.addNode(s).add(h)}}],[{key:"constructor_",value:function(){this.nodeMap=new de,this.nodeFact=null;var h=arguments[0];this.nodeFact=h}}])}(),ze=function(){function h(){i(this,h)}return f(h,null,[{key:"isNorthern",value:function(s){return s===h.NE||s===h.NW}},{key:"isOpposite",value:function(s,o){return s!==o&&(s-o+4)%4===2}},{key:"commonHalfPlane",value:function(s,o){if(s===o)return s;if((s-o+4)%4===2)return-1;var c=s<o?s:o;return c===0&&(s>o?s:o)===3?3:c}},{key:"isInHalfPlane",value:function(s,o){return o===h.SE?s===h.SE||s===h.SW:s===o||s===o+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],o=arguments[1];if(s===0&&o===0)throw new F("Cannot compute the quadrant for point ( "+s+", "+o+" )");return s>=0?o>=0?h.NE:h.SE:o>=0?h.NW:h.SW}if(arguments[0]instanceof Z&&arguments[1]instanceof Z){var c=arguments[0],p=arguments[1];if(p.x===c.x&&p.y===c.y)throw new F("Cannot compute the quadrant for two identical points "+c);return p.x>=c.x?p.y>=c.y?h.NE:h.SE:p.y>=c.y?h.NW:h.SW}}}])}();ze.NE=0,ze.NW=1,ze.SW=2,ze.SE=3;var ba=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"compareDirection",value:function(s){return this._dx===s._dx&&this._dy===s._dy?0:this._quadrant>s._quadrant?1:this._quadrant<s._quadrant?-1:Mt.index(s._p0,s._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(s){this._node=s}},{key:"print",value:function(s){var o=Math.atan2(this._dy,this._dx),c=this.getClass().getName(),p=c.lastIndexOf("."),y=c.substring(p+1);s.print("  "+y+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+o+"   "+this._label)}},{key:"compareTo",value:function(s){var o=s;return this.compareDirection(o)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var s=Math.atan2(this._dy,this._dx),o=this.getClass().getName(),c=o.lastIndexOf(".");return"  "+o.substring(c+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+s+"   "+this._label}},{key:"computeLabel",value:function(s){}},{key:"init",value:function(s,o){this._p0=s,this._p1=o,this._dx=o.x-s.x,this._dy=o.y-s.y,this._quadrant=ze.quadrant(this._dx,this._dy),pt.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[H]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var s=arguments[0];this._edge=s}else if(arguments.length===3){var o=arguments[0],c=arguments[1],p=arguments[2];h.constructor_.call(this,o,c,p,null)}else if(arguments.length===4){var y=arguments[0],b=arguments[1],T=arguments[2],D=arguments[3];h.constructor_.call(this,y),this.init(b,T),this._label=D}}}])}(),Ea=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(o){return this._depth[o]}},{key:"setVisited",value:function(o){this._isVisited=o}},{key:"computeDirectedLabel",value:function(){this._label=new Qe(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(o,c){if(this._depth[o]!==-999&&this._depth[o]!==c)throw new Un("assigned depths do not match",this.getCoordinate());this._depth[o]=c}},{key:"isInteriorAreaEdge",value:function(){for(var o=!0,c=0;c<2;c++)this._label.isArea(c)&&this._label.getLocation(c,ut.LEFT)===j.INTERIOR&&this._label.getLocation(c,ut.RIGHT)===j.INTERIOR||(o=!1);return o}},{key:"setNextMin",value:function(o){this._nextMin=o}},{key:"print",value:function(o){C(s,"print",this,1).call(this,o),o.print(" "+this._depth[ut.LEFT]+"/"+this._depth[ut.RIGHT]),o.print(" ("+this.getDepthDelta()+")"),this._isInResult&&o.print(" inResult")}},{key:"setMinEdgeRing",value:function(o){this._minEdgeRing=o}},{key:"isLineEdge",value:function(){var o=this._label.isLine(0)||this._label.isLine(1),c=!this._label.isArea(0)||this._label.allPositionsEqual(0,j.EXTERIOR),p=!this._label.isArea(1)||this._label.allPositionsEqual(1,j.EXTERIOR);return o&&c&&p}},{key:"setEdgeRing",value:function(o){this._edgeRing=o}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var o=this._edge.getDepthDelta();return this._isForward||(o=-o),o}},{key:"setInResult",value:function(o){this._isInResult=o}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(o){this.print(o),o.print(" "),this._isForward?this._edge.print(o):this._edge.printReverse(o)}},{key:"setSym",value:function(o){this._sym=o}},{key:"setVisitedEdge",value:function(o){this.setVisited(o),this._sym.setVisited(o)}},{key:"setEdgeDepths",value:function(o,c){var p=this.getEdge().getDepthDelta();this._isForward||(p=-p);var y=1;o===ut.LEFT&&(y=-1);var b=ut.opposite(o),T=c+p*y;this.setDepth(o,c),this.setDepth(b,T)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(o){this._next=o}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var o=arguments[0],c=arguments[1];if(ba.constructor_.call(this,o),this._isForward=c,c)this.init(o.getCoordinate(0),o.getCoordinate(1));else{var p=o.getNumPoints()-1;this.init(o.getCoordinate(p),o.getCoordinate(p-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(o,c){return o===j.EXTERIOR&&c===j.INTERIOR?1:o===j.INTERIOR&&c===j.EXTERIOR?-1:0}}])}(ba),Sa=function(){return f(function h(){i(this,h)},[{key:"createNode",value:function(h){return new os(h,null)}}])}(),so=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(h){h.println("Edges:");for(var s=0;s<this._edges.size();s++){h.println("edge "+s+":");var o=this._edges.get(s);o.print(h),o.eiList.print(h)}}},{key:"find",value:function(h){return this._nodes.find(h)}},{key:"addNode",value:function(){if(arguments[0]instanceof os){var h=arguments[0];return this._nodes.addNode(h)}if(arguments[0]instanceof Z){var s=arguments[0];return this._nodes.addNode(s)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var h=this._nodes.iterator();h.hasNext();)h.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(h){wn.out.println(h)}},{key:"isBoundaryNode",value:function(h,s){var o=this._nodes.find(s);if(o===null)return!1;var c=o.getLabel();return c!==null&&c.getLocation(h)===j.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var h=this._nodes.iterator();h.hasNext();)h.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(h,s,o,c){return!!h.equals(o)&&Mt.index(h,s,c)===Mt.COLLINEAR&&ze.quadrant(h,s)===ze.quadrant(o,c)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(h){wn.out.print(h)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(h,s){for(var o=0;o<this._edges.size();o++){var c=this._edges.get(o),p=c.getCoordinates();if(this.matchInSameDirection(h,s,p[0],p[1])||this.matchInSameDirection(h,s,p[p.length-1],p[p.length-2]))return c}return null}},{key:"insertEdge",value:function(h){this._edges.add(h)}},{key:"findEdgeEnd",value:function(h){for(var s=this.getEdgeEnds().iterator();s.hasNext();){var o=s.next();if(o.getEdge()===h)return o}return null}},{key:"addEdges",value:function(h){for(var s=h.iterator();s.hasNext();){var o=s.next();this._edges.add(o);var c=new Ea(o,!0),p=new Ea(o,!1);c.setSym(p),p.setSym(c),this.add(c),this.add(p)}}},{key:"add",value:function(h){this._nodes.add(h),this._edgeEndList.add(h)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(h,s){for(var o=0;o<this._edges.size();o++){var c=this._edges.get(o),p=c.getCoordinates();if(h.equals(p[0])&&s.equals(p[1]))return c}return null}}],[{key:"constructor_",value:function(){if(this._edges=new Tt,this._nodes=null,this._edgeEndList=new Tt,arguments.length===0)this._nodes=new bi(new Sa);else if(arguments.length===1){var h=arguments[0];this._nodes=new bi(h)}}},{key:"linkResultDirectedEdges",value:function(h){for(var s=h.iterator();s.hasNext();)s.next().getEdges().linkResultDirectedEdges()}}])}(),Yh=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"sortShellsAndHoles",value:function(s,o,c){for(var p=s.iterator();p.hasNext();){var y=p.next();y.isHole()?c.add(y):o.add(y)}}},{key:"computePolygons",value:function(s){for(var o=new Tt,c=s.iterator();c.hasNext();){var p=c.next().toPolygon(this._geometryFactory);o.add(p)}return o}},{key:"placeFreeHoles",value:function(s,o){for(var c=o.iterator();c.hasNext();){var p=c.next();if(p.getShell()===null){var y=h.findEdgeRingContaining(p,s);if(y===null)throw new Un("unable to assign hole to a shell",p.getCoordinate(0));p.setShell(y)}}}},{key:"buildMinimalEdgeRings",value:function(s,o,c){for(var p=new Tt,y=s.iterator();y.hasNext();){var b=y.next();if(b.getMaxNodeDegree()>2){b.linkDirectedEdgesForMinimalEdgeRings();var T=b.buildMinimalRings(),D=this.findShell(T);D!==null?(this.placePolygonHoles(D,T),o.add(D)):c.addAll(T)}else p.add(b)}return p}},{key:"buildMaximalEdgeRings",value:function(s){for(var o=new Tt,c=s.iterator();c.hasNext();){var p=c.next();if(p.isInResult()&&p.getLabel().isArea()&&p.getEdgeRing()===null){var y=new Vn(p,this._geometryFactory);o.add(y),y.setInResult()}}return o}},{key:"placePolygonHoles",value:function(s,o){for(var c=o.iterator();c.hasNext();){var p=c.next();p.isHole()&&p.setShell(s)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(s){for(var o=0,c=null,p=s.iterator();p.hasNext();){var y=p.next();y.isHole()||(c=y,o++)}return pt.isTrue(o<=1,"found two shells in MinimalEdgeRing list"),c}},{key:"add",value:function(){if(arguments.length===1){var s=arguments[0];this.add(s.getEdgeEnds(),s.getNodes())}else if(arguments.length===2){var o=arguments[0],c=arguments[1];so.linkResultDirectedEdges(c);var p=this.buildMaximalEdgeRings(o),y=new Tt,b=this.buildMinimalEdgeRings(p,this._shellList,y);this.sortShellsAndHoles(b,this._shellList,y),this.placeFreeHoles(this._shellList,y)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new Tt;var s=arguments[0];this._geometryFactory=s}},{key:"findEdgeRingContaining",value:function(s,o){for(var c=s.getLinearRing(),p=c.getEnvelopeInternal(),y=c.getCoordinateN(0),b=null,T=null,D=o.iterator();D.hasNext();){var z=D.next(),W=z.getLinearRing(),Y=W.getEnvelopeInternal();if(!Y.equals(p)&&Y.contains(p)){y=xe.ptNotInList(c.getCoordinates(),W.getCoordinates());var st=!1;vr.isInRing(y,W.getCoordinates())&&(st=!0),st&&(b===null||T.contains(Y))&&(T=(b=z).getLinearRing().getEnvelopeInternal())}}return b}}])}(),Ta=function(){return f(function h(){i(this,h)},[{key:"getBounds",value:function(){}}])}(),Rt=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Ta,$]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var h=arguments[0],s=arguments[1];this._bounds=h,this._item=s}}])}(),oo=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var h=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),h}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(h){for(var s=null,o=this._items.get(h);2*h<=this._size&&((s=2*h)!==this._size&&this._items.get(s+1).compareTo(this._items.get(s))<0&&s++,this._items.get(s).compareTo(o)<0);h=s)this._items.set(h,this._items.get(s));this._items.set(h,o)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(h){this._items.add(null),this._size+=1;var s=this._size;for(this._items.set(0,h);h.compareTo(this._items.get(Math.trunc(s/2)))<0;s/=2)this._items.set(s,this._items.get(Math.trunc(s/2)));this._items.set(s,h)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new Tt,this._items.add(null)}}])}(),On=function(){return f(function h(){i(this,h)},[{key:"insert",value:function(h,s){}},{key:"remove",value:function(h,s){}},{key:"query",value:function(){}}])}(),Fe=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(h){pt.isTrue(this._bounds===null),this._childBoundables.add(h)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Ta,$]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new Tt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var h=arguments[0];this._level=h}}}}])}(),Zi={reverseOrder:function(){return{compare:function(h,s){return s.compareTo(h)}}},min:function(h){return Zi.sort(h),h.get(0)},sort:function(h,s){var o=h.toArray();s?Re.sort(o,s):Re.sort(o);for(var c=h.iterator(),p=0,y=o.length;p<y;p++)c.next(),c.set(o[p])},singletonList:function(h){var s=new Tt;return s.add(h),s}},qh=function(){function h(){i(this,h)}return f(h,null,[{key:"maxDistance",value:function(s,o,c,p,y,b,T,D){var z=h.distance(s,o,y,b);return z=Math.max(z,h.distance(s,o,T,D)),z=Math.max(z,h.distance(c,p,y,b)),z=Math.max(z,h.distance(c,p,T,D))}},{key:"distance",value:function(s,o,c,p){var y=c-s,b=p-o;return Math.sqrt(y*y+b*b)}},{key:"maximumDistance",value:function(s,o){var c=Math.min(s.getMinX(),o.getMinX()),p=Math.min(s.getMinY(),o.getMinY()),y=Math.max(s.getMaxX(),o.getMaxX()),b=Math.max(s.getMaxY(),o.getMaxY());return h.distance(c,p,y,b)}},{key:"minMaxDistance",value:function(s,o){var c=s.getMinX(),p=s.getMinY(),y=s.getMaxX(),b=s.getMaxY(),T=o.getMinX(),D=o.getMinY(),z=o.getMaxX(),W=o.getMaxY(),Y=h.maxDistance(c,p,c,b,T,D,T,W);return Y=Math.min(Y,h.maxDistance(c,p,c,b,T,D,z,D)),Y=Math.min(Y,h.maxDistance(c,p,c,b,z,W,T,W)),Y=Math.min(Y,h.maxDistance(c,p,c,b,z,W,z,D)),Y=Math.min(Y,h.maxDistance(c,p,y,p,T,D,T,W)),Y=Math.min(Y,h.maxDistance(c,p,y,p,T,D,z,D)),Y=Math.min(Y,h.maxDistance(c,p,y,p,z,W,T,W)),Y=Math.min(Y,h.maxDistance(c,p,y,p,z,W,z,D)),Y=Math.min(Y,h.maxDistance(y,b,c,b,T,D,T,W)),Y=Math.min(Y,h.maxDistance(y,b,c,b,T,D,z,D)),Y=Math.min(Y,h.maxDistance(y,b,c,b,z,W,T,W)),Y=Math.min(Y,h.maxDistance(y,b,c,b,z,W,z,D)),Y=Math.min(Y,h.maxDistance(y,b,y,p,T,D,T,W)),Y=Math.min(Y,h.maxDistance(y,b,y,p,T,D,z,D)),Y=Math.min(Y,h.maxDistance(y,b,y,p,z,W,T,W)),Y=Math.min(Y,h.maxDistance(y,b,y,p,z,W,z,D))}}])}(),Ei=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"maximumDistance",value:function(){return qh.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(s,o){var c=h.isComposite(this._boundable1),p=h.isComposite(this._boundable2);if(c&&p)return h.area(this._boundable1)>h.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,s,o),null):(this.expand(this._boundable2,this._boundable1,!0,s,o),null);if(c)return this.expand(this._boundable1,this._boundable2,!1,s,o),null;if(p)return this.expand(this._boundable2,this._boundable1,!0,s,o),null;throw new F("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(h.isComposite(this._boundable1)||h.isComposite(this._boundable2))}},{key:"compareTo",value:function(s){var o=s;return this._distance<o._distance?-1:this._distance>o._distance?1:0}},{key:"expand",value:function(s,o,c,p,y){for(var b=s.getChildBoundables().iterator();b.hasNext();){var T=b.next(),D=null;(D=c?new h(o,T,this._itemDistance):new h(T,o,this._itemDistance)).getDistance()<y&&p.add(D)}}},{key:"getBoundable",value:function(s){return s===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[H]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var s=arguments[0],o=arguments[1],c=arguments[2];this._boundable1=s,this._boundable2=o,this._itemDistance=c,this._distance=this.distance()}},{key:"area",value:function(s){return s.getBounds().getArea()}},{key:"isComposite",value:function(s){return s instanceof Fe}}])}(),_u=function(){return f(function h(){i(this,h)},[{key:"visitItem",value:function(h){}}])}(),Yi=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"queryInternal",value:function(){if(Ot(arguments[2],_u)&&arguments[0]instanceof Object&&arguments[1]instanceof Fe)for(var s=arguments[0],o=arguments[2],c=arguments[1].getChildBoundables(),p=0;p<c.size();p++){var y=c.get(p);this.getIntersectsOp().intersects(y.getBounds(),s)&&(y instanceof Fe?this.queryInternal(s,y,o):y instanceof Rt?o.visitItem(y.getItem()):pt.shouldNeverReachHere())}else if(Ot(arguments[2],wi)&&arguments[0]instanceof Object&&arguments[1]instanceof Fe)for(var b=arguments[0],T=arguments[2],D=arguments[1].getChildBoundables(),z=0;z<D.size();z++){var W=D.get(z);this.getIntersectsOp().intersects(W.getBounds(),b)&&(W instanceof Fe?this.queryInternal(b,W,T):W instanceof Rt?T.add(W.getItem()):pt.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(s){return s.get(s.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var s=0,o=arguments[0].getChildBoundables().iterator();o.hasNext();){var c=o.next();c instanceof Fe?s+=this.size(c):c instanceof Rt&&(s+=1)}return s}}},{key:"removeItem",value:function(s,o){for(var c=null,p=s.getChildBoundables().iterator();p.hasNext();){var y=p.next();y instanceof Rt&&y.getItem()===o&&(c=y)}return c!==null&&(s.getChildBoundables().remove(c),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var s=this.itemsTree(this._root);return s===null?new Tt:s}if(arguments.length===1){for(var o=arguments[0],c=new Tt,p=o.getChildBoundables().iterator();p.hasNext();){var y=p.next();if(y instanceof Fe){var b=this.itemsTree(y);b!==null&&c.add(b)}else y instanceof Rt?c.add(y.getItem()):pt.shouldNeverReachHere()}return c.size()<=0?null:c}}},{key:"insert",value:function(s,o){pt.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Rt(s,o))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var s=arguments[0],o=new Tt;return this.boundablesAtLevel(s,this._root,o),o}if(arguments.length===3){var c=arguments[0],p=arguments[1],y=arguments[2];if(pt.isTrue(c>-2),p.getLevel()===c)return y.add(p),null;for(var b=p.getChildBoundables().iterator();b.hasNext();){var T=b.next();T instanceof Fe?this.boundablesAtLevel(c,T,y):(pt.isTrue(T instanceof Rt),c===-1&&y.add(T))}return null}}},{key:"query",value:function(){if(arguments.length===1){var s=arguments[0];this.build();var o=new Tt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),s)&&this.queryInternal(s,this._root,o),o}if(arguments.length===2){var c=arguments[0],p=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),c)&&this.queryInternal(c,this._root,p)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var s=arguments[0],o=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),s)&&this.remove(s,this._root,o)}if(arguments.length===3){var c=arguments[0],p=arguments[1],y=arguments[2],b=this.removeItem(p,y);if(b)return!0;for(var T=null,D=p.getChildBoundables().iterator();D.hasNext();){var z=D.next();if(this.getIntersectsOp().intersects(z.getBounds(),c)&&z instanceof Fe&&(b=this.remove(c,z,y))){T=z;break}}return T!==null&&T.getChildBoundables().isEmpty()&&p.getChildBoundables().remove(T),b}}},{key:"createHigherLevels",value:function(s,o){pt.isTrue(!s.isEmpty());var c=this.createParentBoundables(s,o+1);return c.size()===1?c.get(0):this.createHigherLevels(c,o+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var s=0,o=arguments[0].getChildBoundables().iterator();o.hasNext();){var c=o.next();if(c instanceof Fe){var p=this.depth(c);p>s&&(s=p)}}return s+1}}},{key:"createParentBoundables",value:function(s,o){pt.isTrue(!s.isEmpty());var c=new Tt;c.add(this.createNode(o));var p=new Tt(s);Zi.sort(p,this.getComparator());for(var y=p.iterator();y.hasNext();){var b=y.next();this.lastNode(c).getChildBoundables().size()===this.getNodeCapacity()&&c.add(this.createNode(o)),this.lastNode(c).addChildBoundable(b)}return c}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[$]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new Tt,this._nodeCapacity=null,arguments.length===0)h.constructor_.call(this,h.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var s=arguments[0];pt.isTrue(s>1,"Node capacity must be greater than 1"),this._nodeCapacity=s}}},{key:"compareDoubles",value:function(s,o){return s>o?1:s<o?-1:0}}])}();Yi.IntersectsOp=function(){},Yi.DEFAULT_NODE_CAPACITY=10;var Xh=function(){return f(function h(){i(this,h)},[{key:"distance",value:function(h,s){}}])}(),Zn=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"createParentBoundablesFromVerticalSlices",value:function(o,c){pt.isTrue(o.length>0);for(var p=new Tt,y=0;y<o.length;y++)p.addAll(this.createParentBoundablesFromVerticalSlice(o[y],c));return p}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var o=arguments[0],c=arguments[1];return this.nearestNeighbourK(o,X.POSITIVE_INFINITY,c)}if(arguments.length===3){var p=arguments[0],y=arguments[2],b=arguments[1],T=new oo;T.add(p);for(var D=new oo;!T.isEmpty()&&b>=0;){var z=T.poll(),W=z.getDistance();if(W>=b)break;z.isLeaves()?D.size()<y?D.add(z):(D.peek().getDistance()>W&&(D.poll(),D.add(z)),b=D.peek().getDistance()):z.expandToQueue(T,b)}return s.getItems(D)}}},{key:"createNode",value:function(o){return new ao(o)}},{key:"size",value:function(){return arguments.length===0?C(s,"size",this,1).call(this):C(s,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof $t))return C(s,"insert",this,1).apply(this,arguments);var o=arguments[0],c=arguments[1];if(o.isNull())return null;C(s,"insert",this,1).call(this,o,c)}},{key:"getIntersectsOp",value:function(){return s.intersectsOp}},{key:"verticalSlices",value:function(o,c){for(var p=Math.trunc(Math.ceil(o.size()/c)),y=new Array(c).fill(null),b=o.iterator(),T=0;T<c;T++){y[T]=new Tt;for(var D=0;b.hasNext()&&D<p;){var z=b.next();y[T].add(z),D++}}return y}},{key:"query",value:function(){if(arguments.length===1){var o=arguments[0];return C(s,"query",this,1).call(this,o)}if(arguments.length===2){var c=arguments[0],p=arguments[1];C(s,"query",this,1).call(this,c,p)}}},{key:"getComparator",value:function(){return s.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(o,c){return C(s,"createParentBoundables",this,1).call(this,o,c)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof $t){var o=arguments[0],c=arguments[1];return C(s,"remove",this,1).call(this,o,c)}return C(s,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?C(s,"depth",this,1).call(this):C(s,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(o,c){pt.isTrue(!o.isEmpty());var p=Math.trunc(Math.ceil(o.size()/this.getNodeCapacity())),y=new Tt(o);Zi.sort(y,s.xComparator);var b=this.verticalSlices(y,Math.trunc(Math.ceil(Math.sqrt(p))));return this.createParentBoundablesFromVerticalSlices(b,c)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(Ot(arguments[0],Xh)){var o=arguments[0];if(this.isEmpty())return null;var c=new Ei(this.getRoot(),this.getRoot(),o);return this.nearestNeighbour(c)}if(arguments[0]instanceof Ei){var p=arguments[0],y=X.POSITIVE_INFINITY,b=null,T=new oo;for(T.add(p);!T.isEmpty()&&y>0;){var D=T.poll(),z=D.getDistance();if(z>=y)break;D.isLeaves()?(y=z,b=D):D.expandToQueue(T,y)}return b===null?null:[b.getBoundable(0).getItem(),b.getBoundable(1).getItem()]}}else{if(arguments.length===2){var W=arguments[0],Y=arguments[1];if(this.isEmpty()||W.isEmpty())return null;var st=new Ei(this.getRoot(),W.getRoot(),Y);return this.nearestNeighbour(st)}if(arguments.length===3){var ft=arguments[2],yt=new Rt(arguments[0],arguments[1]),bt=new Ei(this.getRoot(),yt,ft);return this.nearestNeighbour(bt)[0]}if(arguments.length===4){var Gt=arguments[2],At=arguments[3],Jt=new Rt(arguments[0],arguments[1]),he=new Ei(this.getRoot(),Jt,Gt);return this.nearestNeighbourK(he,At)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var o=arguments[0],c=arguments[1],p=X.POSITIVE_INFINITY,y=new oo;for(y.add(o);!y.isEmpty();){var b=y.poll(),T=b.getDistance();if(T>c)return!1;if(b.maximumDistance()<=c)return!0;if(b.isLeaves()){if((p=T)<=c)return!0}else b.expandToQueue(y,p)}return!1}if(arguments.length===3){var D=arguments[0],z=arguments[1],W=arguments[2],Y=new Ei(this.getRoot(),D.getRoot(),z);return this.isWithinDistance(Y,W)}}},{key:"interfaces_",get:function(){return[On,$]}}],[{key:"constructor_",value:function(){if(arguments.length===0)s.constructor_.call(this,s.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var o=arguments[0];Yi.constructor_.call(this,o)}}},{key:"centreX",value:function(o){return s.avg(o.getMinX(),o.getMaxX())}},{key:"avg",value:function(o,c){return(o+c)/2}},{key:"getItems",value:function(o){for(var c=new Array(o.size()).fill(null),p=0;!o.isEmpty();){var y=o.poll();c[p]=y.getBoundable(0).getItem(),p++}return c}},{key:"centreY",value:function(o){return s.avg(o.getMinY(),o.getMaxY())}}])}(Yi),ao=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"computeBounds",value:function(){for(var o=null,c=this.getChildBoundables().iterator();c.hasNext();){var p=c.next();o===null?o=new $t(p.getBounds()):o.expandToInclude(p.getBounds())}return o}}],[{key:"constructor_",value:function(){var o=arguments[0];Fe.constructor_.call(this,o)}}])}(Fe);Zn.STRtreeNode=ao,Zn.xComparator=new(function(){return f(function h(){i(this,h)},[{key:"interfaces_",get:function(){return[_t]}},{key:"compare",value:function(h,s){return Yi.compareDoubles(Zn.centreX(h.getBounds()),Zn.centreX(s.getBounds()))}}])}()),Zn.yComparator=new(function(){return f(function h(){i(this,h)},[{key:"interfaces_",get:function(){return[_t]}},{key:"compare",value:function(h,s){return Yi.compareDoubles(Zn.centreY(h.getBounds()),Zn.centreY(s.getBounds()))}}])}()),Zn.intersectsOp=new(function(){return f(function h(){i(this,h)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(h,s){return h.intersects(s)}}])}()),Zn.DEFAULT_NODE_CAPACITY=10;var $h=function(){function h(){i(this,h)}return f(h,null,[{key:"relativeSign",value:function(s,o){return s<o?-1:s>o?1:0}},{key:"compare",value:function(s,o,c){if(o.equals2D(c))return 0;var p=h.relativeSign(o.x,c.x),y=h.relativeSign(o.y,c.y);switch(s){case 0:return h.compareValue(p,y);case 1:return h.compareValue(y,p);case 2:return h.compareValue(y,-p);case 3:return h.compareValue(-p,y);case 4:return h.compareValue(-p,-y);case 5:return h.compareValue(-y,-p);case 6:return h.compareValue(-y,p);case 7:return h.compareValue(p,-y)}return pt.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(s,o){return s<0?-1:s>0?1:o<0?-1:o>0?1:0}}])}(),Yn=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(h){h.print(this.coord),h.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(h){var s=h;return this.segmentIndex<s.segmentIndex?-1:this.segmentIndex>s.segmentIndex?1:this.coord.equals2D(s.coord)?0:this._isInterior?s._isInterior?$h.compare(this._segmentOctant,this.coord,s.coord):1:-1}},{key:"isEndPoint",value:function(h){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===h}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[H]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var h=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3];this._segString=h,this.coord=new Z(s),this.segmentIndex=o,this._segmentOctant=c,this._isInterior=!s.equals2D(h.getCoordinate(o))}}])}(),Kh=function(){return f(function h(){i(this,h)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),vu=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var h=new ns;this.addEndpoints();for(var s=this.iterator(),o=s.next();s.hasNext();){var c=s.next();this.addEdgeCoordinates(o,c,h),o=c}return h.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var h=new Tt;this.findCollapsesFromInsertedNodes(h),this.findCollapsesFromExistingVertices(h);for(var s=h.iterator();s.hasNext();){var o=s.next().intValue();this.add(this._edge.getCoordinate(o),o)}}},{key:"createSplitEdgePts",value:function(h,s){var o=s.segmentIndex-h.segmentIndex+2;if(o===2)return[new Z(h.coord),new Z(s.coord)];var c=this._edge.getCoordinate(s.segmentIndex),p=s.isInterior()||!s.coord.equals2D(c);p||o--;var y=new Array(o).fill(null),b=0;y[b++]=new Z(h.coord);for(var T=h.segmentIndex+1;T<=s.segmentIndex;T++)y[b++]=this._edge.getCoordinate(T);return p&&(y[b]=new Z(s.coord)),y}},{key:"print",value:function(h){h.println("Intersections:");for(var s=this.iterator();s.hasNext();)s.next().print(h)}},{key:"findCollapsesFromExistingVertices",value:function(h){for(var s=0;s<this._edge.size()-2;s++){var o=this._edge.getCoordinate(s);this._edge.getCoordinate(s+1);var c=this._edge.getCoordinate(s+2);o.equals2D(c)&&h.add(fr.valueOf(s+1))}}},{key:"addEdgeCoordinates",value:function(h,s,o){var c=this.createSplitEdgePts(h,s);o.add(c,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(h){this.addEndpoints(),this.addCollapsedNodes();for(var s=this.iterator(),o=s.next();s.hasNext();){var c=s.next(),p=this.createSplitEdge(o,c);h.add(p),o=c}}},{key:"findCollapseIndex",value:function(h,s,o){if(!h.coord.equals2D(s.coord))return!1;var c=s.segmentIndex-h.segmentIndex;return s.isInterior()||c--,c===1&&(o[0]=h.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(h){for(var s=new Array(1).fill(null),o=this.iterator(),c=o.next();o.hasNext();){var p=o.next();this.findCollapseIndex(c,p,s)&&h.add(fr.valueOf(s[0])),c=p}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var h=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(h),h)}},{key:"createSplitEdge",value:function(h,s){var o=this.createSplitEdgePts(h,s);return new fi(o,this._edge.getData())}},{key:"add",value:function(h,s){var o=new Yn(this._edge,h,s,this._edge.getSegmentOctant(s)),c=this._nodeMap.get(o);return c!==null?(pt.isTrue(c.coord.equals2D(h),"Found equal nodes with different coordinates"),c):(this._nodeMap.put(o,o),o)}},{key:"checkSplitEdgesCorrectness",value:function(h){var s=this._edge.getCoordinates(),o=h.get(0).getCoordinate(0);if(!o.equals2D(s[0]))throw new wt("bad split edge start point at "+o);var c=h.get(h.size()-1).getCoordinates(),p=c[c.length-1];if(!p.equals2D(s[s.length-1]))throw new wt("bad split edge end point at "+p)}}],[{key:"constructor_",value:function(){this._nodeMap=new de,this._edge=null;var h=arguments[0];this._edge=h}}])}(),Si=function(){function h(){i(this,h)}return f(h,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],o=arguments[1];if(s===0&&o===0)throw new F("Cannot compute the octant for point ( "+s+", "+o+" )");var c=Math.abs(s),p=Math.abs(o);return s>=0?o>=0?c>=p?0:1:c>=p?7:6:o>=0?c>=p?3:2:c>=p?4:5}if(arguments[0]instanceof Z&&arguments[1]instanceof Z){var y=arguments[0],b=arguments[1],T=b.x-y.x,D=b.y-y.y;if(T===0&&D===0)throw new F("Cannot compute the octant for two identical points "+y);return h.octant(T,D)}}}])}(),yu=function(){return f(function h(){i(this,h)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(h){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(h){}},{key:"getData",value:function(){}}])}(),xu=function(){return f(function h(){i(this,h)},[{key:"addIntersection",value:function(h,s){}},{key:"interfaces_",get:function(){return[yu]}}])}(),fi=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(s){return this._pts[s]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(s){return s===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(s),this.getCoordinate(s+1))}},{key:"setData",value:function(s){this._data=s}},{key:"safeOctant",value:function(s,o){return s.equals2D(o)?0:Si.octant(s,o)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var s=arguments[0],o=arguments[1];this.addIntersectionNode(s,o)}else if(arguments.length===4){var c=arguments[1],p=arguments[3],y=new Z(arguments[0].getIntersection(p));this.addIntersection(y,c)}}},{key:"toString",value:function(){return ss.toLineString(new is(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(s,o){var c=o,p=c+1;if(p<this._pts.length){var y=this._pts[p];s.equals2D(y)&&(c=p)}return this._nodeList.add(s,c)}},{key:"addIntersections",value:function(s,o,c){for(var p=0;p<s.getIntersectionNum();p++)this.addIntersection(s,o,c,p)}},{key:"interfaces_",get:function(){return[xu]}}],[{key:"constructor_",value:function(){this._nodeList=new vu(this),this._pts=null,this._data=null;var s=arguments[0],o=arguments[1];this._pts=s,this._data=o}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var s=arguments[0],o=new Tt;return h.getNodedSubstrings(s,o),o}if(arguments.length===2)for(var c=arguments[1],p=arguments[0].iterator();p.hasNext();)p.next().getNodeList().addSplitEdges(c)}}])}(),cn=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof h){var s=arguments[0],o=Mt.index(this.p0,this.p1,s.p0),c=Mt.index(this.p0,this.p1,s.p1);return o>=0&&c>=0||o<=0&&c<=0?Math.max(o,c):0}if(arguments[0]instanceof Z){var p=arguments[0];return Mt.index(this.p0,this.p1,p)}}},{key:"toGeometry",value:function(s){return s.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(s){if(!(s instanceof h))return!1;var o=s;return this.p0.equals(o.p0)&&this.p1.equals(o.p1)}},{key:"intersection",value:function(s){var o=new hi;return o.computeIntersection(this.p0,this.p1,s.p0,s.p1),o.hasIntersection()?o.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof Z){var s=arguments[0];if(s.equals(this.p0)||s.equals(this.p1))return new Z(s);var o=this.projectionFactor(s),c=new Z;return c.x=this.p0.x+o*(this.p1.x-this.p0.x),c.y=this.p0.y+o*(this.p1.y-this.p0.y),c}if(arguments[0]instanceof h){var p=arguments[0],y=this.projectionFactor(p.p0),b=this.projectionFactor(p.p1);if(y>=1&&b>=1||y<=0&&b<=0)return null;var T=this.project(p.p0);y<0&&(T=this.p0),y>1&&(T=this.p1);var D=this.project(p.p1);return b<0&&(D=this.p0),b>1&&(D=this.p1),new h(T,D)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(s){return s===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(s){return In.pointToLinePerpendicular(s,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return h.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(s){if(s.equals(this.p0))return 0;if(s.equals(this.p1))return 1;var o=this.p1.x-this.p0.x,c=this.p1.y-this.p0.y,p=o*o+c*c;return p<=0?X.NaN:((s.x-this.p0.x)*o+(s.y-this.p0.y)*c)/p}},{key:"closestPoints",value:function(s){var o=this.intersection(s);if(o!==null)return[o,o];var c=new Array(2).fill(null),p=X.MAX_VALUE,y=null,b=this.closestPoint(s.p0);p=b.distance(s.p0),c[0]=b,c[1]=s.p0;var T=this.closestPoint(s.p1);(y=T.distance(s.p1))<p&&(p=y,c[0]=T,c[1]=s.p1);var D=s.closestPoint(this.p0);(y=D.distance(this.p0))<p&&(p=y,c[0]=this.p0,c[1]=D);var z=s.closestPoint(this.p1);return(y=z.distance(this.p1))<p&&(p=y,c[0]=this.p1,c[1]=z),c}},{key:"closestPoint",value:function(s){var o=this.projectionFactor(s);return o>0&&o<1?this.project(s):this.p0.distance(s)<this.p1.distance(s)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(s){var o=s,c=this.p0.compareTo(o.p0);return c!==0?c:this.p1.compareTo(o.p1)}},{key:"reverse",value:function(){var s=this.p0;this.p0=this.p1,this.p1=s}},{key:"equalsTopo",value:function(s){return this.p0.equals(s.p0)&&this.p1.equals(s.p1)||this.p0.equals(s.p1)&&this.p1.equals(s.p0)}},{key:"lineIntersection",value:function(s){return fa.intersection(this.p0,this.p1,s.p0,s.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(s,o){var c=this.p0.x+s*(this.p1.x-this.p0.x),p=this.p0.y+s*(this.p1.y-this.p0.y),y=this.p1.x-this.p0.x,b=this.p1.y-this.p0.y,T=Math.sqrt(y*y+b*b),D=0,z=0;if(o!==0){if(T<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");D=o*y/T,z=o*b/T}return new Z(c-z,p+D)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var s=arguments[0];this.setCoordinates(s.p0,s.p1)}else if(arguments.length===2){var o=arguments[0],c=arguments[1];this.p0.x=o.x,this.p0.y=o.y,this.p1.x=c.x,this.p1.y=c.y}}},{key:"segmentFraction",value:function(s){var o=this.projectionFactor(s);return o<0?o=0:(o>1||X.isNaN(o))&&(o=1),o}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(s){var o=this.p1.getY()-this.p0.getY(),c=this.p0.getX()-this.p1.getX(),p=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),y=o*o+c*c,b=o*o-c*c,T=s.getX(),D=s.getY();return new Z((-b*T-2*o*c*D-2*o*p)/y,(b*D-2*o*c*T-2*c*p)/y)}},{key:"distance",value:function(){if(arguments[0]instanceof h){var s=arguments[0];return In.segmentToSegment(this.p0,this.p1,s.p0,s.p1)}if(arguments[0]instanceof Z){var o=arguments[0];return In.pointToSegment(o,this.p0,this.p1)}}},{key:"pointAlong",value:function(s){var o=new Z;return o.x=this.p0.x+s*(this.p1.x-this.p0.x),o.y=this.p0.y+s*(this.p1.y-this.p0.y),o}},{key:"hashCode",value:function(){var s=X.doubleToLongBits(this.p0.x);s^=31*X.doubleToLongBits(this.p0.y);var o=Math.trunc(s)^Math.trunc(s>>32),c=X.doubleToLongBits(this.p1.x);return c^=31*X.doubleToLongBits(this.p1.y),o^(Math.trunc(c)^Math.trunc(c>>32))}},{key:"interfaces_",get:function(){return[H,$]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)h.constructor_.call(this,new Z,new Z);else if(arguments.length===1){var s=arguments[0];h.constructor_.call(this,s.p0,s.p1)}else if(arguments.length===2){var o=arguments[0],c=arguments[1];this.p0=o,this.p1=c}else if(arguments.length===4){var p=arguments[0],y=arguments[1],b=arguments[2],T=arguments[3];h.constructor_.call(this,new Z(p,y),new Z(b,T))}}},{key:"midPoint",value:function(s,o){return new Z((s.x+o.x)/2,(s.y+o.y)/2)}}])}(),wu=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var h=arguments[1],s=arguments[2],o=arguments[3];arguments[0].getLineSegment(h,this._overlapSeg1),s.getLineSegment(o,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new cn,this._overlapSeg2=new cn}}])}(),Ca=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(h,s){s.p0=this._pts[h],s.p1=this._pts[h+1]}},{key:"computeSelect",value:function(h,s,o,c){var p=this._pts[s],y=this._pts[o];if(o-s==1)return c.select(this,s),null;if(!h.intersects(p,y))return null;var b=Math.trunc((s+o)/2);s<b&&this.computeSelect(h,s,b,c),b<o&&this.computeSelect(h,b,o,c)}},{key:"getCoordinates",value:function(){for(var h=new Array(this._end-this._start+1).fill(null),s=0,o=this._start;o<=this._end;o++)h[s++]=this._pts[o];return h}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var h=arguments[0],s=arguments[1];this.computeOverlaps(this._start,this._end,h,h._start,h._end,s)}else if(arguments.length===6){var o=arguments[0],c=arguments[1],p=arguments[2],y=arguments[3],b=arguments[4],T=arguments[5];if(c-o==1&&b-y==1)return T.overlap(this,o,p,y),null;if(!this.overlaps(o,c,p,y,b))return null;var D=Math.trunc((o+c)/2),z=Math.trunc((y+b)/2);o<D&&(y<z&&this.computeOverlaps(o,D,p,y,z,T),z<b&&this.computeOverlaps(o,D,p,z,b,T)),D<c&&(y<z&&this.computeOverlaps(D,c,p,y,z,T),z<b&&this.computeOverlaps(D,c,p,z,b,T))}}},{key:"setId",value:function(h){this._id=h}},{key:"select",value:function(h,s){this.computeSelect(h,this._start,this._end,s)}},{key:"getEnvelope",value:function(){if(this._env===null){var h=this._pts[this._start],s=this._pts[this._end];this._env=new $t(h,s)}return this._env}},{key:"overlaps",value:function(h,s,o,c,p){return $t.intersects(this._pts[h],this._pts[s],o._pts[c],o._pts[p])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var h=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3];this._pts=h,this._start=s,this._end=o,this._context=c}}])}(),Qh=function(){function h(){i(this,h)}return f(h,null,[{key:"findChainEnd",value:function(s,o){for(var c=o;c<s.length-1&&s[c].equals2D(s[c+1]);)c++;if(c>=s.length-1)return s.length-1;for(var p=ze.quadrant(s[c],s[c+1]),y=o+1;y<s.length&&!(!s[y-1].equals2D(s[y])&&ze.quadrant(s[y-1],s[y])!==p);)y++;return y-1}},{key:"getChains",value:function(){if(arguments.length===1){var s=arguments[0];return h.getChains(s,null)}if(arguments.length===2){var o=arguments[0],c=arguments[1],p=new Tt,y=0;do{var b=h.findChainEnd(o,y),T=new Ca(o,y,b,c);p.add(T),y=b}while(y<o.length-1);return p}}}])}(),Ma=function(){return f(function h(){i(this,h)},[{key:"computeNodes",value:function(h){}},{key:"getNodedSubstrings",value:function(){}}])}(),lo=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(h){this._segInt=h}},{key:"interfaces_",get:function(){return[Ma]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var h=arguments[0];this.setSegmentIntersector(h)}}}}])}(),Pa=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return fi.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(o){for(var c=Qh.getChains(o.getCoordinates(),o).iterator();c.hasNext();){var p=c.next();p.setId(this._idCounter++),this._index.insert(p.getEnvelope(),p),this._monoChains.add(p)}}},{key:"computeNodes",value:function(o){this._nodedSegStrings=o;for(var c=o.iterator();c.hasNext();)this.add(c.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var o=new Na(this._segInt),c=this._monoChains.iterator();c.hasNext();)for(var p=c.next(),y=this._index.query(p.getEnvelope()).iterator();y.hasNext();){var b=y.next();if(b.getId()>p.getId()&&(p.computeOverlaps(b,o),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new Tt,this._index=new Zn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var o=arguments[0];lo.constructor_.call(this,o)}}}}])}(lo),Na=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"overlap",value:function(){if(arguments.length!==4)return C(s,"overlap",this,1).apply(this,arguments);var o=arguments[1],c=arguments[2],p=arguments[3],y=arguments[0].getContext(),b=c.getContext();this._si.processIntersections(y,o,b,p)}}],[{key:"constructor_",value:function(){this._si=null;var o=arguments[0];this._si=o}}])}(wu);Pa.SegmentOverlapAction=Na;var kn=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"isDeletable",value:function(s,o,c,p){var y=this._inputLine[s],b=this._inputLine[o],T=this._inputLine[c];return!!this.isConcave(y,b,T)&&!!this.isShallow(y,b,T,p)&&this.isShallowSampled(y,b,s,c,p)}},{key:"deleteShallowConcavities",value:function(){for(var s=1,o=this.findNextNonDeletedIndex(s),c=this.findNextNonDeletedIndex(o),p=!1;c<this._inputLine.length;){var y=!1;this.isDeletable(s,o,c,this._distanceTol)&&(this._isDeleted[o]=h.DELETE,y=!0,p=!0),s=y?c:o,o=this.findNextNonDeletedIndex(s),c=this.findNextNonDeletedIndex(o)}return p}},{key:"isShallowConcavity",value:function(s,o,c,p){return Mt.index(s,o,c)===this._angleOrientation&&In.pointToSegment(o,s,c)<p}},{key:"isShallowSampled",value:function(s,o,c,p,y){var b=Math.trunc((p-c)/h.NUM_PTS_TO_CHECK);b<=0&&(b=1);for(var T=c;T<p;T+=b)if(!this.isShallow(s,o,this._inputLine[T],y))return!1;return!0}},{key:"isConcave",value:function(s,o,c){var p=Mt.index(s,o,c)===this._angleOrientation;return p}},{key:"simplify",value:function(s){this._distanceTol=Math.abs(s),s<0&&(this._angleOrientation=Mt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var o=!1;do o=this.deleteShallowConcavities();while(o);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(s){for(var o=s+1;o<this._inputLine.length&&this._isDeleted[o]===h.DELETE;)o++;return o}},{key:"isShallow",value:function(s,o,c,p){return In.pointToSegment(o,s,c)<p}},{key:"collapseLine",value:function(){for(var s=new ns,o=0;o<this._inputLine.length;o++)this._isDeleted[o]!==h.DELETE&&s.add(this._inputLine[o]);return s.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Mt.COUNTERCLOCKWISE;var s=arguments[0];this._inputLine=s}},{key:"simplify",value:function(s,o){return new h(s).simplify(o)}}])}();kn.INIT=0,kn.DELETE=1,kn.KEEP=1,kn.NUM_PTS_TO_CHECK=10;var ls=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"getCoordinates",value:function(){return this._ptList.toArray(h.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(s){this._precisionModel=s}},{key:"addPt",value:function(s){var o=new Z(s);if(this._precisionModel.makePrecise(o),this.isRedundant(o))return null;this._ptList.add(o)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(s,o){if(o)for(var c=0;c<s.length;c++)this.addPt(s[c]);else for(var p=s.length-1;p>=0;p--)this.addPt(s[p])}},{key:"isRedundant",value:function(s){if(this._ptList.size()<1)return!1;var o=this._ptList.get(this._ptList.size()-1);return s.distance(o)<this._minimimVertexDistance}},{key:"toString",value:function(){return new Gn().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var s=new Z(this._ptList.get(0)),o=this._ptList.get(this._ptList.size()-1);if(s.equals(o))return null;this._ptList.add(s)}},{key:"setMinimumVertexDistance",value:function(s){this._minimimVertexDistance=s}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Tt}}])}();ls.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var be=function(){function h(){i(this,h)}return f(h,null,[{key:"toDegrees",value:function(s){return 180*s/Math.PI}},{key:"normalize",value:function(s){for(;s>Math.PI;)s-=h.PI_TIMES_2;for(;s<=-Math.PI;)s+=h.PI_TIMES_2;return s}},{key:"angle",value:function(){if(arguments.length===1){var s=arguments[0];return Math.atan2(s.y,s.x)}if(arguments.length===2){var o=arguments[0],c=arguments[1],p=c.x-o.x,y=c.y-o.y;return Math.atan2(y,p)}}},{key:"isAcute",value:function(s,o,c){var p=s.x-o.x,y=s.y-o.y;return p*(c.x-o.x)+y*(c.y-o.y)>0}},{key:"isObtuse",value:function(s,o,c){var p=s.x-o.x,y=s.y-o.y;return p*(c.x-o.x)+y*(c.y-o.y)<0}},{key:"interiorAngle",value:function(s,o,c){var p=h.angle(o,s),y=h.angle(o,c);return Math.abs(y-p)}},{key:"normalizePositive",value:function(s){if(s<0){for(;s<0;)s+=h.PI_TIMES_2;s>=h.PI_TIMES_2&&(s=0)}else{for(;s>=h.PI_TIMES_2;)s-=h.PI_TIMES_2;s<0&&(s=0)}return s}},{key:"angleBetween",value:function(s,o,c){var p=h.angle(o,s),y=h.angle(o,c);return h.diff(p,y)}},{key:"diff",value:function(s,o){var c=null;return(c=s<o?o-s:s-o)>Math.PI&&(c=2*Math.PI-c),c}},{key:"toRadians",value:function(s){return s*Math.PI/180}},{key:"getTurn",value:function(s,o){var c=Math.sin(o-s);return c>0?h.COUNTERCLOCKWISE:c<0?h.CLOCKWISE:h.NONE}},{key:"angleBetweenOriented",value:function(s,o,c){var p=h.angle(o,s),y=h.angle(o,c)-p;return y<=-Math.PI?y+h.PI_TIMES_2:y>Math.PI?y-h.PI_TIMES_2:y}}])}();be.PI_TIMES_2=2*Math.PI,be.PI_OVER_2=Math.PI/2,be.PI_OVER_4=Math.PI/4,be.COUNTERCLOCKWISE=Mt.COUNTERCLOCKWISE,be.CLOCKWISE=Mt.CLOCKWISE,be.NONE=Mt.COLLINEAR;var us=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"addNextSegment",value:function(s,o){if(this._s0=this._s1,this._s1=this._s2,this._s2=s,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var c=Mt.index(this._s0,this._s1,this._s2),p=c===Mt.CLOCKWISE&&this._side===ut.LEFT||c===Mt.COUNTERCLOCKWISE&&this._side===ut.RIGHT;c===0?this.addCollinear(o):p?this.addOutsideTurn(c,o):this.addInsideTurn(c,o)}},{key:"addLineEndCap",value:function(s,o){var c=new cn(s,o),p=new cn;this.computeOffsetSegment(c,ut.LEFT,this._distance,p);var y=new cn;this.computeOffsetSegment(c,ut.RIGHT,this._distance,y);var b=o.x-s.x,T=o.y-s.y,D=Math.atan2(T,b);switch(this._bufParams.getEndCapStyle()){case O.CAP_ROUND:this._segList.addPt(p.p1),this.addDirectedFillet(o,D+Math.PI/2,D-Math.PI/2,Mt.CLOCKWISE,this._distance),this._segList.addPt(y.p1);break;case O.CAP_FLAT:this._segList.addPt(p.p1),this._segList.addPt(y.p1);break;case O.CAP_SQUARE:var z=new Z;z.x=Math.abs(this._distance)*Math.cos(D),z.y=Math.abs(this._distance)*Math.sin(D);var W=new Z(p.p1.x+z.x,p.p1.y+z.y),Y=new Z(y.p1.x+z.x,y.p1.y+z.y);this._segList.addPt(W),this._segList.addPt(Y)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(s,o,c,p){var y=fa.intersection(o.p0,o.p1,c.p0,c.p1);if(y!==null&&(p<=0?1:y.distance(s)/Math.abs(p))<=this._bufParams.getMitreLimit())return this._segList.addPt(y),null;this.addLimitedMitreJoin(o,c,p,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(s,o){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*h.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===O.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===O.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(o&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,s,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(s){this._segList.addPt(new Z(s.x+this._distance,s.y+this._distance)),this._segList.addPt(new Z(s.x+this._distance,s.y-this._distance)),this._segList.addPt(new Z(s.x-this._distance,s.y-this._distance)),this._segList.addPt(new Z(s.x-this._distance,s.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(s,o){this._segList.addPts(s,o)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(s,o,c,p,y){var b=o.x-s.x,T=o.y-s.y,D=Math.atan2(T,b),z=c.x-s.x,W=c.y-s.y,Y=Math.atan2(W,z);p===Mt.CLOCKWISE?D<=Y&&(D+=2*Math.PI):D>=Y&&(D-=2*Math.PI),this._segList.addPt(o),this.addDirectedFillet(s,D,Y,p,y),this._segList.addPt(c)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(s,o,c){this._s1=s,this._s2=o,this._side=c,this._seg1.setCoordinates(s,o),this.computeOffsetSegment(this._seg1,c,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(s,o,c,p){var y=this._seg0.p1,b=be.angle(y,this._seg0.p0),T=be.angleBetweenOriented(this._seg0.p0,y,this._seg1.p1)/2,D=be.normalize(b+T),z=be.normalize(D+Math.PI),W=p*c,Y=c-W*Math.abs(Math.sin(T)),st=y.x+W*Math.cos(z),ft=y.y+W*Math.sin(z),yt=new Z(st,ft),bt=new cn(y,yt),Gt=bt.pointAlongOffset(1,Y),At=bt.pointAlongOffset(1,-Y);this._side===ut.LEFT?(this._segList.addPt(Gt),this._segList.addPt(At)):(this._segList.addPt(At),this._segList.addPt(Gt))}},{key:"addDirectedFillet",value:function(s,o,c,p,y){var b=p===Mt.CLOCKWISE?-1:1,T=Math.abs(o-c),D=Math.trunc(T/this._filletAngleQuantum+.5);if(D<1)return null;for(var z=T/D,W=new Z,Y=0;Y<D;Y++){var st=o+b*Y*z;W.x=s.x+y*Math.cos(st),W.y=s.y+y*Math.sin(st),this._segList.addPt(W)}}},{key:"computeOffsetSegment",value:function(s,o,c,p){var y=o===ut.LEFT?1:-1,b=s.p1.x-s.p0.x,T=s.p1.y-s.p0.y,D=Math.sqrt(b*b+T*T),z=y*c*b/D,W=y*c*T/D;p.p0.x=s.p0.x-W,p.p0.y=s.p0.y+z,p.p1.x=s.p1.x-W,p.p1.y=s.p1.y+z}},{key:"addInsideTurn",value:function(s,o){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*h.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var c=new Z((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(c);var p=new Z((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(p)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(s){var o=new Z(s.x+this._distance,s.y);this._segList.addPt(o),this.addDirectedFillet(s,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(s,o){this._segList.addPt(s.p1),this._segList.addPt(o.p0)}},{key:"init",value:function(s){this._distance=s,this._maxCurveSegmentError=s*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new ls,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(s*h.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(s){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===O.JOIN_BEVEL||this._bufParams.getJoinStyle()===O.JOIN_MITRE?(s&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,Mt.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new cn,this._seg1=new cn,this._offset0=new cn,this._offset1=new cn,this._side=0,this._hasNarrowConcaveAngle=!1;var s=arguments[0],o=arguments[1],c=arguments[2];this._precisionModel=s,this._bufParams=o,this._li=new hi,this._filletAngleQuantum=Math.PI/2/o.getQuadrantSegments(),o.getQuadrantSegments()>=8&&o.getJoinStyle()===O.JOIN_ROUND&&(this._closingSegLengthFactor=h.MAX_CLOSING_SEG_LEN_FACTOR),this.init(c)}}])}();us.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,us.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,us.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,us.MAX_CLOSING_SEG_LEN_FACTOR=80;var cs=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"getOffsetCurve",value:function(s,o){if(this._distance=o,o===0)return null;var c=o<0,p=Math.abs(o),y=this.getSegGen(p);s.length<=1?this.computePointCurve(s[0],y):this.computeOffsetCurve(s,c,y);var b=y.getCoordinates();return c&&xe.reverse(b),b}},{key:"computeSingleSidedBufferCurve",value:function(s,o,c){var p=this.simplifyTolerance(this._distance);if(o){c.addSegments(s,!0);var y=kn.simplify(s,-p),b=y.length-1;c.initSideSegments(y[b],y[b-1],ut.LEFT),c.addFirstSegment();for(var T=b-2;T>=0;T--)c.addNextSegment(y[T],!0)}else{c.addSegments(s,!1);var D=kn.simplify(s,p),z=D.length-1;c.initSideSegments(D[0],D[1],ut.LEFT),c.addFirstSegment();for(var W=2;W<=z;W++)c.addNextSegment(D[W],!0)}c.addLastSegment(),c.closeRing()}},{key:"computeRingBufferCurve",value:function(s,o,c){var p=this.simplifyTolerance(this._distance);o===ut.RIGHT&&(p=-p);var y=kn.simplify(s,p),b=y.length-1;c.initSideSegments(y[b-1],y[0],o);for(var T=1;T<=b;T++){var D=T!==1;c.addNextSegment(y[T],D)}c.closeRing()}},{key:"computeLineBufferCurve",value:function(s,o){var c=this.simplifyTolerance(this._distance),p=kn.simplify(s,c),y=p.length-1;o.initSideSegments(p[0],p[1],ut.LEFT);for(var b=2;b<=y;b++)o.addNextSegment(p[b],!0);o.addLastSegment(),o.addLineEndCap(p[y-1],p[y]);var T=kn.simplify(s,-c),D=T.length-1;o.initSideSegments(T[D],T[D-1],ut.LEFT);for(var z=D-2;z>=0;z--)o.addNextSegment(T[z],!0);o.addLastSegment(),o.addLineEndCap(T[1],T[0]),o.closeRing()}},{key:"computePointCurve",value:function(s,o){switch(this._bufParams.getEndCapStyle()){case O.CAP_ROUND:o.createCircle(s);break;case O.CAP_SQUARE:o.createSquare(s)}}},{key:"getLineCurve",value:function(s,o){if(this._distance=o,this.isLineOffsetEmpty(o))return null;var c=Math.abs(o),p=this.getSegGen(c);if(s.length<=1)this.computePointCurve(s[0],p);else if(this._bufParams.isSingleSided()){var y=o<0;this.computeSingleSidedBufferCurve(s,y,p)}else this.computeLineBufferCurve(s,p);return p.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(s){return s*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(s,o,c){if(this._distance=c,s.length<=2)return this.getLineCurve(s,c);if(c===0)return h.copyCoordinates(s);var p=this.getSegGen(c);return this.computeRingBufferCurve(s,o,p),p.getCoordinates()}},{key:"computeOffsetCurve",value:function(s,o,c){var p=this.simplifyTolerance(this._distance);if(o){var y=kn.simplify(s,-p),b=y.length-1;c.initSideSegments(y[b],y[b-1],ut.LEFT),c.addFirstSegment();for(var T=b-2;T>=0;T--)c.addNextSegment(y[T],!0)}else{var D=kn.simplify(s,p),z=D.length-1;c.initSideSegments(D[0],D[1],ut.LEFT),c.addFirstSegment();for(var W=2;W<=z;W++)c.addNextSegment(D[W],!0)}c.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(s){return s===0||s<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(s){return new us(this._precisionModel,this._bufParams,s)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var s=arguments[0],o=arguments[1];this._precisionModel=s,this._bufParams=o}},{key:"copyCoordinates",value:function(s){for(var o=new Array(s.length).fill(null),c=0;c<o.length;c++)o[c]=new Z(s[c]);return o}}])}(),hn=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var h=arguments[0],s=new Tt,o=this._subgraphs.iterator();o.hasNext();){var c=o.next(),p=c.getEnvelope();h.y<p.getMinY()||h.y>p.getMaxY()||this.findStabbedSegments(h,c.getDirectedEdges(),s)}return s}if(arguments.length===3){if(Ot(arguments[2],wi)&&arguments[0]instanceof Z&&arguments[1]instanceof Ea){for(var y=arguments[0],b=arguments[1],T=arguments[2],D=b.getEdge().getCoordinates(),z=0;z<D.length-1;z++)if(this._seg.p0=D[z],this._seg.p1=D[z+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<y.x||this._seg.isHorizontal()||y.y<this._seg.p0.y||y.y>this._seg.p1.y||Mt.index(this._seg.p0,this._seg.p1,y)===Mt.RIGHT)){var W=b.getDepth(ut.LEFT);this._seg.p0.equals(D[z])||(W=b.getDepth(ut.RIGHT));var Y=new Ia(this._seg,W);T.add(Y)}}else if(Ot(arguments[2],wi)&&arguments[0]instanceof Z&&Ot(arguments[1],wi))for(var st=arguments[0],ft=arguments[2],yt=arguments[1].iterator();yt.hasNext();){var bt=yt.next();bt.isForward()&&this.findStabbedSegments(st,bt,ft)}}}},{key:"getDepth",value:function(h){var s=this.findStabbedSegments(h);return s.size()===0?0:Zi.min(s)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new cn;var h=arguments[0];this._subgraphs=h}}])}(),Ia=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(h){var s=h;if(this._upwardSeg.minX()>=s._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=s._upwardSeg.minX())return-1;var o=this._upwardSeg.orientationIndex(s._upwardSeg);return o!==0||(o=-1*s._upwardSeg.orientationIndex(this._upwardSeg))!==0?o:this._upwardSeg.compareTo(s._upwardSeg)}},{key:"compareX",value:function(h,s){var o=h.p0.compareTo(s.p0);return o!==0?o:h.p1.compareTo(s.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[H]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var h=arguments[0],s=arguments[1];this._upwardSeg=new cn(h),this._leftDepth=s}}])}();hn.DepthSegment=Ia;var Oa=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,null,[{key:"constructor_",value:function(){B.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(B),Da=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"getY",value:function(){var s=this.y/this.w;if(X.isNaN(s)||X.isInfinite(s))throw new Oa;return s}},{key:"getX",value:function(){var s=this.x/this.w;if(X.isNaN(s)||X.isInfinite(s))throw new Oa;return s}},{key:"getCoordinate",value:function(){var s=new Z;return s.x=this.getX(),s.y=this.getY(),s}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var s=arguments[0];this.x=s.x,this.y=s.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var o=arguments[0],c=arguments[1];this.x=o,this.y=c,this.w=1}else if(arguments[0]instanceof h&&arguments[1]instanceof h){var p=arguments[0],y=arguments[1];this.x=p.y*y.w-y.y*p.w,this.y=y.x*p.w-p.x*y.w,this.w=p.x*y.y-y.x*p.y}else if(arguments[0]instanceof Z&&arguments[1]instanceof Z){var b=arguments[0],T=arguments[1];this.x=b.y-T.y,this.y=T.x-b.x,this.w=b.x*T.y-T.x*b.y}}else if(arguments.length===3){var D=arguments[0],z=arguments[1],W=arguments[2];this.x=D,this.y=z,this.w=W}else if(arguments.length===4){var Y=arguments[0],st=arguments[1],ft=arguments[2],yt=arguments[3],bt=Y.y-st.y,Gt=st.x-Y.x,At=Y.x*st.y-st.x*Y.y,Jt=ft.y-yt.y,he=yt.x-ft.x,Pe=ft.x*yt.y-yt.x*ft.y;this.x=Gt*Pe-he*At,this.y=Jt*At-bt*Pe,this.w=bt*he-Jt*Gt}}}])}(),Ra=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"area",value:function(){return h.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return h.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(s){if(s===null)throw new F("Supplied point is null.");return h.interpolateZ(s,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return h.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return h.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return h.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return h.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return h.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return h.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var s=arguments[0],o=arguments[1],c=arguments[2];this.p0=s,this.p1=o,this.p2=c}},{key:"area",value:function(s,o,c){return Math.abs(((c.x-s.x)*(o.y-s.y)-(o.x-s.x)*(c.y-s.y))/2)}},{key:"signedArea",value:function(s,o,c){return((c.x-s.x)*(o.y-s.y)-(o.x-s.x)*(c.y-s.y))/2}},{key:"det",value:function(s,o,c,p){return s*p-o*c}},{key:"interpolateZ",value:function(s,o,c,p){var y=o.x,b=o.y,T=c.x-y,D=p.x-y,z=c.y-b,W=p.y-b,Y=T*W-D*z,st=s.x-y,ft=s.y-b,yt=(W*st-D*ft)/Y,bt=(-z*st+T*ft)/Y;return o.getZ()+yt*(c.getZ()-o.getZ())+bt*(p.getZ()-o.getZ())}},{key:"longestSideLength",value:function(s,o,c){var p=s.distance(o),y=o.distance(c),b=c.distance(s),T=p;return y>T&&(T=y),b>T&&(T=b),T}},{key:"circumcentreDD",value:function(s,o,c){var p=Ct.valueOf(s.x).subtract(c.x),y=Ct.valueOf(s.y).subtract(c.y),b=Ct.valueOf(o.x).subtract(c.x),T=Ct.valueOf(o.y).subtract(c.y),D=Ct.determinant(p,y,b,T).multiply(2),z=p.sqr().add(y.sqr()),W=b.sqr().add(T.sqr()),Y=Ct.determinant(y,z,T,W),st=Ct.determinant(p,z,b,W),ft=Ct.valueOf(c.x).subtract(Y.divide(D)).doubleValue(),yt=Ct.valueOf(c.y).add(st.divide(D)).doubleValue();return new Z(ft,yt)}},{key:"isAcute",value:function(s,o,c){return!!be.isAcute(s,o,c)&&!!be.isAcute(o,c,s)&&!!be.isAcute(c,s,o)}},{key:"circumcentre",value:function(s,o,c){var p=c.x,y=c.y,b=s.x-p,T=s.y-y,D=o.x-p,z=o.y-y,W=2*h.det(b,T,D,z),Y=h.det(T,b*b+T*T,z,D*D+z*z),st=h.det(b,b*b+T*T,D,D*D+z*z);return new Z(p-Y/W,y+st/W)}},{key:"perpendicularBisector",value:function(s,o){var c=o.x-s.x,p=o.y-s.y,y=new Da(s.x+c/2,s.y+p/2,1),b=new Da(s.x-p+c/2,s.y+c+p/2,1);return new Da(y,b)}},{key:"angleBisector",value:function(s,o,c){var p=o.distance(s),y=p/(p+o.distance(c)),b=c.x-s.x,T=c.y-s.y;return new Z(s.x+y*b,s.y+y*T)}},{key:"area3D",value:function(s,o,c){var p=o.x-s.x,y=o.y-s.y,b=o.getZ()-s.getZ(),T=c.x-s.x,D=c.y-s.y,z=c.getZ()-s.getZ(),W=y*z-b*D,Y=b*T-p*z,st=p*D-y*T,ft=W*W+Y*Y+st*st,yt=Math.sqrt(ft)/2;return yt}},{key:"centroid",value:function(s,o,c){var p=(s.x+o.x+c.x)/3,y=(s.y+o.y+c.y)/3;return new Z(p,y)}},{key:"inCentre",value:function(s,o,c){var p=o.distance(c),y=s.distance(c),b=s.distance(o),T=p+y+b,D=(p*s.x+y*o.x+b*c.x)/T,z=(p*s.y+y*o.y+b*c.y)/T;return new Z(D,z)}}])}(),Aa=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(h,s,o,c,p){if(s===0&&h.length<Hn.MINIMUM_VALID_SIZE)return null;var y=c,b=p;h.length>=Hn.MINIMUM_VALID_SIZE&&Mt.isCCW(h)&&(y=p,b=c,o=ut.opposite(o));var T=this._curveBuilder.getRingCurve(h,o,s);this.addCurve(T,y,b)}},{key:"addRingBothSides",value:function(h,s){this.addRingSide(h,s,ut.LEFT,j.EXTERIOR,j.INTERIOR),this.addRingSide(h,s,ut.RIGHT,j.INTERIOR,j.EXTERIOR)}},{key:"addPoint",value:function(h){if(this._distance<=0)return null;var s=h.getCoordinates(),o=this._curveBuilder.getLineCurve(s,this._distance);this.addCurve(o,j.EXTERIOR,j.INTERIOR)}},{key:"addPolygon",value:function(h){var s=this._distance,o=ut.LEFT;this._distance<0&&(s=-this._distance,o=ut.RIGHT);var c=h.getExteriorRing(),p=xe.removeRepeatedPoints(c.getCoordinates());if(this._distance<0&&this.isErodedCompletely(c,this._distance)||this._distance<=0&&p.length<3)return null;this.addRingSide(p,s,o,j.EXTERIOR,j.INTERIOR);for(var y=0;y<h.getNumInteriorRing();y++){var b=h.getInteriorRingN(y),T=xe.removeRepeatedPoints(b.getCoordinates());this._distance>0&&this.isErodedCompletely(b,-this._distance)||this.addRingSide(T,s,ut.opposite(o),j.INTERIOR,j.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(h,s){var o=new Ra(h[0],h[1],h[2]),c=o.inCentre();return In.pointToSegment(c,o.p0,o.p1)<Math.abs(s)}},{key:"addLineString",value:function(h){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var s=xe.removeRepeatedPoints(h.getCoordinates());if(xe.isRing(s)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(s,this._distance);else{var o=this._curveBuilder.getLineCurve(s,this._distance);this.addCurve(o,j.EXTERIOR,j.INTERIOR)}}},{key:"addCurve",value:function(h,s,o){if(h===null||h.length<2)return null;var c=new fi(h,new Qe(0,j.BOUNDARY,s,o));this._curveList.add(c)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(h){if(h.isEmpty())return null;if(h instanceof es)this.addPolygon(h);else if(h instanceof ts)this.addLineString(h);else if(h instanceof ga)this.addPoint(h);else if(h instanceof Xs)this.addCollection(h);else if(h instanceof Js)this.addCollection(h);else if(h instanceof va)this.addCollection(h);else{if(!(h instanceof Ve))throw new ui(h.getGeometryType());this.addCollection(h)}}},{key:"isErodedCompletely",value:function(h,s){var o=h.getCoordinates();if(o.length<4)return s<0;if(o.length===4)return this.isTriangleErodedCompletely(o,s);var c=h.getEnvelopeInternal(),p=Math.min(c.getHeight(),c.getWidth());return s<0&&2*Math.abs(s)>p}},{key:"addCollection",value:function(h){for(var s=0;s<h.getNumGeometries();s++){var o=h.getGeometryN(s);this.add(o)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Tt;var h=arguments[0],s=arguments[1],o=arguments[2];this._inputGeom=h,this._distance=s,this._curveBuilder=o}}])}(),Jh=function(){return f(function h(){i(this,h)},[{key:"locate",value:function(h){}}])}(),tf=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,h.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Gs;var s=this._parent.getGeometryN(this._index++);return s instanceof Ve?(this._subcollectionIterator=new h(s),this._subcollectionIterator.next()):s}},{key:"remove",value:function(){throw new ui(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[Kh]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var s=arguments[0];this._parent=s,this._atStart=!0,this._index=0,this._max=s.getNumGeometries()}},{key:"isAtomic",value:function(s){return!(s instanceof Ve)}}])}(),ku=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"locate",value:function(s){return h.locate(s,this._geom)}},{key:"interfaces_",get:function(){return[Jh]}}],[{key:"constructor_",value:function(){this._geom=null;var s=arguments[0];this._geom=s}},{key:"locatePointInPolygon",value:function(s,o){if(o.isEmpty())return j.EXTERIOR;var c=o.getExteriorRing(),p=h.locatePointInRing(s,c);if(p!==j.INTERIOR)return p;for(var y=0;y<o.getNumInteriorRing();y++){var b=o.getInteriorRingN(y),T=h.locatePointInRing(s,b);if(T===j.BOUNDARY)return j.BOUNDARY;if(T===j.INTERIOR)return j.EXTERIOR}return j.INTERIOR}},{key:"locatePointInRing",value:function(s,o){return o.getEnvelopeInternal().intersects(s)?vr.locateInRing(s,o.getCoordinates()):j.EXTERIOR}},{key:"containsPointInPolygon",value:function(s,o){return j.EXTERIOR!==h.locatePointInPolygon(s,o)}},{key:"locateInGeometry",value:function(s,o){if(o instanceof es)return h.locatePointInPolygon(s,o);if(o instanceof Ve)for(var c=new tf(o);c.hasNext();){var p=c.next();if(p!==o){var y=h.locateInGeometry(s,p);if(y!==j.EXTERIOR)return y}}return j.EXTERIOR}},{key:"isContained",value:function(s,o){return j.EXTERIOR!==h.locate(s,o)}},{key:"locate",value:function(s,o){return o.isEmpty()?j.EXTERIOR:o.getEnvelopeInternal().intersects(s)?h.locateInGeometry(s,o):j.EXTERIOR}}])}(),ef=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(h){this.getEdges();var s=this._edgeList.indexOf(h),o=s-1;return s===0&&(o=this._edgeList.size()-1),this._edgeList.get(o)}},{key:"propagateSideLabels",value:function(h){for(var s=j.NONE,o=this.iterator();o.hasNext();){var c=o.next().getLabel();c.isArea(h)&&c.getLocation(h,ut.LEFT)!==j.NONE&&(s=c.getLocation(h,ut.LEFT))}if(s===j.NONE)return null;for(var p=s,y=this.iterator();y.hasNext();){var b=y.next(),T=b.getLabel();if(T.getLocation(h,ut.ON)===j.NONE&&T.setLocation(h,ut.ON,p),T.isArea(h)){var D=T.getLocation(h,ut.LEFT),z=T.getLocation(h,ut.RIGHT);if(z!==j.NONE){if(z!==p)throw new Un("side location conflict",b.getCoordinate());D===j.NONE&&pt.shouldNeverReachHere("found single null side (at "+b.getCoordinate()+")"),p=D}else pt.isTrue(T.getLocation(h,ut.LEFT)===j.NONE,"found single null side"),T.setLocation(h,ut.RIGHT,p),T.setLocation(h,ut.LEFT,p)}}}},{key:"getCoordinate",value:function(){var h=this.iterator();return h.hasNext()?h.next().getCoordinate():null}},{key:"print",value:function(h){wn.out.println("EdgeEndStar:   "+this.getCoordinate());for(var s=this.iterator();s.hasNext();)s.next().print(h)}},{key:"isAreaLabelsConsistent",value:function(h){return this.computeEdgeEndLabels(h.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(h){var s=this.getEdges();if(s.size()<=0)return!0;var o=s.size()-1,c=s.get(o).getLabel().getLocation(h,ut.LEFT);pt.isTrue(c!==j.NONE,"Found unlabelled area edge");for(var p=c,y=this.iterator();y.hasNext();){var b=y.next().getLabel();pt.isTrue(b.isArea(h),"Found non-area edge");var T=b.getLocation(h,ut.LEFT),D=b.getLocation(h,ut.RIGHT);if(T===D||D!==p)return!1;p=T}return!0}},{key:"findIndex",value:function(h){this.iterator();for(var s=0;s<this._edgeList.size();s++)if(this._edgeList.get(s)===h)return s;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new Tt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(h,s,o){return this._ptInAreaLocation[h]===j.NONE&&(this._ptInAreaLocation[h]=ku.locate(s,o[h].getGeometry())),this._ptInAreaLocation[h]}},{key:"toString",value:function(){var h=new Qr;h.append("EdgeEndStar:   "+this.getCoordinate()),h.append(`
`);for(var s=this.iterator();s.hasNext();){var o=s.next();h.append(o),h.append(`
`)}return h.toString()}},{key:"computeEdgeEndLabels",value:function(h){for(var s=this.iterator();s.hasNext();)s.next().computeLabel(h)}},{key:"computeLabelling",value:function(h){this.computeEdgeEndLabels(h[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var s=[!1,!1],o=this.iterator();o.hasNext();)for(var c=o.next().getLabel(),p=0;p<2;p++)c.isLine(p)&&c.getLocation(p)===j.BOUNDARY&&(s[p]=!0);for(var y=this.iterator();y.hasNext();)for(var b=y.next(),T=b.getLabel(),D=0;D<2;D++)if(T.isAnyNull(D)){var z=j.NONE;if(s[D])z=j.EXTERIOR;else{var W=b.getCoordinate();z=this.getLocation(D,W,h)}T.setAllLocationsIfNull(D,z)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(h,s){this._edgeMap.put(h,s),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new de,this._edgeList=null,this._ptInAreaLocation=[j.NONE,j.NONE]}}])}(),Dn=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var o=null,c=null,p=this._SCANNING_FOR_INCOMING,y=0;y<this._resultAreaEdgeList.size();y++){var b=this._resultAreaEdgeList.get(y),T=b.getSym();if(b.getLabel().isArea())switch(o===null&&b.isInResult()&&(o=b),p){case this._SCANNING_FOR_INCOMING:if(!T.isInResult())continue;c=T,p=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!b.isInResult())continue;c.setNext(b),p=this._SCANNING_FOR_INCOMING}}if(p===this._LINKING_TO_OUTGOING){if(o===null)throw new Un("no outgoing dirEdge found",this.getCoordinate());pt.isTrue(o.isInResult(),"unable to link last incoming dirEdge"),c.setNext(o)}}},{key:"insert",value:function(o){var c=o;this.insertEdgeEnd(c,c)}},{key:"getRightmostEdge",value:function(){var o=this.getEdges(),c=o.size();if(c<1)return null;var p=o.get(0);if(c===1)return p;var y=o.get(c-1),b=p.getQuadrant(),T=y.getQuadrant();return ze.isNorthern(b)&&ze.isNorthern(T)?p:ze.isNorthern(b)||ze.isNorthern(T)?p.getDy()!==0?p:y.getDy()!==0?y:(pt.shouldNeverReachHere("found two horizontal edges incident on node"),null):y}},{key:"print",value:function(o){wn.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var c=this.iterator();c.hasNext();){var p=c.next();o.print("out "),p.print(o),o.println(),o.print("in "),p.getSym().print(o),o.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Tt;for(var o=this.iterator();o.hasNext();){var c=o.next();(c.isInResult()||c.getSym().isInResult())&&this._resultAreaEdgeList.add(c)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(o){for(var c=this.iterator();c.hasNext();){var p=c.next().getLabel();p.setAllLocationsIfNull(0,o.getLocation(0)),p.setAllLocationsIfNull(1,o.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var o=null,c=null,p=this._edgeList.size()-1;p>=0;p--){var y=this._edgeList.get(p),b=y.getSym();c===null&&(c=b),o!==null&&b.setNext(o),o=y}c.setNext(o)}},{key:"computeDepths",value:function(){if(arguments.length===1){var o=arguments[0],c=this.findIndex(o),p=o.getDepth(ut.LEFT),y=o.getDepth(ut.RIGHT),b=this.computeDepths(c+1,this._edgeList.size(),p);if(this.computeDepths(0,c,b)!==y)throw new Un("depth mismatch at "+o.getCoordinate())}else if(arguments.length===3){for(var T=arguments[1],D=arguments[2],z=arguments[0];z<T;z++){var W=this._edgeList.get(z);W.setEdgeDepths(ut.RIGHT,D),D=W.getDepth(ut.LEFT)}return D}}},{key:"mergeSymLabels",value:function(){for(var o=this.iterator();o.hasNext();){var c=o.next();c.getLabel().merge(c.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(o){for(var c=null,p=null,y=this._SCANNING_FOR_INCOMING,b=this._resultAreaEdgeList.size()-1;b>=0;b--){var T=this._resultAreaEdgeList.get(b),D=T.getSym();switch(c===null&&T.getEdgeRing()===o&&(c=T),y){case this._SCANNING_FOR_INCOMING:if(D.getEdgeRing()!==o)continue;p=D,y=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(T.getEdgeRing()!==o)continue;p.setNextMin(T),y=this._SCANNING_FOR_INCOMING}}y===this._LINKING_TO_OUTGOING&&(pt.isTrue(c!==null,"found null for first outgoing dirEdge"),pt.isTrue(c.getEdgeRing()===o,"unable to link last incoming dirEdge"),p.setNextMin(c))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var o=0,c=this.iterator();c.hasNext();)c.next().isInResult()&&o++;return o}if(arguments.length===1){for(var p=arguments[0],y=0,b=this.iterator();b.hasNext();)b.next().getEdgeRing()===p&&y++;return y}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var o=j.NONE,c=this.iterator();c.hasNext();){var p=c.next(),y=p.getSym();if(!p.isLineEdge()){if(p.isInResult()){o=j.INTERIOR;break}if(y.isInResult()){o=j.EXTERIOR;break}}}if(o===j.NONE)return null;for(var b=o,T=this.iterator();T.hasNext();){var D=T.next(),z=D.getSym();D.isLineEdge()?D.getEdge().setCovered(b===j.INTERIOR):(D.isInResult()&&(b=j.EXTERIOR),z.isInResult()&&(b=j.INTERIOR))}}},{key:"computeLabelling",value:function(o){C(s,"computeLabelling",this,1).call(this,o),this._label=new Qe(j.NONE);for(var c=this.iterator();c.hasNext();)for(var p=c.next().getEdge().getLabel(),y=0;y<2;y++){var b=p.getLocation(y);b!==j.INTERIOR&&b!==j.BOUNDARY||this._label.setLocation(y,j.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(ef),xr=function(h){function s(){return i(this,s),r(this,s)}return x(s,h),f(s,[{key:"createNode",value:function(o){return new os(o,new Dn)}}])}(Sa),Lu=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"compareTo",value:function(s){var o=s;return h.compareOriented(this._pts,this._orientation,o._pts,o._orientation)}},{key:"interfaces_",get:function(){return[H]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var s=arguments[0];this._pts=s,this._orientation=h.orientation(s)}},{key:"orientation",value:function(s){return xe.increasingDirection(s)===1}},{key:"compareOriented",value:function(s,o,c,p){for(var y=o?1:-1,b=p?1:-1,T=o?s.length:-1,D=p?c.length:-1,z=o?0:s.length-1,W=p?0:c.length-1;;){var Y=s[z].compareTo(c[W]);if(Y!==0)return Y;var st=(z+=y)===T,ft=(W+=b)===D;if(st&&!ft)return-1;if(!st&&ft)return 1;if(st&&ft)return 0}}}])}(),di=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"print",value:function(h){h.print("MULTILINESTRING ( ");for(var s=0;s<this._edges.size();s++){var o=this._edges.get(s);s>0&&h.print(","),h.print("(");for(var c=o.getCoordinates(),p=0;p<c.length;p++)p>0&&h.print(","),h.print(c[p].x+" "+c[p].y);h.println(")")}h.print(")  ")}},{key:"addAll",value:function(h){for(var s=h.iterator();s.hasNext();)this.add(s.next())}},{key:"findEdgeIndex",value:function(h){for(var s=0;s<this._edges.size();s++)if(this._edges.get(s).equals(h))return s;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(h){return this._edges.get(h)}},{key:"findEqualEdge",value:function(h){var s=new Lu(h.getCoordinates());return this._ocaMap.get(s)}},{key:"add",value:function(h){this._edges.add(h);var s=new Lu(h.getCoordinates());this._ocaMap.put(s,h)}}],[{key:"constructor_",value:function(){this._edges=new Tt,this._ocaMap=new de}}])}(),bu=function(){return f(function h(){i(this,h)},[{key:"processIntersections",value:function(h,s,o,c){}},{key:"isDone",value:function(){}}])}(),wr=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"isTrivialIntersection",value:function(s,o,c,p){if(s===c&&this._li.getIntersectionNum()===1){if(h.isAdjacentSegments(o,p))return!0;if(s.isClosed()){var y=s.size()-1;if(o===0&&p===y||p===0&&o===y)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(s,o,c,p){if(s===c&&o===p)return null;this.numTests++;var y=s.getCoordinates()[o],b=s.getCoordinates()[o+1],T=c.getCoordinates()[p],D=c.getCoordinates()[p+1];this._li.computeIntersection(y,b,T,D),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(s,o,c,p)||(this._hasIntersection=!0,s.addIntersections(this._li,o,0),c.addIntersections(this._li,p,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[bu]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var s=arguments[0];this._li=s}},{key:"isAdjacentSegments",value:function(s,o){return Math.abs(s-o)===1}}])}(),nf=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(h){h.print(this.coord),h.print(" seg # = "+this.segmentIndex),h.println(" dist = "+this.dist)}},{key:"compareTo",value:function(h){var s=h;return this.compare(s.segmentIndex,s.dist)}},{key:"isEndPoint",value:function(h){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===h}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(h,s){return this.segmentIndex<h?-1:this.segmentIndex>h?1:this.dist<s?-1:this.dist>s?1:0}},{key:"interfaces_",get:function(){return[H]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var h=arguments[0],s=arguments[1],o=arguments[2];this.coord=new Z(h),this.segmentIndex=s,this.dist=o}}])}(),hs=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"print",value:function(h){h.println("Intersections:");for(var s=this.iterator();s.hasNext();)s.next().print(h)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(h){this.addEndpoints();for(var s=this.iterator(),o=s.next();s.hasNext();){var c=s.next(),p=this.createSplitEdge(o,c);h.add(p),o=c}}},{key:"addEndpoints",value:function(){var h=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[h],h,0)}},{key:"createSplitEdge",value:function(h,s){var o=s.segmentIndex-h.segmentIndex+2,c=this.edge.pts[s.segmentIndex],p=s.dist>0||!s.coord.equals2D(c);p||o--;var y=new Array(o).fill(null),b=0;y[b++]=new Z(h.coord);for(var T=h.segmentIndex+1;T<=s.segmentIndex;T++)y[b++]=this.edge.pts[T];return p&&(y[b]=s.coord),new Su(y,new Qe(this.edge._label))}},{key:"add",value:function(h,s,o){var c=new nf(h,s,o),p=this._nodeMap.get(c);return p!==null?p:(this._nodeMap.put(c,c),c)}},{key:"isIntersection",value:function(h){for(var s=this.iterator();s.hasNext();)if(s.next().coord.equals(h))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new de,this.edge=null;var h=arguments[0];this.edge=h}}])}(),Eu=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(h.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])||h.isTrue(this._matrix[j.INTERIOR][j.BOUNDARY])||h.isTrue(this._matrix[j.BOUNDARY][j.INTERIOR])||h.isTrue(this._matrix[j.BOUNDARY][j.BOUNDARY]))&&this._matrix[j.EXTERIOR][j.INTERIOR]===ct.FALSE&&this._matrix[j.EXTERIOR][j.BOUNDARY]===ct.FALSE}},{key:"isCoveredBy",value:function(){return(h.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])||h.isTrue(this._matrix[j.INTERIOR][j.BOUNDARY])||h.isTrue(this._matrix[j.BOUNDARY][j.INTERIOR])||h.isTrue(this._matrix[j.BOUNDARY][j.BOUNDARY]))&&this._matrix[j.INTERIOR][j.EXTERIOR]===ct.FALSE&&this._matrix[j.BOUNDARY][j.EXTERIOR]===ct.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var s=arguments[0],o=0;o<s.length;o++){var c=Math.trunc(o/3),p=o%3;this._matrix[c][p]=ct.toDimensionValue(s.charAt(o))}else if(arguments.length===3){var y=arguments[0],b=arguments[1],T=arguments[2];this._matrix[y][b]=T}}},{key:"isContains",value:function(){return h.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&this._matrix[j.EXTERIOR][j.INTERIOR]===ct.FALSE&&this._matrix[j.EXTERIOR][j.BOUNDARY]===ct.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var s=arguments[0],o=0;o<s.length;o++){var c=Math.trunc(o/3),p=o%3;this.setAtLeast(c,p,ct.toDimensionValue(s.charAt(o)))}else if(arguments.length===3){var y=arguments[0],b=arguments[1],T=arguments[2];this._matrix[y][b]<T&&(this._matrix[y][b]=T)}}},{key:"setAtLeastIfValid",value:function(s,o,c){s>=0&&o>=0&&this.setAtLeast(s,o,c)}},{key:"isWithin",value:function(){return h.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&this._matrix[j.INTERIOR][j.EXTERIOR]===ct.FALSE&&this._matrix[j.BOUNDARY][j.EXTERIOR]===ct.FALSE}},{key:"isTouches",value:function(s,o){return s>o?this.isTouches(o,s):(s===ct.A&&o===ct.A||s===ct.L&&o===ct.L||s===ct.L&&o===ct.A||s===ct.P&&o===ct.A||s===ct.P&&o===ct.L)&&this._matrix[j.INTERIOR][j.INTERIOR]===ct.FALSE&&(h.isTrue(this._matrix[j.INTERIOR][j.BOUNDARY])||h.isTrue(this._matrix[j.BOUNDARY][j.INTERIOR])||h.isTrue(this._matrix[j.BOUNDARY][j.BOUNDARY]))}},{key:"isOverlaps",value:function(s,o){return s===ct.P&&o===ct.P||s===ct.A&&o===ct.A?h.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&h.isTrue(this._matrix[j.INTERIOR][j.EXTERIOR])&&h.isTrue(this._matrix[j.EXTERIOR][j.INTERIOR]):s===ct.L&&o===ct.L&&this._matrix[j.INTERIOR][j.INTERIOR]===1&&h.isTrue(this._matrix[j.INTERIOR][j.EXTERIOR])&&h.isTrue(this._matrix[j.EXTERIOR][j.INTERIOR])}},{key:"isEquals",value:function(s,o){return s===o&&h.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&this._matrix[j.INTERIOR][j.EXTERIOR]===ct.FALSE&&this._matrix[j.BOUNDARY][j.EXTERIOR]===ct.FALSE&&this._matrix[j.EXTERIOR][j.INTERIOR]===ct.FALSE&&this._matrix[j.EXTERIOR][j.BOUNDARY]===ct.FALSE}},{key:"toString",value:function(){for(var s=new Qs("123456789"),o=0;o<3;o++)for(var c=0;c<3;c++)s.setCharAt(3*o+c,ct.toDimensionSymbol(this._matrix[o][c]));return s.toString()}},{key:"setAll",value:function(s){for(var o=0;o<3;o++)for(var c=0;c<3;c++)this._matrix[o][c]=s}},{key:"get",value:function(s,o){return this._matrix[s][o]}},{key:"transpose",value:function(){var s=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=s,s=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=s,s=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=s,this}},{key:"matches",value:function(s){if(s.length!==9)throw new F("Should be length 9: "+s);for(var o=0;o<3;o++)for(var c=0;c<3;c++)if(!h.matches(this._matrix[o][c],s.charAt(3*o+c)))return!1;return!0}},{key:"add",value:function(s){for(var o=0;o<3;o++)for(var c=0;c<3;c++)this.setAtLeast(o,c,s.get(o,c))}},{key:"isDisjoint",value:function(){return this._matrix[j.INTERIOR][j.INTERIOR]===ct.FALSE&&this._matrix[j.INTERIOR][j.BOUNDARY]===ct.FALSE&&this._matrix[j.BOUNDARY][j.INTERIOR]===ct.FALSE&&this._matrix[j.BOUNDARY][j.BOUNDARY]===ct.FALSE}},{key:"isCrosses",value:function(s,o){return s===ct.P&&o===ct.L||s===ct.P&&o===ct.A||s===ct.L&&o===ct.A?h.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&h.isTrue(this._matrix[j.INTERIOR][j.EXTERIOR]):s===ct.L&&o===ct.P||s===ct.A&&o===ct.P||s===ct.A&&o===ct.L?h.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&h.isTrue(this._matrix[j.EXTERIOR][j.INTERIOR]):s===ct.L&&o===ct.L&&this._matrix[j.INTERIOR][j.INTERIOR]===0}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(ct.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var s=arguments[0];h.constructor_.call(this),this.set(s)}else if(arguments[0]instanceof h){var o=arguments[0];h.constructor_.call(this),this._matrix[j.INTERIOR][j.INTERIOR]=o._matrix[j.INTERIOR][j.INTERIOR],this._matrix[j.INTERIOR][j.BOUNDARY]=o._matrix[j.INTERIOR][j.BOUNDARY],this._matrix[j.INTERIOR][j.EXTERIOR]=o._matrix[j.INTERIOR][j.EXTERIOR],this._matrix[j.BOUNDARY][j.INTERIOR]=o._matrix[j.BOUNDARY][j.INTERIOR],this._matrix[j.BOUNDARY][j.BOUNDARY]=o._matrix[j.BOUNDARY][j.BOUNDARY],this._matrix[j.BOUNDARY][j.EXTERIOR]=o._matrix[j.BOUNDARY][j.EXTERIOR],this._matrix[j.EXTERIOR][j.INTERIOR]=o._matrix[j.EXTERIOR][j.INTERIOR],this._matrix[j.EXTERIOR][j.BOUNDARY]=o._matrix[j.EXTERIOR][j.BOUNDARY],this._matrix[j.EXTERIOR][j.EXTERIOR]=o._matrix[j.EXTERIOR][j.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var s=arguments[0],o=arguments[1];return o===ct.SYM_DONTCARE||o===ct.SYM_TRUE&&(s>=0||s===ct.TRUE)||o===ct.SYM_FALSE&&s===ct.FALSE||o===ct.SYM_P&&s===ct.P||o===ct.SYM_L&&s===ct.L||o===ct.SYM_A&&s===ct.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var c=arguments[1];return new h(arguments[0]).matches(c)}}},{key:"isTrue",value:function(s){return s>=0||s===ct.TRUE}}])}(),uo=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(s){return s===null||s.length===0?null:(this.ensureCapacity(this._size+s.length),wn.arraycopy(s,0,this._data,this._size,s.length),void(this._size+=s.length))}},{key:"ensureCapacity",value:function(s){if(s<=this._data.length)return null;var o=Math.max(s,2*this._data.length);this._data=Re.copyOf(this._data,o)}},{key:"toArray",value:function(){var s=new Array(this._size).fill(null);return wn.arraycopy(this._data,0,s,0,this._size),s}},{key:"add",value:function(s){this.ensureCapacity(this._size+1),this._data[this._size]=s,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)h.constructor_.call(this,10);else if(arguments.length===1){var s=arguments[0];this._data=new Array(s).fill(null)}}}])}(),rf=function(){function h(){i(this,h)}return f(h,[{key:"getChainStartIndices",value:function(s){var o=0,c=new uo(Math.trunc(s.length/2));c.add(o);do{var p=this.findChainEnd(s,o);c.add(p),o=p}while(o<s.length-1);return c.toArray()}},{key:"findChainEnd",value:function(s,o){for(var c=ze.quadrant(s[o],s[o+1]),p=o+1;p<s.length&&ze.quadrant(s[p-1],s[p])===c;)p++;return p-1}},{key:"OLDgetChainStartIndices",value:function(s){var o=0,c=new Tt;c.add(o);do{var p=this.findChainEnd(s,o);c.add(p),o=p}while(o<s.length-1);return h.toIntArray(c)}}],[{key:"toIntArray",value:function(s){for(var o=new Array(s.size()).fill(null),c=0;c<o.length;c++)o[c]=s.get(c).intValue();return o}}])}(),Ti=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(h){var s=this.pts[this.startIndex[h]].x,o=this.pts[this.startIndex[h+1]].x;return s>o?s:o}},{key:"getMinX",value:function(h){var s=this.pts[this.startIndex[h]].x,o=this.pts[this.startIndex[h+1]].x;return s<o?s:o}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var h=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3];this.computeIntersectsForChain(this.startIndex[h],this.startIndex[h+1],s,s.startIndex[o],s.startIndex[o+1],c)}else if(arguments.length===6){var p=arguments[0],y=arguments[1],b=arguments[2],T=arguments[3],D=arguments[4],z=arguments[5];if(y-p==1&&D-T==1)return z.addIntersections(this.e,p,b.e,T),null;if(!this.overlaps(p,y,b,T,D))return null;var W=Math.trunc((p+y)/2),Y=Math.trunc((T+D)/2);p<W&&(T<Y&&this.computeIntersectsForChain(p,W,b,T,Y,z),Y<D&&this.computeIntersectsForChain(p,W,b,Y,D,z)),W<y&&(T<Y&&this.computeIntersectsForChain(W,y,b,T,Y,z),Y<D&&this.computeIntersectsForChain(W,y,b,Y,D,z))}}},{key:"overlaps",value:function(h,s,o,c,p){return $t.intersects(this.pts[h],this.pts[s],o.pts[c],o.pts[p])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(h,s){for(var o=0;o<this.startIndex.length-1;o++)for(var c=0;c<h.startIndex.length-1;c++)this.computeIntersectsForChain(o,h,c,s)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var h=arguments[0];this.e=h,this.pts=h.getCoordinates();var s=new rf;this.startIndex=s.getChainStartIndices(this.pts)}}])}(),fs=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"getDepth",value:function(s,o){return this._depth[s][o]}},{key:"setDepth",value:function(s,o,c){this._depth[s][o]=c}},{key:"isNull",value:function(){if(arguments.length===0){for(var s=0;s<2;s++)for(var o=0;o<3;o++)if(this._depth[s][o]!==h.NULL_VALUE)return!1;return!0}if(arguments.length===1){var c=arguments[0];return this._depth[c][1]===h.NULL_VALUE}if(arguments.length===2){var p=arguments[0],y=arguments[1];return this._depth[p][y]===h.NULL_VALUE}}},{key:"normalize",value:function(){for(var s=0;s<2;s++)if(!this.isNull(s)){var o=this._depth[s][1];this._depth[s][2]<o&&(o=this._depth[s][2]),o<0&&(o=0);for(var c=1;c<3;c++){var p=0;this._depth[s][c]>o&&(p=1),this._depth[s][c]=p}}}},{key:"getDelta",value:function(s){return this._depth[s][ut.RIGHT]-this._depth[s][ut.LEFT]}},{key:"getLocation",value:function(s,o){return this._depth[s][o]<=0?j.EXTERIOR:j.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var s=arguments[0],o=0;o<2;o++)for(var c=1;c<3;c++){var p=s.getLocation(o,c);p!==j.EXTERIOR&&p!==j.INTERIOR||(this.isNull(o,c)?this._depth[o][c]=h.depthAtLocation(p):this._depth[o][c]+=h.depthAtLocation(p))}else if(arguments.length===3){var y=arguments[0],b=arguments[1];arguments[2]===j.INTERIOR&&this._depth[y][b]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var s=0;s<2;s++)for(var o=0;o<3;o++)this._depth[s][o]=h.NULL_VALUE}},{key:"depthAtLocation",value:function(s){return s===j.EXTERIOR?0:s===j.INTERIOR?1:h.NULL_VALUE}}])}();fs.NULL_VALUE=-1;var Su=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var o=new Array(2).fill(null);return o[0]=this.pts[0],o[1]=this.pts[1],new s(o,Qe.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(o){this._isIsolated=o}},{key:"setName",value:function(o){this._name=o}},{key:"equals",value:function(o){if(!(o instanceof s))return!1;var c=o;if(this.pts.length!==c.pts.length)return!1;for(var p=!0,y=!0,b=this.pts.length,T=0;T<this.pts.length;T++)if(this.pts[T].equals2D(c.pts[T])||(p=!1),this.pts[T].equals2D(c.pts[--b])||(y=!1),!p&&!y)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var o=arguments[0];return this.pts[o]}}},{key:"print",value:function(o){o.print("edge "+this._name+": "),o.print("LINESTRING (");for(var c=0;c<this.pts.length;c++)c>0&&o.print(","),o.print(this.pts[c].x+" "+this.pts[c].y);o.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(o){s.updateIM(this._label,o)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(o){o.print("edge "+this._name+": ");for(var c=this.pts.length-1;c>=0;c--)o.print(this.pts[c]+" ");o.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Ti(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new $t;for(var o=0;o<this.pts.length;o++)this._env.expandToInclude(this.pts[o])}return this._env}},{key:"addIntersection",value:function(o,c,p,y){var b=new Z(o.getIntersection(y)),T=c,D=o.getEdgeDistance(p,y),z=T+1;if(z<this.pts.length){var W=this.pts[z];b.equals2D(W)&&(T=z,D=0)}this.eiList.add(b,T,D)}},{key:"toString",value:function(){var o=new Qs;o.append("edge "+this._name+": "),o.append("LINESTRING (");for(var c=0;c<this.pts.length;c++)c>0&&o.append(","),o.append(this.pts[c].x+" "+this.pts[c].y);return o.append(")  "+this._label+" "+this._depthDelta),o.toString()}},{key:"isPointwiseEqual",value:function(o){if(this.pts.length!==o.pts.length)return!1;for(var c=0;c<this.pts.length;c++)if(!this.pts[c].equals2D(o.pts[c]))return!1;return!0}},{key:"setDepthDelta",value:function(o){this._depthDelta=o}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(o,c,p){for(var y=0;y<o.getIntersectionNum();y++)this.addIntersection(o,c,p,y)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new hs(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new fs,this._depthDelta=0,arguments.length===1){var o=arguments[0];s.constructor_.call(this,o,null)}else if(arguments.length===2){var c=arguments[0],p=arguments[1];this.pts=c,this._label=p}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Eu&&arguments[0]instanceof Qe))return C(s,"updateIM",this).apply(this,arguments);var o=arguments[0],c=arguments[1];c.setAtLeastIfValid(o.getLocation(0,ut.ON),o.getLocation(1,ut.ON),1),o.isArea()&&(c.setAtLeastIfValid(o.getLocation(0,ut.LEFT),o.getLocation(1,ut.LEFT),2),c.setAtLeastIfValid(o.getLocation(0,ut.RIGHT),o.getLocation(1,ut.RIGHT),2))}}])}(Qt),co=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"setWorkingPrecisionModel",value:function(s){this._workingPrecisionModel=s}},{key:"insertUniqueEdge",value:function(s){var o=this._edgeList.findEqualEdge(s);if(o!==null){var c=o.getLabel(),p=s.getLabel();o.isPointwiseEqual(s)||(p=new Qe(s.getLabel())).flip(),c.merge(p);var y=h.depthDelta(p),b=o.getDepthDelta()+y;o.setDepthDelta(b)}else this._edgeList.add(s),s.setDepthDelta(h.depthDelta(s.getLabel()))}},{key:"buildSubgraphs",value:function(s,o){for(var c=new Tt,p=s.iterator();p.hasNext();){var y=p.next(),b=y.getRightmostCoordinate(),T=new hn(c).getDepth(b);y.computeDepth(T),y.findResultEdges(),c.add(y),o.add(y.getDirectedEdges(),y.getNodes())}}},{key:"createSubgraphs",value:function(s){for(var o=new Tt,c=s.getNodes().iterator();c.hasNext();){var p=c.next();if(!p.isVisited()){var y=new Jr;y.create(p),o.add(y)}}return Zi.sort(o,Zi.reverseOrder()),o}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(s){if(this._workingNoder!==null)return this._workingNoder;var o=new Pa,c=new hi;return c.setPrecisionModel(s),o.setSegmentIntersector(new wr(c)),o}},{key:"buffer",value:function(s,o){var c=this._workingPrecisionModel;c===null&&(c=s.getPrecisionModel()),this._geomFact=s.getFactory();var p=new cs(c,this._bufParams),y=new Aa(s,o,p).getCurves();if(y.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(y,c),this._graph=new so(new xr),this._graph.addEdges(this._edgeList.getEdges());var b=this.createSubgraphs(this._graph),T=new Yh(this._geomFact);this.buildSubgraphs(b,T);var D=T.getPolygons();return D.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(D)}},{key:"computeNodedEdges",value:function(s,o){var c=this.getNoder(o);c.computeNodes(s);for(var p=c.getNodedSubstrings().iterator();p.hasNext();){var y=p.next(),b=y.getCoordinates();if(b.length!==2||!b[0].equals2D(b[1])){var T=y.getData(),D=new Su(y.getCoordinates(),new Qe(T));this.insertUniqueEdge(D)}}}},{key:"setNoder",value:function(s){this._workingNoder=s}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new di;var s=arguments[0];this._bufParams=s}},{key:"depthDelta",value:function(s){var o=s.getLocation(0,ut.LEFT),c=s.getLocation(0,ut.RIGHT);return o===j.INTERIOR&&c===j.EXTERIOR?1:o===j.EXTERIOR&&c===j.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(s){for(var o=new Gn,c=new Tt;s.hasNext();){var p=s.next(),y=o.createLineString(p.getCoordinates());c.add(y)}return o.buildGeometry(c)}}])}(),sf=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"rescale",value:function(){if(Ot(arguments[0],xn))for(var s=arguments[0].iterator();s.hasNext();){var o=s.next();this.rescale(o.getCoordinates())}else if(arguments[0]instanceof Array){for(var c=arguments[0],p=0;p<c.length;p++)c[p].x=c[p].x/this._scaleFactor+this._offsetX,c[p].y=c[p].y/this._scaleFactor+this._offsetY;c.length===2&&c[0].equals2D(c[1])&&wn.out.println(c)}}},{key:"scale",value:function(){if(Ot(arguments[0],xn)){for(var s=arguments[0],o=new Tt(s.size()),c=s.iterator();c.hasNext();){var p=c.next();o.add(new fi(this.scale(p.getCoordinates()),p.getData()))}return o}if(arguments[0]instanceof Array){for(var y=arguments[0],b=new Array(y.length).fill(null),T=0;T<y.length;T++)b[T]=new Z(Math.round((y[T].x-this._offsetX)*this._scaleFactor),Math.round((y[T].y-this._offsetY)*this._scaleFactor),y[T].getZ());return xe.removeRepeatedPoints(b)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var s=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(s),s}},{key:"computeNodes",value:function(s){var o=s;this._isScaled&&(o=this.scale(s)),this._noder.computeNodes(o)}},{key:"interfaces_",get:function(){return[Ma]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var s=arguments[0],o=arguments[1];h.constructor_.call(this,s,o,0,0)}else if(arguments.length===4){var c=arguments[0],p=arguments[1];this._noder=c,this._scaleFactor=p,this._isScaled=!this.isIntegerPrecision()}}}])}(),qn=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var s=this._segStrings.iterator();s.hasNext();){var o=s.next().getCoordinates();this.checkEndPtVertexIntersections(o[0],this._segStrings),this.checkEndPtVertexIntersections(o[o.length-1],this._segStrings)}else if(arguments.length===2){for(var c=arguments[0],p=arguments[1].iterator();p.hasNext();)for(var y=p.next().getCoordinates(),b=1;b<y.length-1;b++)if(y[b].equals(c))throw new wt("found endpt/interior pt intersection at index "+b+" :pt "+c)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var s=this._segStrings.iterator();s.hasNext();)for(var o=s.next(),c=this._segStrings.iterator();c.hasNext();){var p=c.next();this.checkInteriorIntersections(o,p)}else if(arguments.length===2)for(var y=arguments[0],b=arguments[1],T=y.getCoordinates(),D=b.getCoordinates(),z=0;z<T.length-1;z++)for(var W=0;W<D.length-1;W++)this.checkInteriorIntersections(y,z,b,W);else if(arguments.length===4){var Y=arguments[0],st=arguments[1],ft=arguments[2],yt=arguments[3];if(Y===ft&&st===yt)return null;var bt=Y.getCoordinates()[st],Gt=Y.getCoordinates()[st+1],At=ft.getCoordinates()[yt],Jt=ft.getCoordinates()[yt+1];if(this._li.computeIntersection(bt,Gt,At,Jt),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,bt,Gt)||this.hasInteriorIntersection(this._li,At,Jt)))throw new wt("found non-noded intersection at "+bt+"-"+Gt+" and "+At+"-"+Jt)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var s=this._segStrings.iterator();s.hasNext();){var o=s.next();this.checkCollapses(o)}else if(arguments.length===1)for(var c=arguments[0].getCoordinates(),p=0;p<c.length-2;p++)this.checkCollapse(c[p],c[p+1],c[p+2])}},{key:"hasInteriorIntersection",value:function(s,o,c){for(var p=0;p<s.getIntersectionNum();p++){var y=s.getIntersection(p);if(!y.equals(o)&&!y.equals(c))return!0}return!1}},{key:"checkCollapse",value:function(s,o,c){if(s.equals(c))throw new wt("found non-noded collapse at "+h.fact.createLineString([s,o,c]))}}],[{key:"constructor_",value:function(){this._li=new hi,this._segStrings=null;var s=arguments[0];this._segStrings=s}}])}();qn.fact=new Gn;var za=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"intersectsScaled",value:function(s,o){var c=Math.min(s.x,o.x),p=Math.max(s.x,o.x),y=Math.min(s.y,o.y),b=Math.max(s.y,o.y),T=this._maxx<c||this._minx>p||this._maxy<y||this._miny>b;if(T)return!1;var D=this.intersectsToleranceSquare(s,o);return pt.isTrue(!(T&&D),"Found bad envelope test"),D}},{key:"initCorners",value:function(s){var o=.5;this._minx=s.x-o,this._maxx=s.x+o,this._miny=s.y-o,this._maxy=s.y+o,this._corner[0]=new Z(this._maxx,this._maxy),this._corner[1]=new Z(this._minx,this._maxy),this._corner[2]=new Z(this._minx,this._miny),this._corner[3]=new Z(this._maxx,this._miny)}},{key:"intersects",value:function(s,o){return this._scaleFactor===1?this.intersectsScaled(s,o):(this.copyScaled(s,this._p0Scaled),this.copyScaled(o,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(s){return Math.round(s*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(s,o){o.x=this.scale(s.x),o.y=this.scale(s.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var s=h.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new $t(this._originalPt.x-s,this._originalPt.x+s,this._originalPt.y-s,this._originalPt.y+s)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(s,o){return this._li.computeIntersection(s,o,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(s,o,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(s,o,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(s,o,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(s,o){var c=!1,p=!1;return this._li.computeIntersection(s,o,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(s,o,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(c=!0),this._li.computeIntersection(s,o,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(p=!0),this._li.computeIntersection(s,o,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!c||!p)||!!s.equals(this._pt)||!!o.equals(this._pt))))}},{key:"addSnappedNode",value:function(s,o){var c=s.getCoordinate(o),p=s.getCoordinate(o+1);return!!this.intersects(c,p)&&(s.addIntersection(this.getCoordinate(),o),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var s=arguments[0],o=arguments[1],c=arguments[2];if(this._originalPt=s,this._pt=s,this._scaleFactor=o,this._li=c,o<=0)throw new F("Scale factor must be non-zero");o!==1&&(this._pt=new Z(this.scale(s.x),this.scale(s.y)),this._p0Scaled=new Z,this._p1Scaled=new Z),this.initCorners(this._pt)}}])}();za.SAFE_ENV_EXPANSION_FACTOR=.75;var kr=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var h=arguments[1];arguments[0].getLineSegment(h,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new cn}}])}(),Tu=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var h=arguments[0];return this.snap(h,null,-1)}if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2],p=s.getSafeEnvelope(),y=new Xn(s,o,c);return this._index.query(p,new(function(){return f(function b(){i(this,b)},[{key:"interfaces_",get:function(){return[_u]}},{key:"visitItem",value:function(b){b.select(p,y)}}])}())),y.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var h=arguments[0];this._index=h}}])}(),Xn=function(h){function s(){var o;return i(this,s),o=r(this,s),s.constructor_.apply(o,arguments),o}return x(s,h),f(s,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Ca))return C(s,"select",this,1).apply(this,arguments);var o=arguments[1],c=arguments[0].getContext();if(this._parentEdge===c&&(o===this._hotPixelVertexIndex||o+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(c,o)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var o=arguments[0],c=arguments[1],p=arguments[2];this._hotPixel=o,this._parentEdge=c,this._hotPixelVertexIndex=p}}])}(kr);Tu.HotPixelSnapAction=Xn;var ho=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(h,s,o,c){if(h===o&&s===c)return null;var p=h.getCoordinates()[s],y=h.getCoordinates()[s+1],b=o.getCoordinates()[c],T=o.getCoordinates()[c+1];if(this._li.computeIntersection(p,y,b,T),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var D=0;D<this._li.getIntersectionNum();D++)this._interiorIntersections.add(this._li.getIntersection(D));h.addIntersections(this._li,s,0),o.addIntersections(this._li,c,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[bu]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var h=arguments[0];this._li=h,this._interiorIntersections=new Tt}}])}(),Cu=function(){return f(function h(){i(this,h),h.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(h){var s=fi.getNodedSubstrings(h),o=new qn(s);try{o.checkValid()}catch(c){if(!(c instanceof B))throw c;c.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return fi.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(h,s){var o=this.findInteriorIntersections(h,s);this.computeIntersectionSnaps(o),this.computeVertexSnaps(h)}},{key:"findInteriorIntersections",value:function(h,s){var o=new ho(s);return this._noder.setSegmentIntersector(o),this._noder.computeNodes(h),o.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Ot(arguments[0],xn))for(var h=arguments[0].iterator();h.hasNext();){var s=h.next();this.computeVertexSnaps(s)}else if(arguments[0]instanceof fi)for(var o=arguments[0],c=o.getCoordinates(),p=0;p<c.length;p++){var y=new za(c[p],this._scaleFactor,this._li);this._pointSnapper.snap(y,o,p)&&o.addIntersection(c[p],p)}}},{key:"computeNodes",value:function(h){this._nodedSegStrings=h,this._noder=new Pa,this._pointSnapper=new Tu(this._noder.getIndex()),this.snapRound(h,this._li)}},{key:"computeIntersectionSnaps",value:function(h){for(var s=h.iterator();s.hasNext();){var o=s.next(),c=new za(o,this._scaleFactor,this._li);this._pointSnapper.snap(c)}}},{key:"interfaces_",get:function(){return[Ma]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var h=arguments[0];this._pm=h,this._li=new hi,this._li.setPrecisionModel(h),this._scaleFactor=h.getScale()}}])}(),Ci=function(){function h(){i(this,h),h.constructor_.apply(this,arguments)}return f(h,[{key:"bufferFixedPrecision",value:function(s){var o=new sf(new Cu(new Ze(1)),s.getScale()),c=new co(this._bufParams);c.setWorkingPrecisionModel(s),c.setNoder(o),this._resultGeometry=c.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var s=h.MAX_PRECISION_DIGITS;s>=0;s--){try{this.bufferReducedPrecision(s)}catch(y){if(!(y instanceof Un))throw y;this._saveException=y}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var o=arguments[0],c=h.precisionScaleFactor(this._argGeom,this._distance,o),p=new Ze(c);this.bufferFixedPrecision(p)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var s=this._argGeom.getFactory().getPrecisionModel();s.getType()===Ze.FIXED?this.bufferFixedPrecision(s):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(s){this._bufParams.setQuadrantSegments(s)}},{key:"bufferOriginalPrecision",value:function(){try{var s=new co(this._bufParams);this._resultGeometry=s.buffer(this._argGeom,this._distance)}catch(o){if(!(o instanceof wt))throw o;this._saveException=o}}},{key:"getResultGeometry",value:function(s){return this._distance=s,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(s){this._bufParams.setEndCapStyle(s)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new O,this._resultGeometry=null,this._saveException=null,arguments.length===1){var s=arguments[0];this._argGeom=s}else if(arguments.length===2){var o=arguments[0],c=arguments[1];this._argGeom=o,this._bufParams=c}}},{key:"bufferOp",value:function(){if(arguments.length===2){var s=arguments[1];return new h(arguments[0]).getResultGeometry(s)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof kt&&typeof arguments[1]=="number"){var o=arguments[1],c=arguments[2],p=new h(arguments[0]);return p.setQuadrantSegments(c),p.getResultGeometry(o)}if(arguments[2]instanceof O&&arguments[0]instanceof kt&&typeof arguments[1]=="number"){var y=arguments[1];return new h(arguments[0],arguments[2]).getResultGeometry(y)}}else if(arguments.length===4){var b=arguments[1],T=arguments[2],D=arguments[3],z=new h(arguments[0]);return z.setQuadrantSegments(T),z.setEndCapStyle(D),z.getResultGeometry(b)}}},{key:"precisionScaleFactor",value:function(s,o,c){var p=s.getEnvelopeInternal(),y=dr.max(Math.abs(p.getMaxX()),Math.abs(p.getMaxY()),Math.abs(p.getMinX()),Math.abs(p.getMinY()))+2*(o>0?o:0),b=c-Math.trunc(Math.log(y)/Math.log(10)+1);return Math.pow(10,b)}}])}();Ci.CAP_ROUND=O.CAP_ROUND,Ci.CAP_BUTT=O.CAP_FLAT,Ci.CAP_FLAT=O.CAP_FLAT,Ci.CAP_SQUARE=O.CAP_SQUARE,Ci.MAX_PRECISION_DIGITS=12;var fo=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],go=function(){return f(function h(s){i(this,h),this.geometryFactory=s||new Gn},[{key:"read",value:function(h){var s,o=(s=typeof h=="string"?JSON.parse(h):h).type;if(!Ye[o])throw new Error("Unknown GeoJSON type: "+s.type);return fo.indexOf(o)!==-1?Ye[o].call(this,s.coordinates):o==="GeometryCollection"?Ye[o].call(this,s.geometries):Ye[o].call(this,s)}},{key:"write",value:function(h){var s=h.getGeometryType();if(!qe[s])throw new Error("Geometry is not supported");return qe[s].call(this,h)}}])}(),Ye={Feature:function(h){var s={};for(var o in h)s[o]=h[o];if(h.geometry){var c=h.geometry.type;if(!Ye[c])throw new Error("Unknown GeoJSON type: "+h.type);s.geometry=this.read(h.geometry)}return h.bbox&&(s.bbox=Ye.bbox.call(this,h.bbox)),s},FeatureCollection:function(h){var s={};if(h.features){s.features=[];for(var o=0;o<h.features.length;++o)s.features.push(this.read(h.features[o]))}return h.bbox&&(s.bbox=this.parse.bbox.call(this,h.bbox)),s},coordinates:function(h){for(var s=[],o=0;o<h.length;++o){var c=h[o];s.push(a(Z,N(c)))}return s},bbox:function(h){return this.geometryFactory.createLinearRing([new Z(h[0],h[1]),new Z(h[2],h[1]),new Z(h[2],h[3]),new Z(h[0],h[3]),new Z(h[0],h[1])])},Point:function(h){var s=a(Z,N(h));return this.geometryFactory.createPoint(s)},MultiPoint:function(h){for(var s=[],o=0;o<h.length;++o)s.push(Ye.Point.call(this,h[o]));return this.geometryFactory.createMultiPoint(s)},LineString:function(h){var s=Ye.coordinates.call(this,h);return this.geometryFactory.createLineString(s)},MultiLineString:function(h){for(var s=[],o=0;o<h.length;++o)s.push(Ye.LineString.call(this,h[o]));return this.geometryFactory.createMultiLineString(s)},Polygon:function(h){for(var s=Ye.coordinates.call(this,h[0]),o=this.geometryFactory.createLinearRing(s),c=[],p=1;p<h.length;++p){var y=h[p],b=Ye.coordinates.call(this,y),T=this.geometryFactory.createLinearRing(b);c.push(T)}return this.geometryFactory.createPolygon(o,c)},MultiPolygon:function(h){for(var s=[],o=0;o<h.length;++o){var c=h[o];s.push(Ye.Polygon.call(this,c))}return this.geometryFactory.createMultiPolygon(s)},GeometryCollection:function(h){for(var s=[],o=0;o<h.length;++o){var c=h[o];s.push(this.read(c))}return this.geometryFactory.createGeometryCollection(s)}},qe={coordinate:function(h){var s=[h.x,h.y];return h.z&&s.push(h.z),h.m&&s.push(h.m),s},Point:function(h){return{type:"Point",coordinates:qe.coordinate.call(this,h.getCoordinate())}},MultiPoint:function(h){for(var s=[],o=0;o<h._geometries.length;++o){var c=h._geometries[o],p=qe.Point.call(this,c);s.push(p.coordinates)}return{type:"MultiPoint",coordinates:s}},LineString:function(h){for(var s=[],o=h.getCoordinates(),c=0;c<o.length;++c){var p=o[c];s.push(qe.coordinate.call(this,p))}return{type:"LineString",coordinates:s}},MultiLineString:function(h){for(var s=[],o=0;o<h._geometries.length;++o){var c=h._geometries[o],p=qe.LineString.call(this,c);s.push(p.coordinates)}return{type:"MultiLineString",coordinates:s}},Polygon:function(h){var s=[],o=qe.LineString.call(this,h._shell);s.push(o.coordinates);for(var c=0;c<h._holes.length;++c){var p=h._holes[c],y=qe.LineString.call(this,p);s.push(y.coordinates)}return{type:"Polygon",coordinates:s}},MultiPolygon:function(h){for(var s=[],o=0;o<h._geometries.length;++o){var c=h._geometries[o],p=qe.Polygon.call(this,c);s.push(p.coordinates)}return{type:"MultiPolygon",coordinates:s}},GeometryCollection:function(h){for(var s=[],o=0;o<h._geometries.length;++o){var c=h._geometries[o],p=c.getGeometryType();s.push(qe[p].call(this,c))}return{type:"GeometryCollection",geometries:s}}};return{BufferOp:Ci,GeoJSONReader:function(){return f(function h(s){i(this,h),this.parser=new go(s||new Gn)},[{key:"read",value:function(h){return this.parser.read(h)}}])}(),GeoJSONWriter:function(){return f(function h(){i(this,h),this.parser=new go(this.geometryFactory)},[{key:"write",value:function(h){return this.parser.write(h)}}])}()}})})(A1);var ZM=A1.exports;const YM=yh(ZM);function $r(){return new gh}function gh(){this.reset()}gh.prototype={constructor:gh,reset:function(){this.s=this.t=0},add:function(e){vv(uc,e,this.t),vv(this,uc.s,this.s),this.s?this.t+=uc.t:this.s=uc.t},valueOf:function(){return this.s}};var uc=new gh;function vv(e,t,n){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}var re=1e-6,qt=Math.PI,zi=qt/2,yv=qt/4,ji=qt*2,Er=180/qt,Jn=qt/180,Ue=Math.abs,qM=Math.atan,Ko=Math.atan2,pe=Math.cos,me=Math.sin,aa=Math.sqrt;function z1(e){return e>1?0:e<-1?qt:Math.acos(e)}function Bs(e){return e>1?zi:e<-1?-zi:Math.asin(e)}function ll(){}function ph(e,t){e&&wv.hasOwnProperty(e.type)&&wv[e.type](e,t)}var xv={Feature:function(e,t){ph(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)ph(n[r].geometry,t)}},wv={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ng(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ng(n[r],t,0)},Polygon:function(e,t){kv(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)kv(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)ph(n[r],t)}};function ng(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function kv(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ng(e[n],t,1);t.polygonEnd()}function XM(e,t){e&&xv.hasOwnProperty(e.type)?xv[e.type](e,t):ph(e,t)}$r();$r();function ig(e){return[Ko(e[1],e[0]),Bs(e[2])]}function Qo(e){var t=e[0],n=e[1],r=pe(n);return[r*pe(t),r*me(t),me(n)]}function cc(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function mh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Zf(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function hc(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function rg(e){var t=aa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}$r();function F1(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function sg(e,t){return[e>qt?e-ji:e<-qt?e+ji:e,t]}sg.invert=sg;function $M(e,t,n){return(e%=ji)?t||n?F1(bv(e),Ev(t,n)):bv(e):t||n?Ev(t,n):sg}function Lv(e){return function(t,n){return t+=e,[t>qt?t-ji:t<-qt?t+ji:t,n]}}function bv(e){var t=Lv(e);return t.invert=Lv(-e),t}function Ev(e,t){var n=pe(e),r=me(e),i=pe(t),a=me(t);function u(f,g){var _=pe(g),v=pe(f)*_,x=me(f)*_,k=me(g),S=k*n+v*r;return[Ko(x*i-S*a,v*n-k*r),Bs(S*i+x*a)]}return u.invert=function(f,g){var _=pe(g),v=pe(f)*_,x=me(f)*_,k=me(g),S=k*i-x*a;return[Ko(x*i+k*a,v*n+S*r),Bs(S*n-v*r)]},u}function KM(e,t,n,r,i,a){if(n){var u=pe(t),f=me(t),g=r*n;i==null?(i=t+r*ji,a=t-g/2):(i=Sv(u,i),a=Sv(u,a),(r>0?i<a:i>a)&&(i+=r*ji));for(var _,v=i;r>0?v>a:v<a;v-=g)_=ig([u,-f*pe(v),-f*me(v)]),e.point(_[0],_[1])}}function Sv(e,t){t=Qo(t),t[0]-=e,rg(t);var n=z1(-t[1]);return((-t[2]<0?-n:n)+ji-re)%ji}function B1(){var e=[],t;return{point:function(n,r){t.push([n,r])},lineStart:function(){e.push(t=[])},lineEnd:ll,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function QM(e,t,n,r,i,a){var u=e[0],f=e[1],g=t[0],_=t[1],v=0,x=1,k=g-u,S=_-f,C;if(C=n-u,!(!k&&C>0)){if(C/=k,k<0){if(C<v)return;C<x&&(x=C)}else if(k>0){if(C>x)return;C>v&&(v=C)}if(C=i-u,!(!k&&C<0)){if(C/=k,k<0){if(C>x)return;C>v&&(v=C)}else if(k>0){if(C<v)return;C<x&&(x=C)}if(C=r-f,!(!S&&C>0)){if(C/=S,S<0){if(C<v)return;C<x&&(x=C)}else if(S>0){if(C>x)return;C>v&&(v=C)}if(C=a-f,!(!S&&C<0)){if(C/=S,S<0){if(C>x)return;C>v&&(v=C)}else if(S>0){if(C<v)return;C<x&&(x=C)}return v>0&&(e[0]=u+v*k,e[1]=f+v*S),x<1&&(t[0]=u+x*k,t[1]=f+x*S),!0}}}}}function Pc(e,t){return Ue(e[0]-t[0])<re&&Ue(e[1]-t[1])<re}function fc(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function j1(e,t,n,r,i){var a=[],u=[],f,g;if(e.forEach(function(C){if(!((N=C.length-1)<=0)){var N,A=C[0],P=C[N],M;if(Pc(A,P)){for(i.lineStart(),f=0;f<N;++f)i.point((A=C[f])[0],A[1]);i.lineEnd();return}a.push(M=new fc(A,C,null,!0)),u.push(M.o=new fc(A,null,M,!1)),a.push(M=new fc(P,C,null,!1)),u.push(M.o=new fc(P,null,M,!0))}}),!!a.length){for(u.sort(t),Tv(a),Tv(u),f=0,g=u.length;f<g;++f)u[f].e=n=!n;for(var _=a[0],v,x;;){for(var k=_,S=!0;k.v;)if((k=k.n)===_)return;v=k.z,i.lineStart();do{if(k.v=k.o.v=!0,k.e){if(S)for(f=0,g=v.length;f<g;++f)i.point((x=v[f])[0],x[1]);else r(k.x,k.n.x,1,i);k=k.n}else{if(S)for(v=k.p.z,f=v.length-1;f>=0;--f)i.point((x=v[f])[0],x[1]);else r(k.x,k.p.x,-1,i);k=k.p}k=k.o,v=k.z,S=!S}while(!k.v);i.lineEnd()}}}function Tv(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function U1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function JM(e){return e.length===1&&(e=tP(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}function tP(e){return function(t,n){return U1(e(t),n)}}JM(U1);function H1(e){for(var t=e.length,n,r=-1,i=0,a,u;++r<t;)i+=e[r].length;for(a=new Array(i);--t>=0;)for(u=e[t],n=u.length;--n>=0;)a[--i]=u[n];return a}var ul=1e9,dc=-ul;function eP(e,t,n,r){function i(_,v){return e<=_&&_<=n&&t<=v&&v<=r}function a(_,v,x,k){var S=0,C=0;if(_==null||(S=u(_,x))!==(C=u(v,x))||g(_,v)<0^x>0)do k.point(S===0||S===3?e:n,S>1?r:t);while((S=(S+x+4)%4)!==C);else k.point(v[0],v[1])}function u(_,v){return Ue(_[0]-e)<re?v>0?0:3:Ue(_[0]-n)<re?v>0?2:1:Ue(_[1]-t)<re?v>0?1:0:v>0?3:2}function f(_,v){return g(_.x,v.x)}function g(_,v){var x=u(_,1),k=u(v,1);return x!==k?x-k:x===0?v[1]-_[1]:x===1?_[0]-v[0]:x===2?_[1]-v[1]:v[0]-_[0]}return function(_){var v=_,x=B1(),k,S,C,N,A,P,M,O,B,F,G,H={point:V,lineStart:at,lineEnd:rt,polygonStart:et,polygonEnd:nt};function V(ht,gt){i(ht,gt)&&v.point(ht,gt)}function $(){for(var ht=0,gt=0,xt=S.length;gt<xt;++gt)for(var Q=S[gt],dt=1,X=Q.length,_t=Q[0],wt,zt,pt=_t[0],Nt=_t[1];dt<X;++dt)wt=pt,zt=Nt,_t=Q[dt],pt=_t[0],Nt=_t[1],zt<=r?Nt>r&&(pt-wt)*(r-zt)>(Nt-zt)*(e-wt)&&++ht:Nt<=r&&(pt-wt)*(r-zt)<(Nt-zt)*(e-wt)&&--ht;return ht}function et(){v=x,k=[],S=[],G=!0}function nt(){var ht=$(),gt=G&&ht,xt=(k=H1(k)).length;(gt||xt)&&(_.polygonStart(),gt&&(_.lineStart(),a(null,null,1,_),_.lineEnd()),xt&&j1(k,f,ht,a,_),_.polygonEnd()),v=_,k=S=C=null}function at(){H.point=tt,S&&S.push(C=[]),F=!0,B=!1,M=O=NaN}function rt(){k&&(tt(N,A),P&&B&&x.rejoin(),k.push(x.result())),H.point=V,B&&v.lineEnd()}function tt(ht,gt){var xt=i(ht,gt);if(S&&C.push([ht,gt]),F)N=ht,A=gt,P=xt,F=!1,xt&&(v.lineStart(),v.point(ht,gt));else if(xt&&B)v.point(ht,gt);else{var Q=[M=Math.max(dc,Math.min(ul,M)),O=Math.max(dc,Math.min(ul,O))],dt=[ht=Math.max(dc,Math.min(ul,ht)),gt=Math.max(dc,Math.min(ul,gt))];QM(Q,dt,e,t,n,r)?(B||(v.lineStart(),v.point(Q[0],Q[1])),v.point(dt[0],dt[1]),xt||v.lineEnd(),G=!1):xt&&(v.lineStart(),v.point(ht,gt),G=!1)}M=ht,O=gt,B=xt}return H}}var Yf=$r();function nP(e,t){var n=t[0],r=t[1],i=[me(n),-pe(n),0],a=0,u=0;Yf.reset();for(var f=0,g=e.length;f<g;++f)if(v=(_=e[f]).length)for(var _,v,x=_[v-1],k=x[0],S=x[1]/2+yv,C=me(S),N=pe(S),A=0;A<v;++A,k=M,C=B,N=F,x=P){var P=_[A],M=P[0],O=P[1]/2+yv,B=me(O),F=pe(O),G=M-k,H=G>=0?1:-1,V=H*G,$=V>qt,et=C*B;if(Yf.add(Ko(et*H*me(V),N*F+et*pe(V))),a+=$?G+H*ji:G,$^k>=n^M>=n){var nt=mh(Qo(x),Qo(P));rg(nt);var at=mh(i,nt);rg(at);var rt=($^G>=0?-1:1)*Bs(at[2]);(r>rt||r===rt&&(nt[0]||nt[1]))&&(u+=$^G>=0?1:-1)}}return(a<-re||a<re&&Yf<-re)^u&1}$r();function Cv(e){return e}$r();$r();var Jo=1/0,_h=Jo,Kl=-Jo,vh=Kl,Mv={point:iP,lineStart:ll,lineEnd:ll,polygonStart:ll,polygonEnd:ll,result:function(){var e=[[Jo,_h],[Kl,vh]];return Kl=vh=-(_h=Jo=1/0),e}};function iP(e,t){e<Jo&&(Jo=e),e>Kl&&(Kl=e),t<_h&&(_h=t),t>vh&&(vh=t)}$r();function G1(e,t,n,r){return function(i,a){var u=t(a),f=i.invert(r[0],r[1]),g=B1(),_=t(g),v=!1,x,k,S,C={point:N,lineStart:P,lineEnd:M,polygonStart:function(){C.point=O,C.lineStart=B,C.lineEnd=F,k=[],x=[]},polygonEnd:function(){C.point=N,C.lineStart=P,C.lineEnd=M,k=H1(k);var G=nP(x,f);k.length?(v||(a.polygonStart(),v=!0),j1(k,sP,G,n,a)):G&&(v||(a.polygonStart(),v=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),v&&(a.polygonEnd(),v=!1),k=x=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function N(G,H){var V=i(G,H);e(G=V[0],H=V[1])&&a.point(G,H)}function A(G,H){var V=i(G,H);u.point(V[0],V[1])}function P(){C.point=A,u.lineStart()}function M(){C.point=N,u.lineEnd()}function O(G,H){S.push([G,H]);var V=i(G,H);_.point(V[0],V[1])}function B(){_.lineStart(),S=[]}function F(){O(S[0][0],S[0][1]),_.lineEnd();var G=_.clean(),H=g.result(),V,$=H.length,et,nt,at;if(S.pop(),x.push(S),S=null,!!$){if(G&1){if(nt=H[0],(et=nt.length-1)>0){for(v||(a.polygonStart(),v=!0),a.lineStart(),V=0;V<et;++V)a.point((at=nt[V])[0],at[1]);a.lineEnd()}return}$>1&&G&2&&H.push(H.pop().concat(H.shift())),k.push(H.filter(rP))}}return C}}function rP(e){return e.length>1}function sP(e,t){return((e=e.x)[0]<0?e[1]-zi-re:zi-e[1])-((t=t.x)[0]<0?t[1]-zi-re:zi-t[1])}const Pv=G1(function(){return!0},oP,lP,[-qt,-zi]);function oP(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,u){var f=a>0?qt:-qt,g=Ue(a-t);Ue(g-qt)<re?(e.point(t,n=(n+u)/2>0?zi:-zi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),e.point(a,n),i=0):r!==f&&g>=qt&&(Ue(t-r)<re&&(t-=r*re),Ue(a-f)<re&&(a-=f*re),n=aP(t,n,a,u),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),i=0),e.point(t=a,n=u),r=f},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function aP(e,t,n,r){var i,a,u=me(e-n);return Ue(u)>re?qM((me(t)*(a=pe(r))*me(n)-me(r)*(i=pe(t))*me(e))/(i*a*u)):(t+r)/2}function lP(e,t,n,r){var i;if(e==null)i=n*zi,r.point(-qt,i),r.point(0,i),r.point(qt,i),r.point(qt,0),r.point(qt,-i),r.point(0,-i),r.point(-qt,-i),r.point(-qt,0),r.point(-qt,i);else if(Ue(e[0]-t[0])>re){var a=e[0]<t[0]?qt:-qt;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function uP(e,t){var n=pe(e),r=n>0,i=Ue(n)>re;function a(v,x,k,S){KM(S,e,t,k,v,x)}function u(v,x){return pe(v)*pe(x)>n}function f(v){var x,k,S,C,N;return{lineStart:function(){C=S=!1,N=1},point:function(A,P){var M=[A,P],O,B=u(A,P),F=r?B?0:_(A,P):B?_(A+(A<0?qt:-qt),P):0;if(!x&&(C=S=B)&&v.lineStart(),B!==S&&(O=g(x,M),(!O||Pc(x,O)||Pc(M,O))&&(M[0]+=re,M[1]+=re,B=u(M[0],M[1]))),B!==S)N=0,B?(v.lineStart(),O=g(M,x),v.point(O[0],O[1])):(O=g(x,M),v.point(O[0],O[1]),v.lineEnd()),x=O;else if(i&&x&&r^B){var G;!(F&k)&&(G=g(M,x,!0))&&(N=0,r?(v.lineStart(),v.point(G[0][0],G[0][1]),v.point(G[1][0],G[1][1]),v.lineEnd()):(v.point(G[1][0],G[1][1]),v.lineEnd(),v.lineStart(),v.point(G[0][0],G[0][1])))}B&&(!x||!Pc(x,M))&&v.point(M[0],M[1]),x=M,S=B,k=F},lineEnd:function(){S&&v.lineEnd(),x=null},clean:function(){return N|(C&&S)<<1}}}function g(v,x,k){var S=Qo(v),C=Qo(x),N=[1,0,0],A=mh(S,C),P=cc(A,A),M=A[0],O=P-M*M;if(!O)return!k&&v;var B=n*P/O,F=-n*M/O,G=mh(N,A),H=hc(N,B),V=hc(A,F);Zf(H,V);var $=G,et=cc(H,$),nt=cc($,$),at=et*et-nt*(cc(H,H)-1);if(!(at<0)){var rt=aa(at),tt=hc($,(-et-rt)/nt);if(Zf(tt,H),tt=ig(tt),!k)return tt;var ht=v[0],gt=x[0],xt=v[1],Q=x[1],dt;gt<ht&&(dt=ht,ht=gt,gt=dt);var X=gt-ht,_t=Ue(X-qt)<re,wt=_t||X<re;if(!_t&&Q<xt&&(dt=xt,xt=Q,Q=dt),wt?_t?xt+Q>0^tt[1]<(Ue(tt[0]-ht)<re?xt:Q):xt<=tt[1]&&tt[1]<=Q:X>qt^(ht<=tt[0]&&tt[0]<=gt)){var zt=hc($,(-et+rt)/nt);return Zf(zt,H),[tt,ig(zt)]}}}function _(v,x){var k=r?e:qt-e,S=0;return v<-k?S|=1:v>k&&(S|=2),x<-k?S|=4:x>k&&(S|=8),S}return G1(u,f,a,r?[0,-e]:[-qt,e-qt])}function W1(e){return function(t){var n=new og;for(var r in e)n[r]=e[r];return n.stream=t,n}}function og(){}og.prototype={constructor:og,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function V1(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),XM(n,e.stream(Mv));var u=Mv.result(),f=Math.min(r/(u[1][0]-u[0][0]),i/(u[1][1]-u[0][1])),g=+t[0][0]+(r-f*(u[1][0]+u[0][0]))/2,_=+t[0][1]+(i-f*(u[1][1]+u[0][1]))/2;return a!=null&&e.clipExtent(a),e.scale(f*150).translate([g,_])}function cP(e,t,n){return V1(e,[[0,0],t],n)}var Nv=16,hP=pe(30*Jn);function Iv(e,t){return+t?dP(e,t):fP(e)}function fP(e){return W1({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function dP(e,t){function n(r,i,a,u,f,g,_,v,x,k,S,C,N,A){var P=_-r,M=v-i,O=P*P+M*M;if(O>4*t&&N--){var B=u+k,F=f+S,G=g+C,H=aa(B*B+F*F+G*G),V=Bs(G/=H),$=Ue(Ue(G)-1)<re||Ue(a-x)<re?(a+x)/2:Ko(F,B),et=e($,V),nt=et[0],at=et[1],rt=nt-r,tt=at-i,ht=M*rt-P*tt;(ht*ht/O>t||Ue((P*rt+M*tt)/O-.5)>.3||u*k+f*S+g*C<hP)&&(n(r,i,a,u,f,g,nt,at,$,B/=H,F/=H,G,N,A),A.point(nt,at),n(nt,at,$,B,F,G,_,v,x,k,S,C,N,A))}}return function(r){var i,a,u,f,g,_,v,x,k,S,C,N,A={point:P,lineStart:M,lineEnd:B,polygonStart:function(){r.polygonStart(),A.lineStart=F},polygonEnd:function(){r.polygonEnd(),A.lineStart=M}};function P(V,$){V=e(V,$),r.point(V[0],V[1])}function M(){x=NaN,A.point=O,r.lineStart()}function O(V,$){var et=Qo([V,$]),nt=e(V,$);n(x,k,v,S,C,N,x=nt[0],k=nt[1],v=V,S=et[0],C=et[1],N=et[2],Nv,r),r.point(x,k)}function B(){A.point=P,r.lineEnd()}function F(){M(),A.point=G,A.lineEnd=H}function G(V,$){O(i=V,$),a=x,u=k,f=S,g=C,_=N,A.point=O}function H(){n(x,k,v,S,C,N,a,u,i,f,g,_,Nv,r),A.lineEnd=B,B()}return A}}var gP=W1({point:function(e,t){this.stream.point(e*Jn,t*Jn)}});function pP(e){return mP(function(){return e})()}function mP(e){var t,n=150,r=480,i=250,a,u,f=0,g=0,_=0,v=0,x=0,k,S,C=null,N=Pv,A=null,P,M,O,B=Cv,F=.5,G=Iv(nt,F),H,V;function $(tt){return tt=S(tt[0]*Jn,tt[1]*Jn),[tt[0]*n+a,u-tt[1]*n]}function et(tt){return tt=S.invert((tt[0]-a)/n,(u-tt[1])/n),tt&&[tt[0]*Er,tt[1]*Er]}function nt(tt,ht){return tt=t(tt,ht),[tt[0]*n+a,u-tt[1]*n]}$.stream=function(tt){return H&&V===tt?H:H=gP(N(k,G(B(V=tt))))},$.clipAngle=function(tt){return arguments.length?(N=+tt?uP(C=tt*Jn,6*Jn):(C=null,Pv),rt()):C*Er},$.clipExtent=function(tt){return arguments.length?(B=tt==null?(A=P=M=O=null,Cv):eP(A=+tt[0][0],P=+tt[0][1],M=+tt[1][0],O=+tt[1][1]),rt()):A==null?null:[[A,P],[M,O]]},$.scale=function(tt){return arguments.length?(n=+tt,at()):n},$.translate=function(tt){return arguments.length?(r=+tt[0],i=+tt[1],at()):[r,i]},$.center=function(tt){return arguments.length?(f=tt[0]%360*Jn,g=tt[1]%360*Jn,at()):[f*Er,g*Er]},$.rotate=function(tt){return arguments.length?(_=tt[0]%360*Jn,v=tt[1]%360*Jn,x=tt.length>2?tt[2]%360*Jn:0,at()):[_*Er,v*Er,x*Er]},$.precision=function(tt){return arguments.length?(G=Iv(nt,F=tt*tt),rt()):aa(F)},$.fitExtent=function(tt,ht){return V1($,tt,ht)},$.fitSize=function(tt,ht){return cP($,tt,ht)};function at(){S=F1(k=$M(_,v,x),t);var tt=t(f,g);return a=r-tt[0]*n,u=i+tt[1]*n,rt()}function rt(){return H=V=null,$}return function(){return t=e.apply(this,arguments),$.invert=t.invert&&et,at()}}function Z1(e){return function(t,n){var r=pe(t),i=pe(n),a=e(r*i);return[a*i*me(t),a*me(n)]}}function Y1(e){return function(t,n){var r=aa(t*t+n*n),i=e(r),a=me(i),u=pe(i);return[Ko(t*a,r*u),Bs(r&&n*a/r)]}}var _P=Z1(function(e){return aa(2/(1+e))});_P.invert=Y1(function(e){return 2*Bs(e/2)});var q1=Z1(function(e){return(e=z1(e))&&e/me(e)});q1.invert=Y1(function(e){return e});function vP(){return pP(q1).scale(79.4188).clipAngle(180-.001)}function Ov(e,t){return[e,t]}Ov.invert=Ov;var{BufferOp:yP,GeoJSONReader:xP,GeoJSONWriter:wP}=YM;function kP(e,t,n){n=n||{};var r=n.units||"kilometers",i=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var a=[];switch(e.type){case"GeometryCollection":return Lp(e,function(u){var f=Nc(u,t,r,i);f&&a.push(f)}),eg(a);case"FeatureCollection":return fv(e,function(u){var f=Nc(u,t,r,i);f&&fv(f,function(g){g&&a.push(g)})}),eg(a)}return Nc(e,t,r,i)}function Nc(e,t,n,r){var i=e.properties||{},a=e.type==="Feature"?e.geometry:e;if(a.type==="GeometryCollection"){var u=[];return Lp(e,function(N){var A=Nc(N,t,n,r);A&&u.push(A)}),eg(u)}var f=LP(a),g={type:a.type,coordinates:$1(a.coordinates,f)},_=new xP,v=_.read(g),x=MM(PM(t,n),"meters"),k=yP.bufferOp(v,x,r),S=new wP;if(k=S.write(k),!X1(k.coordinates)){var C={type:k.type,coordinates:K1(k.coordinates,f)};return Uh(C,i)}}function X1(e){return Array.isArray(e[0])?X1(e[0]):isNaN(e[0])}function $1(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return $1(n,t)})}function K1(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return K1(n,t)})}function LP(e){var t=VM(e).geometry.coordinates,n=[-t[0],-t[1]];return vP().rotate(n).scale(nn)}au.register(hh,fh,El,rr,L1,E1,w1,ol,y1);const Dv=()=>{const{cityStats:e,trees:t,wardCO2Data:n,wardTreeCountData:r,selectedArea:i,setSelectedArea:a}=sa(),u=it.useRef(null),[f,g]=it.useState("co2"),[_,v]=it.useState(!1),[x,k]=it.useState(0),[S,C]=it.useState(0),[N,A]=it.useState(null);it.useEffect(()=>{if(i&&i.type==="geojson"&&i.geojsonData&&t.length>0){const rt=i.geojsonData;A(rt);let tt=0,ht=0;t.forEach(gt=>{const xt=I1([gt.longitude,gt.latitude]);let Q=!1;(rt.geometry.type==="Polygon"||rt.geometry.type==="MultiPolygon")&&(Q=R1(xt,rt)),Q&&(tt++,ht+=gt.CO2_sequestered_kg)}),k(tt),C(ht/1e3),v(!0)}else v(!1),A(null)},[i,t]);const P=()=>{i||v(!0)},M=()=>{a(null),v(!1)},F={labels:n.length>0?n.map(rt=>rt.ward):r.length>0?r.map(rt=>rt.ward):[],datasets:[f==="co2"?{label:"CO₂ Sequestered (tons)",data:n.map(rt=>rt.co2_kg/1e3),borderColor:"rgba(46, 125, 50, 1)",backgroundColor:"rgba(46, 125, 50, 0.2)",tension:.4,fill:!0,yAxisID:"y"}:{label:"Number of Trees",data:r.map(rt=>rt.tree_count),borderColor:"rgba(25, 118, 210, 1)",backgroundColor:"rgba(25, 118, 210, 0.2)",tension:.4,fill:!0,yAxisID:"y"}]},H={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(rt){let tt=rt.dataset.label||"";return tt&&(tt+=": "),rt.parsed.y!==null&&(tt+=rt.parsed.y.toLocaleString(),f==="co2"?tt+=" tons":tt+=" trees"),tt}}}},scales:{y:{type:"linear",display:!0,position:"left",beginAtZero:!0,title:{display:!0,text:f==="co2"?"CO₂ Sequestered (tons)":"Number of Trees",font:{size:12}},ticks:{font:{size:10}}},x:{title:{display:!0,text:"Ward",font:{size:12}},ticks:{font:{size:10},maxRotation:0,minRotation:0}}}},V=rt=>g(rt.target.value),$=e&&_?{labels:["In Selected Area","Rest of City"],datasets:[{data:[x,Math.max(0,e.total_trees-x)],backgroundColor:["#4CAF50","#E0E0E0"],borderColor:["#FFFFFF","#FFFFFF"],borderWidth:2}]}:null,et=e&&_?{labels:["In Selected Area","Rest of City"],datasets:[{data:[S,Math.max(0,e.total_co2_annual_kg/1e3-S)],backgroundColor:["#FFC107","#E0E0E0"],borderColor:["#FFFFFF","#FFFFFF"],borderWidth:2}]}:null,nt={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:15,font:{size:10}}},tooltip:{callbacks:{label:function(rt){const tt=rt.raw;return`${rt.label}: ${tt.toLocaleString()}`}}}}},at=I.jsx("p",{children:"Use the drawing tools on the map (top-left) to select an area of interest. This section will then display pie charts comparing the tree count and CO₂ sequestration within your selected area against the rest of the city."});return I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{className:"card",children:[I.jsx("div",{className:"card-header",children:I.jsx("h3",{className:"text-lg font-medium",children:"Summary"})}),I.jsxs("div",{className:"card-body space-y-4",children:[I.jsxs("div",{children:[I.jsx("span",{className:"text-base text-gray-600 block mb-1",children:"Number of Trees"}),I.jsx("div",{className:"text-4xl font-bold text-primary-700",children:e?e.total_trees.toLocaleString():"Loading..."})]}),I.jsx("hr",{className:"border-gray-200"}),I.jsxs("div",{children:[I.jsx("span",{className:"text-base text-gray-600 block mb-1",children:"Total CO₂ Sequestered"}),I.jsxs("div",{className:"text-4xl font-bold text-accent-700",children:[e?(e.total_co2_annual_kg/1e3).toFixed(2):"Loading...",I.jsx("span",{className:"text-xl font-medium",children:" tons"})]})]})]})]}),I.jsxs("div",{className:"card",children:[I.jsx("div",{className:"card-header",children:I.jsx("h3",{className:"text-lg font-medium",children:"Ward Statistics"})}),I.jsxs("div",{className:"card-body space-y-3",children:[I.jsx("div",{children:I.jsxs("select",{value:f,onChange:V,className:"input text-sm py-1.5 px-3 pr-8 rounded-md border-gray-300 focus:ring-primary-500 focus:border-primary-500 w-full sm:w-auto","aria-label":"Select chart data view",children:[I.jsx("option",{value:"co2",children:"CO₂ Sequestered"}),I.jsx("option",{value:"trees",children:"Number of Trees"})]})}),I.jsx("div",{style:{height:"280px"},children:n.length>0||r.length>0?I.jsx(P1,{ref:u,data:F,options:H}):I.jsx("p",{className:"text-center text-gray-500",children:"Loading chart data..."})})]})]}),I.jsxs("div",{className:"card",children:[I.jsxs("div",{className:"card-header flex justify-between items-center",children:[I.jsx("h3",{className:"text-lg font-medium",children:"Know Your Neighbourhood"}),I.jsx(ih,{titleContent:"How to Use This Section",children:at})]}),I.jsxs("div",{className:"card-body",children:[!_&&I.jsxs("div",{className:"text-center py-4",children:[I.jsxs("button",{className:"btn btn-primary flex items-center mx-auto",onClick:P,children:[I.jsx(GL,{size:18,className:"mr-2"})," Snip Out Your Neighbourhood"]}),I.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Use the drawing tools (top-left of map) to select an area."})]}),_&&i&&i.geojsonData&&I.jsxs("div",{className:"space-y-4",children:[I.jsx("div",{className:"bg-gray-50 p-3 rounded-md text-center",children:I.jsx("p",{className:"text-sm text-gray-600",children:"Displaying stats for the selected area on the map."})}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{className:"card border",children:[I.jsx("div",{className:"card-header",children:I.jsx("h4",{className:"text-sm font-medium text-center",children:"Tree Count Comparison"})}),I.jsx("div",{className:"card-body",style:{height:"200px"},children:$?I.jsx(cv,{data:$,options:nt}):I.jsx("p",{className:"text-center text-gray-500",children:"No data for selected area."})})]}),I.jsxs("div",{className:"card border",children:[I.jsx("div",{className:"card-header",children:I.jsx("h4",{className:"text-sm font-medium text-center",children:"CO₂ Sequestered Comparison"})}),I.jsx("div",{className:"card-body",style:{height:"200px"},children:et?I.jsx(cv,{data:et,options:nt}):I.jsx("p",{className:"text-center text-gray-500",children:"No data for selected area."})})]})]}),I.jsx("div",{className:"text-center mt-4",children:I.jsxs("button",{className:"btn btn-outline flex items-center mx-auto",onClick:M,children:[I.jsx(nx,{size:18,className:"mr-2"})," Clear Selected Area Analysis"]})})]}),_&&!(i&&i.geojsonData)&&I.jsx("p",{className:"text-center text-gray-500 py-4",children:"Please draw an area on the map using the drawing tools (now at the top-left of the map)."})]})]})]})},bP=({treeId:e})=>{var u,f,g,_,v;const{getTreeDetails:t}=sa(),[n,r]=it.useState(null),[i,a]=it.useState(!1);return it.useEffect(()=>{if(e){a(!0);const x=t(e);r(x),a(!1)}else r(null)},[e,t]),e?i?I.jsx("div",{className:"flex justify-center items-center h-64",children:I.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary-600"})}):n?I.jsxs("div",{className:"space-y-6",children:[I.jsx("div",{className:"bg-primary-50 rounded-lg p-4",children:I.jsxs("div",{className:"flex justify-between items-start",children:[I.jsxs("div",{children:[I.jsx("h2",{className:"text-xl font-bold text-primary-800",children:n.common_name}),I.jsx("p",{className:"text-gray-600 italic",children:n.botanical_name_short})]}),I.jsxs("span",{className:"bg-primary-100 text-primary-800 text-xs font-medium px-2.5 py-1 rounded-full",children:["ID: ",n.id]})]})}),I.jsxs("div",{className:"card",children:[I.jsx("div",{className:"card-header",children:I.jsxs("h3",{className:"font-medium flex items-center",children:[I.jsx(jL,{size:18,className:"mr-2 text-gray-500"}),"Dimensions"]})}),I.jsxs("div",{className:"card-body grid grid-cols-3 gap-4",children:[I.jsxs("div",{className:"text-center",children:[I.jsx("div",{className:"text-sm text-gray-500",children:"Height"}),I.jsxs("div",{className:"text-lg font-semibold",children:[((u=n.height_m)==null?void 0:u.toFixed(2))||"N/A"," m"]})]}),I.jsxs("div",{className:"text-center",children:[I.jsx("div",{className:"text-sm text-gray-500",children:"Girth"}),I.jsxs("div",{className:"text-lg font-semibold",children:[((f=n.girth_cm)==null?void 0:f.toFixed(2))||"N/A"," cm"]})]}),I.jsxs("div",{className:"text-center",children:[I.jsx("div",{className:"text-sm text-gray-500",children:"Canopy Diameter"}),I.jsxs("div",{className:"text-lg font-semibold",children:[((g=n.canopy_dia_m)==null?void 0:g.toFixed(2))||"N/A"," m"]})]})]})]}),I.jsxs("div",{className:"card",children:[I.jsx("div",{className:"card-header",children:I.jsxs("h3",{className:"font-medium flex items-center",children:[I.jsx(tx,{size:18,className:"mr-2 text-gray-500"}),"Environmental Impact"]})}),I.jsx("div",{className:"card-body",children:I.jsxs("div",{className:"flex items-center justify-between bg-green-50 p-3 rounded-md",children:[I.jsxs("div",{children:[I.jsx("div",{className:"text-sm text-gray-500",children:"CO₂ Sequestered"}),I.jsxs("div",{className:"text-lg font-semibold text-success-500",children:[((_=n.CO2_sequestered_kg)==null?void 0:_.toFixed(2))||"N/A"," kg"]})]}),I.jsx("div",{className:"text-3xl text-success-500",children:I.jsx(nh,{size:36})})]})})]}),I.jsxs("div",{className:"card",children:[I.jsx("div",{className:"card-header",children:I.jsxs("h3",{className:"font-medium flex items-center",children:[I.jsx(Q0,{size:18,className:"mr-2 text-gray-500"}),"Additional Information"]})}),I.jsx("div",{className:"card-body",children:I.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-3",children:[" ",I.jsxs("div",{children:[I.jsx("div",{className:"text-sm text-gray-500",children:"Ward"}),I.jsx("div",{className:"text-base",children:n.ward?`Ward ${n.ward}`:"N/A"})]}),I.jsxs("div",{children:[I.jsx("div",{className:"text-sm text-gray-500",children:"Economic Importance"}),I.jsx("div",{className:"text-base",children:n.economic_i||"N/A"})]}),I.jsxs("div",{children:[" ",I.jsx("div",{className:"text-sm text-gray-500",children:"Flowering"}),I.jsx("div",{className:"text-base",children:n.flowering||"N/A"})]}),I.jsxs("div",{children:[" ",I.jsx("div",{className:"text-sm text-gray-500",children:"Wood Density"}),I.jsxs("div",{className:"text-base",children:[((v=n.wood_density)==null?void 0:v.toFixed(2))||"N/A"," g/cm³"]})]})]})})]})]}):I.jsxs("div",{className:"text-center p-6",children:[I.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Tree Not Found"}),I.jsx("p",{className:"text-gray-500",children:"Could not find details for the selected tree."})]}):I.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[I.jsx(VL,{size:48,className:"text-gray-300 mb-4"}),I.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No Tree Selected"}),I.jsx("p",{className:"text-gray-500",children:'Click on a tree on the map and select "View Details" to see information about that tree.'})]})},EP=(e,t,n,r)=>{if(console.log("--- generateTreeCentersJS START ---"),console.log("Inputs:",{canopyDiameterMeters:t,boundaryBufferMeters:n,treeSpacingBufferMeters:r}),!e||!e.geometry||!e.geometry.coordinates||e.geometry.type==="Polygon"&&e.geometry.coordinates.length===0||e.geometry.type==="MultiPolygon"&&e.geometry.coordinates.length===0)return console.error("generateTreeCentersJS: Invalid polygon feature (no geometry or coordinates)."),[];const i=t/2,a=i+r,u=n+a;if(console.log("Calculated (meters):",{canopyRadiusMeters:i,effectiveRadiusMeters:a,totalInsetMeters:u}),u<0&&console.warn("generateTreeCentersJS: Total inset is negative. This could lead to unexpected buffer results."),t<=0||a<=0)return console.error("generateTreeCentersJS: Canopy diameter or effective radius is zero or negative."),[];let f=null;try{let M;if(e.geometry.type==="Polygon")M=TM(e.geometry.coordinates,e.properties||{});else if(e.geometry.type==="MultiPolygon")M=CM(e.geometry.coordinates,e.properties||{});else return console.error("generateTreeCentersJS: Unsupported geometry type for buffering:",e.geometry.type),[];const O=Gf(M);if(console.log("Original polygon area (sq m, calculated by Turf):",O),O===0&&u>0)return console.warn("generateTreeCentersJS: Original polygon area is 0, cannot apply negative buffer."),[];u!==0?f=kP(M,-Math.abs(u),{units:"meters"}):f=M}catch(M){return console.error("generateTreeCentersJS: Error during turf.buffer:",M),[]}if(!f||!f.geometry||f.geometry.coordinates&&f.geometry.coordinates.length===0||Gf(f)===0)return console.log("generateTreeCentersJS: Planting zone is empty or too small after buffering."),console.log("Total Inset (m):",u),f&&f.geometry?console.log("Buffered planting zone (GeoJSON geometry):",JSON.stringify(f.geometry)):console.log(f?"Buffered planting zone was not null, but geometry might be invalid or area 0.":"Planting zone was null after buffer attempt."),[];console.log("generateTreeCentersJS: Planting zone created. Area (sq m, calculated by Turf):",Gf(f));const g=2*a,_=Math.sqrt(3)*a;if(console.log("generateTreeCentersJS: Hex grid spacing (dxMeters, dyMeters):",g,_),g<=1e-6||_<=1e-6)return console.error("generateTreeCentersJS: Effective radius or spacing parameters result in zero or negligible grid steps."),[];const v=D1(f),x=[];console.log("generateTreeCentersJS: Planting zone bounds (degrees Lon/Lat):",v);const k=(v[1]+v[3])/2,S=111132.954-559.822*Math.cos(2*k*(Math.PI/180))+1.175*Math.cos(4*k*(Math.PI/180))-.00229*Math.cos(6*k*(Math.PI/180)),C=Math.PI/180*6378137*Math.cos(k*Math.PI/180)/Math.sqrt(1-.00669437999014*Math.pow(Math.sin(k*Math.PI/180),2)),N=g/C,A=_/S;if(console.log("generateTreeCentersJS: Approx degree steps (dxDeg, dyDeg):",N,A),!isFinite(N)||!isFinite(A)||N<=1e-9||A<=1e-9)return console.error("generateTreeCentersJS: Calculated degree steps are zero, too small, or invalid, aborting grid generation. dxDeg:",N,"dyDeg:",A),[];let P=0;for(let M=v[1];M<=v[3];M+=A){const O=P%2===0?0:.5*N;for(let B=v[0]+O;B<=v[2];B+=N){const F=[B,M];R1(F,f)&&x.push(F)}P++}return console.log("generateTreeCentersJS: Generated tree centers:",x.length),x.length>0&&x.length<10&&console.log("First few centers (Lon,Lat):",x),console.log("--- generateTreeCentersJS END ---"),x},SP=({setShowTemperatureChart:e,onSpeciesChangeForChart:t})=>{const{treeSpeciesData:n,selectedArea:r,setSelectedArea:i,setSimulatedPlantingPoints:a}=sa(),[u,f]=it.useState([]),[g,_]=it.useState(""),[v,x]=it.useState(null),[k,S]=it.useState(8),[C,N]=it.useState(2),[A,P]=it.useState(1),[M,O]=it.useState(!1),[B,F]=it.useState(!1),[G,H]=it.useState(0);it.useEffect(()=>{if(n.length>0){const rt=[...n].sort((tt,ht)=>ht.mean_cooling_effect_celsius-tt.mean_cooling_effect_celsius);f(rt.slice(0,3))}},[n]),it.useEffect(()=>{let rt=null;if(g){const tt=n.find(ht=>ht.id===g);tt&&(rt=tt,S(tt.canopy_dia_m_max))}x(rt),t(rt)},[g,n,t]),it.useEffect(()=>{r&&r.type==="geojson"&&r.geojsonData?O(!0):(O(!1),F(!1),a([]),H(0),e(!1),t(null))},[r,a,e,t]);const V=rt=>{_(rt.target.value),F(!1),a([]),H(0),e(!1)},$=()=>{if(!M||!(r!=null&&r.geojsonData)){alert("Please draw an area on the map first using the drawing tools (top-left).");return}if(!v){alert("Please select a tree species first.");return}const rt=r.geojsonData,tt=EP(rt,k,C,A);a(tt),H(tt.length),F(!0),tt.length>0?e(!0):e(!1),console.log(`Simulation complete: ${tt.length} trees can be planted.`)},et=()=>{F(!1),a([]),H(0),e(!1)},nt=I.jsxs(I.Fragment,{children:[I.jsx("p",{children:"1. Select a tree species above to pre-fill its maximum canopy diameter."}),I.jsx("p",{children:"2. Use drawing tools on the map (top-left) to define a planting area."}),I.jsx("p",{children:"3. Adjust canopy diameter, boundary buffer (distance from area edge to canopy edge), and tree spacing buffer (gap between canopies) as needed."}),I.jsx("p",{children:'4. Click "Simulate" to estimate tree placement using a hexagonal grid pattern.'})]}),at=I.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[I.jsx("p",{children:"These values estimate the cooling impact of this tree species, based on Land Surface Temperature (LST) data:"}),I.jsxs("div",{className:"pl-2 space-y-1",children:[I.jsxs("p",{className:"text-xs",children:[I.jsx("strong",{className:"font-semibold",children:"P90 Cooling (High Potential):"})," This is the temperature difference between the hottest 10% of non-vegetated areas (within a 500m buffer around typical tree locations) and the temperature directly under this tree species during those hot conditions. It indicates strong cooling during peak heat."]}),I.jsxs("p",{className:"text-xs",children:[I.jsx("strong",{className:"font-semibold",children:"P10 Cooling (Moderate/Consistent):"})," This is the temperature difference between the 10th percentile of non-vegetated LST (representing milder warm conditions within a 500m buffer) and the temperature directly under this tree species during those conditions. It suggests a more consistent cooling effect."]})]}),I.jsx("p",{className:"text-xs mt-2 italic"})]});return I.jsxs("div",{className:"space-y-6",children:[u.length>0&&I.jsxs("div",{className:"card",children:[I.jsx("div",{className:"card-header",children:I.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[I.jsx(WL,{size:20,className:"mr-2 text-primary-600"}),"Top 3 Species for Cooling"]})}),I.jsx("div",{className:"card-body space-y-3",children:u.map((rt,tt)=>I.jsx("div",{className:"p-3 bg-gray-50 rounded-md hover:bg-primary-50 transition-colors cursor-pointer",onClick:()=>_(rt.id),children:I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsxs("div",{children:[I.jsxs("span",{className:"font-semibold text-primary-700",children:["#",tt+1," ",rt.common_name]}),I.jsx("p",{className:"text-xs text-gray-500 italic",children:rt.botanical_name})]}),I.jsxs("div",{className:"text-right",children:[I.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[typeof rt.mean_cooling_effect_celsius=="number"?rt.mean_cooling_effect_celsius.toFixed(1):"N/A","°C"]}),I.jsx("p",{className:"text-xs text-gray-500",children:"Avg. Cooling"})]})]})},rt.id))})]}),I.jsxs("div",{className:"card",children:[I.jsx("div",{className:"card-header",children:I.jsx("h3",{className:"text-lg font-medium",children:"Explore Tree Species"})}),I.jsxs("div",{className:"card-body",children:[I.jsx("label",{htmlFor:"species-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select a Species:"}),I.jsxs("select",{id:"species-select",className:"input",value:g,onChange:V,children:[I.jsx("option",{value:"",children:"-- Select a Species --"}),n.sort((rt,tt)=>rt.common_name.localeCompare(tt.common_name)).map(rt=>I.jsxs("option",{value:rt.id,children:[rt.common_name," (",rt.botanical_name,")"]},rt.id))]})]})]}),v&&I.jsxs("div",{className:"card animate-fade-in",children:[I.jsxs("div",{className:"card-header bg-primary-50",children:[I.jsx("h3",{className:"text-xl font-semibold text-primary-700",children:v.common_name}),I.jsx("p",{className:"text-sm text-primary-600 italic",children:v.botanical_name})]}),I.jsxs("div",{className:"card-body space-y-4",children:[I.jsxs("div",{children:[I.jsxs("div",{className:"flex justify-between items-center mb-2",children:[I.jsxs("h4",{className:"font-medium text-gray-700 flex items-center",children:[I.jsx(nh,{size:18,className:"mr-2 text-blue-500"})," Cooling Effect Potential"]}),I.jsx(ih,{titleContent:"Cooling Percentiles Explained",iconSize:16,popoverWidthClass:"w-80 sm:w-96",children:at})]}),I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[I.jsxs("div",{className:"bg-red-50 p-3 rounded-md text-center ring-1 ring-red-200",children:[I.jsx("p",{className:"text-xs text-red-700 font-medium min-h-[2.25rem] flex items-center justify-center",children:"P90 Cooling (High)"}),I.jsxs("p",{className:"text-xl font-bold text-red-600 mt-1",children:[typeof v.p90_cooling_effect_celsius=="number"?v.p90_cooling_effect_celsius.toFixed(1):"N/A","°C"]})]}),I.jsxs("div",{className:"bg-sky-50 p-3 rounded-md text-center ring-1 ring-sky-200",children:[I.jsx("p",{className:"text-xs text-sky-700 font-medium min-h-[2.25rem] flex items-center justify-center",children:"P10 Cooling (Moderate)"}),I.jsxs("p",{className:"text-xl font-bold text-sky-600 mt-1",children:[typeof v.p10_cooling_effect_celsius=="number"?v.p10_cooling_effect_celsius.toFixed(1):"N/A","°C"]})]}),I.jsxs("div",{className:"bg-blue-50 p-3 rounded-md text-center ring-1 ring-blue-200",children:[I.jsx("p",{className:"text-xs text-blue-700 font-medium min-h-[2.25rem] flex items-center justify-center",children:"Mean Cooling"}),I.jsxs("p",{className:"text-xl font-bold text-blue-600 mt-1",children:[typeof v.mean_cooling_effect_celsius=="number"?v.mean_cooling_effect_celsius.toFixed(1):"N/A","°C"]})]})]})]}),I.jsxs("div",{children:[I.jsxs("h4",{className:"font-medium text-gray-700 mb-2 flex items-center",children:[I.jsx(ex,{size:18,className:"mr-2 text-green-500"})," Typical Dimensions"]}),I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm",children:[I.jsxs("div",{className:"bg-gray-50 p-2 rounded-md text-center",children:[I.jsx("p",{className:"font-semibold text-gray-600 min-h-[2rem] flex items-center justify-center",children:"Height"}),I.jsxs("p",{className:"mt-0.5",children:[v.height_m_min??"N/A"," - ",v.height_m_max??"N/A"," m"]})]}),I.jsxs("div",{className:"bg-gray-50 p-2 rounded-md text-center",children:[I.jsx("p",{className:"font-semibold text-gray-600 min-h-[2rem] flex items-center justify-center",children:"Girth"}),I.jsxs("p",{className:"mt-0.5",children:[v.girth_cm_min??"N/A"," - ",v.girth_cm_max??"N/A"," cm"]})]}),I.jsxs("div",{className:"bg-gray-50 p-2 rounded-md text-center",children:[I.jsx("p",{className:"font-semibold text-gray-600 min-h-[2rem] flex items-center justify-center",children:"Canopy Diameter"}),I.jsxs("p",{className:"mt-0.5",children:[v.canopy_dia_m_min??"N/A"," - ",v.canopy_dia_m_max??"N/A"," m"]})]})]})]}),I.jsxs("div",{children:[I.jsxs("h4",{className:"font-medium text-gray-700 mb-2 flex items-center",children:[I.jsx(BL,{size:18,className:"mr-2 text-teal-500"})," CO₂ Sequestration"]}),I.jsx("div",{className:"bg-teal-50 p-3 rounded-md",children:I.jsxs("p",{className:"text-lg font-semibold text-teal-700 text-center",children:[v.co2_seq_kg_min??"N/A"," - ",v.co2_seq_kg_max??"N/A"," kg/year (approx.)"]})})]}),I.jsx("div",{className:"mt-3 text-xs text-gray-400",children:"Note: All values are typical ranges or averages for the species. Actual values can vary."})]})]}),I.jsxs("div",{className:"card",children:[I.jsxs("div",{className:"card-header flex justify-between items-center",children:[I.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[I.jsx(UL,{size:20,className:"mr-2 text-green-600"}),"Planting Area Simulation"]}),I.jsx(ih,{titleContent:"Planting Simulation Help",children:nt})]}),I.jsxs("div",{className:"card-body space-y-4",children:[!M&&I.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-300 rounded-md text-center",children:I.jsx("p",{className:"text-sm text-yellow-700",children:"Please draw an area on the map using the drawing tools (top-left) to enable simulation."})}),M&&!v&&I.jsx("div",{className:"p-4 bg-orange-50 border border-orange-300 rounded-md text-center",children:I.jsx("p",{className:"text-sm text-orange-700",children:"Please select a tree species above to set a canopy diameter for the simulation."})}),I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-x-4 gap-y-2 items-start",children:[I.jsxs("div",{className:"flex flex-col",children:[I.jsx("label",{htmlFor:"canopy-diameter",className:"block text-xs font-medium text-gray-700 mb-0.5 truncate",title:"Maximum Canopy Diameter (m)",children:"Max Canopy Dia. (m)"}),I.jsx("input",{type:"number",id:"canopy-diameter",className:"input text-sm w-full",value:k,onChange:rt=>S(parseFloat(rt.target.value)),step:"0.5",min:"1"})]}),I.jsxs("div",{className:"flex flex-col",children:[I.jsx("label",{htmlFor:"boundary-buffer",className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Boundary Buffer (m)"}),I.jsx("input",{type:"number",id:"boundary-buffer",className:"input text-sm w-full",value:C,onChange:rt=>N(parseFloat(rt.target.value)),step:"0.5",min:"0"})]}),I.jsxs("div",{className:"flex flex-col",children:[I.jsx("label",{htmlFor:"tree-spacing",className:"block text-xs font-medium text-gray-700 mb-0.5 truncate",title:"Tree Spacing Buffer (m)",children:"Tree Spacing (m)"}),I.jsx("input",{type:"number",id:"tree-spacing",className:"input text-sm w-full",value:A,onChange:rt=>P(parseFloat(rt.target.value)),step:"0.5",min:"0"})]})]}),I.jsxs("button",{className:"btn btn-primary w-full flex items-center justify-center",onClick:$,disabled:!M||!v,children:[I.jsx(HL,{size:18,className:"mr-2"})," Simulate Planting Layout"]}),B&&I.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-300 rounded-md animate-fade-in",children:[I.jsx("h4",{className:"text-md font-semibold text-green-700 mb-2",children:"Simulation Results:"}),I.jsxs("p",{className:"text-sm text-green-600",children:["Based on the selected area and parameters, approximately ",I.jsx("span",{className:"font-bold",children:G})," trees of ",I.jsx("span",{className:"font-bold",children:(v==null?void 0:v.common_name)||"the selected species"})," could be planted."]}),I.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Simulated tree locations are displayed on the map."}),I.jsxs("button",{className:"btn btn-outline btn-sm mt-3 text-xs",onClick:et,children:[I.jsx(nx,{size:16,className:"mr-1"})," Clear Simulation & Map Markers"]})]})]})]})]})},TP=({baseMap:e,changeBaseMap:t,showLSTOverlay:n,toggleLSTOverlay:r,lstMinValue:i,lstMaxValue:a})=>I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{className:"card",children:[I.jsx("div",{className:"card-header",children:I.jsxs("h3",{className:"font-medium flex items-center",children:[I.jsx(J0,{size:18,className:"mr-2 text-gray-500"}),"Basemap Options"]})}),I.jsx("div",{className:"card-body",children:I.jsxs("div",{className:"space-y-2",children:[I.jsxs("div",{className:`p-3 rounded-md flex items-center cursor-pointer ${e==="streets"?"bg-primary-50 border border-primary-200 ring-2 ring-primary-300":"hover:bg-gray-50 border border-transparent"}`,onClick:()=>t("streets"),children:[I.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded mr-3 flex items-center justify-center text-xs text-gray-500",children:"Street"}),I.jsxs("div",{children:[I.jsx("div",{className:"font-medium",children:"Streets"}),I.jsx("div",{className:"text-xs text-gray-500",children:"Standard map view"})]})]}),I.jsxs("div",{className:`p-3 rounded-md flex items-center cursor-pointer ${e==="satellite"?"bg-primary-50 border border-primary-200 ring-2 ring-primary-300":"hover:bg-gray-50 border border-transparent"}`,onClick:()=>t("satellite"),children:[I.jsx("div",{className:"h-10 w-10 bg-gray-700 rounded mr-3 flex items-center justify-center text-xs text-gray-200",children:"Sat"}),I.jsxs("div",{children:[I.jsx("div",{className:"font-medium",children:"Satellite"}),I.jsx("div",{className:"text-xs text-gray-500",children:"Aerial imagery"})]})]}),I.jsxs("div",{className:`p-3 rounded-md flex items-center cursor-pointer ${e==="light"?"bg-primary-50 border border-primary-200 ring-2 ring-primary-300":"hover:bg-gray-50 border border-transparent"}`,onClick:()=>t("light"),children:[I.jsx("div",{className:"h-10 w-10 bg-gray-100 rounded mr-3 flex items-center justify-center text-xs text-gray-500",children:"Light"}),I.jsxs("div",{children:[I.jsx("div",{className:"font-medium",children:"Light"}),I.jsx("div",{className:"text-xs text-gray-500",children:"Minimal light theme"})]})]}),I.jsxs("div",{className:`p-3 rounded-md flex items-center cursor-pointer ${e==="dark"?"bg-primary-50 border border-primary-200 ring-2 ring-primary-300":"hover:bg-gray-50 border border-transparent"}`,onClick:()=>t("dark"),children:[I.jsx("div",{className:"h-10 w-10 bg-gray-900 rounded mr-3 flex items-center justify-center text-xs text-gray-100",children:"Dark"}),I.jsxs("div",{children:[I.jsx("div",{className:"font-medium",children:"Dark"}),I.jsx("div",{className:"text-xs text-gray-500",children:"Dark theme for low light"})]})]})]})})]}),I.jsxs("div",{className:"card",children:[I.jsx("div",{className:"card-header",children:I.jsx("h3",{className:"font-medium",children:"Map Overlays"})}),I.jsx("div",{className:"card-body",children:I.jsx("div",{className:"space-y-3",children:I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsxs("div",{className:"flex items-center",children:[I.jsx(nh,{size:18,className:"text-gray-500 mr-2"}),I.jsxs("div",{children:[I.jsx("div",{className:"font-medium",children:"Land Surface Temp."}),I.jsx("div",{className:"text-xs text-gray-500",children:"Show LST overlay & legend"})]})]}),I.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[I.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n,onChange:r}),I.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})})})]}),I.jsxs("div",{className:"card",children:[I.jsx("div",{className:"card-header",children:I.jsx("h3",{className:"font-medium",children:"Legend"})}),I.jsxs("div",{className:"card-body space-y-3",children:[" ",I.jsxs("div",{className:"flex items-center",children:[I.jsx("div",{className:"h-4 w-4 rounded-full mr-2 border-2 border-white shadow-md",style:{backgroundColor:"#00BCD4"}}),I.jsx("div",{className:"text-sm",children:"Tree Location"})]}),I.jsxs("div",{className:"flex items-center",children:[I.jsx("div",{className:"h-4 w-4 rounded-sm border border-primary-600 bg-primary-50 mr-2"}),I.jsx("div",{className:"text-sm",children:"Selected Area (Drawn)"})]}),I.jsxs("div",{className:"flex items-center",children:[I.jsx("div",{className:"h-4 w-4 rounded-full bg-[#4ade80] mr-2 border border-white shadow-sm"}),I.jsx("div",{className:"text-sm",children:"Simulated Planting Location"})]}),n&&I.jsxs("div",{className:"pt-3 mt-3 border-t border-gray-200",children:[I.jsxs("h4",{className:"font-semibold text-sm mb-2 flex items-center",children:[I.jsx(nh,{size:16,className:"mr-1 text-red-500"}),"Land Surface Temperature (°C)"]}),I.jsx("div",{className:"w-full h-3 rounded-sm",style:{background:"linear-gradient(to right, #0D1282, #00A9FF, #00E0C7, #90F1AC, #FFF80A, #FFB344, #FF4A4A, #D72323)"}}),I.jsxs("div",{className:"flex justify-between text-xs mt-1 text-gray-600 px-0.5",children:[I.jsx("span",{children:i.toFixed(1)}),I.jsx("span",{children:a.toFixed(1)})]}),I.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"(Colors approximate 'Turbo' colormap)"})]})]})]})]}),CP=({isOpen:e,selectedTreeId:t,activeTabIndex:n,setActiveTabIndex:r,baseMap:i,changeBaseMap:a,showLSTOverlay:u,toggleLSTOverlay:f,lstMinValue:g,lstMaxValue:_,setShowTemperatureChart:v,onActiveSpeciesChangeForChart:x})=>{const k=[{id:"city-overview",label:"City Overview",icon:I.jsx(FL,{size:18})},{id:"tree-details",label:"Tree Details",icon:I.jsx(ZL,{size:18})},{id:"planting-advisor",label:"Planting Advisor",icon:I.jsx(ex,{size:18})},{id:"map-layers",label:"Map Layers",icon:I.jsx(J0,{size:18})}],S=it.useRef(null),C=A=>{if(S.current){const P=A==="left"?-150:150;S.current.scrollBy({left:P,behavior:"smooth"})}},N=()=>{switch(n){case 0:return I.jsx(Dv,{});case 1:return I.jsx(bP,{treeId:t});case 2:return I.jsx(SP,{setShowTemperatureChart:v,onSpeciesChangeForChart:x});case 3:return I.jsx(TP,{baseMap:i,changeBaseMap:a,showLSTOverlay:u,toggleLSTOverlay:f,lstMinValue:g,lstMaxValue:_});default:return I.jsx(Dv,{})}};return I.jsxs("div",{className:`sidebar ${e?"sidebar-open":"sidebar-collapsed"}`,children:[I.jsx("div",{className:"flex justify-between items-center bg-gray-100 p-3 border-b border-gray-200 h-[var(--header-height)]",children:I.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Dashboard"})}),I.jsxs("div",{className:"bg-gray-50 border-b border-gray-200 relative h-[var(--sidebar-tabs-height)] flex items-center",children:[I.jsx("button",{onClick:()=>C("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 text-gray-500 hover:text-gray-800","aria-label":"Scroll tabs left",children:I.jsx($0,{size:20})}),I.jsx("div",{ref:S,className:"flex overflow-x-auto hide-scrollbar mx-8 flex-nowrap h-full",children:k.map((A,P)=>I.jsxs("button",{className:`flex-shrink-0 px-4 flex items-center space-x-2 whitespace-nowrap transition-colors focus:outline-none h-full
                ${n===P?"bg-white text-primary-600 border-b-2 border-primary-600 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-primary-500"}`,onClick:()=>r(P),children:[A.icon,I.jsx("span",{children:A.label})]},A.id))}),I.jsx("button",{onClick:()=>C("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 text-gray-500 hover:text-gray-800","aria-label":"Scroll tabs right",children:I.jsx(K0,{size:20})})]}),I.jsx("div",{className:"sidebar-content-area p-4",children:N()})]})};au.register(hh,fh,El,rr,L1,E1,w1,y1);const qf=20,MP=({showChart:e,onClose:t,baselineLSTMax:n,baselineLST80thPercentile:r,baselineLST60thPercentile:i,speciesCoolingP90:a,speciesCoolingP10:u,speciesName:f="Selected Species"})=>{const g=it.useMemo(()=>{if(!e)return[];const k=[],S=Math.min(i,n),C=Math.max(i,n);for(let N=0;N<qf;N++){let A=.5+Math.sin(N*Math.PI/(qf/2))*.3+(Math.random()-.5)*.2;A=Math.max(0,Math.min(1,A));const P=S+A*(C-S);k.push(parseFloat(P.toFixed(1)))}return k},[e,n,i]),_=it.useMemo(()=>{if(!e||g.length===0)return[];const k=n-i;return g.map(S=>{let C=0;if(k<=0)S>=n?C=a:S<=i?C=u:C=(a+u)/2;else{let M=(S-i)/k;M=Math.max(0,Math.min(1,M)),C=u+M*(a-u)}let N=S-C;const A=Math.max(u,a),P=i-A-2;return N=Math.max(P,N),parseFloat(N.toFixed(1))})},[e,g,n,i,a,u]);if(!e)return null;const v={labels:Array.from({length:qf},(k,S)=>`P${S+1}`),datasets:[{label:"Baseline LST (°C)",data:g,borderColor:"rgba(239, 68, 68, 0.9)",backgroundColor:"rgba(254, 202, 202, 0.3)",tension:.4,fill:!1,pointRadius:2,pointHoverRadius:4,yAxisID:"yTemp"},{label:`Cooled LST (${f}) (°C)`,data:_,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(191, 219, 254, 0.4)",tension:.4,fill:!0,pointRadius:2,pointHoverRadius:4,yAxisID:"yTemp"}]},x={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{boxWidth:12,padding:10,font:{size:11}}},title:{display:!1},tooltip:{mode:"index",animation:{duration:0},intersect:!1,bodySpacing:4,itemSort:(k,S)=>S.datasetIndex-k.datasetIndex}},scales:{yTemp:{min:Math.floor(i-Math.max(u,a)-3),max:Math.ceil(n+3),title:{display:!0,text:"Temperature (°C)",font:{size:10}},ticks:{font:{size:9}}},x:{title:{display:!0,text:"Transect Points / Spatial Profile",font:{size:10}},ticks:{font:{size:9},autoSkip:!0,maxTicksLimit:10}}}};return I.jsxs("div",{className:"p-3 bg-white rounded-t-lg",children:[I.jsxs("div",{className:"flex justify-between items-center mb-2",children:[I.jsx("h4",{className:"text-sm font-semibold text-gray-700 pl-1",children:"Predicted LST Change Profile"}),I.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-700 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-gray-400","aria-label":"Close temperature chart",title:"Close chart",children:I.jsx(ix,{size:20})})]}),I.jsx("div",{style:{height:"200px"},children:I.jsx(P1,{data:v,options:x})})]})};function PP(){const[e,t]=it.useState(!0),[n,r]=it.useState(null),[i,a]=it.useState(0),[u,f]=it.useState("light"),[g,_]=it.useState(!1),v=22.5,x=43,k=v+.8*(x-v),S=v+.6*(x-v),[C,N]=it.useState(!1),[A,P]=it.useState(null),M=()=>t(H=>!H),O=H=>{r(H),a(1),e||t(!0)},B=H=>f(H),F=()=>_(H=>!H),G=H=>{P(H?{p90:H.p90_cooling_effect_celsius,p10:H.p10_cooling_effect_celsius,commonName:H.common_name}:null)};return I.jsxs("div",{className:"dashboard-layout",children:[" ",I.jsx(YL,{})," ",I.jsxs("div",{className:"dashboard-content",children:[" ",I.jsx(oE,{onTreeSelect:O,sidebarOpen:e,toggleSidebar:M,baseMap:u,showLSTOverlay:g,lstMinValueForDisplay:v,lstMaxValueForDisplay:x}),I.jsx(CP,{isOpen:e,selectedTreeId:n,activeTabIndex:i,setActiveTabIndex:a,baseMap:u,changeBaseMap:B,showLSTOverlay:g,toggleLSTOverlay:F,lstMinValue:v,lstMaxValue:x,setShowTemperatureChart:N,onActiveSpeciesChangeForChart:G})]}),C&&A&&I.jsx("div",{className:"absolute bottom-0 left-0 z-20 bg-white border-t-2 border-gray-300 shadow-top-lg",style:{right:e?"var(--sidebar-width)":"0px"},children:I.jsx(MP,{showChart:C,onClose:()=>N(!1),baselineLSTMax:x,baselineLST80thPercentile:k,baselineLST60thPercentile:S,speciesCoolingP90:A.p90,speciesCoolingP10:A.p10,speciesName:A.commonName})})]})}X0(document.getElementById("root")).render(I.jsx(it.StrictMode,{children:I.jsx(Tb,{children:I.jsx(PP,{})})}));
